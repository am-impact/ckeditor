{"version":3,"file":"ckeditor5-craftcms.js","mappings":"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","sources":["webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/code.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-block-quote/theme/blockquote.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/theme/codeblock.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-editor-classic/theme/classiceditor.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/theme/findandreplace.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/theme/findandreplaceform.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/theme/fontcolor.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/theme/fontsize.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-heading/theme/heading.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-horizontal-line/theme/horizontalline.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-embed/theme/htmlembed.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/theme/datafilter.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/image.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imagecaption.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageinsert.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageinsertformrowview.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageresize.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imagestyle.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadicon.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadloader.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadprogress.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/textalternativeform.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/link.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkactions.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkform.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkimage.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/collapsible.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/documentlist.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/list.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/listproperties.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/liststyles.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/todolist.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaembed.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaembedediting.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaform.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-page-break/theme/pagebreak.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-source-editing/theme/sourceediting.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/theme/style.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/theme/stylegrid.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/theme/stylegroup.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/theme/stylepanel.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/colorinput.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/form.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/formrow.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/inserttable.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/table.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecaption.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecellproperties.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecolumnresize.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableediting.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableform.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableproperties.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableselection.css","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css","webpack://CKEditor5.craftcms/../../../../../node_modules/css-loader/dist/runtime/api.js","webpack://CKEditor5.craftcms/../../../../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js","webpack://CKEditor5.craftcms/../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://CKEditor5.craftcms/./ckeditor5-craftcms.css?48d2","webpack://CKEditor5.craftcms/../../../../../node_modules/vue-style-loader/lib/listToStyles.js","webpack://CKEditor5.craftcms/../../../../../node_modules/vue-style-loader/lib/addStylesClient.js","webpack://CKEditor5.craftcms/delegated \"./src/clipboard.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/core.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/engine.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/enter.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/paragraph.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/select-all.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/typing.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/ui.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/undo.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/upload.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/utils.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/watchdog.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/delegated \"./src/widget.js\" from dll-reference CKEditor5.dll","webpack://CKEditor5.craftcms/external var \"CKEditor5.dll\"","webpack://CKEditor5.craftcms/webpack/bootstrap","webpack://CKEditor5.craftcms/webpack/runtime/compat get default export","webpack://CKEditor5.craftcms/webpack/runtime/define property getters","webpack://CKEditor5.craftcms/webpack/runtime/hasOwnProperty shorthand","webpack://CKEditor5.craftcms/webpack/runtime/make namespace object","webpack://CKEditor5.craftcms/webpack/runtime/nonce","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-alignment/src/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-alignment/src/alignmentcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-alignment/src/alignmentediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-alignment/src/alignmentui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-alignment/src/alignment.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imageutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/autoimage.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativeediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/textalternativeform.css?f1b7","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css?8e9a","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagetextalternative/ui/textalternativeformview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/ui/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagetextalternative/imagetextalternativeui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagetextalternative.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/converters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/imageloadobserver.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/insertimagecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/replaceimagesourcecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/imageediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/imagetypecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/imageblockediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/image.css?2a08","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imageblock.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image/imageinlineediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imageinline.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/image.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagecaption/imagecaptionutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagecaption/toggleimagecaptioncommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagecaption/imagecaptionediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagecaption/imagecaptionui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imagecaption.css?6974","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagecaption.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadprogress.css?c3d4","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadicon.css?f008","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadloader.css?a46c","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageinsertformrowview.css?f3b3","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imageinsert/ui/imageinsertformrowview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageinsert.css?bf22","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imageinsert/ui/imageinsertpanelview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imageinsert/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imageinsert/imageinsertui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imageresize/imageresizebuttons.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageresize.css?00ad","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagestyle/imagestylecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagestyle/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagestyle/converters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagestyle/imagestyleediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isObject.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/identity.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imagestyle.css?cf93","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagestyle/imagestyleui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagestyle.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-image/src/imagetoolbar.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-autoformat/src/blockautoformatediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-autoformat/src/inlineautoformatediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-autoformat/src/autoformat.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-block-quote/src/blockquotecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-block-quote/src/blockquoteediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-block-quote/theme/blockquote.css?45d6","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-block-quote/src/blockquoteui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-block-quote/src/blockquote.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/attributecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/bold/boldediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/bold/boldui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/bold.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/code/codeediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/icons/code.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/code.css?6027","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/code/codeui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/code.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/italic/italicediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/italic/italicui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/icons/italic.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/italic.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/strikethrough/strikethroughediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/strikethrough/strikethroughui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/icons/strikethrough.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/strikethrough.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/subscript/subscriptediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/subscript/subscriptui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/icons/subscript.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/subscript.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/superscript/superscriptediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/superscript/superscriptui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/icons/superscript.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/superscript.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/underline/underlineediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/underline/underlineui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/icons/underline.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/src/underline.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-editor-classic/src/classiceditorui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-editor-classic/theme/classiceditor.css?b7a5","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-editor-classic/src/classiceditoruiview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isObjectLike.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_freeGlobal.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_root.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_Symbol.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getRawTag.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_objectToString.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseGetTag.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_overArg.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getPrototype.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isPlainObject.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isElement.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-editor-classic/src/classiceditor.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/src/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/src/codeblockcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/src/indentcodeblockcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/src/outdentcodeblockcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/src/converters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/src/codeblockediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/theme/icons/codeblock.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/theme/codeblock.css?063e","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/src/codeblockui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-code-block/src/codeblock.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-essentials/src/essentials.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/icons/previous-arrow.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/theme/findandreplaceform.css?7855","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/ui/findandreplaceformview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/findandreplaceui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/theme/icons/find-replace.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/findcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/replacecommandbase.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/replacecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/replaceallcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/findnextcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/findpreviouscommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/findandreplacestate.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_arrayMap.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isSymbol.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseToString.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/toString.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/escapeRegExp.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/findandreplaceutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/now.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_trimmedEndIndex.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseTrim.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/toNumber.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/debounce.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/theme/findandreplace.css?77b0","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/findandreplaceediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/src/findandreplace.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/documentcolorcollection.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/theme/fontcolor.css?6ae7","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/ui/colortableview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontfamily/fontfamilycommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontfamily/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontfamily/fontfamilyediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontfamily/fontfamilyui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/theme/icons/font-family.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontfamily.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontsize/fontsizecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontsize/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontsize/fontsizeediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/theme/fontsize.css?f7bd","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontsize/fontsizeui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/theme/icons/font-size.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontsize.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontcolor/fontcolorcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontcolor/fontcolorediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/ui/colorui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontcolor/fontcolorui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/theme/icons/font-color.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontcolor.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontbackgroundcolor/fontbackgroundcolorcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontbackgroundcolor/fontbackgroundcolorediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontbackgroundcolor/fontbackgroundcolorui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/theme/icons/font-background.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/fontbackgroundcolor.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-font/src/font.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_listCacheClear.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/eq.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_assocIndexOf.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_listCacheDelete.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_ListCache.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_listCacheGet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_listCacheHas.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_listCacheSet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_isMasked.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isFunction.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_coreJsData.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_toSource.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIsNative.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getNative.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getValue.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_Map.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_nativeCreate.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_hashGet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_hashHas.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_Hash.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_hashClear.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_hashDelete.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_hashSet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getMapData.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_isKeyable.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_MapCache.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_mapCacheClear.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_mapCacheDelete.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_mapCacheGet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_mapCacheHas.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_mapCacheSet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_Stack.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_stackClear.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_stackDelete.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_stackGet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_stackHas.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_stackSet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_defineProperty.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseAssignValue.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_assignValue.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_copyObject.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIsArguments.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isArguments.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isBuffer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/stubFalse.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_isIndex.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isLength.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIsTypedArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseUnary.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_nodeUtil.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isTypedArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_arrayLikeKeys.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseTimes.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_isPrototype.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_nativeKeys.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseKeys.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isArrayLike.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/keys.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseKeysIn.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_nativeKeysIn.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/keysIn.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_cloneBuffer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_copyArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/stubArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getSymbols.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_arrayFilter.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_arrayPush.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getSymbolsIn.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseGetAllKeys.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getAllKeys.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getAllKeysIn.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_DataView.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_Promise.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_Set.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_WeakMap.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_getTag.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_initCloneArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_Uint8Array.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_cloneArrayBuffer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_cloneRegExp.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_cloneSymbol.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_cloneTypedArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_initCloneByTag.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_cloneDataView.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseCreate.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_initCloneObject.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isMap.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIsMap.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isSet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIsSet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseClone.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_basePropertyOf.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_createCompounder.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_copySymbolsIn.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseAssignIn.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_copySymbols.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseAssign.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_arrayEach.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_deburrLetter.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/deburr.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_asciiWords.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_hasUnicodeWord.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_unicodeWords.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/words.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_castSlice.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseSlice.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_hasUnicode.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_unicodeToArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_stringToArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_asciiToArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/upperFirst.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_createCaseFirst.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/startCase.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_arrayReduce.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/cloneDeep.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/converters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/schemadefinitions.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_shortOut.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_createAssigner.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_assignMergeValue.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseFor.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_createBaseFor.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_safeGet.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseMergeDeep.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isArrayLikeObject.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/toPlainObject.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseMerge.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_overRest.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseSetToString.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/constant.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_setToString.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseRest.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_apply.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/mergeWith.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_isIterateeCall.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/dataschema.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseFindIndex.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIsNaN.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIndexOf.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_strictIndexOf.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIndexOfWith.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_basePullAll.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/pull.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/pullAll.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/theme/datafilter.css?8703","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/datafilter.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/codeblock.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/dualcontent.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/heading.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/integrationutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/image.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/mediaembed.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/script.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/table.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/style.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_SetCache.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_setCacheAdd.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_setCacheHas.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_arraySome.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_equalArrays.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_cacheHas.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_mapToArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_setToArray.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_equalByTag.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_equalObjects.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIsEqualDeep.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/_baseIsEqual.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/isEqual.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/documentlist.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/integrations/customelement.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/generalhtmlsupport.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-support/src/htmlcomment.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-heading/src/headingcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-heading/src/headingediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-heading/theme/heading.css?ec3c","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-heading/src/headingui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-heading/src/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-heading/src/heading.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-heading/src/title.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-horizontal-line/src/horizontallinecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-horizontal-line/theme/horizontalline.css?a24e","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-horizontal-line/src/horizontallineediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-horizontal-line/src/horizontallineui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-horizontal-line/theme/icons/horizontalline.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-horizontal-line/src/horizontalline.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-embed/src/htmlembedcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-embed/theme/htmlembed.css?c2fd","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-embed/src/htmlembedediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-embed/src/htmlembedui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-embed/theme/icons/html.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-html-embed/src/htmlembed.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-indent/src/indentediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-indent/theme/icons/indent.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-indent/theme/icons/outdent.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-indent/src/indentui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-indent/src/indent.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/utils/automaticdecorators.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/linkcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/unlinkcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/utils/manualdecorator.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/link.css?bbf9","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/linkediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkform.css?4dae","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/ui/linkformview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkactions.css?520c","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/ui/linkactionsview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/icons/unlink.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/icons/link.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/linkui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/autolink.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/linkimageediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/linkimageui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkimage.css?64e1","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-link/src/linkimage.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/utils/listwalker.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/utils/model.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/documentlistindentcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/documentlistcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/documentlistmergecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/documentlistsplitcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/documentlistutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/utils/view.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/utils/postfixers.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/converters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/documentlist.css?94cb","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/list.css?8a64","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist/documentlistediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/list/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/numberedlist.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/bulletedlist.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/list/listui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlist.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlistproperties/documentliststartcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlistproperties/utils/style.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlistproperties/documentliststylecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlistproperties/documentlistreversedcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlistproperties/converters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlistproperties/documentlistpropertiesutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlistproperties/documentlistpropertiesediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/icons/dropdown-arrow.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/collapsible.css?8997","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/listproperties/ui/collapsibleview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/listproperties.css?590c","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/listproperties/ui/listpropertiesview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststyledisc.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/liststyles.css?d1ec","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/listproperties/listpropertiesui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststylecircle.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststylesquare.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststyledecimal.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststyledecimalleadingzero.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststylelowerroman.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststyleupperroman.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststylelowerlatin.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/liststyleupperlatin.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/documentlistproperties.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/list/indentcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/list/listcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/list/listutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/list/converters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/list/listediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/list.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/listproperties/liststylecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/listproperties/listreversedcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/listproperties/liststartcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/listproperties/listpropertiesediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/listproperties.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/todolist/checktodolistcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/todolist/todolistconverters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/todolist/todolistediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/todolist/todolistui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/icons/todolist.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/theme/todolist.css?f9e8","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-list/src/todolist.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/converters.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/mediaembedcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/mediaregistry.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/icons/media-placeholder.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaembedediting.css?6332","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/mediaembedediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/automediaembed.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaform.css?17fd","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/ui/mediaformview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/mediaembedui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/icons/media.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaembed.css?17ad","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/mediaembed.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-media-embed/src/mediaembedtoolbar.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-page-break/src/pagebreakcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-page-break/theme/pagebreak.css?0ad9","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-page-break/src/pagebreakediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-page-break/src/pagebreakui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-page-break/theme/icons/pagebreak.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-page-break/src/pagebreak.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/list.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/normalizers/mswordnormalizer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/image.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/br.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/normalizers/googledocsnormalizer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/removeboldwrapper.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/normalizers/googlesheetsnormalizer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/removegooglesheetstag.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/removexmlns.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/removeinvalidtablewidth.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/removestyleblock.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/space.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/pastefromoffice.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-paste-from-office/src/filters/parse.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-source-editing/src/utils/formathtml.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-source-editing/theme/sourceediting.css?df84","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-source-editing/src/sourceediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-source-editing/theme/icons/source-editing.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/ui/stylegridbuttonview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/theme/stylegrid.css?9e24","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/ui/stylegridview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/theme/stylegroup.css?e9c7","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/ui/stylegroupview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/theme/stylepanel.css?705c","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/ui/stylepanelview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/styleutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/theme/style.css?472b","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/styleui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/stylecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/integrations/documentlist.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/integrations/table.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/integrations/link.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/styleediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-style/src/style.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/utils/common.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/converters/upcasttable.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablewalker.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/converters/downcast.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/inserttablecommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/insertrowcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/insertcolumncommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/splitcellcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/utils/structure.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/mergecellcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/removerowcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/removecolumncommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/setheaderrowcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/setheadercolumncommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tableutils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/mergecellscommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/selectrowcommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/commands/selectcolumncommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/converters/table-layout-post-fixer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/converters/table-cell-paragraph-post-fixer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/converters/table-cell-refresh-handler.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableediting.css?4d2c","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tableediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/converters/table-headings-refresh-handler.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/inserttable.css?d21b","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/ui/inserttableview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tableui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/icons/table.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/icons/table-column.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/icons/table-row.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/icons/table-merge-cell.svg","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableselection.css?e446","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tableselection.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tableclipboard.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablekeyboard.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablemouse/mouseeventsobserver.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablemouse.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/table.css?8c43","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/table.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/utils/ui/widget.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tabletoolbar.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/colorinput.css?fb43","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/formrow.css?709e","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/form.css?4445","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableform.css?a063","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecellproperties.css?5640","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablecellproperties/ui/tablecellpropertiesview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/utils/ui/contextualballoon.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablecaption/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableproperties.css?fb86","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tableproperties/ui/tablepropertiesview.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablecaption/toggletablecaptioncommand.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablecaption/tablecaptionediting.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/converters/table-caption-post-fixer.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablecaption/tablecaptionui.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecaption.css?8b74","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/src/tablecaption.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-word-count/src/utils.js","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecolumnresize.css?db84","webpack://CKEditor5.craftcms/../../../../../node_modules/@ckeditor/ckeditor5-word-count/src/wordcount.js","webpack://CKEditor5.craftcms/../../../../../node_modules/lodash-es/throttle.js","webpack://CKEditor5.craftcms/./image/imageinsert/imageinsertui.js","webpack://CKEditor5.craftcms/./link/linkui.js","webpack://CKEditor5.craftcms/./image/imagetransform/transformimagecommand.js","webpack://CKEditor5.craftcms/./image/imagetransform/imagetransformediting.js","webpack://CKEditor5.craftcms/./image/imagetransform/imagetransformui.js","webpack://CKEditor5.craftcms/./image/imagetransform.js","webpack://CKEditor5.craftcms/./ckeditor5-craftcms.js"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content code{background-color:hsla(0,0%,78%,.3);border-radius:2px;padding:.15em}.ck.ck-editor__editable .ck-code_selected{background-color:hsla(0,0%,78%,.5)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-basic-styles/theme/code.css\"],\"names\":[],\"mappings\":\"AAKA,iBACC,kCAAuC,CAEvC,iBAAkB,CADlB,aAED,CAEA,0CACC,kCACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content code {\\n\\tbackground-color: hsla(0, 0%, 78%, 0.3);\\n\\tpadding: .15em;\\n\\tborder-radius: 2px;\\n}\\n\\n.ck.ck-editor__editable .ck-code_selected  {\\n\\tbackground-color: hsla(0, 0%, 78%, 0.5);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content blockquote{border-left:5px solid #ccc;font-style:italic;margin-left:0;margin-right:0;overflow:hidden;padding-left:1.5em;padding-right:1.5em}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-block-quote/theme/blockquote.css\"],\"names\":[],\"mappings\":\"AAKA,uBAWC,0BAAsC,CADtC,iBAAkB,CAFlB,aAAc,CACd,cAAe,CAPf,eAAgB,CAIhB,kBAAmB,CADnB,mBAOD,CAEA,gCACC,aAAc,CACd,2BACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content blockquote {\\n\\t/* See #12 */\\n\\toverflow: hidden;\\n\\n\\t/* https://github.com/ckeditor/ckeditor5-block-quote/issues/15 */\\n\\tpadding-right: 1.5em;\\n\\tpadding-left: 1.5em;\\n\\n\\tmargin-left: 0;\\n\\tmargin-right: 0;\\n\\tfont-style: italic;\\n\\tborder-left: solid 5px hsl(0, 0%, 80%);\\n}\\n\\n.ck-content[dir=\\\"rtl\\\"] blockquote {\\n\\tborder-left: 0;\\n\\tborder-right: solid 5px hsl(0, 0%, 80%);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content pre{background:hsla(0,0%,78%,.3);border:1px solid #c4c4c4;border-radius:2px;color:#353535;direction:ltr;font-style:normal;min-width:200px;padding:1em;tab-size:4;text-align:left;white-space:pre-wrap}.ck-content pre code{background:unset;border-radius:0;padding:0}.ck.ck-editor__editable pre{position:relative}.ck.ck-editor__editable pre[data-language]:after{content:attr(data-language);position:absolute}:root{--ck-color-code-block-label-background:#757575}.ck.ck-editor__editable pre[data-language]:after{background:var(--ck-color-code-block-label-background);color:#fff;font-family:var(--ck-font-face);font-size:10px;line-height:16px;padding:var(--ck-spacing-tiny) var(--ck-spacing-medium);right:10px;top:-1px;white-space:nowrap}.ck.ck-code-block-dropdown .ck-dropdown__panel{max-height:250px;overflow-x:hidden;overflow-y:auto}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-code-block/theme/codeblock.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-code-block/codeblock.css\"],\"names\":[],\"mappings\":\"AAKA,gBAGC,4BAAiC,CACjC,wBAAiC,CACjC,iBAAkB,CAHlB,aAAwB,CAOxB,aAAc,CAMd,iBAAkB,CAGlB,eAAgB,CAjBhB,WAAY,CAUZ,UAAW,CAHX,eAAgB,CAIhB,oBAaD,CALC,qBACC,gBAAiB,CAEjB,eAAgB,CADhB,SAED,CAGD,4BACC,iBAMD,CAJC,iDACC,2BAA4B,CAC5B,iBACD,CCjCD,MACC,8CACD,CAEA,iDAGC,sDAAuD,CAMvD,UAAuB,CAHvB,+BAAgC,CADhC,cAAe,CAEf,gBAAiB,CACjB,uDAAwD,CANxD,UAAW,CADX,QAAS,CAST,kBACD,CAEA,+CAEC,gBAAiB,CAEjB,iBAAkB,CADlB,eAED\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content pre {\\n\\tpadding: 1em;\\n\\tcolor: hsl(0, 0%, 20.8%);\\n\\tbackground: hsla(0, 0%, 78%, 0.3);\\n\\tborder: 1px solid hsl(0, 0%, 77%);\\n\\tborder-radius: 2px;\\n\\n\\t/* Code block are language direction–agnostic. */\\n\\ttext-align: left;\\n\\tdirection: ltr;\\n\\n\\ttab-size: 4;\\n\\twhite-space: pre-wrap;\\n\\n\\t/* Don't inherit the style, e.g. when in a block quote. */\\n\\tfont-style: normal;\\n\\n\\t/* Don't let the code be squashed e.g. when in a table cell. */\\n\\tmin-width: 200px;\\n\\n\\t& code {\\n\\t\\tbackground: unset;\\n\\t\\tpadding: 0;\\n\\t\\tborder-radius: 0;\\n\\t}\\n}\\n\\n.ck.ck-editor__editable pre {\\n\\tposition: relative;\\n\\n\\t&[data-language]::after {\\n\\t\\tcontent: attr(data-language);\\n\\t\\tposition: absolute;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-color-code-block-label-background: hsl(0, 0%, 46%);\\n}\\n\\n.ck.ck-editor__editable pre[data-language]::after {\\n\\ttop: -1px;\\n\\tright: 10px;\\n\\tbackground: var(--ck-color-code-block-label-background);\\n\\n\\tfont-size: 10px;\\n\\tfont-family: var(--ck-font-face);\\n\\tline-height: 16px;\\n\\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-medium);\\n\\tcolor: hsl(0, 0%, 100%);\\n\\twhite-space: nowrap;\\n}\\n\\n.ck.ck-code-block-dropdown .ck-dropdown__panel {\\n\\t/* There could be dozens of languages available. Use scroll to prevent a 10e6px dropdown. */\\n\\tmax-height: 250px;\\n\\toverflow-y: auto;\\n\\toverflow-x: hidden;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-editor-classic/theme/classiceditor.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-editor-classic/classiceditor.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css\"],\"names\":[],\"mappings\":\"AAKA,cAIC,iBAMD,CAJC,2DAEC,yBACD,CCLC,gDCED,eDKC,CAPA,uICMA,qCAAsC,CDJpC,2BAA4B,CAC5B,4BAIF,CAPA,gDAMC,qBACD,CAEA,iFACC,uBAAwB,CCR1B,eDaC,CANA,yMCHA,qCAAsC,CDOpC,eAEF,CAKF,yCAEC,0CAA2C,CCpB3C,eD8BD,CAZA,yHCdE,qCAAsC,CDmBtC,wBAAyB,CACzB,yBAMF,CAHC,0DACC,wCACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-editor {\\n\\t/* All the elements within `.ck-editor` are positioned relatively to it.\\n\\t If any element needs to be positioned with respect to the <body>, etc.,\\n\\t it must land outside of the `.ck-editor` in DOM. */\\n\\tposition: relative;\\n\\n\\t& .ck-editor__top .ck-sticky-panel .ck-toolbar {\\n\\t\\t/* https://github.com/ckeditor/ckeditor5-editor-classic/issues/62 */\\n\\t\\tz-index: var(--ck-z-modal);\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"../mixins/_rounded.css\\\";\\n\\n.ck.ck-editor__top {\\n\\t& .ck-sticky-panel {\\n\\t\\t& .ck-toolbar {\\n\\t\\t\\t@mixin ck-rounded-corners {\\n\\t\\t\\t\\tborder-bottom-left-radius: 0;\\n\\t\\t\\t\\tborder-bottom-right-radius: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\tborder-bottom-width: 0;\\n\\t\\t}\\n\\n\\t\\t& .ck-sticky-panel__content_sticky .ck-toolbar {\\n\\t\\t\\tborder-bottom-width: 1px;\\n\\n\\t\\t\\t@mixin ck-rounded-corners {\\n\\t\\t\\t\\tborder-radius: 0;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n/* Note: Use ck-editor__main to make sure these styles don't apply to other editor types */\\n.ck.ck-editor__main > .ck-editor__editable {\\n\\t/* https://github.com/ckeditor/ckeditor5-theme-lark/issues/113 */\\n\\tbackground: var(--ck-color-base-background);\\n\\n\\t@mixin ck-rounded-corners {\\n\\t\\tborder-top-left-radius: 0;\\n\\t\\tborder-top-right-radius: 0;\\n\\t}\\n\\n\\t&:not(.ck-focused) {\\n\\t\\tborder-color: var(--ck-color-base-border);\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/**\\n * Implements rounded corner interface for .ck-rounded-corners class.\\n *\\n * @see $ck-border-radius\\n */\\n@define-mixin ck-rounded-corners {\\n\\tborder-radius: 0;\\n\\n\\t@nest .ck-rounded-corners &,\\n\\t&.ck-rounded-corners {\\n\\t\\tborder-radius: var(--ck-border-radius);\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-find-result{background:var(--ck-color-highlight-background);color:var(--ck-color-text)}.ck-find-result_selected{background:#ff9633}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/theme/findandreplace.css\"],\"names\":[],\"mappings\":\"AAKA,gBACC,+CAAgD,CAChD,0BACD,CAEA,yBACC,kBACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-find-result {\\n\\tbackground: var(--ck-color-highlight-background);\\n\\tcolor: var(--ck-color-text);\\n}\\n\\n.ck-find-result_selected {\\n\\tbackground: hsl(29, 100%, 60%);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-find-and-replace-form{max-width:100%}.ck.ck-find-and-replace-form fieldset{display:flex}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{position:absolute}.ck.ck-find-and-replace-form{width:400px}.ck.ck-find-and-replace-form:focus{outline:none}.ck.ck-find-and-replace-form fieldset{align-content:stretch;align-items:center;border:0;flex-direction:row;flex-wrap:nowrap;margin:0;padding:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset>.ck-button{flex:0 0 auto}[dir=ltr] .ck.ck-find-and-replace-form fieldset>*+*{margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form fieldset>*+*{margin-right:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form fieldset .ck-labeled-field-view{flex:1 1 auto}.ck.ck-find-and-replace-form fieldset .ck-labeled-field-view .ck-input{min-width:50px;width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find{align-items:flex-start}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-find{font-weight:700}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-find .ck-button__label{padding-left:var(--ck-spacing-large);padding-right:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-prev>.ck-icon{transform:rotate(90deg)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button-next>.ck-icon{transform:rotate(-90deg)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{left:var(--ck-spacing-standard)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-results-counter{color:var(--ck-color-base-border)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace{flex-wrap:wrap;justify-content:flex-end;margin-top:calc(var(--ck-spacing-large)*-1)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view{margin-bottom:var(--ck-spacing-large)}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-options-dropdown{margin-left:0;margin-right:auto}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view,.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-labeled-field-view .ck-input{width:100%}@media screen and (max-width:600px){.ck.ck-find-and-replace-form{width:300px}.ck.ck-find-and-replace-form fieldset{flex-wrap:wrap}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find .ck-labeled-field-view{flex:1 0 auto;margin-bottom:var(--ck-spacing-standard);width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button{text-align:center}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{flex:1 1 auto}[dir=ltr] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{margin-left:0}[dir=rtl] .ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type{margin-right:0}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__find>.ck-button:first-of-type .ck-button__label{text-align:center;width:100%}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>:not(.ck-labeled-field-view){flex:1 1 auto}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-dropdown:not(.ck-labeled-field-view){flex-grow:0}.ck.ck-find-and-replace-form fieldset.ck-find-and-replace-form__replace>.ck-button:not(.ck-labeled-field-view)>.ck-button__label{text-align:center;width:100%}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-find-and-replace/theme/findandreplaceform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-find-and-replace/findandreplaceform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\"],\"names\":[],\"mappings\":\"AAKA,6BACC,cAUD,CARC,sCACC,YAMD,CAHC,yFACC,iBACD,CCNF,6BACC,WAyGD,CAnGC,mCACC,YACD,CAEA,sCAIC,qBAAsB,CADtB,kBAAmB,CAInB,QAAS,CANT,kBAAmB,CACnB,gBAAiB,CAMjB,QAAS,CAFT,+BAwFD,CApFC,iDACC,aACD,CAGC,oDACC,sCACD,CAIA,oDACC,uCACD,CAGD,6DACC,aAMD,CAJC,uEAEC,cAAe,CADf,UAED,CAID,qEAEC,sBAkCD,CAhCC,qFACC,eAOD,CAJC,uGACC,oCAAqC,CACrC,qCACD,CAGD,8FACC,uBACD,CAEA,8FACC,wBACD,CAEA,yFACC,OAAQ,CACR,0BAWD,CAbA,mGAKE,gCAQF,CAbA,mGASE,+BAIF,CAbA,yFAYC,iCACD,CAID,wEACC,cAAe,CACf,wBAAyB,CACzB,2CAeD,CAbC,+FACC,qCACD,CAEA,6FAEC,aAAc,CADd,iBAED,CAEA,wMAEC,UACD,CCzGF,oCD+GA,6BACC,WAiDD,CA/CC,sCACC,cA6CD,CAzCE,4FACC,aAAc,CAEd,wCAAyC,CADzC,UAED,CAEA,gFACC,iBAkBD,CAhBC,8FACC,aAcD,CAfA,wGAIE,aAWF,CAfA,wGAQE,cAOF,CAJC,gHAEC,iBAAkB,CADlB,UAED,CAMH,qGACC,aAUD,CARC,iHACC,WACD,CAEA,iIAEC,iBAAkB,CADlB,UAED,CC5JH\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-find-and-replace-form {\\n\\tmax-width: 100%;\\n\\n\\t& fieldset {\\n\\t\\tdisplay: flex;\\n\\n\\t\\t/* The find fieldset */\\n\\t\\t&.ck-find-and-replace-form__find .ck-results-counter {\\n\\t\\t\\tposition: absolute;\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\\\";\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_dir.css\\\";\\n\\n.ck.ck-find-and-replace-form {\\n\\twidth: 400px;\\n\\n\\t/*\\n\\t * The <form> needs tabindex=\\\"-1\\\" for proper Esc handling after being clicked\\n\\t * but the side effect is that this creates a nasty focus outline in some browsers.\\n\\t */\\n\\t&:focus {\\n\\t\\toutline: none;\\n\\t}\\n\\n\\t& fieldset {\\n\\t\\tflex-direction: row;\\n\\t\\tflex-wrap: nowrap;\\n\\t\\talign-items: center;\\n\\t\\talign-content: stretch;\\n\\n\\t\\tpadding: var(--ck-spacing-large);\\n\\t\\tborder: 0;\\n\\t\\tmargin: 0;\\n\\n\\t\\t& > .ck-button {\\n\\t\\t\\tflex: 0 0 auto;\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\t& > * + * {\\n\\t\\t\\t\\tmargin-left: var(--ck-spacing-standard);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\t& > * + * {\\n\\t\\t\\t\\tmargin-right: var(--ck-spacing-standard);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t& .ck-labeled-field-view {\\n\\t\\t\\tflex: 1 1 auto;\\n\\n\\t\\t\\t& .ck-input {\\n\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t\\tmin-width: 50px;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t/* The find fieldset */\\n\\t\\t&.ck-find-and-replace-form__find {\\n\\t\\t\\t/* To display all controls in line when there's an error under the input */\\n\\t\\t\\talign-items: flex-start;\\n\\n\\t\\t\\t& > .ck-button-find {\\n\\t\\t\\t\\tfont-weight: bold;\\n\\n\\t\\t\\t\\t/* Beef the find button up a little. It's the main action button in the form */\\n\\t\\t\\t\\t& .ck-button__label {\\n\\t\\t\\t\\t\\tpadding-left: var(--ck-spacing-large);\\n\\t\\t\\t\\t\\tpadding-right: var(--ck-spacing-large);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t& > .ck-button-prev > .ck-icon {\\n\\t\\t\\t\\ttransform: rotate(90deg);\\n\\t\\t\\t}\\n\\n\\t\\t\\t& > .ck-button-next > .ck-icon {\\n\\t\\t\\t\\ttransform: rotate(-90deg);\\n\\t\\t\\t}\\n\\n\\t\\t\\t& .ck-results-counter {\\n\\t\\t\\t\\ttop: 50%;\\n\\t\\t\\t\\ttransform: translateY(-50%);\\n\\n\\t\\t\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\t\\t\\tright: var(--ck-spacing-standard);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\t\\t\\tleft: var(--ck-spacing-standard);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\tcolor: var(--ck-color-base-border);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t/* The replace fieldset */\\n\\t\\t&.ck-find-and-replace-form__replace {\\n\\t\\t\\tflex-wrap: wrap;\\n\\t\\t\\tjustify-content: flex-end;\\n\\t\\t\\tmargin-top: calc( -1 * var(--ck-spacing-large) );\\n\\n\\t\\t\\t& > .ck-labeled-field-view {\\n\\t\\t\\t\\tmargin-bottom: var(--ck-spacing-large);\\n\\t\\t\\t}\\n\\n\\t\\t\\t& > .ck-options-dropdown {\\n\\t\\t\\t\\tmargin-right: auto;\\n\\t\\t\\t\\tmargin-left: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\t& > .ck-labeled-field-view,\\n\\t\\t\\t& > .ck-labeled-field-view .ck-input {\\n\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n@mixin ck-media-phone {\\n\\t.ck.ck-find-and-replace-form {\\n\\t\\twidth: 300px;\\n\\n\\t\\t& fieldset {\\n\\t\\t\\tflex-wrap: wrap;\\n\\n\\t\\t\\t/* The find fieldset */\\n\\t\\t\\t&.ck-find-and-replace-form__find {\\n\\t\\t\\t\\t& .ck-labeled-field-view {\\n\\t\\t\\t\\t\\tflex: 1 0 auto;\\n\\t\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t\\t\\tmargin-bottom: var(--ck-spacing-standard);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t& > .ck-button {\\n\\t\\t\\t\\t\\ttext-align: center;\\n\\n\\t\\t\\t\\t\\t&:first-of-type {\\n\\t\\t\\t\\t\\t\\tflex: 1 1 auto;\\n\\n\\t\\t\\t\\t\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\t\\t\\t\\t\\tmargin-left: 0;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\t\\t\\t\\t\\tmargin-right: 0;\\n\\t\\t\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t\\t\\t& .ck-button__label {\\n\\t\\t\\t\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t\\t\\t\\t\\ttext-align: center;\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t/* The replace fieldset */\\n\\t\\t\\t&.ck-find-and-replace-form__replace > :not(.ck-labeled-field-view) {\\n\\t\\t\\t\\tflex: 1 1 auto;\\n\\n\\t\\t\\t\\t&.ck-dropdown {\\n\\t\\t\\t\\t\\tflex-grow: 0;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t&.ck-button > .ck-button__label {\\n\\t\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t\\t\\ttext-align: center;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@define-mixin ck-media-phone {\\n\\t@media screen and (max-width: 600px) {\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck .ck-button.ck-color-table__color-picker,.ck .ck-button.ck-color-table__remove-color{align-items:center;display:flex;width:100%}[dir=rtl] .ck .ck-button.ck-color-table__color-picker,[dir=rtl] .ck .ck-button.ck-color-table__remove-color{justify-content:flex-start}.ck .ck-button.ck-color-table__color-picker{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard)}.ck .ck-button.ck-color-table__color-picker:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__color-picker .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__color-picker .ck.ck-icon{margin-left:var(--ck-spacing-standard)}label.ck.ck-color-grid__label{font-weight:unset}.ck.ck-color-picker{padding:8px}.ck.ck-color-picker .hex-color-picker{height:100px;margin:0 0 var(--ck-spacing-large) 0}.ck.ck-color-picker .hex-color-picker::part(saturation){border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0}.ck.ck-color-picker .hex-color-picker::part(hue){border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius)}.ck.ck-color-picker .hex-color-picker::part(hue-pointer),.ck.ck-color-picker .hex-color-picker::part(saturation-pointer){height:15px;width:15px}.ck.ck-color-table_action-bar{display:flex;flex-direction:row;justify-content:space-around;padding:0 8px 8px}.ck.ck-color-table_action-bar .ck-button-cancel,.ck.ck-color-table_action-bar .ck-button-save{flex:1}.ck .ck-button.ck-color-table__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard)}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-font/theme/fontcolor.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-font/fontcolor.css\"],\"names\":[],\"mappings\":\"AAOA,wFAGC,kBAAmB,CADnB,YAAa,CAEb,UAKD,CATA,4GAOE,0BAEF,CAEA,4CAEC,2BAA4B,CAC5B,4BAA6B,CAF7B,qEAiBD,CAbC,wDACC,gDACD,CAEA,kEAEE,uCAMF,CARA,kEAME,sCAEF,CAGD,8BACC,iBACD,CAEA,oBACC,WAmBD,CAjBC,sCACC,YAAa,CACb,oCAcD,CAZC,wDACC,iEACD,CACA,iDACC,iEACD,CAEA,yHAGC,WAAY,CADZ,UAED,CAIF,8BACC,YAAa,CACb,kBAAmB,CACnB,4BAA6B,CAC7B,iBAMD,CAJC,8FAEC,MACD,CClED,4CAEC,2BAA4B,CAC5B,4BAA6B,CAF7B,qEAiBD,CAbC,wDACC,mDACD,CAEA,kEAEE,uCAMF,CARA,kEAME,sCAEF\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_dir.css\\\";\\n\\n.ck .ck-button.ck-color-table__remove-color,\\n.ck .ck-button.ck-color-table__color-picker {\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\twidth: 100%;\\n\\n\\t@mixin ck-dir rtl {\\n\\t\\tjustify-content: flex-start;\\n\\t}\\n}\\n\\n.ck .ck-button.ck-color-table__color-picker {\\n\\tpadding: calc(var(--ck-spacing-standard) / 2 ) var(--ck-spacing-standard);\\n\\tborder-bottom-left-radius: 0;\\n\\tborder-bottom-right-radius: 0;\\n\\n\\t&:not(:focus) {\\n\\t\\tborder-top: 1px solid var(--ck-color-base-border);\\n\\t}\\n\\n\\t& .ck.ck-icon {\\n\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\tmargin-right: var(--ck-spacing-standard);\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\tmargin-left: var(--ck-spacing-standard);\\n\\t\\t}\\n\\t}\\n}\\n\\nlabel.ck.ck-color-grid__label {\\n\\tfont-weight: unset;\\n}\\n\\n.ck.ck-color-picker {\\n\\tpadding: 8px;\\n\\n\\t& .hex-color-picker {\\n\\t\\theight: 100px;\\n\\t\\tmargin: 0 0 var(--ck-spacing-large) 0;\\n\\n\\t\\t&::part(saturation) {\\n\\t\\t\\tborder-radius: var(--ck-border-radius) var(--ck-border-radius) 0 0;\\n\\t\\t}\\n\\t\\t&::part(hue) {\\n\\t\\t\\tborder-radius: 0 0 var(--ck-border-radius) var(--ck-border-radius);\\n\\t\\t}\\n\\n\\t\\t&::part(saturation-pointer),\\n\\t\\t&::part(hue-pointer) {\\n\\t\\t\\twidth: 15px;\\n\\t\\t\\theight: 15px;\\n\\t\\t}\\n\\t}\\n}\\n\\n.ck.ck-color-table_action-bar {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: space-around;\\n\\tpadding: 0 8px 8px;\\n\\n\\t& .ck-button-save,\\n\\t& .ck-button-cancel {\\n\\t\\tflex: 1\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_dir.css\\\";\\n\\n.ck .ck-button.ck-color-table__remove-color {\\n\\tpadding: calc(var(--ck-spacing-standard) / 2 ) var(--ck-spacing-standard);\\n\\tborder-bottom-left-radius: 0;\\n\\tborder-bottom-right-radius: 0;\\n\\n\\t&:not(:focus) {\\n\\t\\tborder-bottom: 1px solid var(--ck-color-base-border);\\n\\t}\\n\\n\\t& .ck.ck-icon {\\n\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\tmargin-right: var(--ck-spacing-standard);\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\tmargin-left: var(--ck-spacing-standard);\\n\\t\\t}\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content .text-tiny{font-size:.7em}.ck-content .text-small{font-size:.85em}.ck-content .text-big{font-size:1.4em}.ck-content .text-huge{font-size:1.8em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-font/theme/fontsize.css\"],\"names\":[],\"mappings\":\"AAUC,uBACC,cACD,CAEA,wBACC,eACD,CAEA,sBACC,eACD,CAEA,uBACC,eACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/* The values should be synchronized with the \\\"FONT_SIZE_PRESET_UNITS\\\" object in the \\\"/src/fontsize/utils.js\\\" file. */\\n\\n/* Styles should be prefixed with the `.ck-content` class.\\nSee https://github.com/ckeditor/ckeditor5/issues/6636 */\\n.ck-content {\\n\\t& .text-tiny {\\n\\t\\tfont-size: .7em;\\n\\t}\\n\\n\\t& .text-small {\\n\\t\\tfont-size: .85em;\\n\\t}\\n\\n\\t& .text-big {\\n\\t\\tfont-size: 1.4em;\\n\\t}\\n\\n\\t& .text-huge {\\n\\t\\tfont-size: 1.8em;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-heading/theme/heading.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-heading/heading.css\"],\"names\":[],\"mappings\":\"AAKA,wBACC,cACD,CAEA,wBACC,cACD,CAEA,wBACC,cACD,CAEA,+BACC,eACD,CCZC,2EACC,SACD,CAEA,uEACC,cACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-heading_heading1 {\\n\\tfont-size: 20px;\\n}\\n\\n.ck.ck-heading_heading2 {\\n\\tfont-size: 17px;\\n}\\n\\n.ck.ck-heading_heading3 {\\n\\tfont-size: 14px;\\n}\\n\\n.ck[class*=\\\"ck-heading_heading\\\"] {\\n\\tfont-weight: bold;\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/* Resize dropdown's button label. */\\n.ck.ck-dropdown.ck-heading-dropdown {\\n\\t& .ck-dropdown__button .ck-button__label {\\n\\t\\twidth: 8em;\\n\\t}\\n\\n\\t& .ck-dropdown__panel .ck-list__item {\\n\\t\\tmin-width: 18em;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-editor__editable .ck-horizontal-line{display:flow-root}.ck-content hr{background:#dedede;border:0;height:4px;margin:15px 0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-horizontal-line/theme/horizontalline.css\"],\"names\":[],\"mappings\":\"AAMA,yCAEC,iBACD,CAEA,eAGC,kBAA2B,CAC3B,QAAS,CAFT,UAAW,CADX,aAID\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n\\n.ck-editor__editable .ck-horizontal-line {\\n\\t/* Necessary to render properly next to floated objects, e.g. side image case. */\\n\\tdisplay: flow-root;\\n}\\n\\n.ck-content hr {\\n\\tmargin: 15px 0;\\n\\theight: 4px;\\n\\tbackground: hsl(0, 0%, 87%);\\n\\tborder: 0;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-widget.raw-html-embed{display:flow-root;font-style:normal;margin:.9em auto;min-width:15em;position:relative}.ck-widget.raw-html-embed:before{position:absolute;z-index:1}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{display:flex;flex-direction:column;position:absolute}.ck-widget.raw-html-embed .raw-html-embed__preview{display:flex;overflow:hidden;position:relative}.ck-widget.raw-html-embed .raw-html-embed__preview-content{border-collapse:separate;border-spacing:7px;display:table;margin:auto;position:relative;width:100%}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{align-items:center;bottom:0;display:flex;justify-content:center;left:0;position:absolute;right:0;top:0}:root{--ck-html-embed-content-width:calc(100% - var(--ck-icon-size)*1.5);--ck-html-embed-source-height:10em;--ck-html-embed-unfocused-outline-width:1px;--ck-html-embed-content-min-height:calc(var(--ck-icon-size) + var(--ck-spacing-standard));--ck-html-embed-source-disabled-background:var(--ck-color-base-foreground);--ck-html-embed-source-disabled-color:#737373}.ck-widget.raw-html-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base)}.ck-widget.raw-html-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.raw-html-embed[dir=ltr]{text-align:left}.ck-widget.raw-html-embed[dir=rtl]{text-align:right}.ck-widget.raw-html-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);top:calc(var(--ck-html-embed-unfocused-outline-width)*-1);transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.raw-html-embed[dir=rtl]:before{left:auto;right:var(--ck-spacing-standard)}.ck-widget.raw-html-embed[dir=ltr] .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck.ck-editor__editable.ck-blurred .ck-widget.raw-html-embed.ck-widget_selected:before{padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck.ck-editor__editable:not(.ck-blurred) .ck-widget.raw-html-embed.ck-widget_selected:before{background:var(--ck-color-focus-border);padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck.ck-editor__editable .ck-widget.raw-html-embed:not(.ck-widget_selected):hover:before{padding:var(--ck-spacing-tiny) var(--ck-spacing-small);top:0}.ck-widget.raw-html-embed .raw-html-embed__content-wrapper{padding:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper{right:var(--ck-spacing-standard);top:var(--ck-spacing-standard)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__save-button{color:var(--ck-color-button-save)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button.raw-html-embed__cancel-button{color:var(--ck-color-button-cancel)}.ck-widget.raw-html-embed .raw-html-embed__buttons-wrapper .ck-button:not(:first-child){margin-top:var(--ck-spacing-small)}.ck-widget.raw-html-embed[dir=rtl] .raw-html-embed__buttons-wrapper{left:var(--ck-spacing-standard);right:auto}.ck-widget.raw-html-embed .raw-html-embed__source{box-sizing:border-box;direction:ltr;font-family:monospace;font-size:var(--ck-font-size-base);height:var(--ck-html-embed-source-height);min-width:0;padding:var(--ck-spacing-standard);resize:none;tab-size:4;text-align:left;white-space:pre-wrap;width:var(--ck-html-embed-content-width)}.ck-widget.raw-html-embed .raw-html-embed__source[disabled]{-webkit-text-fill-color:var(--ck-html-embed-source-disabled-color);background:var(--ck-html-embed-source-disabled-background);color:var(--ck-html-embed-source-disabled-color);opacity:1}.ck-widget.raw-html-embed .raw-html-embed__preview{min-height:var(--ck-html-embed-content-min-height);width:var(--ck-html-embed-content-width)}.ck-editor__editable:not(.ck-read-only) .ck-widget.raw-html-embed .raw-html-embed__preview{pointer-events:none}.ck-widget.raw-html-embed .raw-html-embed__preview-content{background-color:var(--ck-color-base-foreground);box-sizing:border-box}.ck-widget.raw-html-embed .raw-html-embed__preview-content>*{margin-left:auto;margin-right:auto}.ck-widget.raw-html-embed .raw-html-embed__preview-placeholder{color:var(--ck-html-embed-source-disabled-color)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-html-embed/theme/htmlembed.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-html-embed/htmlembed.css\"],\"names\":[],\"mappings\":\"AAMA,0BAMC,iBAAkB,CAOlB,iBAAkB,CATlB,gBAAkB,CAMlB,cAAe,CALf,iBAwDD,CA5CC,iCACC,iBAAkB,CAGlB,SACD,CAKA,2DAEC,YAAa,CACb,qBAAsB,CAFtB,iBAGD,CAEA,mDAGC,YAAa,CADb,eAAgB,CADhB,iBAGD,CAEA,2DAOC,wBAAyB,CACzB,kBAAmB,CAFnB,aAAc,CAHd,WAAY,CADZ,iBAAkB,CADlB,UAQD,CAEA,+DAQC,kBAAmB,CAHnB,QAAS,CAET,YAAa,CAEb,sBAAuB,CAPvB,MAAO,CADP,iBAAkB,CAGlB,OAAQ,CADR,KAOD,CC7DD,MACC,kEAAqE,CACrE,kCAAmC,CACnC,2CAA4C,CAC5C,yFAA0F,CAE1F,0EAA2E,CAC3E,6CACD,CAGA,0BAEC,gDAAiD,CADjD,kCA0ID,CAvIC,+DACC,iGACD,CAGA,mCACC,eACD,CAEA,mCACC,gBACD,CAIA,iCAIC,eAA4B,CAG5B,iEAAkE,CAClE,qCAAsC,CAPtC,mCAAoC,CASpC,+BAAgC,CADhC,kCAAmC,CANnC,+BAAgC,CAGhC,kIAAmI,CAJnI,yDAA4D,CAG5D,0GAMD,CAEA,0CACC,SAAU,CACV,gCACD,CAGA,iIACC,gBACD,CAxCD,uFA4CE,sDAAuD,CADvD,KAgGF,CA3IA,6FAkDE,uCAAwC,CADxC,sDAAuD,CADvD,KA2FF,CA3IA,wFAuDE,sDAAuD,CADvD,KAqFF,CA/EC,2DACC,kCACD,CAGA,2DAEC,gCAAiC,CADjC,8BAcD,CAXC,kGACC,iCACD,CAEA,oGACC,mCACD,CAEA,wFACC,kCACD,CAGD,oEACC,+BAAgC,CAChC,UACD,CAGA,kDACC,qBAAsB,CActB,aAAc,CAPd,qBAAsB,CAGtB,kCAAmC,CATnC,yCAA0C,CAG1C,WAAY,CACZ,kCAAmC,CAFnC,WAAY,CAKZ,UAAW,CAKX,eAAgB,CAJhB,oBAAqB,CAPrB,wCAsBD,CARC,4DAKC,kEAAmE,CAJnE,0DAA2D,CAC3D,gDAAiD,CAIjD,SACD,CAID,mDACC,kDAAmD,CACnD,wCAMD,CARA,2FAME,mBAEF,CAEA,2DAEC,gDAAiD,CADjD,qBAOD,CAJC,6DACC,gBAAiB,CACjB,iBACD,CAGD,+DACC,gDACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/* The feature container. */\\n.ck-widget.raw-html-embed {\\n\\t/* Give the embed some air. */\\n\\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\\n\\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\\n\\tmargin: 0.9em auto;\\n\\tposition: relative;\\n\\tdisplay: flow-root;\\n\\n\\t/* Give the html embed some minimal width in the content to prevent them\\n\\tfrom being \\\"squashed\\\" in tight spaces, e.g. in table cells (https://github.com/ckeditor/ckeditor5/issues/8331) */\\n\\tmin-width: 15em;\\n\\n\\t/* Don't inherit the style, e.g. when in a block quote. */\\n\\tfont-style: normal;\\n\\n\\t/* ----- Emebed label in the upper left corner ----------------------------------------------- */\\n\\n\\t&::before {\\n\\t\\tposition: absolute;\\n\\n\\t\\t/* Make sure the content does not cover the label. */\\n\\t\\tz-index: 1;\\n\\t}\\n\\n\\t/* ----- Emebed internals --------------------------------------------------------------------- */\\n\\n\\t/* The switch mode button wrapper. */\\n\\t& .raw-html-embed__buttons-wrapper {\\n\\t\\tposition: absolute;\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t}\\n\\n\\t& .raw-html-embed__preview {\\n\\t\\tposition: relative;\\n\\t\\toverflow: hidden;\\n\\t\\tdisplay: flex;\\n\\t}\\n\\n\\t& .raw-html-embed__preview-content {\\n\\t\\twidth: 100%;\\n\\t\\tposition: relative;\\n\\t\\tmargin: auto;\\n\\n\\t\\t/* Gives spacing to the small renderable elements, so they always cover the placeholder. */\\n\\t\\tdisplay: table;\\n\\t\\tborder-collapse: separate;\\n\\t\\tborder-spacing: 7px;\\n\\t}\\n\\n\\t& .raw-html-embed__preview-placeholder {\\n\\t\\tposition: absolute;\\n\\t\\tleft: 0;\\n\\t\\ttop: 0;\\n\\t\\tright: 0;\\n\\t\\tbottom: 0;\\n\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tjustify-content: center;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-html-embed-content-width: calc(100% - 1.5 * var(--ck-icon-size));\\n\\t--ck-html-embed-source-height: 10em;\\n\\t--ck-html-embed-unfocused-outline-width: 1px;\\n\\t--ck-html-embed-content-min-height: calc(var(--ck-icon-size) + var(--ck-spacing-standard));\\n\\n\\t--ck-html-embed-source-disabled-background: var(--ck-color-base-foreground);\\n\\t--ck-html-embed-source-disabled-color: hsl(0deg 0% 45%);\\n}\\n\\n/* The feature container. */\\n.ck-widget.raw-html-embed {\\n\\tfont-size: var(--ck-font-size-base);\\n\\tbackground-color: var(--ck-color-base-foreground);\\n\\n\\t&:not(.ck-widget_selected):not(:hover) {\\n\\t\\toutline: var(--ck-html-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border);\\n\\t}\\n\\n\\t/* HTML embed widget itself should respect UI language direction */\\n\\t&[dir=\\\"ltr\\\"] {\\n\\t\\ttext-align: left;\\n\\t}\\n\\n\\t&[dir=\\\"rtl\\\"] {\\n\\t\\ttext-align: right;\\n\\t}\\n\\n\\t/* ----- Embed label in the upper left corner ----------------------------------------------- */\\n\\n\\t&::before {\\n\\t\\tcontent: attr(data-html-embed-label);\\n\\t\\ttop: calc(-1 * var(--ck-html-embed-unfocused-outline-width));\\n\\t\\tleft: var(--ck-spacing-standard);\\n\\t\\tbackground: hsl(0deg 0% 60%);\\n\\t\\ttransition: background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\\n\\t\\tpadding: calc(var(--ck-spacing-tiny) + var(--ck-html-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);\\n\\t\\tborder-radius: 0 0 var(--ck-border-radius) var(--ck-border-radius);\\n\\t\\tcolor: var(--ck-color-base-background);\\n\\t\\tfont-size: var(--ck-font-size-tiny);\\n\\t\\tfont-family: var(--ck-font-face);\\n\\t}\\n\\n\\t&[dir=\\\"rtl\\\"]::before {\\n\\t\\tleft: auto;\\n\\t\\tright: var(--ck-spacing-standard);\\n\\t}\\n\\n\\t/* Make space for label but it only collides in LTR languages */\\n\\t&[dir=\\\"ltr\\\"] .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before {\\n\\t\\tmargin-left: 50px;\\n\\t}\\n\\n\\t@nest .ck.ck-editor__editable.ck-blurred &.ck-widget_selected::before {\\n\\t\\ttop: 0px;\\n\\t\\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-small);\\n\\t}\\n\\n\\t@nest .ck.ck-editor__editable:not(.ck-blurred) &.ck-widget_selected::before {\\n\\t\\ttop: 0;\\n\\t\\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-small);\\n\\t\\tbackground: var(--ck-color-focus-border);\\n\\t}\\n\\n\\t@nest .ck.ck-editor__editable &:not(.ck-widget_selected):hover::before {\\n\\t\\ttop: 0px;\\n\\t\\tpadding: var(--ck-spacing-tiny) var(--ck-spacing-small);\\n\\t}\\n\\n\\t/* ----- Emebed internals --------------------------------------------------------------------- */\\n\\n\\t& .raw-html-embed__content-wrapper {\\n\\t\\tpadding: var(--ck-spacing-standard);\\n\\t}\\n\\n\\t/* The switch mode button wrapper. */\\n\\t& .raw-html-embed__buttons-wrapper {\\n\\t\\ttop: var(--ck-spacing-standard);\\n\\t\\tright: var(--ck-spacing-standard);\\n\\n\\t\\t& .ck-button.raw-html-embed__save-button {\\n\\t\\t\\tcolor: var(--ck-color-button-save);\\n\\t\\t}\\n\\n\\t\\t& .ck-button.raw-html-embed__cancel-button {\\n\\t\\t\\tcolor: var(--ck-color-button-cancel);\\n\\t\\t}\\n\\n\\t\\t& .ck-button:not(:first-child) {\\n\\t\\t\\tmargin-top: var(--ck-spacing-small);\\n\\t\\t}\\n\\t}\\n\\n\\t&[dir=\\\"rtl\\\"] .raw-html-embed__buttons-wrapper {\\n\\t\\tleft: var(--ck-spacing-standard);\\n\\t\\tright: auto;\\n\\t}\\n\\n\\t/* The edit source element. */\\n\\t& .raw-html-embed__source {\\n\\t\\tbox-sizing: border-box;\\n\\t\\theight: var(--ck-html-embed-source-height);\\n\\t\\twidth: var(--ck-html-embed-content-width);\\n\\t\\tresize: none;\\n\\t\\tmin-width: 0;\\n\\t\\tpadding: var(--ck-spacing-standard);\\n\\n\\t\\tfont-family: monospace;\\n\\t\\ttab-size: 4;\\n\\t\\twhite-space: pre-wrap;\\n\\t\\tfont-size: var(--ck-font-size-base); /* Safari needs this. */\\n\\n\\t\\t/* HTML code is direction–agnostic. */\\n\\t\\ttext-align: left;\\n\\t\\tdirection: ltr;\\n\\n\\t\\t&[disabled] {\\n\\t\\t\\tbackground: var(--ck-html-embed-source-disabled-background);\\n\\t\\t\\tcolor: var(--ck-html-embed-source-disabled-color);\\n\\n\\t\\t\\t/* Safari needs this for the proper text color in disabled input (https://github.com/ckeditor/ckeditor5/issues/8320). */\\n\\t\\t\\t-webkit-text-fill-color: var(--ck-html-embed-source-disabled-color);\\n\\t\\t\\topacity: 1;\\n\\t\\t}\\n\\t}\\n\\n\\t/* The preview data container. */\\n\\t& .raw-html-embed__preview {\\n\\t\\tmin-height: var(--ck-html-embed-content-min-height);\\n\\t\\twidth: var(--ck-html-embed-content-width);\\n\\n\\t\\t/* Disable all mouse interaction as long as the editor is not read–only. */\\n\\t\\t@nest .ck-editor__editable:not(.ck-read-only) & {\\n\\t\\t\\tpointer-events: none;\\n\\t\\t}\\n\\t}\\n\\n\\t& .raw-html-embed__preview-content {\\n\\t\\tbox-sizing: border-box;\\n\\t\\tbackground-color: var(--ck-color-base-foreground);\\n\\n\\t\\t& > * {\\n\\t\\t\\tmargin-left: auto;\\n\\t\\t\\tmargin-right: auto;\\n\\t\\t}\\n\\t}\\n\\n\\t& .raw-html-embed__preview-placeholder {\\n\\t\\tcolor: var(--ck-html-embed-source-disabled-color)\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-html-object-embed-unfocused-outline-width:1px}.ck-widget.html-object-embed{background-color:var(--ck-color-base-foreground);font-size:var(--ck-font-size-base);min-width:calc(76px + var(--ck-spacing-standard));padding:var(--ck-spacing-small);padding-top:calc(var(--ck-font-size-tiny) + var(--ck-spacing-large))}.ck-widget.html-object-embed:not(.ck-widget_selected):not(:hover){outline:var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border)}.ck-widget.html-object-embed:before{background:#999;border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius);color:var(--ck-color-base-background);content:attr(data-html-object-embed-label);font-family:var(--ck-font-face);font-size:var(--ck-font-size-tiny);font-style:normal;font-weight:400;left:var(--ck-spacing-standard);padding:calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);position:absolute;top:0;transition:background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck-widget.html-object-embed .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before{margin-left:50px}.ck-widget.html-object-embed .html-object-embed__content{pointer-events:none}div.ck-widget.html-object-embed{margin:1em auto}span.ck-widget.html-object-embed{display:inline-block}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-html-support/theme/datafilter.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,kDACD,CAEA,6BAEC,gDAAiD,CADjD,kCAAmC,CAKnC,iDAAkD,CAHlD,+BAAgC,CAEhC,oEAgCD,CA7BC,kEACC,wGACD,CAEA,oCAOC,eAA4B,CAG5B,iEAAkE,CAClE,qCAAsC,CAPtC,0CAA2C,CAS3C,+BAAgC,CADhC,kCAAmC,CAVnC,iBAAkB,CADlB,eAAmB,CAKnB,+BAAgC,CAGhC,yIAA0I,CAN1I,iBAAkB,CAElB,KAAM,CAGN,0GAMD,CAGA,2HACC,gBACD,CAEA,yDAEC,mBACD,CAGD,gCACC,eACD,CAEA,iCACC,oBACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-html-object-embed-unfocused-outline-width: 1px;\\n}\\n\\n.ck-widget.html-object-embed {\\n\\tfont-size: var(--ck-font-size-base);\\n\\tbackground-color: var(--ck-color-base-foreground);\\n\\tpadding: var(--ck-spacing-small);\\n\\t/* Leave space for label */\\n\\tpadding-top: calc(var(--ck-font-size-tiny) + var(--ck-spacing-large));\\n\\tmin-width: calc(76px + var(--ck-spacing-standard));\\n\\n\\t&:not(.ck-widget_selected):not(:hover) {\\n\\t\\toutline: var(--ck-html-object-embed-unfocused-outline-width) dashed var(--ck-color-widget-blurred-border);\\n\\t}\\n\\n\\t&::before {\\n\\t\\tfont-weight: normal;\\n\\t\\tfont-style: normal;\\n\\t\\tposition: absolute;\\n\\t\\tcontent: attr(data-html-object-embed-label);\\n\\t\\ttop: 0;\\n\\t\\tleft: var(--ck-spacing-standard);\\n\\t\\tbackground: hsl(0deg 0% 60%);\\n\\t\\ttransition: background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);\\n\\t\\tpadding: calc(var(--ck-spacing-tiny) + var(--ck-html-object-embed-unfocused-outline-width)) var(--ck-spacing-small) var(--ck-spacing-tiny);\\n\\t\\tborder-radius: 0 0 var(--ck-border-radius) var(--ck-border-radius);\\n\\t\\tcolor: var(--ck-color-base-background);\\n\\t\\tfont-size: var(--ck-font-size-tiny);\\n\\t\\tfont-family: var(--ck-font-face);\\n\\t}\\n\\n\\t/* Make space for label. */\\n\\t& .ck-widget__type-around .ck-widget__type-around__button.ck-widget__type-around__button_before {\\n\\t\\tmargin-left: 50px;\\n\\t}\\n\\n\\t& .html-object-embed__content {\\n\\t\\t/* Disable user interaction with embed content */\\n\\t\\tpointer-events: none;\\n\\t}\\n}\\n\\ndiv.ck-widget.html-object-embed {\\n\\tmargin: 1em auto;\\n}\\n\\nspan.ck-widget.html-object-embed {\\n\\tdisplay: inline-block;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content .image{clear:both;display:table;margin:.9em auto;min-width:50px;text-align:center}.ck-content .image img{display:block;margin:0 auto;max-width:100%;min-width:100%}.ck-content .image-inline{align-items:flex-start;display:inline-flex;max-width:100%}.ck-content .image-inline picture{display:flex}.ck-content .image-inline img,.ck-content .image-inline picture{flex-grow:1;flex-shrink:1;max-width:100%}.ck.ck-editor__editable .image>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}.ck.ck-editor__editable .image-inline.ck-widget_selected,.ck.ck-editor__editable .image.ck-widget_selected{z-index:1}.ck.ck-editor__editable .image-inline.ck-widget_selected ::selection{display:none}.ck.ck-editor__editable td .image-inline img,.ck.ck-editor__editable th .image-inline img{max-width:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/image.css\"],\"names\":[],\"mappings\":\"AAMC,mBAEC,UAAW,CADX,aAAc,CAOd,gBAAkB,CAGlB,cAAe,CARf,iBAuBD,CAbC,uBAEC,aAAc,CAGd,aAAc,CAGd,cAAe,CAGf,cACD,CAGD,0BAYC,sBAAuB,CANvB,mBAAoB,CAGpB,cAoBD,CAdC,kCACC,YACD,CAGA,gEAGC,WAAY,CACZ,aAAc,CAGd,cACD,CAUD,gEASC,eAAgB,CARhB,oBAAqB,CACrB,qBAAsB,CAQtB,sBAAuB,CAFvB,kBAGD,CAWA,2GACC,SAUD,CAHC,qEACC,YACD,CAOA,0FACC,cACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content {\\n\\t& .image {\\n\\t\\tdisplay: table;\\n\\t\\tclear: both;\\n\\t\\ttext-align: center;\\n\\n\\t\\t/* Make sure there is some space between the content and the image. Center image by default. */\\n\\t\\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\\n\\t \\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\\n\\t\\tmargin: 0.9em auto;\\n\\n\\t\\t/* Make sure the caption will be displayed properly (See: https://github.com/ckeditor/ckeditor5/issues/1870). */\\n\\t\\tmin-width: 50px;\\n\\n\\t\\t& img {\\n\\t\\t\\t/* Prevent unnecessary margins caused by line-height (see #44). */\\n\\t\\t\\tdisplay: block;\\n\\n\\t\\t\\t/* Center the image if its width is smaller than the content's width. */\\n\\t\\t\\tmargin: 0 auto;\\n\\n\\t\\t\\t/* Make sure the image never exceeds the size of the parent container (ckeditor/ckeditor5-ui#67). */\\n\\t\\t\\tmax-width: 100%;\\n\\n\\t\\t\\t/* Make sure the image is never smaller than the parent container (See: https://github.com/ckeditor/ckeditor5/issues/9300). */\\n\\t\\t\\tmin-width: 100%\\n\\t\\t}\\n\\t}\\n\\n\\t& .image-inline {\\n\\t\\t/*\\n\\t\\t * Normally, the .image-inline would have \\\"display: inline-block\\\" and \\\"img { width: 100% }\\\" (to follow the wrapper while resizing).\\n\\t\\t * Unfortunately, together with \\\"srcset\\\", it gets automatically stretched up to the width of the editing root.\\n\\t\\t * This strange behavior does not happen with inline-flex.\\n\\t\\t */\\n\\t\\tdisplay: inline-flex;\\n\\n\\t\\t/* While being resized, don't allow the image to exceed the width of the editing root. */\\n\\t\\tmax-width: 100%;\\n\\n\\t\\t/* This is required by Safari to resize images in a sensible way. Without this, the browser breaks the ratio. */\\n\\t\\talign-items: flex-start;\\n\\n\\t\\t/* When the picture is present it must act as a flex container to let the img resize properly */\\n\\t\\t& picture {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t}\\n\\n\\t\\t/* When the picture is present, it must act like a resizable img. */\\n\\t\\t& picture,\\n\\t\\t& img {\\n\\t\\t\\t/* This is necessary for the img to span the entire .image-inline wrapper and to resize properly. */\\n\\t\\t\\tflex-grow: 1;\\n\\t\\t\\tflex-shrink: 1;\\n\\n\\t\\t\\t/* Prevents overflowing the editing root boundaries when an inline image is very wide. */\\n\\t\\t\\tmax-width: 100%;\\n\\t\\t}\\n\\t}\\n}\\n\\n.ck.ck-editor__editable {\\n\\t/*\\n\\t * Inhertit the content styles padding of the <figcaption> in case the integration overrides `text-align: center`\\n\\t * of `.image` (e.g. to the left/right). This ensures the placeholder stays at the padding just like the native\\n\\t * caret does, and not at the edge of <figcaption>.\\n\\t */\\n\\t& .image > figcaption.ck-placeholder::before {\\n\\t\\tpadding-left: inherit;\\n\\t\\tpadding-right: inherit;\\n\\n\\t\\t/*\\n\\t\\t * Make sure the image caption placeholder doesn't overflow the placeholder area.\\n\\t\\t * See https://github.com/ckeditor/ckeditor5/issues/9162.\\n\\t\\t */\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t}\\n\\n\\n\\t/*\\n\\t * Make sure the selected inline image always stays on top of its siblings.\\n\\t * See https://github.com/ckeditor/ckeditor5/issues/9108.\\n\\t */\\n\\t& .image.ck-widget_selected {\\n\\t\\tz-index: 1;\\n\\t}\\n\\n\\t& .image-inline.ck-widget_selected {\\n\\t\\tz-index: 1;\\n\\n\\t\\t/*\\n\\t\\t * Make sure the native browser selection style is not displayed.\\n\\t\\t * Inline image widgets have their own styles for the selected state and\\n\\t\\t * leaving this up to the browser is asking for a visual collision.\\n\\t\\t */\\n\\t\\t& ::selection {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}\\n\\n\\t/* The inline image nested in the table should have its original size if not resized.\\n\\tSee https://github.com/ckeditor/ckeditor5/issues/9117. */\\n\\t& td,\\n\\t& th {\\n\\t\\t& .image-inline img {\\n\\t\\t\\tmax-width: none;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-color-image-caption-background:#f7f7f7;--ck-color-image-caption-text:#333;--ck-color-image-caption-highligted-background:#fd0}.ck-content .image>figcaption{background-color:var(--ck-color-image-caption-background);caption-side:bottom;color:var(--ck-color-image-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;word-break:break-word}.ck.ck-editor__editable .image>figcaption.image__caption_highlighted{animation:ck-image-caption-highlight .6s ease-out}@keyframes ck-image-caption-highlight{0%{background-color:var(--ck-color-image-caption-highligted-background)}to{background-color:var(--ck-color-image-caption-background)}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imagecaption.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,2CAAoD,CACpD,kCAA8C,CAC9C,mDACD,CAGA,8BAKC,yDAA0D,CAH1D,mBAAoB,CAEpB,wCAAyC,CAHzC,qBAAsB,CAMtB,eAAgB,CAChB,mBAAoB,CAFpB,YAAa,CAHb,qBAMD,CAGA,qEACC,iDACD,CAEA,sCACC,GACC,oEACD,CAEA,GACC,yDACD,CACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-color-image-caption-background: hsl(0, 0%, 97%);\\n\\t--ck-color-image-caption-text: hsl(0, 0%, 20%);\\n\\t--ck-color-image-caption-highligted-background: hsl(52deg 100% 50%);\\n}\\n\\n/* Content styles */\\n.ck-content .image > figcaption {\\n\\tdisplay: table-caption;\\n\\tcaption-side: bottom;\\n\\tword-break: break-word;\\n\\tcolor: var(--ck-color-image-caption-text);\\n\\tbackground-color: var(--ck-color-image-caption-background);\\n\\tpadding: .6em;\\n\\tfont-size: .75em;\\n\\toutline-offset: -1px;\\n}\\n\\n/* Editing styles */\\n.ck.ck-editor__editable .image > figcaption.image__caption_highlighted {\\n\\tanimation: ck-image-caption-highlight .6s ease-out;\\n}\\n\\n@keyframes ck-image-caption-highlight {\\n\\t0% {\\n\\t\\tbackground-color: var(--ck-color-image-caption-highligted-background);\\n\\t}\\n\\n\\t100% {\\n\\t\\tbackground-color: var(--ck-color-image-caption-background);\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-image-insert__panel{padding:var(--ck-spacing-large)}.ck.ck-image-insert__ck-finder-button{border:1px solid #ccc;border-radius:var(--ck-border-radius);display:block;margin:var(--ck-spacing-standard) auto;width:100%}.ck.ck-splitbutton>.ck-file-dialog-button.ck-button{border:none;margin:0;padding:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageinsert.css\"],\"names\":[],\"mappings\":\"AAKA,2BACC,+BACD,CAEA,sCAIC,qBAAiC,CACjC,qCAAsC,CAJtC,aAAc,CAEd,sCAAuC,CADvC,UAID,CAGA,oDAGC,WAAY,CADZ,QAAS,CADT,SAGD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-image-insert__panel {\\n\\tpadding: var(--ck-spacing-large);\\n}\\n\\n.ck.ck-image-insert__ck-finder-button {\\n\\tdisplay: block;\\n\\twidth: 100%;\\n\\tmargin: var(--ck-spacing-standard) auto;\\n\\tborder: 1px solid hsl(0, 0%, 80%);\\n\\tborder-radius: var(--ck-border-radius);\\n}\\n\\n/* https://github.com/ckeditor/ckeditor5/issues/7986 */\\n.ck.ck-splitbutton > .ck-file-dialog-button.ck-button {\\n\\tpadding: 0;\\n\\tmargin: 0;\\n\\tborder: none;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-image-insert-form:focus{outline:none}.ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-image-insert-form__action-row{margin-top:var(--ck-spacing-standard)}.ck.ck-form__row.ck-image-insert-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-image-insert-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row.ck-image-insert-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageinsertformrowview.css\"],\"names\":[],\"mappings\":\"AAMC,+BAEC,YACD,CAGD,iBACC,YAAa,CACb,kBAAmB,CACnB,gBAAiB,CACjB,6BAmBD,CAhBC,iCACC,WACD,CAEA,kDACC,qCAUD,CARC,sIAEC,sBACD,CAEA,+EACC,0BACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-image-insert-form {\\n\\t&:focus {\\n\\t\\t/* See: https://github.com/ckeditor/ckeditor5/issues/4773 */\\n\\t\\toutline: none;\\n\\t}\\n}\\n\\n.ck.ck-form__row {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tflex-wrap: nowrap;\\n\\tjustify-content: space-between;\\n\\n\\t/* Ignore labels that work as fieldset legends */\\n\\t& > *:not(.ck-label) {\\n\\t\\tflex-grow: 1;\\n\\t}\\n\\n\\t&.ck-image-insert-form__action-row {\\n\\t\\tmargin-top: var(--ck-spacing-standard);\\n\\n\\t\\t& .ck-button-save,\\n\\t\\t& .ck-button-cancel {\\n\\t\\t\\tjustify-content: center;\\n\\t\\t}\\n\\n\\t\\t& .ck-button .ck-button__label {\\n\\t\\t\\tcolor: var(--ck-color-text);\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content .image.image_resized{box-sizing:border-box;display:block;max-width:100%}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}.ck.ck-editor__editable td .image-inline.image_resized img,.ck.ck-editor__editable th .image-inline.image_resized img{max-width:100%}[dir=ltr] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon{margin-left:var(--ck-spacing-standard)}.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label{width:4em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageresize.css\"],\"names\":[],\"mappings\":\"AAKA,iCAQC,qBAAsB,CADtB,aAAc,CANd,cAkBD,CATC,qCAEC,UACD,CAEA,4CAEC,aACD,CAQC,sHACC,cACD,CAIF,oFACC,uCACD,CAEA,oFACC,sCACD,CAEA,oEACC,SACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content .image.image_resized {\\n\\tmax-width: 100%;\\n\\t/*\\n\\tThe `<figure>` element for resized images must not use `display:table` as browsers do not support `max-width` for it well.\\n\\tSee https://stackoverflow.com/questions/4019604/chrome-safari-ignoring-max-width-in-table/14420691#14420691 for more.\\n\\tFortunately, since we control the width, there is no risk that the image will look bad.\\n\\t*/\\n\\tdisplay: block;\\n\\tbox-sizing: border-box;\\n\\n\\t& img {\\n\\t\\t/* For resized images it is the `<figure>` element that determines the image width. */\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t& > figcaption {\\n\\t\\t/* The `<figure>` element uses `display:block`, so `<figcaption>` also has to. */\\n\\t\\tdisplay: block;\\n\\t}\\n}\\n\\n.ck.ck-editor__editable {\\n\\t/* The resized inline image nested in the table should respect its parent size.\\n\\tSee https://github.com/ckeditor/ckeditor5/issues/9117. */\\n\\t& td,\\n\\t& th {\\n\\t\\t& .image-inline.image_resized img {\\n\\t\\t\\tmax-width: 100%;\\n\\t\\t}\\n\\t}\\n}\\n\\n[dir=\\\"ltr\\\"] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon {\\n\\tmargin-right: var(--ck-spacing-standard);\\n}\\n\\n[dir=\\\"rtl\\\"] .ck.ck-button.ck-button_with-text.ck-resize-image-button .ck-button__icon {\\n\\tmargin-left: var(--ck-spacing-standard);\\n}\\n\\n.ck.ck-dropdown .ck-button.ck-resize-image-button .ck-button__label {\\n\\twidth: 4em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-image-style-spacing:1.5em;--ck-inline-image-style-spacing:calc(var(--ck-image-style-spacing)/2)}.ck-content .image-style-block-align-left,.ck-content .image-style-block-align-right{max-width:calc(100% - var(--ck-image-style-spacing))}.ck-content .image-style-align-left,.ck-content .image-style-align-right{clear:none}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing);max-width:50%}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-block-align-right{margin-left:auto;margin-right:0}.ck-content .image-style-block-align-left{margin-left:0;margin-right:auto}.ck-content p+.image-style-align-left,.ck-content p+.image-style-align-right,.ck-content p+.image-style-side{margin-top:0}.ck-content .image-inline.image-style-align-left,.ck-content .image-inline.image-style-align-right{margin-bottom:var(--ck-inline-image-style-spacing);margin-top:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-left{margin-right:var(--ck-inline-image-style-spacing)}.ck-content .image-inline.image-style-align-right{margin-left:var(--ck-inline-image-style-spacing)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-background)}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__action:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton.ck-splitbutton_flatten:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover):after{display:none}.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__action:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled),.ck.ck-splitbutton.ck-splitbutton_flatten.ck-splitbutton_open:hover>.ck-splitbutton__arrow:not(.ck-disabled):not(:hover){background-color:var(--ck-color-button-on-hover-background)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imagestyle.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,8BAA+B,CAC/B,qEACD,CAMC,qFAEC,oDACD,CAIA,yEAEC,UACD,CAEA,8BACC,WAAY,CACZ,yCAA0C,CAC1C,aACD,CAEA,oCACC,UAAW,CACX,0CACD,CAEA,sCACC,gBAAiB,CACjB,iBACD,CAEA,qCACC,WAAY,CACZ,yCACD,CAEA,2CAEC,gBAAiB,CADjB,cAED,CAEA,0CACC,aAAc,CACd,iBACD,CAGA,6GAGC,YACD,CAGC,mGAGC,kDAAmD,CADnD,+CAED,CAEA,iDACC,iDACD,CAEA,kDACC,gDACD,CAUC,0lBAGC,qDAKD,CAHC,8nBACC,YACD,CAKD,oVAGC,2DACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-image-style-spacing: 1.5em;\\n\\t--ck-inline-image-style-spacing: calc(var(--ck-image-style-spacing) / 2);\\n}\\n\\n.ck-content {\\n\\t/* Provides a minimal side margin for the left and right aligned images, so that the user has a visual feedback\\n\\tconfirming successful application of the style if image width exceeds the editor's size.\\n\\tSee https://github.com/ckeditor/ckeditor5/issues/9342 */\\n\\t& .image-style-block-align-left,\\n\\t& .image-style-block-align-right {\\n\\t\\tmax-width: calc(100% - var(--ck-image-style-spacing));\\n\\t}\\n\\n\\t/* Allows displaying multiple floating images in the same line.\\n\\tSee https://github.com/ckeditor/ckeditor5/issues/9183#issuecomment-804988132 */\\n\\t& .image-style-align-left,\\n\\t& .image-style-align-right {\\n\\t\\tclear: none;\\n\\t}\\n\\n\\t& .image-style-side {\\n\\t\\tfloat: right;\\n\\t\\tmargin-left: var(--ck-image-style-spacing);\\n\\t\\tmax-width: 50%;\\n\\t}\\n\\n\\t& .image-style-align-left {\\n\\t\\tfloat: left;\\n\\t\\tmargin-right: var(--ck-image-style-spacing);\\n\\t}\\n\\n\\t& .image-style-align-center {\\n\\t\\tmargin-left: auto;\\n\\t\\tmargin-right: auto;\\n\\t}\\n\\n\\t& .image-style-align-right {\\n\\t\\tfloat: right;\\n\\t\\tmargin-left: var(--ck-image-style-spacing);\\n\\t}\\n\\n\\t& .image-style-block-align-right {\\n\\t\\tmargin-right: 0;\\n\\t\\tmargin-left: auto;\\n\\t}\\n\\n\\t& .image-style-block-align-left {\\n\\t\\tmargin-left: 0;\\n\\t\\tmargin-right: auto;\\n\\t}\\n\\n\\t/* Simulates margin collapsing with the preceding paragraph, which does not work for the floating elements. */\\n\\t& p + .image-style-align-left,\\n\\t& p + .image-style-align-right,\\n\\t& p + .image-style-side {\\n\\t\\tmargin-top: 0;\\n\\t}\\n\\n\\t& .image-inline {\\n\\t\\t&.image-style-align-left,\\n\\t\\t&.image-style-align-right {\\n\\t\\t\\tmargin-top: var(--ck-inline-image-style-spacing);\\n\\t\\t\\tmargin-bottom: var(--ck-inline-image-style-spacing);\\n\\t\\t}\\n\\n\\t\\t&.image-style-align-left {\\n\\t\\t\\tmargin-right: var(--ck-inline-image-style-spacing);\\n\\t\\t}\\n\\n\\t\\t&.image-style-align-right {\\n\\t\\t\\tmargin-left: var(--ck-inline-image-style-spacing);\\n\\t\\t}\\n\\t}\\n}\\n\\n.ck.ck-splitbutton {\\n\\t/* The button should display as a regular drop-down if the action button\\n\\tis forced to fire the same action as the arrow button. */\\n\\t&.ck-splitbutton_flatten {\\n\\t\\t&:hover,\\n\\t\\t&.ck-splitbutton_open {\\n\\t\\t\\t& > .ck-splitbutton__action:not(.ck-disabled),\\n\\t\\t\\t& > .ck-splitbutton__arrow:not(.ck-disabled),\\n\\t\\t\\t& > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover) {\\n\\t\\t\\t\\tbackground-color: var(--ck-color-button-on-background);\\n\\n\\t\\t\\t\\t&::after {\\n\\t\\t\\t\\t\\tdisplay: none;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.ck-splitbutton_open:hover {\\n\\t\\t\\t& > .ck-splitbutton__action:not(.ck-disabled),\\n\\t\\t\\t& > .ck-splitbutton__arrow:not(.ck-disabled),\\n\\t\\t\\t& > .ck-splitbutton__arrow:not(.ck-disabled):not(:hover) {\\n\\t\\t\\t\\tbackground-color: var(--ck-color-button-on-hover-background);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-image-upload-complete-icon{border-radius:50%;display:block;position:absolute;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);z-index:1}.ck-image-upload-complete-icon:after{content:\\\"\\\";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20;--ck-image-upload-icon-width:2px;--ck-image-upload-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck-image-upload-complete-icon{animation-delay:0ms,3s;animation-duration:.5s,.5s;animation-fill-mode:forwards,forwards;animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;background:var(--ck-color-image-upload-icon-background);font-size:calc(1px*var(--ck-image-upload-icon-size));height:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size));opacity:0;overflow:hidden;width:calc(var(--ck-image-upload-icon-is-visible)*var(--ck-image-upload-icon-size))}.ck-image-upload-complete-icon:after{animation-delay:.5s;animation-duration:.5s;animation-fill-mode:forwards;animation-name:ck-upload-complete-icon-check;border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);box-sizing:border-box;height:0;left:25%;opacity:0;top:50%;transform:scaleX(-1) rotate(135deg);transform-origin:left top;width:0}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{height:0;opacity:1;width:0}33%{height:0;width:.3em}to{height:.45em;opacity:1;width:.3em}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadicon.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-image/imageuploadicon.css\"],\"names\":[],\"mappings\":\"AAKA,+BAUC,iBAAkB,CATlB,aAAc,CACd,iBAAkB,CAOlB,sCAAwC,CADxC,oCAAsC,CAGtC,SAMD,CAJC,qCACC,UAAW,CACX,iBACD,CChBD,MACC,iCAA8C,CAC9C,+CAA4D,CAG5D,8BAA+B,CAC/B,gCAAiC,CACjC,4DACD,CAEA,+BAWC,sBAA4B,CAN5B,0BAAgC,CADhC,qCAAuC,CADvC,wEAA0E,CAD1E,uDAAwD,CAMxD,oDAAuD,CAWvD,oFAAuF,CAlBvF,SAAU,CAgBV,eAAgB,CAChB,mFA0BD,CAtBC,qCAgBC,mBAAsB,CADtB,sBAAyB,CAEzB,4BAA6B,CAH7B,4CAA6C,CAF7C,sFAAuF,CADvF,oFAAqF,CASrF,qBAAsB,CAdtB,QAAS,CAJT,QAAS,CAGT,SAAU,CADV,OAAQ,CAKR,mCAAoC,CACpC,yBAA0B,CAH1B,OAcD,CAGD,wCACC,GACC,SACD,CAEA,GACC,SACD,CACD,CAEA,wCACC,GACC,SACD,CAEA,GACC,SACD,CACD,CAEA,yCACC,GAGC,QAAS,CAFT,SAAU,CACV,OAED,CACA,IAEC,QAAS,CADT,UAED,CACA,GAGC,YAAc,CAFd,SAAU,CACV,UAED,CACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-image-upload-complete-icon {\\n\\tdisplay: block;\\n\\tposition: absolute;\\n\\n\\t/*\\n\\t * Smaller images should have the icon closer to the border.\\n\\t * Match the icon position with the linked image indicator brought by the link image feature.\\n\\t */\\n\\ttop: min(var(--ck-spacing-medium), 6%);\\n\\tright: min(var(--ck-spacing-medium), 6%);\\n\\tborder-radius: 50%;\\n\\tz-index: 1;\\n\\n\\t&::after {\\n\\t\\tcontent: \\\"\\\";\\n\\t\\tposition: absolute;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-color-image-upload-icon: hsl(0, 0%, 100%);\\n\\t--ck-color-image-upload-icon-background: hsl(120, 100%, 27%);\\n\\n\\t/* Match the icon size with the linked image indicator brought by the link image feature. */\\n\\t--ck-image-upload-icon-size: 20;\\n\\t--ck-image-upload-icon-width: 2px;\\n\\t--ck-image-upload-icon-is-visible: clamp(0px, 100% - 50px, 1px);\\n}\\n\\n.ck-image-upload-complete-icon {\\n\\topacity: 0;\\n\\tbackground: var(--ck-color-image-upload-icon-background);\\n\\tanimation-name: ck-upload-complete-icon-show, ck-upload-complete-icon-hide;\\n\\tanimation-fill-mode: forwards, forwards;\\n\\tanimation-duration: 500ms, 500ms;\\n\\n\\t/* To make animation scalable. */\\n\\tfont-size: calc(1px * var(--ck-image-upload-icon-size));\\n\\n\\t/* Hide completed upload icon after 3 seconds. */\\n\\tanimation-delay: 0ms, 3000ms;\\n\\n\\t/*\\n\\t * Use CSS math to simulate container queries.\\n\\t * https://css-tricks.com/the-raven-technique-one-step-closer-to-container-queries/#what-about-showing-and-hiding-things\\n\\t */\\n\\toverflow: hidden;\\n\\twidth: calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size));\\n\\theight: calc(var(--ck-image-upload-icon-is-visible) * var(--ck-image-upload-icon-size));\\n\\n\\t/* This is check icon element made from border-width mixed with animations. */\\n\\t&::after {\\n\\t\\t/* Because of border transformation we need to \\\"hard code\\\" left position. */\\n\\t\\tleft: 25%;\\n\\n\\t\\ttop: 50%;\\n\\t\\topacity: 0;\\n\\t\\theight: 0;\\n\\t\\twidth: 0;\\n\\n\\t\\ttransform: scaleX(-1) rotate(135deg);\\n\\t\\ttransform-origin: left top;\\n\\t\\tborder-top: var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);\\n\\t\\tborder-right: var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);\\n\\n\\t\\tanimation-name: ck-upload-complete-icon-check;\\n\\t\\tanimation-duration: 500ms;\\n\\t\\tanimation-delay: 500ms;\\n\\t\\tanimation-fill-mode: forwards;\\n\\n\\t\\t/* #1095. While reset is not providing proper box-sizing for pseudoelements, we need to handle it. */\\n\\t\\tbox-sizing: border-box;\\n\\t}\\n}\\n\\n@keyframes ck-upload-complete-icon-show {\\n\\tfrom {\\n\\t\\topacity: 0;\\n\\t}\\n\\n\\tto {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\\n@keyframes ck-upload-complete-icon-hide {\\n\\tfrom {\\n\\t\\topacity: 1;\\n\\t}\\n\\n\\tto {\\n\\t\\topacity: 0;\\n\\t}\\n}\\n\\n@keyframes ck-upload-complete-icon-check {\\n\\t0% {\\n\\t\\topacity: 1;\\n\\t\\twidth: 0;\\n\\t\\theight: 0;\\n\\t}\\n\\t33% {\\n\\t\\twidth: 0.3em;\\n\\t\\theight: 0;\\n\\t}\\n\\t100% {\\n\\t\\topacity: 1;\\n\\t\\twidth: 0.3em;\\n\\t\\theight: 0.45em;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck .ck-upload-placeholder-loader{align-items:center;display:flex;justify-content:center;left:0;position:absolute;top:0}.ck .ck-upload-placeholder-loader:before{content:\\\"\\\";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px;--ck-upload-placeholder-image-aspect-ratio:2.8}.ck .ck-image-upload-placeholder{margin:0;width:100%}.ck .ck-image-upload-placeholder.image-inline{width:calc(var(--ck-upload-placeholder-loader-size)*2*var(--ck-upload-placeholder-image-aspect-ratio))}.ck .ck-image-upload-placeholder img{aspect-ratio:var(--ck-upload-placeholder-image-aspect-ratio)}.ck .ck-upload-placeholder-loader{height:100%;width:100%}.ck .ck-upload-placeholder-loader:before{animation:ck-upload-placeholder-loader 1s linear infinite;border-radius:50%;border-right:2px solid transparent;border-top:3px solid var(--ck-color-upload-placeholder-loader);height:var(--ck-upload-placeholder-loader-size);width:var(--ck-upload-placeholder-loader-size)}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadloader.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-image/imageuploadloader.css\"],\"names\":[],\"mappings\":\"AAKA,kCAGC,kBAAmB,CADnB,YAAa,CAEb,sBAAuB,CAEvB,MAAO,CALP,iBAAkB,CAIlB,KAOD,CAJC,yCACC,UAAW,CACX,iBACD,CCXD,MACC,4CAAqD,CACrD,wCAAyC,CACzC,8CACD,CAEA,iCAGC,QAAS,CADT,UAgBD,CAbC,8CACC,sGACD,CAEA,qCAOC,4DACD,CAGD,kCAEC,WAAY,CADZ,UAWD,CARC,yCAMC,yDAA0D,CAH1D,iBAAkB,CAElB,kCAAmC,CADnC,8DAA+D,CAF/D,+CAAgD,CADhD,8CAMD,CAGD,wCACC,GACC,uBACD,CACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck .ck-upload-placeholder-loader {\\n\\tposition: absolute;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\ttop: 0;\\n\\tleft: 0;\\n\\n\\t&::before {\\n\\t\\tcontent: '';\\n\\t\\tposition: relative;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-color-upload-placeholder-loader: hsl(0, 0%, 70%);\\n\\t--ck-upload-placeholder-loader-size: 32px;\\n\\t--ck-upload-placeholder-image-aspect-ratio: 2.8;\\n}\\n\\n.ck .ck-image-upload-placeholder {\\n\\t/* We need to control the full width of the SVG gray background. */\\n\\twidth: 100%;\\n\\tmargin: 0;\\n\\n\\t&.image-inline {\\n\\t\\twidth: calc( 2 * var(--ck-upload-placeholder-loader-size) * var(--ck-upload-placeholder-image-aspect-ratio) );\\n\\t}\\n\\n\\t& img {\\n\\t\\t/*\\n\\t\\t * This is an arbitrary aspect for a 1x1 px GIF to display to the user. Not too tall, not too short.\\n\\t\\t * There's nothing special about this number except that it should make the image placeholder look like\\n\\t\\t * a real image during this short period after the upload started and before the image was read from the\\n\\t\\t * file system (and a rich preview was loaded).\\n\\t\\t */\\n\\t\\taspect-ratio: var(--ck-upload-placeholder-image-aspect-ratio);\\n\\t}\\n}\\n\\n.ck .ck-upload-placeholder-loader {\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\n\\t&::before {\\n\\t\\twidth: var(--ck-upload-placeholder-loader-size);\\n\\t\\theight: var(--ck-upload-placeholder-loader-size);\\n\\t\\tborder-radius: 50%;\\n\\t\\tborder-top: 3px solid var(--ck-color-upload-placeholder-loader);\\n\\t\\tborder-right: 2px solid transparent;\\n\\t\\tanimation: ck-upload-placeholder-loader 1s linear infinite;\\n\\t}\\n}\\n\\n@keyframes ck-upload-placeholder-loader {\\n\\tto {\\n\\t\\ttransform: rotate( 360deg );\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-editor__editable .image,.ck.ck-editor__editable .image-inline{position:relative}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{left:0;position:absolute;top:0}.ck.ck-editor__editable .image-inline.ck-appear,.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar,.ck.ck-editor__editable .image-inline .ck-progress-bar{background:var(--ck-color-upload-bar-background);height:2px;transition:width .1s;width:0}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/imageuploadprogress.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-image/imageuploadprogress.css\"],\"names\":[],\"mappings\":\"AAMC,qEAEC,iBACD,CAGA,uGAIC,MAAO,CAFP,iBAAkB,CAClB,KAED,CCRC,yFACC,oBACD,CAID,uGAIC,gDAAiD,CAFjD,UAAW,CAGX,oBAAuB,CAFvB,OAGD,CAGD,kBACC,GAAO,SAAY,CACnB,GAAO,SAAY,CACpB\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-editor__editable {\\n\\t& .image,\\n\\t& .image-inline {\\n\\t\\tposition: relative;\\n\\t}\\n\\n\\t/* Upload progress bar. */\\n\\t& .image .ck-progress-bar,\\n\\t& .image-inline .ck-progress-bar {\\n\\t\\tposition: absolute;\\n\\t\\ttop: 0;\\n\\t\\tleft: 0;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-editor__editable {\\n\\t& .image,\\n\\t& .image-inline {\\n\\t\\t/* Showing animation. */\\n\\t\\t&.ck-appear {\\n\\t\\t\\tanimation: fadeIn 700ms;\\n\\t\\t}\\n\\t}\\n\\n\\t/* Upload progress bar. */\\n\\t& .image .ck-progress-bar,\\n\\t& .image-inline .ck-progress-bar {\\n\\t\\theight: 2px;\\n\\t\\twidth: 0;\\n\\t\\tbackground: var(--ck-color-upload-bar-background);\\n\\t\\ttransition: width 100ms;\\n\\t}\\n}\\n\\n@keyframes fadeIn {\\n\\tfrom { opacity: 0; }\\n\\tto   { opacity: 1; }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-field-view{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-image/theme/textalternativeform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\"],\"names\":[],\"mappings\":\"AAOA,6BACC,YAAa,CACb,kBAAmB,CACnB,gBAqBD,CAnBC,oDACC,oBACD,CAEA,uCACC,YACD,CCZA,oCDCD,6BAcE,cAUF,CARE,oDACC,eACD,CAEA,wCACC,cACD,CCrBD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\\\";\\n\\n.ck.ck-text-alternative-form {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tflex-wrap: nowrap;\\n\\n\\t& .ck-labeled-field-view {\\n\\t\\tdisplay: inline-block;\\n\\t}\\n\\n\\t& .ck-label {\\n\\t\\tdisplay: none;\\n\\t}\\n\\n\\t@mixin ck-media-phone {\\n\\t\\tflex-wrap: wrap;\\n\\n\\t\\t& .ck-labeled-field-view {\\n\\t\\t\\tflex-basis: 100%;\\n\\t\\t}\\n\\n\\t\\t& .ck-button {\\n\\t\\t\\tflex-basis: 50%;\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@define-mixin ck-media-phone {\\n\\t@media screen and (max-width: 600px) {\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}.ck .ck-link_selected span.image-inline{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background)}.ck .ck-fake-link-selection{background:var(--ck-color-link-fake-selection)}.ck .ck-fake-link-selection_collapsed{border-right:1px solid var(--ck-color-base-text);height:100%;margin-right:-1px;outline:1px solid hsla(0,0%,100%,.5)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-link/link.css\"],\"names\":[],\"mappings\":\"AAMA,sBACC,mDAMD,CAHC,wCACC,yFACD,CAOD,4BACC,8CACD,CAGA,sCAEC,gDAAiD,CADjD,WAAY,CAEZ,iBAAkB,CAClB,oCACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/* Class added to span element surrounding currently selected link. */\\n.ck .ck-link_selected {\\n\\tbackground: var(--ck-color-link-selected-background);\\n\\n\\t/* Give linked inline images some outline to let the user know they are also part of the link. */\\n\\t& span.image-inline {\\n\\t\\toutline: var(--ck-widget-outline-thickness) solid var(--ck-color-link-selected-background);\\n\\t}\\n}\\n\\n/*\\n * Classes used by the \\\"fake visual selection\\\" displayed in the content when an input\\n * in the link UI has focus (the browser does not render the native selection in this state).\\n */\\n.ck .ck-fake-link-selection {\\n\\tbackground: var(--ck-color-link-fake-selection);\\n}\\n\\n/* A collapsed fake visual selection. */\\n.ck .ck-fake-link-selection_collapsed {\\n\\theight: 100%;\\n\\tborder-right: 1px solid var(--ck-color-base-text);\\n\\tmargin-right: -1px;\\n\\toutline: solid 1px hsla(0, 0%, 100%, .5);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{color:var(--ck-color-link-default);cursor:pointer;max-width:var(--ck-input-width);min-width:3em;padding:0 var(--ck-spacing-medium);text-align:center;text-overflow:ellipsis}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child){margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{max-width:100%;min-width:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkactions.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-link/linkactions.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\"],\"names\":[],\"mappings\":\"AAOA,oBACC,YAAa,CACb,kBAAmB,CACnB,gBAqBD,CAnBC,8CACC,oBAKD,CAHC,gEACC,eACD,CCXD,oCDCD,oBAcE,cAUF,CARE,8CACC,eACD,CAEA,8DACC,cACD,CCrBD,CCIA,wDACC,cAAe,CACf,eAmCD,CAjCC,0EAEC,kCAAmC,CAEnC,cAAe,CAIf,+BAAgC,CAChC,aAAc,CARd,kCAAmC,CASnC,iBAAkB,CAPlB,sBAYD,CAHC,gFACC,yBACD,CAGD,mPAIC,eACD,CAEA,+DACC,eACD,CAGC,gFACC,yBACD,CAKD,2DACC,sCACD,CAIA,0DACC,sCACD,CCtDD,oCD0DC,wDACC,8DAMD,CAJC,0EAEC,cAAe,CADf,WAED,CAGD,wEAEE,aAMF,CARA,wEAME,aAEF,CCzED\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\\\";\\n\\n.ck.ck-link-actions {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tflex-wrap: nowrap;\\n\\n\\t& .ck-link-actions__preview {\\n\\t\\tdisplay: inline-block;\\n\\n\\t\\t& .ck-button__label {\\n\\t\\t\\toverflow: hidden;\\n\\t\\t}\\n\\t}\\n\\n\\t@mixin ck-media-phone {\\n\\t\\tflex-wrap: wrap;\\n\\n\\t\\t& .ck-link-actions__preview {\\n\\t\\t\\tflex-basis: 100%;\\n\\t\\t}\\n\\n\\t\\t& .ck-button:not(.ck-link-actions__preview) {\\n\\t\\t\\tflex-basis: 50%;\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@define-mixin ck-media-phone {\\n\\t@media screen and (max-width: 600px) {\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_unselectable.css\\\";\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_dir.css\\\";\\n@import \\\"../mixins/_focus.css\\\";\\n@import \\\"../mixins/_shadow.css\\\";\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\\\";\\n\\n.ck.ck-link-actions {\\n\\t& .ck-button.ck-link-actions__preview {\\n\\t\\tpadding-left: 0;\\n\\t\\tpadding-right: 0;\\n\\n\\t\\t& .ck-button__label {\\n\\t\\t\\tpadding: 0 var(--ck-spacing-medium);\\n\\t\\t\\tcolor: var(--ck-color-link-default);\\n\\t\\t\\ttext-overflow: ellipsis;\\n\\t\\t\\tcursor: pointer;\\n\\n\\t\\t\\t/* Match the box model of the link editor form's input so the balloon\\n\\t\\t\\tdoes not change width when moving between actions and the form. */\\n\\t\\t\\tmax-width: var(--ck-input-width);\\n\\t\\t\\tmin-width: 3em;\\n\\t\\t\\ttext-align: center;\\n\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\ttext-decoration: underline;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&,\\n\\t\\t&:hover,\\n\\t\\t&:focus,\\n\\t\\t&:active {\\n\\t\\t\\tbackground: none;\\n\\t\\t}\\n\\n\\t\\t&:active {\\n\\t\\t\\tbox-shadow: none;\\n\\t\\t}\\n\\n\\t\\t&:focus {\\n\\t\\t\\t& .ck-button__label {\\n\\t\\t\\t\\ttext-decoration: underline;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t@mixin ck-dir ltr {\\n\\t\\t& .ck-button:not(:first-child) {\\n\\t\\t\\tmargin-left: var(--ck-spacing-standard);\\n\\t\\t}\\n\\t}\\n\\n\\t@mixin ck-dir rtl {\\n\\t\\t& .ck-button:not(:last-child) {\\n\\t\\t\\tmargin-left: var(--ck-spacing-standard);\\n\\t\\t}\\n\\t}\\n\\n\\t@mixin ck-media-phone {\\n\\t\\t& .ck-button.ck-link-actions__preview {\\n\\t\\t\\tmargin: var(--ck-spacing-standard) var(--ck-spacing-standard) 0;\\n\\n\\t\\t\\t& .ck-button__label {\\n\\t\\t\\t\\tmin-width: 0;\\n\\t\\t\\t\\tmax-width: 100%;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t& .ck-button:not(.ck-link-actions__preview) {\\n\\t\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\t\\tmargin-left: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\t\\tmargin-left: 0;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@define-mixin ck-media-phone {\\n\\t@media screen and (max-width: 600px) {\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form_layout-vertical .ck-button.ck-button-cancel,.ck.ck-link-form_layout-vertical .ck-button.ck-button-save{margin-top:var(--ck-spacing-medium)}.ck.ck-link-form_layout-vertical{min-width:var(--ck-input-width);padding:0}.ck.ck-link-form_layout-vertical .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical>.ck-button{border-radius:0;margin:0;padding:var(--ck-spacing-standard);width:50%}.ck.ck-link-form_layout-vertical>.ck-button:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form_layout-vertical>.ck-button,[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical>.ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin:var(--ck-spacing-standard) var(--ck-spacing-large)}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{padding:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-link/linkform.css\"],\"names\":[],\"mappings\":\"AAOA,iBACC,YAiBD,CAfC,2BACC,YACD,CCNA,oCDCD,iBAQE,cAUF,CARE,wCACC,eACD,CAEA,4BACC,cACD,CCfD,CDuBD,iCACC,aAYD,CALE,wHAEC,mCACD,CE/BF,iCAEC,+BAAgC,CADhC,SAgDD,CA7CC,wDACC,8EAMD,CAJC,uEACC,WAAY,CACZ,UACD,CAGD,4CAIC,eAAgB,CAFhB,QAAS,CADT,kCAAmC,CAEnC,SAkBD,CAfC,wDACC,gDACD,CARD,4GAeE,aAMF,CAJE,mEACC,kDACD,CAKF,6CACC,yDAUD,CARC,wEACC,SAAU,CACV,UAKD,CAHC,8EACC,eACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\\\";\\n\\n.ck.ck-link-form {\\n\\tdisplay: flex;\\n\\n\\t& .ck-label {\\n\\t\\tdisplay: none;\\n\\t}\\n\\n\\t@mixin ck-media-phone {\\n\\t\\tflex-wrap: wrap;\\n\\n\\t\\t& .ck-labeled-field-view {\\n\\t\\t\\tflex-basis: 100%;\\n\\t\\t}\\n\\n\\t\\t& .ck-button {\\n\\t\\t\\tflex-basis: 50%;\\n\\t\\t}\\n\\t}\\n}\\n\\n/*\\n * Style link form differently when manual decorators are available.\\n * See: https://github.com/ckeditor/ckeditor5-link/issues/186.\\n */\\n.ck.ck-link-form_layout-vertical {\\n\\tdisplay: block;\\n\\n\\t/*\\n\\t * Whether the form is in the responsive mode or not, if there are decorator buttons\\n\\t * keep the top margin of action buttons medium.\\n\\t */\\n\\t& .ck-button {\\n\\t\\t&.ck-button-save,\\n\\t\\t&.ck-button-cancel {\\n\\t\\t\\tmargin-top: var(--ck-spacing-medium);\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@define-mixin ck-media-phone {\\n\\t@media screen and (max-width: 600px) {\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_dir.css\\\";\\n\\n/*\\n * Style link form differently when manual decorators are available.\\n * See: https://github.com/ckeditor/ckeditor5-link/issues/186.\\n */\\n.ck.ck-link-form_layout-vertical {\\n\\tpadding: 0;\\n\\tmin-width: var(--ck-input-width);\\n\\n\\t& .ck-labeled-field-view {\\n\\t\\tmargin: var(--ck-spacing-large) var(--ck-spacing-large) var(--ck-spacing-small);\\n\\n\\t\\t& .ck-input-text {\\n\\t\\t\\tmin-width: 0;\\n\\t\\t\\twidth: 100%;\\n\\t\\t}\\n\\t}\\n\\n\\t& > .ck-button {\\n\\t\\tpadding: var(--ck-spacing-standard);\\n\\t\\tmargin: 0;\\n\\t\\twidth: 50%;\\n\\t\\tborder-radius: 0;\\n\\n\\t\\t&:not(:focus) {\\n\\t\\t\\tborder-top: 1px solid var(--ck-color-base-border);\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\tmargin-left: 0;\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\tmargin-left: 0;\\n\\n\\t\\t\\t&:last-of-type {\\n\\t\\t\\t\\tborder-right: 1px solid var(--ck-color-base-border);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t/* Using additional `.ck` class for stronger CSS specificity than `.ck.ck-link-form > :not(:first-child)`. */\\n\\t& .ck.ck-list {\\n\\t\\tmargin: var(--ck-spacing-standard) var(--ck-spacing-large);\\n\\n\\t\\t& .ck-button.ck-switchbutton {\\n\\t\\t\\tpadding: 0;\\n\\t\\t\\twidth: 100%;\\n\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\tbackground: none;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{display:block;position:absolute}:root{--ck-link-image-indicator-icon-size:20;--ck-link-image-indicator-icon-is-visible:clamp(0px,100% - 50px,1px)}.ck.ck-editor__editable a span.image-inline:after,.ck.ck-editor__editable figure.image>a:after{background-color:rgba(0,0,0,.4);background-image:url(\\\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+\\\");background-position:50%;background-repeat:no-repeat;background-size:14px;border-radius:100%;content:\\\"\\\";height:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size));overflow:hidden;right:min(var(--ck-spacing-medium),6%);top:min(var(--ck-spacing-medium),6%);width:calc(var(--ck-link-image-indicator-icon-is-visible)*var(--ck-link-image-indicator-icon-size))}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-link/theme/linkimage.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-link/linkimage.css\"],\"names\":[],\"mappings\":\"AASE,+FACC,aAAc,CACd,iBACD,CCPF,MAEC,sCAAuC,CACvC,oEACD,CAME,+FAUC,+BAAqC,CACrC,83BAA+3B,CAG/3B,uBAA2B,CAD3B,2BAA4B,CAD5B,oBAAqB,CAGrB,kBAAmB,CAdnB,UAAW,CAsBX,oGAAuG,CAFvG,eAAgB,CAbhB,sCAAwC,CADxC,oCAAsC,CAetC,mGAED\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-editor__editable {\\n\\t/* Linked image indicator */\\n\\t& figure.image > a,\\n\\t& a span.image-inline {\\n\\t\\t&::after {\\n\\t\\t\\tdisplay: block;\\n\\t\\t\\tposition: absolute;\\n\\t\\t}\\n\\t}\\n}\\n\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t/* Match the icon size with the upload indicator brought by the image upload feature. */\\n\\t--ck-link-image-indicator-icon-size: 20;\\n\\t--ck-link-image-indicator-icon-is-visible: clamp(0px, 100% - 50px, 1px);\\n}\\n\\n.ck.ck-editor__editable {\\n\\t/* Linked image indicator */\\n\\t& figure.image > a,\\n\\t& a span.image-inline {\\n\\t\\t&::after {\\n\\t\\t\\tcontent: \\\"\\\";\\n\\n\\t\\t\\t/*\\n\\t\\t\\t * Smaller images should have the icon closer to the border.\\n\\t\\t\\t * Match the icon position with the upload indicator brought by the image upload feature.\\n\\t\\t\\t */\\n\\t\\t\\ttop: min(var(--ck-spacing-medium), 6%);\\n\\t\\t\\tright: min(var(--ck-spacing-medium), 6%);\\n\\n\\t\\t\\tbackground-color: hsla(0, 0%, 0%, .4);\\n\\t\\t\\tbackground-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTExLjA3NyAxNSAuOTkxLTEuNDE2YS43NS43NSAwIDEgMSAxLjIyOS44NmwtMS4xNDggMS42NGEuNzQ4Ljc0OCAwIDAgMS0uMjE3LjIwNiA1LjI1MSA1LjI1MSAwIDAgMS04LjUwMy01Ljk1NS43NDEuNzQxIDAgMCAxIC4xMi0uMjc0bDEuMTQ3LTEuNjM5YS43NS43NSAwIDEgMSAxLjIyOC44Nkw0LjkzMyAxMC43bC4wMDYuMDAzYTMuNzUgMy43NSAwIDAgMCA2LjEzMiA0LjI5NGwuMDA2LjAwNHptNS40OTQtNS4zMzVhLjc0OC43NDggMCAwIDEtLjEyLjI3NGwtMS4xNDcgMS42MzlhLjc1Ljc1IDAgMSAxLTEuMjI4LS44NmwuODYtMS4yM2EzLjc1IDMuNzUgMCAwIDAtNi4xNDQtNC4zMDFsLS44NiAxLjIyOWEuNzUuNzUgMCAwIDEtMS4yMjktLjg2bDEuMTQ4LTEuNjRhLjc0OC43NDggMCAwIDEgLjIxNy0uMjA2IDUuMjUxIDUuMjUxIDAgMCAxIDguNTAzIDUuOTU1em0tNC41NjMtMi41MzJhLjc1Ljc1IDAgMCAxIC4xODQgMS4wNDVsLTMuMTU1IDQuNTA1YS43NS43NSAwIDEgMS0xLjIyOS0uODZsMy4xNTUtNC41MDZhLjc1Ljc1IDAgMCAxIDEuMDQ1LS4xODR6Ii8+PC9zdmc+\\\");\\n\\t\\t\\tbackground-size: 14px;\\n\\t\\t\\tbackground-repeat: no-repeat;\\n\\t\\t\\tbackground-position: center;\\n\\t\\t\\tborder-radius: 100%;\\n\\n\\t\\t\\t/*\\n\\t\\t\\t* Use CSS math to simulate container queries.\\n\\t\\t\\t* https://css-tricks.com/the-raven-technique-one-step-closer-to-container-queries/#what-about-showing-and-hiding-things\\n\\t\\t\\t*/\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\twidth: calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size));\\n\\t\\t\\theight: calc(var(--ck-link-image-indicator-icon-is-visible) * var(--ck-link-image-indicator-icon-size));\\n\\t\\t}\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-collapsible.ck-collapsible_collapsed>.ck-collapsible__children{display:none}:root{--ck-collapsible-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-collapsible>.ck.ck-button{border-radius:0;color:inherit;font-weight:700;padding:var(--ck-spacing-medium) var(--ck-spacing-large);width:100%}.ck.ck-collapsible>.ck.ck-button:focus{background:transparent}.ck.ck-collapsible>.ck.ck-button:active,.ck.ck-collapsible>.ck.ck-button:hover:not(:focus),.ck.ck-collapsible>.ck.ck-button:not(:focus){background:transparent;border-color:transparent;box-shadow:none}.ck.ck-collapsible>.ck.ck-button>.ck-icon{margin-right:var(--ck-spacing-medium);width:var(--ck-collapsible-arrow-size)}.ck.ck-collapsible>.ck-collapsible__children{padding:0 var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-collapsible.ck-collapsible_collapsed>.ck.ck-button .ck-icon{transform:rotate(-90deg)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-list/theme/collapsible.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-list/collapsible.css\"],\"names\":[],\"mappings\":\"AAMC,sEACC,YACD,CCHD,MACC,yDACD,CAGC,iCAIC,eAAgB,CAChB,aAAc,CAHd,eAAiB,CACjB,wDAAyD,CAFzD,UAoBD,CAdC,uCACC,sBACD,CAEA,wIACC,sBAAuB,CACvB,wBAAyB,CACzB,eACD,CAEA,0CACC,qCAAsC,CACtC,sCACD,CAGD,6CACC,yDACD,CAGC,mEACC,wBACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-collapsible.ck-collapsible_collapsed {\\n\\t& > .ck-collapsible__children {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-collapsible-arrow-size: calc(0.5 * var(--ck-icon-size));\\n}\\n\\n.ck.ck-collapsible {\\n\\t& > .ck.ck-button {\\n\\t\\twidth: 100%;\\n\\t\\tfont-weight: bold;\\n\\t\\tpadding: var(--ck-spacing-medium) var(--ck-spacing-large);\\n\\t\\tborder-radius: 0;\\n\\t\\tcolor: inherit;\\n\\n\\t\\t&:focus {\\n\\t\\t\\tbackground: transparent;\\n\\t\\t}\\n\\n\\t\\t&:active, &:not(:focus), &:hover:not(:focus) {\\n\\t\\t\\tbackground: transparent;\\n\\t\\t\\tborder-color: transparent;\\n\\t\\t\\tbox-shadow: none;\\n\\t\\t}\\n\\n\\t\\t& > .ck-icon {\\n\\t\\t\\tmargin-right: var(--ck-spacing-medium);\\n\\t\\t\\twidth: var(--ck-collapsible-arrow-size);\\n\\t\\t}\\n\\t}\\n\\n\\t& > .ck-collapsible__children {\\n\\t\\tpadding: 0 var(--ck-spacing-large) var(--ck-spacing-large);\\n\\t}\\n\\n\\t&.ck-collapsible_collapsed {\\n\\t\\t& > .ck.ck-button .ck-icon {\\n\\t\\t\\ttransform: rotate(-90deg);\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-editor__editable .ck-list-bogus-paragraph{display:block}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-list/theme/documentlist.css\"],\"names\":[],\"mappings\":\"AAKA,8CACC,aACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-editor__editable .ck-list-bogus-paragraph {\\n\\tdisplay: block;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content ol{list-style-type:decimal}.ck-content ol ol{list-style-type:lower-latin}.ck-content ol ol ol{list-style-type:lower-roman}.ck-content ol ol ol ol{list-style-type:upper-latin}.ck-content ol ol ol ol ol{list-style-type:upper-roman}.ck-content ul{list-style-type:disc}.ck-content ul ul{list-style-type:circle}.ck-content ul ul ul,.ck-content ul ul ul ul{list-style-type:square}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-list/theme/list.css\"],\"names\":[],\"mappings\":\"AAKA,eACC,uBAiBD,CAfC,kBACC,2BAaD,CAXC,qBACC,2BASD,CAPC,wBACC,2BAKD,CAHC,2BACC,2BACD,CAMJ,eACC,oBAaD,CAXC,kBACC,sBASD,CAJE,6CACC,sBACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content ol {\\n\\tlist-style-type: decimal;\\n\\n\\t& ol {\\n\\t\\tlist-style-type: lower-latin;\\n\\n\\t\\t& ol {\\n\\t\\t\\tlist-style-type: lower-roman;\\n\\n\\t\\t\\t& ol {\\n\\t\\t\\t\\tlist-style-type: upper-latin;\\n\\n\\t\\t\\t\\t& ol {\\n\\t\\t\\t\\t\\tlist-style-type: upper-roman;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\\n.ck-content ul {\\n\\tlist-style-type: disc;\\n\\n\\t& ul {\\n\\t\\tlist-style-type: circle;\\n\\n\\t\\t& ul {\\n\\t\\t\\tlist-style-type: square;\\n\\n\\t\\t\\t& ul {\\n\\t\\t\\t\\tlist-style-type: square;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-list-properties.ck-list-properties_without-styles{padding:var(--ck-spacing-large)}.ck.ck-list-properties.ck-list-properties_without-styles>*{min-width:14em}.ck.ck-list-properties.ck-list-properties_without-styles>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-list-styles-list{grid-template-columns:repeat(4,auto)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible{border-top:1px solid var(--ck-color-base-border)}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*{width:100%}.ck.ck-list-properties.ck-list-properties_with-numbered-properties>.ck-collapsible>.ck-collapsible__children>*+*{margin-top:var(--ck-spacing-standard)}.ck.ck-list-properties .ck.ck-numbered-list-properties__start-index .ck-input{min-width:auto;width:100%}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order{background:transparent;margin-bottom:calc(var(--ck-spacing-tiny)*-1);padding-left:0;padding-right:0}.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:active,.ck.ck-list-properties .ck.ck-numbered-list-properties__reversed-order:hover{background:none;border-color:transparent;box-shadow:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-list/listproperties.css\"],\"names\":[],\"mappings\":\"AAOC,yDACC,+BASD,CAPC,2DACC,cAKD,CAHC,6DACC,qCACD,CASD,wFACC,oCACD,CAGA,mFACC,gDAWD,CARE,+GACC,UAKD,CAHC,iHACC,qCACD,CAMJ,8EACC,cAAe,CACf,UACD,CAEA,uEACC,sBAAuB,CAGvB,6CAAgD,CAFhD,cAAe,CACf,eAQD,CALC,2JAGC,eAAgB,CADhB,wBAAyB,CADzB,eAGD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-list-properties {\\n\\t/* When there are no list styles and there is no collapsible. */\\n\\t&.ck-list-properties_without-styles {\\n\\t\\tpadding: var(--ck-spacing-large);\\n\\n\\t\\t& > * {\\n\\t\\t\\tmin-width: 14em;\\n\\n\\t\\t\\t& + * {\\n\\t\\t\\t\\tmargin-top: var(--ck-spacing-standard);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t/*\\n\\t * When the numbered list property fields (start at, reversed) should be displayed,\\n\\t * more horizontal space is needed. Reconfigure the style grid to create that space.\\n\\t */\\n\\t&.ck-list-properties_with-numbered-properties {\\n\\t\\t& > .ck-list-styles-list {\\n\\t\\t\\tgrid-template-columns: repeat( 4, auto );\\n\\t\\t}\\n\\n\\t\\t/* When list styles are rendered and property fields are in a collapsible. */\\n\\t\\t& > .ck-collapsible {\\n\\t\\t\\tborder-top: 1px solid var(--ck-color-base-border);\\n\\n\\t\\t\\t& > .ck-collapsible__children {\\n\\t\\t\\t\\t& > * {\\n\\t\\t\\t\\t\\twidth: 100%;\\n\\n\\t\\t\\t\\t\\t& + * {\\n\\t\\t\\t\\t\\t\\tmargin-top: var(--ck-spacing-standard);\\n\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t& .ck.ck-numbered-list-properties__start-index .ck-input {\\n\\t\\tmin-width: auto;\\n\\t\\twidth: 100%;\\n\\t}\\n\\n\\t& .ck.ck-numbered-list-properties__reversed-order {\\n\\t\\tbackground: transparent;\\n\\t\\tpadding-left: 0;\\n\\t\\tpadding-right: 0;\\n\\t\\tmargin-bottom: calc(-1 * var(--ck-spacing-tiny));\\n\\n\\t\\t&:active, &:hover {\\n\\t\\t\\tbox-shadow: none;\\n\\t\\t\\tborder-color: transparent;\\n\\t\\t\\tbackground: none;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-list-styles-list{display:grid}:root{--ck-list-style-button-size:44px}.ck.ck-list-styles-list{column-gap:var(--ck-spacing-medium);grid-template-columns:repeat(3,auto);padding:var(--ck-spacing-large);row-gap:var(--ck-spacing-medium)}.ck.ck-list-styles-list .ck-button{box-sizing:content-box;margin:0;padding:0}.ck.ck-list-styles-list .ck-button,.ck.ck-list-styles-list .ck-button .ck-icon{height:var(--ck-list-style-button-size);width:var(--ck-list-style-button-size)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-list/theme/liststyles.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-list/liststyles.css\"],\"names\":[],\"mappings\":\"AAKA,wBACC,YACD,CCFA,MACC,gCACD,CAEA,wBAGC,mCAAoC,CAFpC,oCAAwC,CAGxC,+BAAgC,CAFhC,gCA4BD,CAxBC,mCAiBC,sBAAuB,CAPvB,QAAS,CANT,SAmBD,CAJC,+EAhBA,uCAAwC,CADxC,sCAoBA\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-list-styles-list {\\n\\tdisplay: grid;\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-list-style-button-size: 44px;\\n}\\n\\n.ck.ck-list-styles-list {\\n\\tgrid-template-columns: repeat( 3, auto );\\n\\trow-gap: var(--ck-spacing-medium);\\n\\tcolumn-gap: var(--ck-spacing-medium);\\n\\tpadding: var(--ck-spacing-large);\\n\\n\\t& .ck-button {\\n\\t\\t/* Make the button look like a thumbnail (the icon \\\"takes it all\\\"). */\\n\\t\\twidth: var(--ck-list-style-button-size);\\n\\t\\theight: var(--ck-list-style-button-size);\\n\\t\\tpadding: 0;\\n\\n\\t\\t/*\\n\\t\\t * Buttons are aligned by the grid so disable default button margins to not collide with the\\n\\t\\t * gaps in the grid.\\n\\t\\t */\\n\\t\\tmargin: 0;\\n\\n\\t\\t/*\\n\\t\\t * Make sure the button border (which is displayed on focus, BTW) does not steal pixels\\n\\t\\t * from the button dimensions and, as a result, decrease the size of the icon\\n\\t\\t * (which becomes blurry as it scales down).\\n\\t\\t */\\n\\t\\tbox-sizing: content-box;\\n\\n\\t\\t& .ck-icon {\\n\\t\\t\\twidth: var(--ck-list-style-button-size);\\n\\t\\t\\theight: var(--ck-list-style-button-size);\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-todo-list-checkmark-size:16px}.ck-content .todo-list{list-style:none}.ck-content .todo-list li{margin-bottom:5px}.ck-content .todo-list li .todo-list{margin-top:5px}.ck-content .todo-list .todo-list__label>input{-webkit-appearance:none;border:0;display:inline-block;height:var(--ck-todo-list-checkmark-size);left:-25px;margin-left:0;margin-right:-15px;position:relative;right:0;vertical-align:middle;width:var(--ck-todo-list-checkmark-size)}.ck-content .todo-list .todo-list__label>input:before{border:1px solid #333;border-radius:2px;box-sizing:border-box;content:\\\"\\\";display:block;height:100%;position:absolute;transition:box-shadow .25s ease-in-out,background .25s ease-in-out,border .25s ease-in-out;width:100%}.ck-content .todo-list .todo-list__label>input:after{border-color:transparent;border-style:solid;border-width:0 calc(var(--ck-todo-list-checkmark-size)/8) calc(var(--ck-todo-list-checkmark-size)/8) 0;box-sizing:content-box;content:\\\"\\\";display:block;height:calc(var(--ck-todo-list-checkmark-size)/2.6);left:calc(var(--ck-todo-list-checkmark-size)/3);pointer-events:none;position:absolute;top:calc(var(--ck-todo-list-checkmark-size)/5.3);transform:rotate(45deg);width:calc(var(--ck-todo-list-checkmark-size)/5.3)}.ck-content .todo-list .todo-list__label>input[checked]:before{background:#26ab33;border-color:#26ab33}.ck-content .todo-list .todo-list__label>input[checked]:after{border-color:#fff}.ck-content .todo-list .todo-list__label .todo-list__label__description{vertical-align:middle}[dir=rtl] .todo-list .todo-list__label>input{left:0;margin-left:-15px;margin-right:0;right:-25px}.ck-editor__editable .todo-list .todo-list__label>input{cursor:pointer}.ck-editor__editable .todo-list .todo-list__label>input:hover:before{box-shadow:0 0 0 5px rgba(0,0,0,.1)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-list/theme/todolist.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,kCACD,CAEA,uBACC,eA0ED,CAxEC,0BACC,iBAKD,CAHC,qCACC,cACD,CAIA,+CACC,uBAAwB,CAQxB,QAAS,CAPT,oBAAqB,CAGrB,yCAA0C,CAO1C,UAAW,CAGX,aAAc,CAFd,kBAAmB,CAVnB,iBAAkB,CAWlB,OAAQ,CARR,qBAAsB,CAFtB,wCAqDD,CAxCC,sDAOC,qBAAiC,CACjC,iBAAkB,CALlB,qBAAsB,CACtB,UAAW,CAHX,aAAc,CAKd,WAAY,CAJZ,iBAAkB,CAOlB,0FAAgG,CAJhG,UAKD,CAEA,qDAaC,wBAAyB,CADzB,kBAAmB,CAEnB,sGAA+G,CAX/G,sBAAuB,CAEvB,UAAW,CAJX,aAAc,CAUd,mDAAwD,CAHxD,+CAAoD,CAJpD,mBAAoB,CAFpB,iBAAkB,CAOlB,gDAAqD,CAMrD,uBAAwB,CALxB,kDAMD,CAGC,+DACC,kBAA8B,CAC9B,oBACD,CAEA,8DACC,iBACD,CAIF,wEACC,qBACD,CAKF,6CACC,MAAO,CAGP,iBAAkB,CAFlB,cAAe,CACf,WAED,CAMA,wDACC,cAKD,CAHC,qEACC,mCACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-todo-list-checkmark-size: 16px;\\n}\\n\\n.ck-content .todo-list {\\n\\tlist-style: none;\\n\\n\\t& li {\\n\\t\\tmargin-bottom: 5px;\\n\\n\\t\\t& .todo-list {\\n\\t\\t\\tmargin-top: 5px;\\n\\t\\t}\\n\\t}\\n\\n\\t& .todo-list__label {\\n\\t\\t& > input {\\n\\t\\t\\t-webkit-appearance: none;\\n\\t\\t\\tdisplay: inline-block;\\n\\t\\t\\tposition: relative;\\n\\t\\t\\twidth: var(--ck-todo-list-checkmark-size);\\n\\t\\t\\theight: var(--ck-todo-list-checkmark-size);\\n\\t\\t\\tvertical-align: middle;\\n\\n\\t\\t\\t/* Needed on iOS */\\n\\t\\t\\tborder: 0;\\n\\n\\t\\t\\t/* LTR styles */\\n\\t\\t\\tleft: -25px;\\n\\t\\t\\tmargin-right: -15px;\\n\\t\\t\\tright: 0;\\n\\t\\t\\tmargin-left: 0;\\n\\n\\t\\t\\t&::before {\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t\\tposition: absolute;\\n\\t\\t\\t\\tbox-sizing: border-box;\\n\\t\\t\\t\\tcontent: '';\\n\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t\\theight: 100%;\\n\\t\\t\\t\\tborder: 1px solid hsl(0, 0%, 20%);\\n\\t\\t\\t\\tborder-radius: 2px;\\n\\t\\t\\t\\ttransition: 250ms ease-in-out box-shadow, 250ms ease-in-out background, 250ms ease-in-out border;\\n\\t\\t\\t}\\n\\n\\t\\t\\t&::after {\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t\\tposition: absolute;\\n\\t\\t\\t\\tbox-sizing: content-box;\\n\\t\\t\\t\\tpointer-events: none;\\n\\t\\t\\t\\tcontent: '';\\n\\n\\t\\t\\t\\t/* Calculate tick position, size and border-width proportional to the checkmark size. */\\n\\t\\t\\t\\tleft: calc( var(--ck-todo-list-checkmark-size) / 3 );\\n\\t\\t\\t\\ttop: calc( var(--ck-todo-list-checkmark-size) / 5.3 );\\n\\t\\t\\t\\twidth: calc( var(--ck-todo-list-checkmark-size) / 5.3 );\\n\\t\\t\\t\\theight: calc( var(--ck-todo-list-checkmark-size) / 2.6 );\\n\\t\\t\\t\\tborder-style: solid;\\n\\t\\t\\t\\tborder-color: transparent;\\n\\t\\t\\t\\tborder-width: 0 calc( var(--ck-todo-list-checkmark-size) / 8 ) calc( var(--ck-todo-list-checkmark-size) / 8 ) 0;\\n\\t\\t\\t\\ttransform: rotate(45deg);\\n\\t\\t\\t}\\n\\n\\t\\t\\t&[checked] {\\n\\t\\t\\t\\t&::before {\\n\\t\\t\\t\\t\\tbackground: hsl(126, 64%, 41%);\\n\\t\\t\\t\\t\\tborder-color: hsl(126, 64%, 41%);\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t&::after {\\n\\t\\t\\t\\t\\tborder-color: hsl(0, 0%, 100%);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t& .todo-list__label__description {\\n\\t\\t\\tvertical-align: middle;\\n\\t\\t}\\n\\t}\\n}\\n\\n/* RTL styles */\\n[dir=\\\"rtl\\\"] .todo-list .todo-list__label > input {\\n\\tleft: 0;\\n\\tmargin-right: 0;\\n\\tright: -25px;\\n\\tmargin-left: -15px;\\n}\\n\\n/*\\n * To-do list should be interactive only during the editing\\n * (https://github.com/ckeditor/ckeditor5/issues/2090).\\n */\\n.ck-editor__editable .todo-list .todo-list__label > input {\\n\\tcursor: pointer;\\n\\n\\t&:hover::before {\\n\\t\\tbox-shadow: 0 0 0 5px hsla(0, 0%, 0%, 0.1);\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content .media{clear:both;display:block;margin:.9em 0;min-width:15em}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaembed.css\"],\"names\":[],\"mappings\":\"AAKA,mBAGC,UAAW,CASX,aAAc,CAJd,aAAe,CAQf,cACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content .media {\\n\\t/* Don't allow floated content overlap the media.\\n\\thttps://github.com/ckeditor/ckeditor5-media-embed/issues/53 */\\n\\tclear: both;\\n\\n\\t/* Make sure there is some space between the content and the media. */\\n\\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\\n\\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\\n\\tmargin: 0.9em 0;\\n\\n\\t/* Make sure media is not overriden with Bootstrap default `flex` value.\\n\\tSee: https://github.com/ckeditor/ckeditor5/issues/1373. */\\n\\tdisplay: block;\\n\\n\\t/* Give the media some minimal width in the content to prevent them\\n\\tfrom being \\\"squashed\\\" in tight spaces, e.g. in table cells (#44) */\\n\\tmin-width: 15em;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-media__wrapper .ck-media__placeholder{align-items:center;display:flex;flex-direction:column}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{display:block;overflow:hidden}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"goo.gl/maps\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"google.com/maps\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"maps.app.goo.gl\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"maps.google.com\\\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder){pointer-events:none}.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{background:var(--ck-color-base-foreground);padding:calc(var(--ck-spacing-standard)*3)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{background-position:50%;background-size:cover;height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);min-width:var(--ck-media-embed-placeholder-icon-size)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{height:100%;width:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);font-style:italic;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*=\\\"open.spotify.com\\\"]{max-height:380px;max-width:300px}.ck-media__wrapper[data-oembed-url*=\\\"goo.gl/maps\\\"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*=\\\"google.com/maps\\\"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*=\\\"maps.app.goo.gl\\\"] .ck-media__placeholder__icon,.ck-media__wrapper[data-oembed-url*=\\\"maps.google.com\\\"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Im0yMDYuNDc3IDI2MC45LTI4Ljk4NyAyOC45ODdhNS4yMTggNS4yMTggMCAwIDAgMy43OCAxLjYxaDQ5LjYyMWMxLjY5NCAwIDMuMTktLjc5OCA0LjE0Ni0yLjAzN3oiIGZpbGw9IiM1Yzg4YzUiLz48cGF0aCBkPSJNMjI2Ljc0MiAyMjIuOTg4Yy05LjI2NiAwLTE2Ljc3NyA3LjE3LTE2Ljc3NyAxNi4wMTQuMDA3IDIuNzYyLjY2MyA1LjQ3NCAyLjA5MyA3Ljg3NS40My43MDMuODMgMS40MDggMS4xOSAyLjEwNy4zMzMuNTAyLjY1IDEuMDA1Ljk1IDEuNTA4LjM0My40NzcuNjczLjk1Ny45ODggMS40NCAxLjMxIDEuNzY5IDIuNSAzLjUwMiAzLjYzNyA1LjE2OC43OTMgMS4yNzUgMS42ODMgMi42NCAyLjQ2NiAzLjk5IDIuMzYzIDQuMDk0IDQuMDA3IDguMDkyIDQuNiAxMy45MTR2LjAxMmMuMTgyLjQxMi41MTYuNjY2Ljg3OS42NjcuNDAzLS4wMDEuNzY4LS4zMTQuOTMtLjc5OS42MDMtNS43NTYgMi4yMzgtOS43MjkgNC41ODUtMTMuNzk0Ljc4Mi0xLjM1IDEuNjczLTIuNzE1IDIuNDY1LTMuOTkgMS4xMzctMS42NjYgMi4zMjgtMy40IDMuNjM4LTUuMTY5LjMxNS0uNDgyLjY0NS0uOTYyLjk4OC0xLjQzOS4zLS41MDMuNjE3LTEuMDA2Ljk1LTEuNTA4LjM1OS0uNy43Ni0xLjQwNCAxLjE5LTIuMTA3IDEuNDI2LTIuNDAyIDItNS4xMTQgMi4wMDQtNy44NzUgMC04Ljg0NC03LjUxMS0xNi4wMTQtMTYuNzc2LTE2LjAxNHoiIGZpbGw9IiNkZDRiM2UiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PGVsbGlwc2Ugcnk9IjUuNTY0IiByeD0iNS44MjgiIGN5PSIyMzkuMDAyIiBjeD0iMjI2Ljc0MiIgZmlsbD0iIzgwMmQyNyIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMTkwLjMwMSAyMzcuMjgzYy00LjY3IDAtOC40NTcgMy44NTMtOC40NTcgOC42MDZzMy43ODYgOC42MDcgOC40NTcgOC42MDdjMy4wNDMgMCA0LjgwNi0uOTU4IDYuMzM3LTIuNTE2IDEuNTMtMS41NTcgMi4wODctMy45MTMgMi4wODctNi4yOSAwLS4zNjItLjAyMy0uNzIyLS4wNjQtMS4wNzloLTguMjU3djMuMDQzaDQuODVjLS4xOTcuNzU5LS41MzEgMS40NS0xLjA1OCAxLjk4Ni0uOTQyLjk1OC0yLjAyOCAxLjU0OC0zLjkwMSAxLjU0OC0yLjg3NiAwLTUuMjA4LTIuMzcyLTUuMjA4LTUuMjk5IDAtMi45MjYgMi4zMzItNS4yOTkgNS4yMDgtNS4yOTkgMS4zOTkgMCAyLjYxOC40MDcgMy41ODQgMS4yOTNsMi4zODEtMi4zOGMwLS4wMDItLjAwMy0uMDA0LS4wMDQtLjAwNS0xLjU4OC0xLjUyNC0zLjYyLTIuMjE1LTUuOTU1LTIuMjE1em00LjQzIDUuNjYuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0ibTIxNS4xODQgMjUxLjkyOS03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVhNS4yMzMgNS4yMzMgMCAwIDAgLjQ0OS0yLjEyM3YtMzEuMTY1Yy0uNDY5LjY3NS0uOTM0IDEuMzQ5LTEuMzgyIDIuMDA1LS43OTIgMS4yNzUtMS42ODIgMi42NC0yLjQ2NSAzLjk5LTIuMzQ3IDQuMDY1LTMuOTgyIDguMDM4LTQuNTg1IDEzLjc5NC0uMTYyLjQ4NS0uNTI3Ljc5OC0uOTMuNzk5LS4zNjMtLjAwMS0uNjk3LS4yNTUtLjg3OS0uNjY3di0uMDEyYy0uNTkzLTUuODIyLTIuMjM3LTkuODItNC42LTEzLjkxNC0uNzgzLTEuMzUtMS42NzMtMi43MTUtMi40NjYtMy45OS0xLjEzNy0xLjY2Ni0yLjMyNy0zLjQtMy42MzctNS4xNjlsLS4wMDItLjAwM3oiIGZpbGw9IiNjM2MzYzMiLz48cGF0aCBkPSJtMjEyLjk4MyAyNDguNDk1LTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOCA1LjIzOGgxLjAxNWwzNS42NjYtMzUuNjY2YTEzNi4yNzUgMTM2LjI3NSAwIDAgMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAgMC0uOTg5LTEuNDQgMzUuMTI3IDM1LjEyNyAwIDAgMC0uOTUtMS41MDhjLS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJtMjExLjk5OCAyNjEuMDgzLTYuMTUyIDYuMTUxIDI0LjI2NCAyNC4yNjRoLjc4MWE1LjIyNyA1LjIyNyAwIDAgMCA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c7,#b800b1,#f50000)}.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OVptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OVoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzNabTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1Wk00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0MDAgNDAwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIHN0eWxlPSJmaWxsOiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaembedediting.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-media-embed/mediaembedediting.css\"],\"names\":[],\"mappings\":\"AAMC,0CAGC,kBAAmB,CAFnB,YAAa,CACb,qBAcD,CAXC,sEAEC,cAAe,CAEf,iBAMD,CAJC,wGAEC,aAAc,CADd,eAED,CAWD,6kBACC,YACD,CAMF,wFACC,mBACD,CAIA,mGACC,mBACD,CC1CA,MACC,0CAA2C,CAE3C,mDAA4D,CAC5D,2EACD,CAEA,mBACC,aA+FD,CA7FC,0CAEC,0CAA2C,CAD3C,0CA6BD,CA1BC,uEAIC,uBAA2B,CAC3B,qBAAsB,CAHtB,kDAAmD,CACnD,qCAAsC,CAFtC,qDAUD,CAJC,gFAEC,WAAY,CADZ,UAED,CAGD,4EACC,sDAAuD,CAGvD,iBAAkB,CADlB,iBAAkB,CAElB,sBAAuB,CAHvB,kBAUD,CALC,kFACC,4DAA6D,CAC7D,cAAe,CACf,yBACD,CAIF,wDAEC,gBAAiB,CADjB,eAED,CAEA,4UAIC,wvGACD,CAEA,2EACC,kBAaD,CAXC,wGACC,orBACD,CAEA,6GACC,UAKD,CAHC,mHACC,UACD,CAIF,4EACC,2DAcD,CAZC,yGACC,4jHACD,CAGA,8GACC,aAKD,CAHC,oHACC,UACD,CAIF,6EAEC,iDAaD,CAXC,0GACC,wiCACD,CAEA,+GACC,aAKD,CAHC,qHACC,UACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-media__wrapper {\\n\\t& .ck-media__placeholder {\\n\\t\\tdisplay: flex;\\n\\t\\tflex-direction: column;\\n\\t\\talign-items: center;\\n\\n\\t\\t& .ck-media__placeholder__url {\\n\\t\\t\\t/* Otherwise the URL will overflow when the content is very narrow. */\\n\\t\\t\\tmax-width: 100%;\\n\\n\\t\\t\\tposition: relative;\\n\\n\\t\\t\\t& .ck-media__placeholder__url__text {\\n\\t\\t\\t\\toverflow: hidden;\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t&[data-oembed-url*=\\\"twitter.com\\\"],\\n\\t&[data-oembed-url*=\\\"google.com/maps\\\"],\\n\\t&[data-oembed-url*=\\\"goo.gl/maps\\\"],\\n\\t&[data-oembed-url*=\\\"maps.google.com\\\"],\\n\\t&[data-oembed-url*=\\\"maps.app.goo.gl\\\"],\\n\\t&[data-oembed-url*=\\\"facebook.com\\\"],\\n\\t&[data-oembed-url*=\\\"instagram.com\\\"] {\\n\\t\\t& .ck-media__placeholder__icon * {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}\\n}\\n\\n/* Disable all mouse interaction as long as the editor is not read–only.\\n   https://github.com/ckeditor/ckeditor5-media-embed/issues/58 */\\n.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper > *:not(.ck-media__placeholder) {\\n\\tpointer-events: none;\\n}\\n\\n/* Disable all mouse interaction when the widget is not selected (e.g. to avoid opening links by accident).\\n   https://github.com/ckeditor/ckeditor5-media-embed/issues/18 */\\n.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder {\\n\\tpointer-events: none;\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-media-embed-placeholder-icon-size: 3em;\\n\\n\\t--ck-color-media-embed-placeholder-url-text: hsl(0, 0%, 46%);\\n\\t--ck-color-media-embed-placeholder-url-text-hover: var(--ck-color-base-text);\\n}\\n\\n.ck-media__wrapper {\\n\\tmargin: 0 auto;\\n\\n\\t& .ck-media__placeholder {\\n\\t\\tpadding: calc( 3 * var(--ck-spacing-standard) );\\n\\t\\tbackground: var(--ck-color-base-foreground);\\n\\n\\t\\t& .ck-media__placeholder__icon {\\n\\t\\t\\tmin-width: var(--ck-media-embed-placeholder-icon-size);\\n\\t\\t\\theight: var(--ck-media-embed-placeholder-icon-size);\\n\\t\\t\\tmargin-bottom: var(--ck-spacing-large);\\n\\t\\t\\tbackground-position: center;\\n\\t\\t\\tbackground-size: cover;\\n\\n\\t\\t\\t& .ck-icon {\\n\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t\\theight: 100%;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t& .ck-media__placeholder__url__text {\\n\\t\\t\\tcolor: var(--ck-color-media-embed-placeholder-url-text);\\n\\t\\t\\twhite-space: nowrap;\\n\\t\\t\\ttext-align: center;\\n\\t\\t\\tfont-style: italic;\\n\\t\\t\\ttext-overflow: ellipsis;\\n\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\tcolor: var(--ck-color-media-embed-placeholder-url-text-hover);\\n\\t\\t\\t\\tcursor: pointer;\\n\\t\\t\\t\\ttext-decoration: underline;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t&[data-oembed-url*=\\\"open.spotify.com\\\"] {\\n\\t\\tmax-width: 300px;\\n\\t\\tmax-height: 380px;\\n\\t}\\n\\n\\t&[data-oembed-url*=\\\"google.com/maps\\\"] .ck-media__placeholder__icon,\\n\\t&[data-oembed-url*=\\\"goo.gl/maps\\\"] .ck-media__placeholder__icon,\\n\\t&[data-oembed-url*=\\\"maps.google.com\\\"] .ck-media__placeholder__icon,\\n\\t&[data-oembed-url*=\\\"maps.app.goo.gl\\\"] .ck-media__placeholder__icon {\\n\\t\\tbackground-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMCAwIDMuNzggMS42MWg0OS42MjFjMS42OTQgMCAzLjE5LS43OTggNC4xNDYtMi4wMzd6IiBmaWxsPSIjNWM4OGM1Ii8+PHBhdGggZD0iTTIyNi43NDIgMjIyLjk4OGMtOS4yNjYgMC0xNi43NzcgNy4xNy0xNi43NzcgMTYuMDE0LjAwNyAyLjc2Mi42NjMgNS40NzQgMi4wOTMgNy44NzUuNDMuNzAzLjgzIDEuNDA4IDEuMTkgMi4xMDcuMzMzLjUwMi42NSAxLjAwNS45NSAxLjUwOC4zNDMuNDc3LjY3My45NTcuOTg4IDEuNDQgMS4zMSAxLjc2OSAyLjUgMy41MDIgMy42MzcgNS4xNjguNzkzIDEuMjc1IDEuNjgzIDIuNjQgMi40NjYgMy45OSAyLjM2MyA0LjA5NCA0LjAwNyA4LjA5MiA0LjYgMTMuOTE0di4wMTJjLjE4Mi40MTIuNTE2LjY2Ni44NzkuNjY3LjQwMy0uMDAxLjc2OC0uMzE0LjkzLS43OTkuNjAzLTUuNzU2IDIuMjM4LTkuNzI5IDQuNTg1LTEzLjc5NC43ODItMS4zNSAxLjY3My0yLjcxNSAyLjQ2NS0zLjk5IDEuMTM3LTEuNjY2IDIuMzI4LTMuNCAzLjYzOC01LjE2OS4zMTUtLjQ4Mi42NDUtLjk2Mi45ODgtMS40MzkuMy0uNTAzLjYxNy0xLjAwNi45NS0xLjUwOC4zNTktLjcuNzYtMS40MDQgMS4xOS0yLjEwNyAxLjQyNi0yLjQwMiAyLTUuMTE0IDIuMDA0LTcuODc1IDAtOC44NDQtNy41MTEtMTYuMDE0LTE2Ljc3Ni0xNi4wMTR6IiBmaWxsPSIjZGQ0YjNlIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxlbGxpcHNlIHJ5PSI1LjU2NCIgcng9IjUuODI4IiBjeT0iMjM5LjAwMiIgY3g9IjIyNi43NDIiIGZpbGw9IiM4MDJkMjciIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTE5MC4zMDEgMjM3LjI4M2MtNC42NyAwLTguNDU3IDMuODUzLTguNDU3IDguNjA2czMuNzg2IDguNjA3IDguNDU3IDguNjA3YzMuMDQzIDAgNC44MDYtLjk1OCA2LjMzNy0yLjUxNiAxLjUzLTEuNTU3IDIuMDg3LTMuOTEzIDIuMDg3LTYuMjkgMC0uMzYyLS4wMjMtLjcyMi0uMDY0LTEuMDc5aC04LjI1N3YzLjA0M2g0Ljg1Yy0uMTk3Ljc1OS0uNTMxIDEuNDUtMS4wNTggMS45ODYtLjk0Mi45NTgtMi4wMjggMS41NDgtMy45MDEgMS41NDgtMi44NzYgMC01LjIwOC0yLjM3Mi01LjIwOC01LjI5OSAwLTIuOTI2IDIuMzMyLTUuMjk5IDUuMjA4LTUuMjk5IDEuMzk5IDAgMi42MTguNDA3IDMuNTg0IDEuMjkzbDIuMzgxLTIuMzhjMC0uMDAyLS4wMDMtLjAwNC0uMDA0LS4wMDUtMS41ODgtMS41MjQtMy42Mi0yLjIxNS01Ljk1NS0yLjIxNXptNC40MyA1LjY2bC4wMDMuMDA2di0uMDAzeiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjE1LjE4NCAyNTEuOTI5bC03Ljk4IDcuOTc5IDI4LjQ3NyAyOC40NzVjLjI4Ny0uNjQ5LjQ0OS0xLjM2Ni40NDktMi4xMjN2LTMxLjE2NWMtLjQ2OS42NzUtLjkzNCAxLjM0OS0xLjM4MiAyLjAwNS0uNzkyIDEuMjc1LTEuNjgyIDIuNjQtMi40NjUgMy45OS0yLjM0NyA0LjA2NS0zLjk4MiA4LjAzOC00LjU4NSAxMy43OTQtLjE2Mi40ODUtLjUyNy43OTgtLjkzLjc5OS0uMzYzLS4wMDEtLjY5Ny0uMjU1LS44NzktLjY2N3YtLjAxMmMtLjU5My01LjgyMi0yLjIzNy05LjgyLTQuNi0xMy45MTQtLjc4My0xLjM1LTEuNjczLTIuNzE1LTIuNDY2LTMuOTktMS4xMzctMS42NjYtMi4zMjctMy40LTMuNjM3LTUuMTY5bC0uMDAyLS4wMDN6IiBmaWxsPSIjYzNjM2MzIi8+PHBhdGggZD0iTTIxMi45ODMgMjQ4LjQ5NWwtMzYuOTUyIDM2Ljk1M3YuODEyYTUuMjI3IDUuMjI3IDAgMCAwIDUuMjM4IDUuMjM4aDEuMDE1bDM1LjY2Ni0zNS42NjZhMTM2LjI3NSAxMzYuMjc1IDAgMCAwLTIuNzY0LTMuOSAzNy41NzUgMzcuNTc1IDAgMCAwLS45ODktMS40NGMtLjI5OS0uNTAzLS42MTYtMS4wMDYtLjk1LTEuNTA4LS4wODMtLjE2Mi0uMTc2LS4zMjYtLjI2NC0uNDg5eiIgZmlsbD0iI2ZkZGM0ZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48cGF0aCBkPSJNMjExLjk5OCAyNjEuMDgzbC02LjE1MiA2LjE1MSAyNC4yNjQgMjQuMjY0aC43ODFhNS4yMjcgNS4yMjcgMCAwIDAgNS4yMzktNS4yMzh2LTEuMDQ1eiIgZmlsbD0iI2ZmZiIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48L2c+PC9zdmc+);\\n\\t}\\n\\n\\t&[data-oembed-url*=\\\"facebook.com\\\"] .ck-media__placeholder {\\n\\t\\tbackground: hsl(220, 46%, 48%);\\n\\n\\t\\t& .ck-media__placeholder__icon {\\n\\t\\t\\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIxMDI0cHgiIGhlaWdodD0iMTAyNHB4IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPiAgICAgICAgPHRpdGxlPkZpbGwgMTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9ImZMb2dvX1doaXRlIiBmaWxsPSIjRkZGRkZFIj4gICAgICAgICAgICA8cGF0aCBkPSJNOTY3LjQ4NCwwIEw1Ni41MTcsMCBDMjUuMzA0LDAgMCwyNS4zMDQgMCw1Ni41MTcgTDAsOTY3LjQ4MyBDMCw5OTguNjk0IDI1LjI5NywxMDI0IDU2LjUyMiwxMDI0IEw1NDcsMTAyNCBMNTQ3LDYyOCBMNDE0LDYyOCBMNDE0LDQ3MyBMNTQ3LDQ3MyBMNTQ3LDM1OS4wMjkgQzU0NywyMjYuNzY3IDYyNy43NzMsMTU0Ljc0NyA3NDUuNzU2LDE1NC43NDcgQzgwMi4yNjksMTU0Ljc0NyA4NTAuODQyLDE1OC45NTUgODY1LDE2MC44MzYgTDg2NSwyOTkgTDc4My4zODQsMjk5LjAzNyBDNzE5LjM5MSwyOTkuMDM3IDcwNywzMjkuNTI5IDcwNywzNzQuMjczIEw3MDcsNDczIEw4NjAuNDg3LDQ3MyBMODQwLjUwMSw2MjggTDcwNyw2MjggTDcwNywxMDI0IEw5NjcuNDg0LDEwMjQgQzk5OC42OTcsMTAyNCAxMDI0LDk5OC42OTcgMTAyNCw5NjcuNDg0IEwxMDI0LDU2LjUxNSBDMTAyNCwyNS4zMDMgOTk4LjY5NywwIDk2Ny40ODQsMCIgaWQ9IkZpbGwtMSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+);\\n\\t\\t}\\n\\n\\t\\t& .ck-media__placeholder__url__text {\\n\\t\\t\\tcolor: hsl(220, 100%, 90%);\\n\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\tcolor: hsl(0, 0%, 100%);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t&[data-oembed-url*=\\\"instagram.com\\\"] .ck-media__placeholder {\\n\\t\\tbackground: linear-gradient(-135deg,hsl(246, 100%, 39%),hsl(302, 100%, 36%),hsl(0, 100%, 48%));\\n\\n\\t\\t& .ck-media__placeholder__icon {\\n\\t\\t\\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI1MDRweCIgaGVpZ2h0PSI1MDRweCIgdmlld0JveD0iMCAwIDUwNCA1MDQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+ICAgICAgICA8dGl0bGU+Z2x5cGgtbG9nb19NYXkyMDE2PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPiAgICAgICAgPHBvbHlnb24gaWQ9InBhdGgtMSIgcG9pbnRzPSIwIDAuMTU5IDUwMy44NDEgMC4xNTkgNTAzLjg0MSA1MDMuOTQgMCA1MDMuOTQiPjwvcG9seWdvbj4gICAgPC9kZWZzPiAgICA8ZyBpZD0iZ2x5cGgtbG9nb19NYXkyMDE2IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4gICAgICAgIDxnIGlkPSJHcm91cC0zIj4gICAgICAgICAgICA8bWFzayBpZD0ibWFzay0yIiBmaWxsPSJ3aGl0ZSI+ICAgICAgICAgICAgICAgIDx1c2UgeGxpbms6aHJlZj0iI3BhdGgtMSI+PC91c2U+ICAgICAgICAgICAgPC9tYXNrPiAgICAgICAgICAgIDxnIGlkPSJDbGlwLTIiPjwvZz4gICAgICAgICAgICA8cGF0aCBkPSJNMjUxLjkyMSwwLjE1OSBDMTgzLjUwMywwLjE1OSAxNzQuOTI0LDAuNDQ5IDE0OC4wNTQsMS42NzUgQzEyMS4yNCwyLjg5OCAxMDIuOTI3LDcuMTU3IDg2LjkwMywxMy4zODUgQzcwLjMzNywxOS44MjIgNTYuMjg4LDI4LjQzNiA0Mi4yODIsNDIuNDQxIEMyOC4yNzcsNTYuNDQ3IDE5LjY2Myw3MC40OTYgMTMuMjI2LDg3LjA2MiBDNi45OTgsMTAzLjA4NiAyLjczOSwxMjEuMzk5IDEuNTE2LDE0OC4yMTMgQzAuMjksMTc1LjA4MyAwLDE4My42NjIgMCwyNTIuMDggQzAsMzIwLjQ5NyAwLjI5LDMyOS4wNzYgMS41MTYsMzU1Ljk0NiBDMi43MzksMzgyLjc2IDYuOTk4LDQwMS4wNzMgMTMuMjI2LDQxNy4wOTcgQzE5LjY2Myw0MzMuNjYzIDI4LjI3Nyw0NDcuNzEyIDQyLjI4Miw0NjEuNzE4IEM1Ni4yODgsNDc1LjcyMyA3MC4zMzcsNDg0LjMzNyA4Ni45MDMsNDkwLjc3NSBDMTAyLjkyNyw0OTcuMDAyIDEyMS4yNCw1MDEuMjYxIDE0OC4wNTQsNTAyLjQ4NCBDMTc0LjkyNCw1MDMuNzEgMTgzLjUwMyw1MDQgMjUxLjkyMSw1MDQgQzMyMC4zMzgsNTA0IDMyOC45MTcsNTAzLjcxIDM1NS43ODcsNTAyLjQ4NCBDMzgyLjYwMSw1MDEuMjYxIDQwMC45MTQsNDk3LjAwMiA0MTYuOTM4LDQ5MC43NzUgQzQzMy41MDQsNDg0LjMzNyA0NDcuNTUzLDQ3NS43MjMgNDYxLjU1OSw0NjEuNzE4IEM0NzUuNTY0LDQ0Ny43MTIgNDg0LjE3OCw0MzMuNjYzIDQ5MC42MTYsNDE3LjA5NyBDNDk2Ljg0Myw0MDEuMDczIDUwMS4xMDIsMzgyLjc2IDUwMi4zMjUsMzU1Ljk0NiBDNTAzLjU1MSwzMjkuMDc2IDUwMy44NDEsMzIwLjQ5NyA1MDMuODQxLDI1Mi4wOCBDNTAzLjg0MSwxODMuNjYyIDUwMy41NTEsMTc1LjA4MyA1MDIuMzI1LDE0OC4yMTMgQzUwMS4xMDIsMTIxLjM5OSA0OTYuODQzLDEwMy4wODYgNDkwLjYxNiw4Ny4wNjIgQzQ4NC4xNzgsNzAuNDk2IDQ3NS41NjQsNTYuNDQ3IDQ2MS41NTksNDIuNDQxIEM0NDcuNTUzLDI4LjQzNiA0MzMuNTA0LDE5LjgyMiA0MTYuOTM4LDEzLjM4NSBDNDAwLjkxNCw3LjE1NyAzODIuNjAxLDIuODk4IDM1NS43ODcsMS42NzUgQzMyOC45MTcsMC40NDkgMzIwLjMzOCwwLjE1OSAyNTEuOTIxLDAuMTU5IFogTTI1MS45MjEsNDUuNTUgQzMxOS4xODYsNDUuNTUgMzI3LjE1NCw0NS44MDcgMzUzLjcxOCw0Ny4wMTkgQzM3OC4yOCw0OC4xMzkgMzkxLjYxOSw1Mi4yNDMgNDAwLjQ5Niw1NS42OTMgQzQxMi4yNTUsNjAuMjYzIDQyMC42NDcsNjUuNzIyIDQyOS40NjIsNzQuNTM4IEM0MzguMjc4LDgzLjM1MyA0NDMuNzM3LDkxLjc0NSA0NDguMzA3LDEwMy41MDQgQzQ1MS43NTcsMTEyLjM4MSA0NTUuODYxLDEyNS43MiA0NTYuOTgxLDE1MC4yODIgQzQ1OC4xOTMsMTc2Ljg0NiA0NTguNDUsMTg0LjgxNCA0NTguNDUsMjUyLjA4IEM0NTguNDUsMzE5LjM0NSA0NTguMTkzLDMyNy4zMTMgNDU2Ljk4MSwzNTMuODc3IEM0NTUuODYxLDM3OC40MzkgNDUxLjc1NywzOTEuNzc4IDQ0OC4zMDcsNDAwLjY1NSBDNDQzLjczNyw0MTIuNDE0IDQzOC4yNzgsNDIwLjgwNiA0MjkuNDYyLDQyOS42MjEgQzQyMC42NDcsNDM4LjQzNyA0MTIuMjU1LDQ0My44OTYgNDAwLjQ5Niw0NDguNDY2IEMzOTEuNjE5LDQ1MS45MTYgMzc4LjI4LDQ1Ni4wMiAzNTMuNzE4LDQ1Ny4xNCBDMzI3LjE1OCw0NTguMzUyIDMxOS4xOTEsNDU4LjYwOSAyNTEuOTIxLDQ1OC42MDkgQzE4NC42NSw0NTguNjA5IDE3Ni42ODQsNDU4LjM1MiAxNTAuMTIzLDQ1Ny4xNCBDMTI1LjU2MSw0NTYuMDIgMTEyLjIyMiw0NTEuOTE2IDEwMy4zNDUsNDQ4LjQ2NiBDOTEuNTg2LDQ0My44OTYgODMuMTk0LDQzOC40MzcgNzQuMzc5LDQyOS42MjEgQzY1LjU2NCw0MjAuODA2IDYwLjEwNCw0MTIuNDE0IDU1LjUzNCw0MDAuNjU1IEM1Mi4wODQsMzkxLjc3OCA0Ny45OCwzNzguNDM5IDQ2Ljg2LDM1My44NzcgQzQ1LjY0OCwzMjcuMzEzIDQ1LjM5MSwzMTkuMzQ1IDQ1LjM5MSwyNTIuMDggQzQ1LjM5MSwxODQuODE0IDQ1LjY0OCwxNzYuODQ2IDQ2Ljg2LDE1MC4yODIgQzQ3Ljk4LDEyNS43MiA1Mi4wODQsMTEyLjM4MSA1NS41MzQsMTAzLjUwNCBDNjAuMTA0LDkxLjc0NSA2NS41NjMsODMuMzUzIDc0LjM3OSw3NC41MzggQzgzLjE5NCw2NS43MjIgOTEuNTg2LDYwLjI2MyAxMDMuMzQ1LDU1LjY5MyBDMTEyLjIyMiw1Mi4yNDMgMTI1LjU2MSw0OC4xMzkgMTUwLjEyMyw0Ny4wMTkgQzE3Ni42ODcsNDUuODA3IDE4NC42NTUsNDUuNTUgMjUxLjkyMSw0NS41NSBaIiBpZD0iRmlsbC0xIiBmaWxsPSIjRkZGRkZGIiBtYXNrPSJ1cmwoI21hc2stMikiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgICAgIDxwYXRoIGQ9Ik0yNTEuOTIxLDMzNi4wNTMgQzIwNS41NDMsMzM2LjA1MyAxNjcuOTQ3LDI5OC40NTcgMTY3Ljk0NywyNTIuMDggQzE2Ny45NDcsMjA1LjcwMiAyMDUuNTQzLDE2OC4xMDYgMjUxLjkyMSwxNjguMTA2IEMyOTguMjk4LDE2OC4xMDYgMzM1Ljg5NCwyMDUuNzAyIDMzNS44OTQsMjUyLjA4IEMzMzUuODk0LDI5OC40NTcgMjk4LjI5OCwzMzYuMDUzIDI1MS45MjEsMzM2LjA1MyBaIE0yNTEuOTIxLDEyMi43MTUgQzE4MC40NzQsMTIyLjcxNSAxMjIuNTU2LDE4MC42MzMgMTIyLjU1NiwyNTIuMDggQzEyMi41NTYsMzIzLjUyNiAxODAuNDc0LDM4MS40NDQgMjUxLjkyMSwzODEuNDQ0IEMzMjMuMzY3LDM4MS40NDQgMzgxLjI4NSwzMjMuNTI2IDM4MS4yODUsMjUyLjA4IEMzODEuMjg1LDE4MC42MzMgMzIzLjM2NywxMjIuNzE1IDI1MS45MjEsMTIyLjcxNSBaIiBpZD0iRmlsbC00IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgICAgICA8cGF0aCBkPSJNNDE2LjYyNywxMTcuNjA0IEM0MTYuNjI3LDEzNC4zIDQwMy4wOTIsMTQ3LjgzNCAzODYuMzk2LDE0Ny44MzQgQzM2OS43MDEsMTQ3LjgzNCAzNTYuMTY2LDEzNC4zIDM1Ni4xNjYsMTE3LjYwNCBDMzU2LjE2NiwxMDAuOTA4IDM2OS43MDEsODcuMzczIDM4Ni4zOTYsODcuMzczIEM0MDMuMDkyLDg3LjM3MyA0MTYuNjI3LDEwMC45MDggNDE2LjYyNywxMTcuNjA0IiBpZD0iRmlsbC01IiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+ICAgIDwvZz48L3N2Zz4=);\\n\\t\\t}\\n\\n\\t\\t/* stylelint-disable-next-line no-descending-specificity */\\n\\t\\t& .ck-media__placeholder__url__text {\\n\\t\\t\\tcolor: hsl(302, 100%, 94%);\\n\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\tcolor: hsl(0, 0%, 100%);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t&[data-oembed-url*=\\\"twitter.com\\\"] .ck.ck-media__placeholder {\\n\\t\\t/* Use gradient to contrast with focused widget (ckeditor/ckeditor5-media-embed#22). */\\n\\t\\tbackground: linear-gradient( to right, hsl(201, 85%, 70%), hsl(201, 85%, 35%) );\\n\\n\\t\\t& .ck-media__placeholder__icon {\\n\\t\\t\\tbackground-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IldoaXRlIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDQwMCA0MDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDQwMCA0MDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00MDAsMjAwYzAsMTEwLjUtODkuNSwyMDAtMjAwLDIwMFMwLDMxMC41LDAsMjAwUzg5LjUsMCwyMDAsMFM0MDAsODkuNSw0MDAsMjAweiBNMTYzLjQsMzA1LjVjODguNywwLDEzNy4yLTczLjUsMTM3LjItMTM3LjJjMC0yLjEsMC00LjItMC4xLTYuMmM5LjQtNi44LDE3LjYtMTUuMywyNC4xLTI1Yy04LjYsMy44LTE3LjksNi40LTI3LjcsNy42YzEwLTYsMTcuNi0xNS40LDIxLjItMjYuN2MtOS4zLDUuNS0xOS42LDkuNS0zMC42LDExLjdjLTguOC05LjQtMjEuMy0xNS4yLTM1LjItMTUuMmMtMjYuNiwwLTQ4LjIsMjEuNi00OC4yLDQ4LjJjMCwzLjgsMC40LDcuNSwxLjMsMTFjLTQwLjEtMi03NS42LTIxLjItOTkuNC01MC40Yy00LjEsNy4xLTYuNSwxNS40LTYuNSwyNC4yYzAsMTYuNyw4LjUsMzEuNSwyMS41LDQwLjFjLTcuOS0wLjItMTUuMy0yLjQtMjEuOC02YzAsMC4yLDAsMC40LDAsMC42YzAsMjMuNCwxNi42LDQyLjgsMzguNyw0Ny4zYy00LDEuMS04LjMsMS43LTEyLjcsMS43Yy0zLjEsMC02LjEtMC4zLTkuMS0wLjljNi4xLDE5LjIsMjMuOSwzMy4xLDQ1LDMzLjVjLTE2LjUsMTIuOS0zNy4zLDIwLjYtNTkuOSwyMC42Yy0zLjksMC03LjctMC4yLTExLjUtMC43QzExMC44LDI5Ny41LDEzNi4yLDMwNS41LDE2My40LDMwNS41Ii8+PC9zdmc+);\\n\\t\\t}\\n\\n\\t\\t& .ck-media__placeholder__url__text {\\n\\t\\t\\tcolor: hsl(201, 100%, 86%);\\n\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\tcolor: hsl(0, 0%, 100%);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-media-form{align-items:flex-start;display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-field-view{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-field-view{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-media-embed/theme/mediaform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\"],\"names\":[],\"mappings\":\"AAOA,kBAEC,sBAAuB,CADvB,YAAa,CAEb,kBAAmB,CACnB,gBAqBD,CAnBC,yCACC,oBACD,CAEA,4BACC,YACD,CCbA,oCDCD,kBAeE,cAUF,CARE,yCACC,eACD,CAEA,6BACC,cACD,CCtBD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\\\";\\n\\n.ck.ck-media-form {\\n\\tdisplay: flex;\\n\\talign-items: flex-start;\\n\\tflex-direction: row;\\n\\tflex-wrap: nowrap;\\n\\n\\t& .ck-labeled-field-view {\\n\\t\\tdisplay: inline-block;\\n\\t}\\n\\n\\t& .ck-label {\\n\\t\\tdisplay: none;\\n\\t}\\n\\n\\t@mixin ck-media-phone {\\n\\t\\tflex-wrap: wrap;\\n\\n\\t\\t& .ck-labeled-field-view {\\n\\t\\t\\tflex-basis: 100%;\\n\\t\\t}\\n\\n\\t\\t& .ck-button {\\n\\t\\t\\tflex-basis: 50%;\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@define-mixin ck-media-phone {\\n\\t@media screen and (max-width: 600px) {\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content .page-break{align-items:center;clear:both;display:flex;justify-content:center;padding:5px 0;position:relative}.ck-content .page-break:after{border-bottom:2px dashed #c4c4c4;content:\\\"\\\";position:absolute;width:100%}.ck-content .page-break__label{background:#fff;border:1px solid #c4c4c4;border-radius:2px;box-shadow:2px 2px 1px rgba(0,0,0,.15);color:#333;display:block;font-family:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;font-size:.75em;font-weight:700;padding:.3em .6em;position:relative;text-transform:uppercase;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:1}@media print{.ck-content .page-break{padding:0}.ck-content .page-break:after{display:none}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-page-break/theme/pagebreak.css\"],\"names\":[],\"mappings\":\"AAKA,wBAKC,kBAAmB,CAHnB,UAAW,CAEX,YAAa,CAEb,sBAAuB,CAHvB,aAAc,CAFd,iBAaD,CANC,8BAGC,gCAAyC,CAFzC,UAAW,CACX,iBAAkB,CAElB,UACD,CAGD,+BAYC,eAA4B,CAN5B,wBAAiC,CACjC,iBAAkB,CAMlB,sCAA6C,CAF7C,UAAsB,CAPtB,aAAc,CAId,qDAA0D,CAC1D,eAAiB,CACjB,eAAiB,CAPjB,iBAAkB,CAFlB,iBAAkB,CAIlB,wBAAyB,CAWzB,wBAAyB,CACzB,qBAAsB,CACtB,oBAAqB,CACrB,gBAAiB,CAjBjB,SAkBD,CAGA,aACC,wBACC,SAKD,CAHC,8BACC,YACD,CAEF\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content .page-break {\\n\\tposition: relative;\\n\\tclear: both;\\n\\tpadding: 5px 0;\\n\\tdisplay: flex;\\n\\talign-items: center;\\n\\tjustify-content: center;\\n\\n\\t&::after {\\n\\t\\tcontent: '';\\n\\t\\tposition: absolute;\\n\\t\\tborder-bottom: 2px dashed hsl(0, 0%, 77%);\\n\\t\\twidth: 100%;\\n\\t}\\n}\\n\\n.ck-content .page-break__label {\\n\\tposition: relative;\\n\\tz-index: 1;\\n\\tpadding: .3em .6em;\\n\\tdisplay: block;\\n\\ttext-transform: uppercase;\\n\\tborder: 1px solid hsl(0, 0%, 77%);\\n\\tborder-radius: 2px;\\n\\tfont-family: Helvetica, Arial, Tahoma, Verdana, Sans-Serif;\\n\\tfont-size: 0.75em;\\n\\tfont-weight: bold;\\n\\tcolor: hsl(0, 0%, 20%);\\n\\tbackground: hsl(0, 0%, 100%);\\n\\tbox-shadow: 2px 2px 1px hsla(0, 0%, 0%, 0.15);\\n\\n\\t/* Disable the possibility to select the label text by the user. */\\n\\t-webkit-user-select: none;\\n\\t-moz-user-select: none;\\n\\t-ms-user-select: none;\\n\\tuser-select: none;\\n}\\n\\n/* Do not show the page break element inside the print preview window. */\\n@media print {\\n\\t.ck-content .page-break {\\n\\t\\tpadding: 0;\\n\\n\\t\\t&::after {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-source-editing-area{overflow:hidden;position:relative}.ck-source-editing-area textarea,.ck-source-editing-area:after{border:1px solid transparent;font-family:monospace;font-size:var(--ck-font-size-normal);line-height:var(--ck-line-height-base);margin:0;padding:var(--ck-spacing-large);white-space:pre-wrap}.ck-source-editing-area:after{content:attr(data-value) \\\" \\\";display:block;visibility:hidden}.ck-source-editing-area textarea{border-color:var(--ck-color-base-border);border-radius:0;box-sizing:border-box;height:100%;outline:none;overflow:hidden;position:absolute;resize:none;width:100%}.ck-rounded-corners .ck-source-editing-area textarea,.ck-source-editing-area textarea.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck-source-editing-area textarea:not([readonly]):focus{border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-source-editing/theme/sourceediting.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-source-editing/node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-source-editing/node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_focus.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-source-editing/node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css\"],\"names\":[],\"mappings\":\"AASA,wBAEC,eAAgB,CADhB,iBAED,CAEA,+DAIC,4BAA6B,CAG7B,qBAAsB,CADtB,oCAAqC,CADrC,sCAAuC,CAFvC,QAAS,CADT,+BAAgC,CAMhC,oBACD,CAEA,8BACC,4BAA6B,CAE7B,aAAc,CADd,iBAED,CAEA,iCASC,wCAAyC,CC7BzC,eAAgB,CD2BhB,qBAAsB,CAJtB,WAAY,CAEZ,YAAa,CACb,eAAgB,CALhB,iBAAkB,CAGlB,WAAY,CAFZ,UAkBD,CApBA,yGChBE,qCAAsC,CD4BtC,wBAAyB,CACzB,yBAOF,CAJC,uDEpCA,2BAA2B,CCF3B,qCAA8B,CDC9B,YFwCA\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css\\\";\\n@import \\\"@ckeditor/ckeditor5-theme-lark/theme/mixins/_focus.css\\\";\\n@import \\\"@ckeditor/ckeditor5-theme-lark/theme/mixins/_shadow.css\\\";\\n\\n.ck-source-editing-area {\\n\\tposition: relative;\\n\\toverflow: hidden;\\n}\\n\\n.ck-source-editing-area::after,\\n.ck-source-editing-area textarea {\\n\\tpadding: var(--ck-spacing-large);\\n\\tmargin: 0;\\n\\tborder: 1px solid transparent;\\n\\tline-height: var(--ck-line-height-base);\\n\\tfont-size: var(--ck-font-size-normal);\\n\\tfont-family: monospace;\\n\\twhite-space: pre-wrap;\\n}\\n\\n.ck-source-editing-area::after {\\n\\tcontent: attr(data-value) \\\" \\\";\\n\\tvisibility: hidden;\\n\\tdisplay: block;\\n}\\n\\n.ck-source-editing-area textarea {\\n\\tposition: absolute;\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tresize: none;\\n\\toutline: none;\\n\\toverflow: hidden;\\n\\tbox-sizing: border-box;\\n\\n\\tborder-color: var(--ck-color-base-border);\\n\\n\\t@mixin ck-rounded-corners {\\n\\t\\tborder-top-left-radius: 0;\\n\\t\\tborder-top-right-radius: 0;\\n\\t}\\n\\n\\t&:not([readonly]):focus {\\n\\t\\t@mixin ck-focus-ring;\\n\\t\\t@mixin ck-box-shadow var(--ck-inner-shadow);\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/**\\n * Implements rounded corner interface for .ck-rounded-corners class.\\n *\\n * @see $ck-border-radius\\n */\\n@define-mixin ck-rounded-corners {\\n\\tborder-radius: 0;\\n\\n\\t@nest .ck-rounded-corners &,\\n\\t&.ck-rounded-corners {\\n\\t\\tborder-radius: var(--ck-border-radius);\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/**\\n * A visual style of focused element's border.\\n */\\n@define-mixin ck-focus-ring {\\n\\t/* Disable native outline. */\\n\\toutline: none;\\n\\tborder: var(--ck-focus-ring)\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/**\\n * A helper to combine multiple shadows.\\n */\\n@define-mixin ck-box-shadow $shadowA, $shadowB: 0 0 {\\n\\tbox-shadow: $shadowA, $shadowB;\\n}\\n\\n/**\\n * Gives an element a drop shadow so it looks like a floating panel.\\n */\\n@define-mixin ck-drop-shadow {\\n\\t@mixin ck-box-shadow var(--ck-drop-shadow);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active>.ck-button>.ck-button__label{font-style:italic}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-style/style.css\"],\"names\":[],\"mappings\":\"AAKA,iGACC,iBACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-dropdown.ck-style-dropdown.ck-style-dropdown_multiple-active > .ck-button > .ck-button__label {\\n\\tfont-style: italic;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-style-panel-columns:3}.ck.ck-style-panel .ck-style-grid{display:grid;grid-template-columns:repeat(var(--ck-style-panel-columns),auto);justify-content:start}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{display:flex;flex-direction:column;justify-content:space-between}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{align-content:center;align-items:center;display:flex;flex-basis:100%;flex-grow:1;justify-content:flex-start}:root{--ck-style-panel-button-width:120px;--ck-style-panel-button-height:80px;--ck-style-panel-button-label-background:#f0f0f0;--ck-style-panel-button-hover-label-background:#ebebeb;--ck-style-panel-button-hover-border-color:#b3b3b3}.ck.ck-style-panel .ck-style-grid{column-gap:var(--ck-spacing-large);row-gap:var(--ck-spacing-large)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button{--ck-color-button-default-hover-background:var(--ck-color-base-background);--ck-color-button-default-active-background:var(--ck-color-base-background);height:var(--ck-style-panel-button-height);padding:0;width:var(--ck-style-panel-button-width)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-button__label{flex-shrink:0;height:22px;line-height:22px;overflow:hidden;padding:0 var(--ck-spacing-medium);text-overflow:ellipsis;width:100%}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button .ck-style-grid__button__preview{background:var(--ck-color-base-background);border:2px solid var(--ck-color-base-background);opacity:.9;overflow:hidden;padding:var(--ck-spacing-medium);width:100%}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled{--ck-color-button-default-disabled-background:var(--ck-color-base-foreground)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled:not(:focus){border-color:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-disabled .ck-style-grid__button__preview{border-color:var(--ck-color-base-foreground);filter:saturate(.3);opacity:.4}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on{border-color:var(--ck-color-base-active)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on .ck-button__label{box-shadow:0 -1px 0 var(--ck-color-base-active);z-index:1}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button.ck-on:hover{border-color:var(--ck-color-base-active-focus)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on) .ck-button__label{background:var(--ck-style-panel-button-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:not(.ck-on):hover .ck-button__label{background:var(--ck-style-panel-button-hover-label-background)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on){border-color:var(--ck-style-panel-button-hover-border-color)}.ck.ck-style-panel .ck-style-grid .ck-style-grid__button:hover:not(.ck-disabled):not(.ck-on) .ck-style-grid__button__preview{opacity:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-style/theme/stylegrid.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-style/stylegrid.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,0BACD,CAEA,kCACC,YAAa,CACb,gEAAiE,CACjE,qBAgBD,CAdC,yDACC,YAAa,CAEb,qBAAsB,CADtB,6BAWD,CARC,yFAEC,oBAAqB,CAErB,kBAAmB,CAHnB,YAAa,CAKb,eAAgB,CADhB,WAAY,CAFZ,0BAID,CCrBF,MACC,mCAAoC,CACpC,mCAAoC,CACpC,gDAA2D,CAC3D,sDAAiE,CACjE,kDACD,CAEA,kCAEC,kCAAmC,CADnC,+BAmFD,CAhFC,yDACC,0EAA2E,CAC3E,2EAA4E,CAI5E,0CAA2C,CAF3C,SAAU,CACV,wCA0ED,CAtEC,qEACC,4CACD,CAEA,2EAOC,aAAc,CANd,WAAY,CACZ,gBAAiB,CAGjB,eAAgB,CADhB,kCAAmC,CAEnC,sBAAuB,CAHvB,UAKD,CAEA,yFAMC,0CAA2C,CAC3C,gDAAiD,CAJjD,UAAW,CADX,eAAgB,CAGhB,gCAAiC,CAJjC,UAOD,CAEA,qEACC,6EAaD,CAVC,iFACC,0DACD,CAEA,qGAGC,4CAA6C,CAC7C,mBAAoB,CAHpB,UAID,CAGD,+DACC,wCAUD,CARC,iFACC,+CAAgD,CAChD,SACD,CAEA,qEACC,8CACD,CAIA,uFACC,wDACD,CAEA,6FACC,8DACD,CAGD,6FACC,4DAKD,CAHC,6HACC,SACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-style-panel-columns: 3;\\n}\\n\\n.ck.ck-style-panel .ck-style-grid {\\n\\tdisplay: grid;\\n\\tgrid-template-columns: repeat(var(--ck-style-panel-columns),auto);\\n\\tjustify-content: start;\\n\\n\\t& .ck-style-grid__button {\\n\\t\\tdisplay: flex;\\n\\t\\tjustify-content: space-between;\\n\\t\\tflex-direction: column;\\n\\n\\t\\t& .ck-style-grid__button__preview {\\n\\t\\t\\tdisplay: flex;\\n\\t\\t\\talign-content: center;\\n\\t\\t\\tjustify-content: flex-start;\\n\\t\\t\\talign-items: center;\\n\\t\\t\\tflex-grow: 1;\\n\\t\\t\\tflex-basis: 100%;\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-style-panel-button-width: 120px;\\n\\t--ck-style-panel-button-height: 80px;\\n\\t--ck-style-panel-button-label-background: hsl(0, 0%, 94.1%);\\n\\t--ck-style-panel-button-hover-label-background: hsl(0, 0%, 92.1%);\\n\\t--ck-style-panel-button-hover-border-color: hsl(0, 0%, 70%);\\n}\\n\\n.ck.ck-style-panel .ck-style-grid {\\n\\trow-gap: var(--ck-spacing-large);\\n\\tcolumn-gap: var(--ck-spacing-large);\\n\\n\\t& .ck-style-grid__button {\\n\\t\\t--ck-color-button-default-hover-background: var(--ck-color-base-background);\\n\\t\\t--ck-color-button-default-active-background: var(--ck-color-base-background);\\n\\n\\t\\tpadding: 0;\\n\\t\\twidth: var(--ck-style-panel-button-width);\\n\\t\\theight: var(--ck-style-panel-button-height);\\n\\n\\t\\t/* Let default .ck-button :focus styles apply */\\n\\t\\t&:not(:focus) {\\n\\t\\t\\tborder: 1px solid var(--ck-color-base-border);\\n\\t\\t}\\n\\n\\t\\t& .ck-button__label {\\n\\t\\t\\theight: 22px;\\n\\t\\t\\tline-height: 22px;\\n\\t\\t\\twidth: 100%;\\n\\t\\t\\tpadding: 0 var(--ck-spacing-medium);\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\ttext-overflow: ellipsis;\\n\\t\\t\\tflex-shrink: 0;\\n\\t\\t}\\n\\n\\t\\t& .ck-style-grid__button__preview {\\n\\t\\t\\twidth: 100%;\\n\\t\\t\\toverflow: hidden;\\n\\t\\t\\topacity: .9;\\n\\n\\t\\t\\tpadding: var(--ck-spacing-medium);\\n\\t\\t\\tbackground: var(--ck-color-base-background);\\n\\t\\t\\tborder: 2px solid var(--ck-color-base-background);\\n\\t\\t}\\n\\n\\t\\t&.ck-disabled {\\n\\t\\t\\t--ck-color-button-default-disabled-background: var(--ck-color-base-foreground);\\n\\n\\t\\t\\t/* Let default .ck-button :focus styles apply */\\n\\t\\t\\t&:not(:focus) {\\n\\t\\t\\t\\tborder-color: var(--ck-style-panel-button-label-background);\\n\\t\\t\\t}\\n\\n\\t\\t\\t& .ck-style-grid__button__preview {\\n\\t\\t\\t\\topacity: .4;\\n\\n\\t\\t\\t\\tborder-color: var(--ck-color-base-foreground);\\n\\t\\t\\t\\tfilter: saturate(.3);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.ck-on {\\n\\t\\t\\tborder-color: var(--ck-color-base-active);\\n\\n\\t\\t\\t& .ck-button__label {\\n\\t\\t\\t\\tbox-shadow: 0 -1px 0 var(--ck-color-base-active);\\n\\t\\t\\t\\tz-index: 1; /* Stay on top of the preview with the shadow. */\\n\\t\\t\\t}\\n\\n\\t\\t\\t&:hover {\\n\\t\\t\\t\\tborder-color: var(--ck-color-base-active-focus);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&:not(.ck-on) {\\n\\t\\t\\t& .ck-button__label {\\n\\t\\t\\t\\tbackground: var(--ck-style-panel-button-label-background);\\n\\t\\t\\t}\\n\\n\\t\\t\\t&:hover .ck-button__label {\\n\\t\\t\\t\\tbackground: var(--ck-style-panel-button-hover-label-background);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&:hover:not(.ck-disabled):not(.ck-on) {\\n\\t\\t\\tborder-color: var(--ck-style-panel-button-hover-border-color);\\n\\n\\t\\t\\t& .ck-style-grid__button__preview {\\n\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-style-panel .ck-style-panel__style-group>.ck-label{margin:var(--ck-spacing-large) 0}.ck.ck-style-panel .ck-style-panel__style-group:first-child>.ck-label{margin-top:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-style/stylegroup.css\"],\"names\":[],\"mappings\":\"AAMC,0DACC,gCACD,CAGC,sEACC,YACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-style-panel .ck-style-panel__style-group {\\n\\t& > .ck-label {\\n\\t\\tmargin: var(--ck-spacing-large) 0;\\n\\t}\\n\\n\\t&:first-child {\\n\\t\\t& > .ck-label {\\n\\t\\t\\tmargin-top: 0;\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-style-panel-max-height:470px}.ck.ck-style-panel{max-height:var(--ck-style-panel-max-height);overflow-y:auto;padding:var(--ck-spacing-large)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-style/stylepanel.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,iCACD,CAEA,mBAGC,2CAA4C,CAD5C,eAAgB,CADhB,+BAGD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-style-panel-max-height: 470px;\\n}\\n\\n.ck.ck-style-panel {\\n\\tpadding: var(--ck-spacing-large);\\n\\toverflow-y: auto;\\n\\tmax-height: var(--ck-style-panel-max-height);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-input-color{display:flex;flex-direction:row-reverse;width:100%}.ck.ck-input-color>input.ck.ck-input-text{flex-grow:1;min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button{display:flex}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{overflow:hidden;position:relative}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{display:block;position:absolute}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-input-color>.ck.ck-input-text:focus{z-index:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-left-radius:0;border-top-left-radius:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-left:1px solid transparent}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button{border-bottom-right-radius:0;border-top-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button:not(:focus){border-right:1px solid transparent}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border-radius:0}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview{border:1px solid var(--ck-color-input-border);height:20px;width:20px}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-button.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{background:red;border-radius:2px;height:150%;left:50%;top:-30%;transform:rotate(45deg);transform-origin:50%;width:8%}.ck.ck-input-color .ck.ck-input-color__remove-color{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);width:100%}.ck.ck-input-color .ck.ck-input-color__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-input-border)}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard);margin-right:0}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/colorinput.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/colorinput.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css\"],\"names\":[],\"mappings\":\"AAKA,mBAEC,YAAa,CACb,0BAA2B,CAF3B,UAgCD,CA5BC,0CAEC,WAAY,CADZ,cAED,CAEA,sCACC,cAMD,CAHC,kFACC,YACD,CAGD,8CAEC,YAWD,CATC,kFAEC,eAAgB,CADhB,iBAOD,CAJC,0IAEC,aAAc,CADd,iBAED,CC1BF,+CAGE,4BAA6B,CAD7B,yBAcF,CAhBA,+CAQE,2BAA4B,CAD5B,wBASF,CAHC,2CACC,SACD,CAIA,wEACC,SA0CD,CA3CA,kFAKE,2BAA4B,CAD5B,wBAuCF,CApCE,8FACC,iCACD,CATF,kFAcE,4BAA6B,CAD7B,yBA8BF,CA3BE,8FACC,kCACD,CAGD,oFACC,oDACD,CAEA,4GC1CF,eD2DE,CAjBA,+PCtCD,qCDuDC,CAjBA,4GAKC,6CAA8C,CAD9C,WAAY,CADZ,UAcD,CAVC,oKAKC,cAA6B,CAC7B,iBAAkB,CAHlB,WAAY,CADZ,QAAS,CADT,QAAS,CAMT,uBAAwB,CACxB,oBAAqB,CAJrB,QAKD,CAKH,oDAIC,2BAA4B,CAC5B,4BAA6B,CAH7B,qEAAwE,CADxE,UA0BD,CApBC,gEACC,oDACD,CATD,8DAYE,yBAeF,CA3BA,8DAgBE,wBAWF,CARC,gEACC,uCAMD,CAPA,0EAKE,sCAAuC,CADvC,cAGF\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-input-color {\\n\\twidth: 100%;\\n\\tdisplay: flex;\\n\\tflex-direction: row-reverse;\\n\\n\\t& > input.ck.ck-input-text {\\n\\t\\tmin-width: auto;\\n\\t\\tflex-grow: 1;\\n\\t}\\n\\n\\t& > div.ck.ck-dropdown {\\n\\t\\tmin-width: auto;\\n\\n\\t\\t/* This dropdown has no arrow but a color preview instead. */\\n\\t\\t& > .ck-input-color__button .ck-dropdown__arrow {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}\\n\\n\\t& .ck.ck-input-color__button {\\n\\t\\t/* Resolving issue with misaligned buttons on Safari (see #10589) */\\n\\t\\tdisplay: flex;\\n\\n\\t\\t& .ck.ck-input-color__button__preview {\\n\\t\\t\\tposition: relative;\\n\\t\\t\\toverflow: hidden;\\n\\n\\t\\t\\t& > .ck.ck-input-color__button__preview__no-color-indicator {\\n\\t\\t\\t\\tposition: absolute;\\n\\t\\t\\t\\tdisplay: block;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_dir.css\\\";\\n@import \\\"../mixins/_rounded.css\\\";\\n\\n.ck.ck-input-color {\\n\\t& > .ck.ck-input-text {\\n\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\tborder-top-right-radius: 0;\\n\\t\\t\\tborder-bottom-right-radius: 0;\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\tborder-top-left-radius: 0;\\n\\t\\t\\tborder-bottom-left-radius: 0;\\n\\t\\t}\\n\\n\\t\\t/* Make sure the focused input is always on top of the dropdown button so its\\n\\t\\t   outline and border are never cropped (also when the input is read-only). */\\n\\t\\t&:focus {\\n\\t\\t\\tz-index: 0;\\n\\t\\t}\\n\\t}\\n\\n\\t& > .ck.ck-dropdown {\\n\\t\\t& > .ck.ck-button.ck-input-color__button {\\n\\t\\t\\tpadding: 0;\\n\\n\\t\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\t\\tborder-top-left-radius: 0;\\n\\t\\t\\t\\tborder-bottom-left-radius: 0;\\n\\n\\t\\t\\t\\t&:not(:focus) {\\n\\t\\t\\t\\t\\tborder-left: 1px solid transparent;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\t\\tborder-top-right-radius: 0;\\n\\t\\t\\t\\tborder-bottom-right-radius: 0;\\n\\n\\t\\t\\t\\t&:not(:focus) {\\n\\t\\t\\t\\t\\tborder-right: 1px solid transparent;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t&.ck-disabled {\\n\\t\\t\\t\\tbackground: var(--ck-color-input-disabled-background);\\n\\t\\t\\t}\\n\\n\\t\\t\\t& > .ck.ck-input-color__button__preview {\\n\\t\\t\\t\\t@mixin ck-rounded-corners;\\n\\n\\t\\t\\t\\twidth: 20px;\\n\\t\\t\\t\\theight: 20px;\\n\\t\\t\\t\\tborder: 1px solid var(--ck-color-input-border);\\n\\n\\t\\t\\t\\t& > .ck.ck-input-color__button__preview__no-color-indicator {\\n\\t\\t\\t\\t\\ttop: -30%;\\n\\t\\t\\t\\t\\tleft: 50%;\\n\\t\\t\\t\\t\\theight: 150%;\\n\\t\\t\\t\\t\\twidth: 8%;\\n\\t\\t\\t\\t\\tbackground: hsl(0, 100%, 50%);\\n\\t\\t\\t\\t\\tborder-radius: 2px;\\n\\t\\t\\t\\t\\ttransform: rotate(45deg);\\n\\t\\t\\t\\t\\ttransform-origin: 50%;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t& .ck.ck-input-color__remove-color {\\n\\t\\twidth: 100%;\\n\\t\\tpadding: calc(var(--ck-spacing-standard) / 2) var(--ck-spacing-standard);\\n\\n\\t\\tborder-bottom-left-radius: 0;\\n\\t\\tborder-bottom-right-radius: 0;\\n\\n\\t\\t&:not(:focus) {\\n\\t\\t\\tborder-bottom: 1px solid var(--ck-color-input-border);\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\tborder-top-right-radius: 0;\\n\\t\\t}\\n\\n\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\tborder-top-left-radius: 0;\\n\\t\\t}\\n\\n\\t\\t& .ck.ck-icon {\\n\\t\\t\\tmargin-right: var(--ck-spacing-standard);\\n\\n\\t\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\t\\tmargin-right: 0;\\n\\t\\t\\t\\tmargin-left: var(--ck-spacing-standard);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/**\\n * Implements rounded corner interface for .ck-rounded-corners class.\\n *\\n * @see $ck-border-radius\\n */\\n@define-mixin ck-rounded-corners {\\n\\tborder-radius: 0;\\n\\n\\t@nest .ck-rounded-corners &,\\n\\t&.ck-rounded-corners {\\n\\t\\tborder-radius: var(--ck-border-radius);\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/form.css\"],\"names\":[],\"mappings\":\"AAKA,YACC,mCAyBD,CAvBC,kBAEC,YACD,CAEA,8BACC,cAAe,CACf,OACD,CAEA,4BACC,cAWD,CARE,6DACC,4CACD,CAEA,mEACC,UACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-form {\\n\\tpadding: 0 0 var(--ck-spacing-large);\\n\\n\\t&:focus {\\n\\t\\t/* See: https://github.com/ckeditor/ckeditor5/issues/4773 */\\n\\t\\toutline: none;\\n\\t}\\n\\n\\t& .ck.ck-input-text {\\n\\t\\tmin-width: 100%;\\n\\t\\twidth: 0;\\n\\t}\\n\\n\\t& .ck.ck-dropdown {\\n\\t\\tmin-width: 100%;\\n\\n\\t\\t& .ck-dropdown__button {\\n\\t\\t\\t&:not(:focus) {\\n\\t\\t\\t\\tborder: 1px solid var(--ck-color-base-border);\\n\\t\\t\\t}\\n\\n\\t\\t\\t& .ck-button__label {\\n\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-table-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row{padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}[dir=ltr] .ck.ck-form__row>:not(.ck-label)+*{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-form__row>:not(.ck-label)+*{margin-right:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{min-width:100%;width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/formrow.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/formrow.css\"],\"names\":[],\"mappings\":\"AAKA,iBACC,YAAa,CACb,kBAAmB,CACnB,gBAAiB,CACjB,6BAaD,CAVC,iCACC,WACD,CAGC,wHAEC,sBACD,CCbF,iBACC,4DA2BD,CAvBE,6CAEE,mCAMF,CARA,6CAME,oCAEF,CAGD,2BAEC,cAAe,CADf,UAED,CAEA,2CACC,kCAKD,CAHC,wEACC,0BACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-form__row {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tflex-wrap: nowrap;\\n\\tjustify-content: space-between;\\n\\n\\t/* Ignore labels that work as fieldset legends */\\n\\t& > *:not(.ck-label) {\\n\\t\\tflex-grow: 1;\\n\\t}\\n\\n\\t&.ck-table-form__action-row {\\n\\t\\t& .ck-button-save,\\n\\t\\t& .ck-button-cancel {\\n\\t\\t\\tjustify-content: center;\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_dir.css\\\";\\n\\n.ck.ck-form__row {\\n\\tpadding: var(--ck-spacing-standard) var(--ck-spacing-large) 0;\\n\\n\\t/* Ignore labels that work as fieldset legends */\\n\\t& > *:not(.ck-label) {\\n\\t\\t& + * {\\n\\t\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\t\\tmargin-left: var(--ck-spacing-large);\\n\\t\\t\\t}\\n\\n\\t\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\t\\tmargin-right: var(--ck-spacing-large);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t& > .ck-label {\\n\\t\\twidth: 100%;\\n\\t\\tmin-width: 100%;\\n\\t}\\n\\n\\t&.ck-table-form__action-row {\\n\\t\\tmargin-top: var(--ck-spacing-large);\\n\\n\\t\\t& .ck-button .ck-button__label {\\n\\t\\t\\tcolor: var(--ck-color-text);\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2)}.ck .ck-insert-table-dropdown__label,.ck[dir=rtl] .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{border:1px solid var(--ck-color-base-border);border-radius:1px;margin:var(--ck-insert-table-dropdown-box-margin);min-height:var(--ck-insert-table-dropdown-box-height);min-width:var(--ck-insert-table-dropdown-box-width);outline:none;transition:none}.ck .ck-insert-table-dropdown-grid-box:focus{box-shadow:none}.ck .ck-insert-table-dropdown-grid-box.ck-on{background:var(--ck-color-focus-outer-shadow);border-color:var(--ck-color-focus-border)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/inserttable.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/inserttable.css\"],\"names\":[],\"mappings\":\"AAKA,oCACC,YAAa,CACb,kBAAmB,CACnB,cACD,CCJA,MACC,uCAAwC,CACxC,0CAA2C,CAC3C,yCAA0C,CAC1C,yCACD,CAEA,oCAGC,yFAA0F,CAD1F,oJAED,CAEA,mFAEC,iBACD,CAEA,uCAIC,4CAA6C,CAC7C,iBAAkB,CAFlB,iDAAkD,CADlD,qDAAsD,CADtD,mDAAoD,CAKpD,YAAa,CACb,eAUD,CARC,6CACC,eACD,CAEA,6CAEC,6CAA8C,CAD9C,yCAED\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck .ck-insert-table-dropdown__grid {\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tflex-wrap: wrap;\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-insert-table-dropdown-padding: 10px;\\n\\t--ck-insert-table-dropdown-box-height: 11px;\\n\\t--ck-insert-table-dropdown-box-width: 12px;\\n\\t--ck-insert-table-dropdown-box-margin: 1px;\\n}\\n\\n.ck .ck-insert-table-dropdown__grid {\\n\\t/* The width of a container should match 10 items in a row so there will be a 10x10 grid. */\\n\\twidth: calc(var(--ck-insert-table-dropdown-box-width) * 10 + var(--ck-insert-table-dropdown-box-margin) * 20 + var(--ck-insert-table-dropdown-padding) * 2);\\n\\tpadding: var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0;\\n}\\n\\n.ck .ck-insert-table-dropdown__label,\\n.ck[dir=rtl] .ck-insert-table-dropdown__label {\\n\\ttext-align: center;\\n}\\n\\n.ck .ck-insert-table-dropdown-grid-box {\\n\\tmin-width: var(--ck-insert-table-dropdown-box-width);\\n\\tmin-height: var(--ck-insert-table-dropdown-box-height);\\n\\tmargin: var(--ck-insert-table-dropdown-box-margin);\\n\\tborder: 1px solid var(--ck-color-base-border);\\n\\tborder-radius: 1px;\\n\\toutline: none;\\n\\ttransition: none;\\n\\n\\t&:focus {\\n\\t\\tbox-shadow: none;\\n\\t}\\n\\n\\t&.ck-on {\\n\\t\\tborder-color: var(--ck-color-focus-border);\\n\\t\\tbackground: var(--ck-color-focus-outer-shadow);\\n\\t}\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-content .table{display:table;margin:.9em auto}.ck-content .table table{border:1px double #b3b3b3;border-collapse:collapse;border-spacing:0;height:100%;width:100%}.ck-content .table table td,.ck-content .table table th{border:1px solid #bfbfbf;min-width:2em;padding:.4em}.ck-content .table table th{background:rgba(0,0,0,.05);font-weight:700}.ck-content[dir=rtl] .table th{text-align:right}.ck-content[dir=ltr] .table th{text-align:left}.ck-editor__editable .ck-table-bogus-paragraph{display:inline-block;width:100%}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/table.css\"],\"names\":[],\"mappings\":\"AAKA,mBAKC,aAAc,CADd,gBAiCD,CA9BC,yBAYC,yBAAkC,CAVlC,wBAAyB,CACzB,gBAAiB,CAKjB,WAAY,CADZ,UAsBD,CAfC,wDAQC,wBAAiC,CANjC,aAAc,CACd,YAMD,CAEA,4BAEC,0BAA+B,CAD/B,eAED,CAMF,+BACC,gBACD,CAEA,+BACC,eACD,CAEA,+CAKC,oBAAqB,CAMrB,UACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck-content .table {\\n\\t/* Give the table widget some air and center it horizontally */\\n\\t/* The first value should be equal to --ck-spacing-large variable if used in the editor context\\n\\tto avoid the content jumping (See https://github.com/ckeditor/ckeditor5/issues/9825). */\\n\\tmargin: 0.9em auto;\\n\\tdisplay: table;\\n\\n\\t& table {\\n\\t\\t/* The table cells should have slight borders */\\n\\t\\tborder-collapse: collapse;\\n\\t\\tborder-spacing: 0;\\n\\n\\t\\t/* Table width and height are set on the parent <figure>. Make sure the table inside stretches\\n\\t\\tto the full dimensions of the container (https://github.com/ckeditor/ckeditor5/issues/6186). */\\n\\t\\twidth: 100%;\\n\\t\\theight: 100%;\\n\\n\\t\\t/* The outer border of the table should be slightly darker than the inner lines.\\n\\t\\tAlso see https://github.com/ckeditor/ckeditor5-table/issues/50. */\\n\\t\\tborder: 1px double hsl(0, 0%, 70%);\\n\\n\\t\\t& td,\\n\\t\\t& th {\\n\\t\\t\\tmin-width: 2em;\\n\\t\\t\\tpadding: .4em;\\n\\n\\t\\t\\t/* The border is inherited from .ck-editor__nested-editable styles, so theoretically it's not necessary here.\\n\\t\\t\\tHowever, the border is a content style, so it should use .ck-content (so it works outside the editor).\\n\\t\\t\\tHence, the duplication. See https://github.com/ckeditor/ckeditor5/issues/6314 */\\n\\t\\t\\tborder: 1px solid hsl(0, 0%, 75%);\\n\\t\\t}\\n\\n\\t\\t& th {\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t\\tbackground: hsla(0, 0%, 0%, 5%);\\n\\t\\t}\\n\\t}\\n}\\n\\n/* Text alignment of the table header should match the editor settings and override the native browser styling,\\nwhen content is available outside the editor. See https://github.com/ckeditor/ckeditor5/issues/6638 */\\n.ck-content[dir=\\\"rtl\\\"] .table th {\\n\\ttext-align: right;\\n}\\n\\n.ck-content[dir=\\\"ltr\\\"] .table th {\\n\\ttext-align: left;\\n}\\n\\n.ck-editor__editable .ck-table-bogus-paragraph {\\n\\t/*\\n\\t * Use display:inline-block to force Chrome/Safari to limit text mutations to this element.\\n\\t * See https://github.com/ckeditor/ckeditor5/issues/6062.\\n\\t */\\n\\tdisplay: inline-block;\\n\\n\\t/*\\n\\t * Inline HTML elements nested in the span should always be dimensioned in relation to the whole cell width.\\n\\t * See https://github.com/ckeditor/ckeditor5/issues/9117.\\n\\t */\\n\\twidth: 100%;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-color-table-caption-background:#f7f7f7;--ck-color-table-caption-text:#333;--ck-color-table-caption-highlighted-background:#fd0}.ck-content .table>figcaption{background-color:var(--ck-color-table-caption-background);caption-side:top;color:var(--ck-color-table-caption-text);display:table-caption;font-size:.75em;outline-offset:-1px;padding:.6em;text-align:center;word-break:break-word}.ck.ck-editor__editable .table>figcaption.table__caption_highlighted{animation:ck-table-caption-highlight .6s ease-out}.ck.ck-editor__editable .table>figcaption.ck-placeholder:before{overflow:hidden;padding-left:inherit;padding-right:inherit;text-overflow:ellipsis;white-space:nowrap}@keyframes ck-table-caption-highlight{0%{background-color:var(--ck-color-table-caption-highlighted-background)}to{background-color:var(--ck-color-table-caption-background)}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecaption.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,2CAAoD,CACpD,kCAA8C,CAC9C,oDACD,CAGA,8BAMC,yDAA0D,CAJ1D,gBAAiB,CAGjB,wCAAyC,CAJzC,qBAAsB,CAOtB,eAAgB,CAChB,mBAAoB,CAFpB,YAAa,CAHb,iBAAkB,CADlB,qBAOD,CAIC,qEACC,iDACD,CAEA,gEASC,eAAgB,CARhB,oBAAqB,CACrB,qBAAsB,CAQtB,sBAAuB,CAFvB,kBAGD,CAGD,sCACC,GACC,qEACD,CAEA,GACC,yDACD,CACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-color-table-caption-background: hsl(0, 0%, 97%);\\n\\t--ck-color-table-caption-text: hsl(0, 0%, 20%);\\n\\t--ck-color-table-caption-highlighted-background: hsl(52deg 100% 50%);\\n}\\n\\n/* Content styles */\\n.ck-content .table > figcaption {\\n\\tdisplay: table-caption;\\n\\tcaption-side: top;\\n\\tword-break: break-word;\\n\\ttext-align: center;\\n\\tcolor: var(--ck-color-table-caption-text);\\n\\tbackground-color: var(--ck-color-table-caption-background);\\n\\tpadding: .6em;\\n\\tfont-size: .75em;\\n\\toutline-offset: -1px;\\n}\\n\\n/* Editing styles */\\n.ck.ck-editor__editable .table > figcaption {\\n\\t&.table__caption_highlighted {\\n\\t\\tanimation: ck-table-caption-highlight .6s ease-out;\\n\\t}\\n\\n\\t&.ck-placeholder::before {\\n\\t\\tpadding-left: inherit;\\n\\t\\tpadding-right: inherit;\\n\\n\\t\\t/*\\n\\t\\t * Make sure the table caption placeholder doesn't overflow the placeholder area.\\n\\t\\t * See https://github.com/ckeditor/ckeditor5/issues/9162.\\n\\t\\t */\\n\\t\\twhite-space: nowrap;\\n\\t\\toverflow: hidden;\\n\\t\\ttext-overflow: ellipsis;\\n\\t}\\n}\\n\\n@keyframes ck-table-caption-highlight {\\n\\t0% {\\n\\t\\tbackground-color: var(--ck-color-table-caption-highlighted-background);\\n\\t}\\n\\n\\t100% {\\n\\t\\tbackground-color: var(--ck-color-table-caption-background);\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:first-of-type{flex-grow:0.57}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar:last-of-type{flex-grow:0.43}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar .ck-button{flex-grow:1}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{align-self:flex-end;padding:0;width:25%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecellproperties.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/tablecellproperties.css\"],\"names\":[],\"mappings\":\"AAOE,6FACC,cAiBD,CAdE,0HAEC,cACD,CAEA,yHAEC,cACD,CAEA,uHACC,WACD,CClBJ,kCACC,WAkBD,CAfE,2FACC,mBAAoB,CACpB,SAAU,CACV,SACD,CAGC,4GACC,eAAgB,CAGhB,qCACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-table-cell-properties-form {\\n\\t& .ck-form__row {\\n\\t\\t&.ck-table-cell-properties-form__alignment-row {\\n\\t\\t\\tflex-wrap: wrap;\\n\\n\\t\\t\\t& .ck.ck-toolbar {\\n\\t\\t\\t\\t&:first-of-type {\\n\\t\\t\\t\\t\\t/* 4 buttons out of 7 (h-alignment + v-alignment) = 0.57 */\\n\\t\\t\\t\\t\\tflex-grow: 0.57;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t&:last-of-type {\\n\\t\\t\\t\\t\\t/* 3 buttons out of 7 (h-alignment + v-alignment) = 0.43 */\\n\\t\\t\\t\\t\\tflex-grow: 0.43;\\n\\t\\t\\t\\t}\\n\\n\\t\\t\\t\\t& .ck-button {\\n\\t\\t\\t\\t\\tflex-grow: 1;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-table-cell-properties-form {\\n\\twidth: 320px;\\n\\n\\t& .ck-form__row {\\n\\t\\t&.ck-table-cell-properties-form__padding-row {\\n\\t\\t\\talign-self: flex-end;\\n\\t\\t\\tpadding: 0;\\n\\t\\t\\twidth: 25%;\\n\\t\\t}\\n\\n\\t\\t&.ck-table-cell-properties-form__alignment-row {\\n\\t\\t\\t& .ck.ck-toolbar {\\n\\t\\t\\t\\tbackground: none;\\n\\n\\t\\t\\t\\t/* Compensate for missing input label that would push the margin (toolbar has no inputs). */\\n\\t\\t\\t\\tmargin-top: var(--ck-spacing-standard);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-color-table-column-resizer-hover:var(--ck-color-base-active);--ck-table-column-resizer-width:7px;--ck-table-column-resizer-position-offset:calc(var(--ck-table-column-resizer-width)*-0.5 - 0.5px)}.ck-content .table .ck-table-resized{table-layout:fixed}.ck-content .table table{overflow:hidden}.ck-content .table td,.ck-content .table th{overflow-wrap:break-word;position:relative}.ck.ck-editor__editable .table .ck-table-column-resizer{bottom:-999999px;cursor:col-resize;position:absolute;right:var(--ck-table-column-resizer-position-offset);top:-999999px;user-select:none;width:var(--ck-table-column-resizer-width);z-index:var(--ck-z-default)}.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer,.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer{display:none}.ck.ck-editor__editable .table .ck-table-column-resizer:hover,.ck.ck-editor__editable .table .ck-table-column-resizer__active{background-color:var(--ck-color-table-column-resizer-hover);opacity:.25}.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer{left:var(--ck-table-column-resizer-position-offset);right:unset}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tablecolumnresize.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,iEAAkE,CAClE,mCAAoC,CAIpC,iGACD,CAEA,qCACC,kBACD,CAEA,yBACC,eACD,CAEA,4CAIC,wBAAyB,CACzB,iBACD,CAEA,wDAOC,gBAAiB,CAGjB,iBAAkB,CATlB,iBAAkB,CAOlB,oDAAqD,CAFrD,aAAc,CAKd,gBAAiB,CAFjB,0CAA2C,CAG3C,2BACD,CAQA,qJACC,YACD,CAEA,8HAEC,2DAA4D,CAC5D,WACD,CAEA,iEACC,mDAAoD,CACpD,WACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-color-table-column-resizer-hover: var(--ck-color-base-active);\\n\\t--ck-table-column-resizer-width: 7px;\\n\\n\\t/* The offset used for absolute positioning of the resizer element, so that it is placed exactly above the cell border.\\n\\t   The value is: minus half the width of the resizer decreased additionaly by the half the width of the border (0.5px). */\\n\\t--ck-table-column-resizer-position-offset: calc(var(--ck-table-column-resizer-width) * -0.5 - 0.5px);\\n}\\n\\n.ck-content .table .ck-table-resized {\\n\\ttable-layout: fixed;\\n}\\n\\n.ck-content .table table {\\n\\toverflow: hidden;\\n}\\n\\n.ck-content .table td,\\n.ck-content .table th {\\n\\t/* To prevent text overflowing beyond its cell when columns are resized by resize handler\\n\\t(https://github.com/ckeditor/ckeditor5/pull/14379#issuecomment-1589460978). */\\n\\toverflow-wrap: break-word;\\n\\tposition: relative;\\n}\\n\\n.ck.ck-editor__editable .table .ck-table-column-resizer {\\n\\tposition: absolute;\\n\\t/* The resizer element resides in each cell so to occupy the entire height of the table, which is unknown from a CSS point of view,\\n\\t   it is extended to an extremely high height. Even for screens with a very high pixel density, the resizer will fulfill its role as\\n\\t   it should, i.e. for a screen of 476 ppi the total height of the resizer will take over 350 sheets of A4 format, which is totally\\n\\t   unrealistic height for a single table. */\\n\\ttop: -999999px;\\n\\tbottom: -999999px;\\n\\tright: var(--ck-table-column-resizer-position-offset);\\n\\twidth: var(--ck-table-column-resizer-width);\\n\\tcursor: col-resize;\\n\\tuser-select: none;\\n\\tz-index: var(--ck-z-default);\\n}\\n\\n.ck.ck-editor__editable.ck-column-resize_disabled .table .ck-table-column-resizer {\\n\\tdisplay: none;\\n}\\n\\n/* The resizer elements, which are extended to an extremely high height, break the drag & drop feature in Chrome. To make it work again,\\n   all resizers must be hidden while the table is dragged. */\\n.ck.ck-editor__editable .table[draggable] .ck-table-column-resizer {\\n\\tdisplay: none;\\n}\\n\\n.ck.ck-editor__editable .table .ck-table-column-resizer:hover,\\n.ck.ck-editor__editable .table .ck-table-column-resizer__active {\\n\\tbackground-color: var(--ck-color-table-column-resizer-hover);\\n\\topacity: 0.25;\\n}\\n\\n.ck.ck-editor__editable[dir=rtl] .table .ck-table-column-resizer {\\n\\tleft: var(--ck-table-column-resizer-position-offset);\\n\\tright: unset;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-color-table-focused-cell-background:rgba(158,201,250,.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/tableediting.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,6DACD,CAKE,8QAGC,wDAAyD,CAKzD,iBAAkB,CAClB,8CAA+C,CAC/C,mBACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-color-table-focused-cell-background: hsla(212, 90%, 80%, .3);\\n}\\n\\n.ck-widget.table {\\n\\t& td,\\n\\t& th {\\n\\t\\t&.ck-editor__nested-editable.ck-editor__nested-editable_focused,\\n\\t\\t&.ck-editor__nested-editable:focus {\\n\\t\\t\\t/* A very slight background to highlight the focused cell */\\n\\t\\t\\tbackground: var(--ck-color-table-focused-cell-background);\\n\\n\\t\\t\\t/* Fixes the problem where surrounding cells cover the focused cell's border.\\n\\t\\t\\tIt does not fix the problem in all places but the UX is improved.\\n\\t\\t\\tSee https://github.com/ckeditor/ckeditor5-table/issues/29. */\\n\\t\\t\\tborder-style: none;\\n\\t\\t\\toutline: 1px solid var(--ck-color-focus-border);\\n\\t\\t\\toutline-offset: -1px; /* progressive enhancement - no IE support */\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-table-form .ck-form__row.ck-table-form__background-row,.ck.ck-table-form .ck-form__row.ck-table-form__border-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{align-items:center;flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view{align-items:center;display:flex;flex-direction:column-reverse}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-field-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck.ck-labeled-field-view{position:relative}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{bottom:calc(var(--ck-table-properties-error-arrow-size)*-1);left:50%;position:absolute;transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{content:\\\"\\\";left:50%;position:absolute;top:calc(var(--ck-table-properties-error-arrow-size)*-1);transform:translateX(-50%)}:root{--ck-table-properties-error-arrow-size:6px;--ck-table-properties-min-error-width:150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-field-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{max-width:80px;min-width:80px;width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:flex-end;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-field-view{padding-top:var(--ck-spacing-standard)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{border-radius:0}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status,.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{background:var(--ck-color-base-error);color:var(--ck-color-base-background);min-width:var(--ck-table-properties-min-error-width);padding:var(--ck-spacing-small) var(--ck-spacing-medium);text-align:center}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status:after{border-color:transparent transparent var(--ck-color-base-error) transparent;border-style:solid;border-width:0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size)}.ck.ck-table-form .ck.ck-labeled-field-view .ck.ck-labeled-field-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck.ck-table-form .ck.ck-labeled-field-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-field-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/tableform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/mixins/_rounded.css\"],\"names\":[],\"mappings\":\"AAWE,wHACC,cACD,CAEA,8DAEC,kBAAmB,CADnB,cAgBD,CAbC,qFAGC,kBAAmB,CAFnB,YAAa,CACb,6BAMD,CAEA,sMACC,WACD,CAIF,4CAEC,iBAoBD,CAlBC,8EAGC,2DAAgE,CADhE,QAAS,CADT,iBAAkB,CAGlB,8BAA+B,CAG/B,SAUD,CAPC,oFACC,UAAW,CAGX,QAAS,CAFT,iBAAkB,CAClB,wDAA6D,CAE7D,0BACD,CChDH,MACC,0CAA2C,CAC3C,2CACD,CAMI,2FACC,kCAAmC,CACnC,iBACD,CAGD,8KAIC,cAAe,CADf,cAAe,CADf,UAGD,CAGD,8DACC,SAcD,CAZC,yMAEC,QACD,CAEA,iGACC,mBAAoB,CACpB,oBAAqB,CACrB,wCAAyC,CACzC,6CAA8C,CAC9C,gCACD,CAIF,4CACC,sCAyBD,CAvBC,8ECxCD,eDyDC,CAjBA,mMCpCA,qCDqDA,CAjBA,8EAGC,qCAAsC,CACtC,qCAAsC,CAEtC,oDAAqD,CADrD,wDAAyD,CAEzD,iBAUD,CAPC,oFACC,2EAA4E,CAE5E,kBAAmB,CADnB,kJAED,CAdD,8EAgBC,iEACD,CAGA,6GACC,YACD,CAIF,oDACC,GACC,SACD,CAEA,GACC,SACD,CACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-table-form {\\n\\t& .ck-form__row {\\n\\t\\t&.ck-table-form__border-row {\\n\\t\\t\\tflex-wrap: wrap;\\n\\t\\t}\\n\\n\\t\\t&.ck-table-form__background-row {\\n\\t\\t\\tflex-wrap: wrap;\\n\\t\\t}\\n\\n\\t\\t&.ck-table-form__dimensions-row {\\n\\t\\t\\tflex-wrap: wrap;\\n\\t\\t\\talign-items: center;\\n\\n\\t\\t\\t& .ck-labeled-field-view {\\n\\t\\t\\t\\tdisplay: flex;\\n\\t\\t\\t\\tflex-direction: column-reverse;\\n\\t\\t\\t\\talign-items: center;\\n\\n\\t\\t\\t\\t& .ck.ck-dropdown {\\n\\t\\t\\t\\t\\tflex-grow: 0;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t& .ck-table-form__dimension-operator {\\n\\t\\t\\t\\tflex-grow: 0;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t& .ck.ck-labeled-field-view {\\n\\t\\t/* Allow absolute positioning of the status (error) balloons. */\\n\\t\\tposition: relative;\\n\\n\\t\\t& .ck.ck-labeled-field-view__status {\\n\\t\\t\\tposition: absolute;\\n\\t\\t\\tleft: 50%;\\n\\t\\t\\tbottom: calc( -1 * var(--ck-table-properties-error-arrow-size) );\\n\\t\\t\\ttransform: translate(-50%,100%);\\n\\n\\t\\t\\t/* Make sure the balloon status stays on top of other form elements. */\\n\\t\\t\\tz-index: 1;\\n\\n\\t\\t\\t/* The arrow pointing towards the field. */\\n\\t\\t\\t&::after {\\n\\t\\t\\t\\tcontent: \\\"\\\";\\n\\t\\t\\t\\tposition: absolute;\\n\\t\\t\\t\\ttop: calc( -1 * var(--ck-table-properties-error-arrow-size) );\\n\\t\\t\\t\\tleft: 50%;\\n\\t\\t\\t\\ttransform: translateX( -50% );\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"../mixins/_rounded.css\\\";\\n\\n:root {\\n\\t--ck-table-properties-error-arrow-size: 6px;\\n\\t--ck-table-properties-min-error-width: 150px;\\n}\\n\\n.ck.ck-table-form {\\n\\t& .ck-form__row {\\n\\t\\t&.ck-table-form__border-row {\\n\\t\\t\\t& .ck-labeled-field-view {\\n\\t\\t\\t\\t& > .ck-label {\\n\\t\\t\\t\\t\\tfont-size: var(--ck-font-size-tiny);\\n\\t\\t\\t\\t\\ttext-align: center;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\n\\t\\t\\t& .ck-table-form__border-style,\\n\\t\\t\\t& .ck-table-form__border-width {\\n\\t\\t\\t\\twidth: 80px;\\n\\t\\t\\t\\tmin-width: 80px;\\n\\t\\t\\t\\tmax-width: 80px;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.ck-table-form__dimensions-row {\\n\\t\\t\\tpadding: 0;\\n\\n\\t\\t\\t& .ck-table-form__dimensions-row__width,\\n\\t\\t\\t& .ck-table-form__dimensions-row__height {\\n\\t\\t\\t\\tmargin: 0\\n\\t\\t\\t}\\n\\n\\t\\t\\t& .ck-table-form__dimension-operator {\\n\\t\\t\\t\\talign-self: flex-end;\\n\\t\\t\\t\\tdisplay: inline-block;\\n\\t\\t\\t\\theight: var(--ck-ui-component-min-height);\\n\\t\\t\\t\\tline-height: var(--ck-ui-component-min-height);\\n\\t\\t\\t\\tmargin: 0 var(--ck-spacing-small);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t& .ck.ck-labeled-field-view {\\n\\t\\tpadding-top: var(--ck-spacing-standard);\\n\\n\\t\\t& .ck.ck-labeled-field-view__status {\\n\\t\\t\\t@mixin ck-rounded-corners;\\n\\n\\t\\t\\tbackground: var(--ck-color-base-error);\\n\\t\\t\\tcolor: var(--ck-color-base-background);\\n\\t\\t\\tpadding: var(--ck-spacing-small) var(--ck-spacing-medium);\\n\\t\\t\\tmin-width: var(--ck-table-properties-min-error-width);\\n\\t\\t\\ttext-align: center;\\n\\n\\t\\t\\t/* The arrow pointing towards the field. */\\n\\t\\t\\t&::after {\\n\\t\\t\\t\\tborder-color: transparent transparent var(--ck-color-base-error) transparent;\\n\\t\\t\\t\\tborder-width: 0 var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size) var(--ck-table-properties-error-arrow-size);\\n\\t\\t\\t\\tborder-style: solid;\\n\\t\\t\\t}\\n\\n\\t\\t\\tanimation: ck-table-form-labeled-view-status-appear .15s ease both;\\n\\t\\t}\\n\\n\\t\\t/* Hide the error balloon when the field is blurred. Makes the experience much more clear. */\\n\\t\\t& .ck-input.ck-error:not(:focus) + .ck.ck-labeled-field-view__status {\\n\\t\\t\\tdisplay: none;\\n\\t\\t}\\n\\t}\\n}\\n\\n@keyframes ck-table-form-labeled-view-status-appear {\\n\\t0% {\\n\\t\\topacity: 0;\\n\\t}\\n\\n\\t100% {\\n\\t\\topacity: 1;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n/**\\n * Implements rounded corner interface for .ck-rounded-corners class.\\n *\\n * @see $ck-border-radius\\n */\\n@define-mixin ck-rounded-corners {\\n\\tborder-radius: 0;\\n\\n\\t@nest .ck-rounded-corners &,\\n\\t&.ck-rounded-corners {\\n\\t\\tborder-radius: var(--ck-border-radius);\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-content:baseline;flex-basis:0;flex-wrap:wrap}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{align-self:flex-end;padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none;margin-top:var(--ck-spacing-standard)}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-table/theme/tableproperties.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/tableproperties.css\"],\"names\":[],\"mappings\":\"AAOE,mFAGC,sBAAuB,CADvB,YAAa,CADb,cAOD,CAHC,qHACC,gBACD,CCTH,6BACC,WAmBD,CAhBE,mFACC,mBAAoB,CACpB,SAYD,CAVC,kGACC,eAAgB,CAGhB,qCAKD,CAHC,uHACC,UACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-table-properties-form {\\n\\t& .ck-form__row {\\n\\t\\t&.ck-table-properties-form__alignment-row {\\n\\t\\t\\tflex-wrap: wrap;\\n\\t\\t\\tflex-basis: 0;\\n\\t\\t\\talign-content: baseline;\\n\\n\\t\\t\\t& .ck.ck-toolbar .ck-toolbar__items {\\n\\t\\t\\t\\tflex-wrap: nowrap;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n.ck.ck-table-properties-form {\\n\\twidth: 320px;\\n\\n\\t& .ck-form__row {\\n\\t\\t&.ck-table-properties-form__alignment-row {\\n\\t\\t\\talign-self: flex-end;\\n\\t\\t\\tpadding: 0;\\n\\n\\t\\t\\t& .ck.ck-toolbar {\\n\\t\\t\\t\\tbackground: none;\\n\\n\\t\\t\\t\\t/* Compensate for missing input label that would push the margin (toolbar has no inputs). */\\n\\t\\t\\t\\tmargin-top: var(--ck-spacing-standard);\\n\\n\\t\\t\\t\\t& .ck-toolbar__items > * {\\n\\t\\t\\t\\t\\twidth: 40px;\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \":root{--ck-table-selected-cell-background:rgba(158,207,250,.3)}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{box-shadow:unset;caret-color:transparent;outline:unset;position:relative}.ck.ck-editor__editable .table table td.ck-editor__editable_selected:after,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:after{background-color:var(--ck-table-selected-cell-background);bottom:0;content:\\\"\\\";left:0;pointer-events:none;position:absolute;right:0;top:0}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table td.ck-editor__editable_selected:focus,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected:focus{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget{outline:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget>.ck-widget__selection-handle{display:none}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-table/tableselection.css\"],\"names\":[],\"mappings\":\"AAKA,MACC,wDACD,CAGC,0IAKC,gBAAiB,CAFjB,uBAAwB,CACxB,aAAc,CAFd,iBAiCD,CA3BC,sJAGC,yDAA0D,CAK1D,QAAS,CAPT,UAAW,CAKX,MAAO,CAJP,mBAAoB,CAEpB,iBAAkB,CAGlB,OAAQ,CAFR,KAID,CAEA,wTAEC,4BACD,CAMA,gKACC,aAKD,CAHC,0NACC,YACD\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n:root {\\n\\t--ck-table-selected-cell-background: hsla(208, 90%, 80%, .3);\\n}\\n\\n.ck.ck-editor__editable .table table {\\n\\t& td.ck-editor__editable_selected,\\n\\t& th.ck-editor__editable_selected {\\n\\t\\tposition: relative;\\n\\t\\tcaret-color: transparent;\\n\\t\\toutline: unset;\\n\\t\\tbox-shadow: unset;\\n\\n\\t\\t/* https://github.com/ckeditor/ckeditor5/issues/6446 */\\n\\t\\t&:after {\\n\\t\\t\\tcontent: '';\\n\\t\\t\\tpointer-events: none;\\n\\t\\t\\tbackground-color: var(--ck-table-selected-cell-background);\\n\\t\\t\\tposition: absolute;\\n\\t\\t\\ttop: 0;\\n\\t\\t\\tleft: 0;\\n\\t\\t\\tright: 0;\\n\\t\\t\\tbottom: 0;\\n\\t\\t}\\n\\n\\t\\t& ::selection,\\n\\t\\t&:focus {\\n\\t\\t\\tbackground-color: transparent;\\n\\t\\t}\\n\\n\\t\\t/*\\n\\t\\t * To reduce the amount of noise, all widgets in the table selection have no outline and no selection handle.\\n\\t\\t * See https://github.com/ckeditor/ckeditor5/issues/9491.\\n\\t\\t */\\n\\t\\t& .ck-widget {\\n\\t\\t\\toutline: unset;\\n\\n\\t\\t\\t& > .ck-widget__selection-handle {\\n\\t\\t\\t\\tdisplay: none;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../../../css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".ck-vertical-form .ck-button:after{bottom:-1px;content:\\\"\\\";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck-vertical-form .ck-button:focus:after{display:none}@media screen and (max-width:600px){.ck.ck-responsive-form .ck-button:after{bottom:-1px;content:\\\"\\\";position:absolute;right:-1px;top:-1px;width:0;z-index:1}.ck.ck-responsive-form .ck-button:focus:after{display:none}}.ck-vertical-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form{padding:var(--ck-spacing-large)}.ck.ck-responsive-form:focus{outline:none}[dir=ltr] .ck.ck-responsive-form>:not(:first-child){margin-left:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-responsive-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-responsive-form{padding:0;width:calc(var(--ck-input-width)*.8)}.ck.ck-responsive-form .ck-labeled-field-view{margin:var(--ck-spacing-large) var(--ck-spacing-large) 0}.ck.ck-responsive-form .ck-labeled-field-view .ck-input-text{min-width:0;width:100%}.ck.ck-responsive-form .ck-labeled-field-view .ck-labeled-field-view__error{white-space:normal}.ck.ck-responsive-form>.ck-button:nth-last-child(2):after{border-right:1px solid var(--ck-color-base-border)}.ck.ck-responsive-form>.ck-button:last-child,.ck.ck-responsive-form>.ck-button:nth-last-child(2){border-radius:0;margin-top:var(--ck-spacing-large);padding:var(--ck-spacing-standard)}.ck.ck-responsive-form>.ck-button:last-child:not(:focus),.ck.ck-responsive-form>.ck-button:nth-last-child(2):not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-responsive-form>.ck-button:last-child,[dir=ltr] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2){margin-left:0}[dir=rtl] .ck.ck-responsive-form>.ck-button:last-child:last-of-type,[dir=rtl] .ck.ck-responsive-form>.ck-button:nth-last-child(2):last-of-type{border-right:1px solid var(--ck-color-base-border)}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/theme/ckeditor5-ui/components/responsive-form/responsiveform.css\",\"webpack://./../../../../../node_modules/@ckeditor/ckeditor5-theme-lark/node_modules/@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\"],\"names\":[],\"mappings\":\"AAQC,mCAMC,WAAY,CALZ,UAAW,CAEX,iBAAkB,CAClB,UAAW,CACX,QAAS,CAHT,OAAQ,CAKR,SACD,CAEA,yCACC,YACD,CCdA,oCDoBE,wCAMC,WAAY,CALZ,UAAW,CAEX,iBAAkB,CAClB,UAAW,CACX,QAAS,CAHT,OAAQ,CAKR,SACD,CAEA,8CACC,YACD,CC9BF,CCAD,qDACC,kDACD,CAEA,uBACC,+BAmED,CAjEC,6BAEC,YACD,CAGC,oDACC,sCACD,CAIA,mDACC,sCACD,CCvBD,oCDMD,uBAqBE,SAAU,CACV,oCA8CF,CA5CE,8CACC,wDAWD,CATC,6DACC,WAAY,CACZ,UACD,CAGA,4EACC,kBACD,CAKA,0DACC,kDACD,CAGD,iGAIC,eAAgB,CADhB,kCAAmC,CADnC,kCAmBD,CAfC,yHACC,gDACD,CARD,qHAWE,aAUF,CArBA,qHAeE,aAMF,CAJE,+IACC,kDACD,CCpEH\",\"sourcesContent\":[\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\\\";\\n\\n.ck-vertical-form .ck-button {\\n\\t&::after {\\n\\t\\tcontent: \\\"\\\";\\n\\t\\twidth: 0;\\n\\t\\tposition: absolute;\\n\\t\\tright: -1px;\\n\\t\\ttop: -1px;\\n\\t\\tbottom: -1px;\\n\\t\\tz-index: 1;\\n\\t}\\n\\n\\t&:focus::after {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n\\n.ck.ck-responsive-form {\\n\\t@mixin ck-media-phone {\\n\\t\\t& .ck-button {\\n\\t\\t\\t&::after {\\n\\t\\t\\t\\tcontent: \\\"\\\";\\n\\t\\t\\t\\twidth: 0;\\n\\t\\t\\t\\tposition: absolute;\\n\\t\\t\\t\\tright: -1px;\\n\\t\\t\\t\\ttop: -1px;\\n\\t\\t\\t\\tbottom: -1px;\\n\\t\\t\\t\\tz-index: 1;\\n\\t\\t\\t}\\n\\n\\t\\t\\t&:focus::after {\\n\\t\\t\\t\\tdisplay: none;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@define-mixin ck-media-phone {\\n\\t@media screen and (max-width: 600px) {\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_rwd.css\\\";\\n@import \\\"@ckeditor/ckeditor5-ui/theme/mixins/_dir.css\\\";\\n\\n.ck-vertical-form > .ck-button:nth-last-child(2)::after {\\n\\tborder-right: 1px solid var(--ck-color-base-border);\\n}\\n\\n.ck.ck-responsive-form {\\n\\tpadding: var(--ck-spacing-large);\\n\\n\\t&:focus {\\n\\t\\t/* See: https://github.com/ckeditor/ckeditor5/issues/4773 */\\n\\t\\toutline: none;\\n\\t}\\n\\n\\t@mixin ck-dir ltr {\\n\\t\\t& > :not(:first-child) {\\n\\t\\t\\tmargin-left: var(--ck-spacing-standard);\\n\\t\\t}\\n\\t}\\n\\n\\t@mixin ck-dir rtl {\\n\\t\\t& > :not(:last-child) {\\n\\t\\t\\tmargin-left: var(--ck-spacing-standard);\\n\\t\\t}\\n\\t}\\n\\n\\t@mixin ck-media-phone {\\n\\t\\tpadding: 0;\\n\\t\\twidth: calc(.8 * var(--ck-input-width));\\n\\n\\t\\t& .ck-labeled-field-view {\\n\\t\\t\\tmargin: var(--ck-spacing-large) var(--ck-spacing-large) 0;\\n\\n\\t\\t\\t& .ck-input-text {\\n\\t\\t\\t\\tmin-width: 0;\\n\\t\\t\\t\\twidth: 100%;\\n\\t\\t\\t}\\n\\n\\t\\t\\t/* Let the long error messages wrap in the narrow form. */\\n\\t\\t\\t& .ck-labeled-field-view__error {\\n\\t\\t\\t\\twhite-space: normal;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t/* Styles for two last buttons in the form (save&cancel, edit&unlink, etc.). */\\n\\t\\t& > .ck-button:nth-last-child(2) {\\n\\t\\t\\t&::after {\\n\\t\\t\\t\\tborder-right: 1px solid var(--ck-color-base-border);\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t& > .ck-button:nth-last-child(1),\\n\\t\\t& > .ck-button:nth-last-child(2) {\\n\\t\\t\\tpadding: var(--ck-spacing-standard);\\n\\t\\t\\tmargin-top: var(--ck-spacing-large);\\n\\t\\t\\tborder-radius: 0;\\n\\n\\t\\t\\t&:not(:focus) {\\n\\t\\t\\t\\tborder-top: 1px solid var(--ck-color-base-border);\\n\\t\\t\\t}\\n\\n\\t\\t\\t@mixin ck-dir ltr {\\n\\t\\t\\t\\tmargin-left: 0;\\n\\t\\t\\t}\\n\\n\\t\\t\\t@mixin ck-dir rtl {\\n\\t\\t\\t\\tmargin-left: 0;\\n\\n\\t\\t\\t\\t&:last-of-type {\\n\\t\\t\\t\\t\\tborder-right: 1px solid var(--ck-color-base-border);\\n\\t\\t\\t\\t}\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\n\",\"/*\\n * Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\\n */\\n\\n@define-mixin ck-media-phone {\\n\\t@media screen and (max-width: 600px) {\\n\\t\\t@mixin-content;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","\"use strict\";\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nvar stylesInDom = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDom.length; i++) {\n    if (stylesInDom[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var index = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3]\n    };\n\n    if (index !== -1) {\n      stylesInDom[index].references++;\n      stylesInDom[index].updater(obj);\n    } else {\n      stylesInDom.push({\n        identifier: identifier,\n        updater: addStyle(obj, options),\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n  var attributes = options.attributes || {};\n\n  if (typeof attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(attributes).forEach(function (key) {\n    style.setAttribute(key, attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.media ? \"@media \".concat(obj.media, \" {\").concat(obj.css, \"}\") : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  } else {\n    style.removeAttribute('media');\n  }\n\n  if (sourceMap && typeof btoa !== 'undefined') {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    if (Object.prototype.toString.call(newList) !== '[object Array]') {\n      return;\n    }\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDom[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDom[_index].references === 0) {\n        stylesInDom[_index].updater();\n\n        stylesInDom.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ruleSet[1].rules[3].use[1]!../../../../../node_modules/css-loader/dist/cjs.js!../../../../../node_modules/postcss-loader/dist/cjs.js??ruleSet[1].rules[3].use[3]!../../../../../node_modules/sass-loader/dist/cjs.js??ruleSet[1].rules[3].use[4]!./ckeditor5-craftcms.css\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"df0a2240\", content, true, {});","/**\n * Translates the list format produced by css-loader into something\n * easier to manipulate.\n */\nexport default function listToStyles (parentId, list) {\n  var styles = []\n  var newStyles = {}\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i]\n    var id = item[0]\n    var css = item[1]\n    var media = item[2]\n    var sourceMap = item[3]\n    var part = {\n      id: parentId + ':' + i,\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    }\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = { id: id, parts: [part] })\n    } else {\n      newStyles[id].parts.push(part)\n    }\n  }\n  return styles\n}\n","/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n  Modified by Evan You @yyx990803\n*/\n\nimport listToStyles from './listToStyles'\n\nvar hasDocument = typeof document !== 'undefined'\n\nif (typeof DEBUG !== 'undefined' && DEBUG) {\n  if (!hasDocument) {\n    throw new Error(\n    'vue-style-loader cannot be used in a non-browser environment. ' +\n    \"Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.\"\n  ) }\n}\n\n/*\ntype StyleObject = {\n  id: number;\n  parts: Array<StyleObjectPart>\n}\n\ntype StyleObjectPart = {\n  css: string;\n  media: string;\n  sourceMap: ?string\n}\n*/\n\nvar stylesInDom = {/*\n  [id: number]: {\n    id: number,\n    refs: number,\n    parts: Array<(obj?: StyleObjectPart) => void>\n  }\n*/}\n\nvar head = hasDocument && (document.head || document.getElementsByTagName('head')[0])\nvar singletonElement = null\nvar singletonCounter = 0\nvar isProduction = false\nvar noop = function () {}\nvar options = null\nvar ssrIdKey = 'data-vue-ssr-id'\n\n// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n// tags it will allow on a page\nvar isOldIE = typeof navigator !== 'undefined' && /msie [6-9]\\b/.test(navigator.userAgent.toLowerCase())\n\nexport default function addStylesClient (parentId, list, _isProduction, _options) {\n  isProduction = _isProduction\n\n  options = _options || {}\n\n  var styles = listToStyles(parentId, list)\n  addStylesToDom(styles)\n\n  return function update (newList) {\n    var mayRemove = []\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i]\n      var domStyle = stylesInDom[item.id]\n      domStyle.refs--\n      mayRemove.push(domStyle)\n    }\n    if (newList) {\n      styles = listToStyles(parentId, newList)\n      addStylesToDom(styles)\n    } else {\n      styles = []\n    }\n    for (var i = 0; i < mayRemove.length; i++) {\n      var domStyle = mayRemove[i]\n      if (domStyle.refs === 0) {\n        for (var j = 0; j < domStyle.parts.length; j++) {\n          domStyle.parts[j]()\n        }\n        delete stylesInDom[domStyle.id]\n      }\n    }\n  }\n}\n\nfunction addStylesToDom (styles /* Array<StyleObject> */) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i]\n    var domStyle = stylesInDom[item.id]\n    if (domStyle) {\n      domStyle.refs++\n      for (var j = 0; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j])\n      }\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j]))\n      }\n      if (domStyle.parts.length > item.parts.length) {\n        domStyle.parts.length = item.parts.length\n      }\n    } else {\n      var parts = []\n      for (var j = 0; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j]))\n      }\n      stylesInDom[item.id] = { id: item.id, refs: 1, parts: parts }\n    }\n  }\n}\n\nfunction createStyleElement () {\n  var styleElement = document.createElement('style')\n  styleElement.type = 'text/css'\n  head.appendChild(styleElement)\n  return styleElement\n}\n\nfunction addStyle (obj /* StyleObjectPart */) {\n  var update, remove\n  var styleElement = document.querySelector('style[' + ssrIdKey + '~=\"' + obj.id + '\"]')\n\n  if (styleElement) {\n    if (isProduction) {\n      // has SSR styles and in production mode.\n      // simply do nothing.\n      return noop\n    } else {\n      // has SSR styles but in dev mode.\n      // for some reason Chrome can't handle source map in server-rendered\n      // style tags - source maps in <style> only works if the style tag is\n      // created and inserted dynamically. So we remove the server rendered\n      // styles and inject new ones.\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  if (isOldIE) {\n    // use singleton mode for IE9.\n    var styleIndex = singletonCounter++\n    styleElement = singletonElement || (singletonElement = createStyleElement())\n    update = applyToSingletonTag.bind(null, styleElement, styleIndex, false)\n    remove = applyToSingletonTag.bind(null, styleElement, styleIndex, true)\n  } else {\n    // use multi-style-tag mode in all other cases\n    styleElement = createStyleElement()\n    update = applyToTag.bind(null, styleElement)\n    remove = function () {\n      styleElement.parentNode.removeChild(styleElement)\n    }\n  }\n\n  update(obj)\n\n  return function updateStyle (newObj /* StyleObjectPart */) {\n    if (newObj) {\n      if (newObj.css === obj.css &&\n          newObj.media === obj.media &&\n          newObj.sourceMap === obj.sourceMap) {\n        return\n      }\n      update(obj = newObj)\n    } else {\n      remove()\n    }\n  }\n}\n\nvar replaceText = (function () {\n  var textStore = []\n\n  return function (index, replacement) {\n    textStore[index] = replacement\n    return textStore.filter(Boolean).join('\\n')\n  }\n})()\n\nfunction applyToSingletonTag (styleElement, index, remove, obj) {\n  var css = remove ? '' : obj.css\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = replaceText(index, css)\n  } else {\n    var cssNode = document.createTextNode(css)\n    var childNodes = styleElement.childNodes\n    if (childNodes[index]) styleElement.removeChild(childNodes[index])\n    if (childNodes.length) {\n      styleElement.insertBefore(cssNode, childNodes[index])\n    } else {\n      styleElement.appendChild(cssNode)\n    }\n  }\n}\n\nfunction applyToTag (styleElement, obj) {\n  var css = obj.css\n  var media = obj.media\n  var sourceMap = obj.sourceMap\n\n  if (media) {\n    styleElement.setAttribute('media', media)\n  }\n  if (options.ssrId) {\n    styleElement.setAttribute(ssrIdKey, obj.id)\n  }\n\n  if (sourceMap) {\n    // https://developer.chrome.com/devtools/docs/javascript-debugging\n    // this makes source maps inside style tags work properly in Chrome\n    css += '\\n/*# sourceURL=' + sourceMap.sources[0] + ' */'\n    // http://stackoverflow.com/a/26603875\n    css += '\\n/*# sourceMappingURL=data:application/json;base64,' + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + ' */'\n  }\n\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild)\n    }\n    styleElement.appendChild(document.createTextNode(css))\n  }\n}\n","module.exports = (__webpack_require__(7079))(\"./src/clipboard.js\");","module.exports = (__webpack_require__(7079))(\"./src/core.js\");","module.exports = (__webpack_require__(7079))(\"./src/engine.js\");","module.exports = (__webpack_require__(7079))(\"./src/enter.js\");","module.exports = (__webpack_require__(7079))(\"./src/paragraph.js\");","module.exports = (__webpack_require__(7079))(\"./src/select-all.js\");","module.exports = (__webpack_require__(7079))(\"./src/typing.js\");","module.exports = (__webpack_require__(7079))(\"./src/ui.js\");","module.exports = (__webpack_require__(7079))(\"./src/undo.js\");","module.exports = (__webpack_require__(7079))(\"./src/upload.js\");","module.exports = (__webpack_require__(7079))(\"./src/utils.js\");","module.exports = (__webpack_require__(7079))(\"./src/watchdog.js\");","module.exports = (__webpack_require__(7079))(\"./src/widget.js\");","module.exports = CKEditor5.dll;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nc = undefined;","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { CKEditorError, logWarning } from 'ckeditor5/src/utils';\r\n/**\r\n * @module alignment/utils\r\n */\r\n/**\r\n * The list of supported alignment options:\r\n *\r\n * * `'left'`,\r\n * * `'right'`,\r\n * * `'center'`,\r\n * * `'justify'`\r\n */\r\nexport const supportedOptions = ['left', 'right', 'center', 'justify'];\r\n/**\r\n * Checks whether the passed option is supported by {@link module:alignment/alignmentediting~AlignmentEditing}.\r\n *\r\n * @param option The option value to check.\r\n */\r\nexport function isSupported(option) {\r\n    return supportedOptions.includes(option);\r\n}\r\n/**\r\n * Checks whether alignment is the default one considering the direction\r\n * of the editor content.\r\n *\r\n * @param alignment The name of the alignment to check.\r\n * @param locale The {@link module:core/editor/editor~Editor#locale} instance.\r\n */\r\nexport function isDefault(alignment, locale) {\r\n    // Right now only LTR is supported so the 'left' value is always the default one.\r\n    if (locale.contentLanguageDirection == 'rtl') {\r\n        return alignment === 'right';\r\n    }\r\n    else {\r\n        return alignment === 'left';\r\n    }\r\n}\r\n/**\r\n * Brings the configuration to the common form, an array of objects.\r\n *\r\n * @param configuredOptions Alignment plugin configuration.\r\n * @returns Normalized object holding the configuration.\r\n */\r\nexport function normalizeAlignmentOptions(configuredOptions) {\r\n    const normalizedOptions = configuredOptions\r\n        .map(option => {\r\n        let result;\r\n        if (typeof option == 'string') {\r\n            result = { name: option };\r\n        }\r\n        else {\r\n            result = option;\r\n        }\r\n        return result;\r\n    })\r\n        // Remove all unknown options.\r\n        .filter(option => {\r\n        const isNameValid = supportedOptions.includes(option.name);\r\n        if (!isNameValid) {\r\n            /**\r\n             * The `name` in one of the `alignment.options` is not recognized.\r\n             * The available options are: `'left'`, `'right'`, `'center'` and `'justify'`.\r\n             *\r\n             * @error alignment-config-name-not-recognized\r\n             * @param option Options with unknown value of the `name` property.\r\n             */\r\n            logWarning('alignment-config-name-not-recognized', { option });\r\n        }\r\n        return isNameValid;\r\n    });\r\n    const classNameCount = normalizedOptions.filter(option => Boolean(option.className)).length;\r\n    // We either use classes for all styling options or for none.\r\n    if (classNameCount && classNameCount < normalizedOptions.length) {\r\n        /**\r\n         * The `className` property has to be defined for all options once at least one option declares `className`.\r\n         *\r\n         * @error alignment-config-classnames-are-missing\r\n         * @param configuredOptions Contents of `alignment.options`.\r\n         */\r\n        throw new CKEditorError('alignment-config-classnames-are-missing', { configuredOptions });\r\n    }\r\n    // Validate resulting config.\r\n    normalizedOptions.forEach((option, index, allOptions) => {\r\n        const succeedingOptions = allOptions.slice(index + 1);\r\n        const nameAlreadyExists = succeedingOptions.some(item => item.name == option.name);\r\n        if (nameAlreadyExists) {\r\n            /**\r\n             * The same `name` in one of the `alignment.options` was already declared.\r\n             * Each `name` representing one alignment option can be set exactly once.\r\n             *\r\n             * @error alignment-config-name-already-defined\r\n             * @param option First option that declares given `name`.\r\n             * @param configuredOptions Contents of `alignment.options`.\r\n             */\r\n            throw new CKEditorError('alignment-config-name-already-defined', { option, configuredOptions });\r\n        }\r\n        // The `className` property is present. Check for duplicates then.\r\n        if (option.className) {\r\n            const classNameAlreadyExists = succeedingOptions.some(item => item.className == option.className);\r\n            if (classNameAlreadyExists) {\r\n                /**\r\n                 * The same `className` in one of the `alignment.options` was already declared.\r\n                 *\r\n                 * @error alignment-config-classname-already-defined\r\n                 * @param option First option that declares given `className`.\r\n                 * @param configuredOptions\r\n                 * Contents of `alignment.options`.\r\n                 */\r\n                throw new CKEditorError('alignment-config-classname-already-defined', { option, configuredOptions });\r\n            }\r\n        }\r\n    });\r\n    return normalizedOptions;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module alignment/alignmentcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\nimport { isDefault } from './utils';\r\nconst ALIGNMENT = 'alignment';\r\n/**\r\n * The alignment command plugin.\r\n */\r\nexport default class AlignmentCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const editor = this.editor;\r\n        const locale = editor.locale;\r\n        const firstBlock = first(this.editor.model.document.selection.getSelectedBlocks());\r\n        // As first check whether to enable or disable the command as the value will always be false if the command cannot be enabled.\r\n        this.isEnabled = Boolean(firstBlock) && this._canBeAligned(firstBlock);\r\n        if (this.isEnabled && firstBlock.hasAttribute('alignment')) {\r\n            this.value = firstBlock.getAttribute('alignment');\r\n        }\r\n        else {\r\n            this.value = locale.contentLanguageDirection === 'rtl' ? 'right' : 'left';\r\n        }\r\n    }\r\n    /**\r\n     * Executes the command. Applies the alignment `value` to the selected blocks.\r\n     * If no `value` is passed, the `value` is the default one or it is equal to the currently selected block's alignment attribute,\r\n     * the command will remove the attribute from the selected blocks.\r\n     *\r\n     * @param options Options for the executed command.\r\n     * @param options.value The value to apply.\r\n     * @fires execute\r\n     */\r\n    execute(options = {}) {\r\n        const editor = this.editor;\r\n        const locale = editor.locale;\r\n        const model = editor.model;\r\n        const doc = model.document;\r\n        const value = options.value;\r\n        model.change(writer => {\r\n            // Get only those blocks from selected that can have alignment set\r\n            const blocks = Array.from(doc.selection.getSelectedBlocks()).filter(block => this._canBeAligned(block));\r\n            const currentAlignment = blocks[0].getAttribute('alignment');\r\n            // Remove alignment attribute if current alignment is:\r\n            // - default (should not be stored in model as it will bloat model data)\r\n            // - equal to currently set\r\n            // - or no value is passed - denotes default alignment.\r\n            const removeAlignment = isDefault(value, locale) || currentAlignment === value || !value;\r\n            if (removeAlignment) {\r\n                removeAlignmentFromSelection(blocks, writer);\r\n            }\r\n            else {\r\n                setAlignmentOnSelection(blocks, writer, value);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks whether a block can have alignment set.\r\n     *\r\n     * @param block The block to be checked.\r\n     */\r\n    _canBeAligned(block) {\r\n        return this.editor.model.schema.checkAttribute(block, ALIGNMENT);\r\n    }\r\n}\r\n/**\r\n * Removes the alignment attribute from blocks.\r\n */\r\nfunction removeAlignmentFromSelection(blocks, writer) {\r\n    for (const block of blocks) {\r\n        writer.removeAttribute(ALIGNMENT, block);\r\n    }\r\n}\r\n/**\r\n * Sets the alignment attribute on blocks.\r\n */\r\nfunction setAlignmentOnSelection(blocks, writer, alignment) {\r\n    for (const block of blocks) {\r\n        writer.setAttribute(ALIGNMENT, alignment, block);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module alignment/alignmentediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport AlignmentCommand from './alignmentcommand';\r\nimport { isDefault, isSupported, normalizeAlignmentOptions, supportedOptions } from './utils';\r\n/**\r\n * The alignment editing feature. It introduces the {@link module:alignment/alignmentcommand~AlignmentCommand command} and adds\r\n * the `alignment` attribute for block elements in the {@link module:engine/model/model~Model model}.\r\n */\r\nexport default class AlignmentEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'AlignmentEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define('alignment', {\r\n            options: supportedOptions.map(option => ({ name: option }))\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const locale = editor.locale;\r\n        const schema = editor.model.schema;\r\n        const options = normalizeAlignmentOptions(editor.config.get('alignment.options'));\r\n        // Filter out unsupported options and those that are redundant, e.g. `left` in LTR / `right` in RTL mode.\r\n        const optionsToConvert = options.filter(option => isSupported(option.name) && !isDefault(option.name, locale));\r\n        // Once there is at least one `className` defined, we switch to alignment with classes.\r\n        const shouldUseClasses = optionsToConvert.some(option => !!option.className);\r\n        // Allow alignment attribute on all blocks.\r\n        schema.extend('$block', { allowAttributes: 'alignment' });\r\n        editor.model.schema.setAttributeProperties('alignment', { isFormatting: true });\r\n        if (shouldUseClasses) {\r\n            editor.conversion.attributeToAttribute(buildClassDefinition(optionsToConvert));\r\n        }\r\n        else {\r\n            // Downcast inline styles.\r\n            editor.conversion.for('downcast').attributeToAttribute(buildDowncastInlineDefinition(optionsToConvert));\r\n        }\r\n        const upcastInlineDefinitions = buildUpcastInlineDefinitions(optionsToConvert);\r\n        // Always upcast from inline styles.\r\n        for (const definition of upcastInlineDefinitions) {\r\n            editor.conversion.for('upcast').attributeToAttribute(definition);\r\n        }\r\n        const upcastCompatibilityDefinitions = buildUpcastCompatibilityDefinitions(optionsToConvert);\r\n        // Always upcast from deprecated `align` attribute.\r\n        for (const definition of upcastCompatibilityDefinitions) {\r\n            editor.conversion.for('upcast').attributeToAttribute(definition);\r\n        }\r\n        editor.commands.add('alignment', new AlignmentCommand(editor));\r\n    }\r\n}\r\n/**\r\n * Prepare downcast conversion definition for inline alignment styling.\r\n */\r\nfunction buildDowncastInlineDefinition(options) {\r\n    const view = {};\r\n    for (const { name } of options) {\r\n        view[name] = {\r\n            key: 'style',\r\n            value: {\r\n                'text-align': name\r\n            }\r\n        };\r\n    }\r\n    const definition = {\r\n        model: {\r\n            key: 'alignment',\r\n            values: options.map(option => option.name)\r\n        },\r\n        view\r\n    };\r\n    return definition;\r\n}\r\n/**\r\n * Prepare upcast definitions for inline alignment styles.\r\n */\r\nfunction buildUpcastInlineDefinitions(options) {\r\n    const definitions = [];\r\n    for (const { name } of options) {\r\n        definitions.push({\r\n            view: {\r\n                key: 'style',\r\n                value: {\r\n                    'text-align': name\r\n                }\r\n            },\r\n            model: {\r\n                key: 'alignment',\r\n                value: name\r\n            }\r\n        });\r\n    }\r\n    return definitions;\r\n}\r\n/**\r\n * Prepare upcast definitions for deprecated `align` attribute.\r\n */\r\nfunction buildUpcastCompatibilityDefinitions(options) {\r\n    const definitions = [];\r\n    for (const { name } of options) {\r\n        definitions.push({\r\n            view: {\r\n                key: 'align',\r\n                value: name\r\n            },\r\n            model: {\r\n                key: 'alignment',\r\n                value: name\r\n            }\r\n        });\r\n    }\r\n    return definitions;\r\n}\r\n/**\r\n * Prepare conversion definitions for upcast and downcast alignment with classes.\r\n */\r\nfunction buildClassDefinition(options) {\r\n    const view = {};\r\n    for (const option of options) {\r\n        view[option.name] = {\r\n            key: 'class',\r\n            value: option.className\r\n        };\r\n    }\r\n    const definition = {\r\n        model: {\r\n            key: 'alignment',\r\n            values: options.map(option => option.name)\r\n        },\r\n        view\r\n    };\r\n    return definition;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module alignment/alignmentui\r\n */\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { ButtonView, createDropdown, addToolbarToDropdown } from 'ckeditor5/src/ui';\r\nimport { isSupported, normalizeAlignmentOptions } from './utils';\r\nconst iconsMap = new Map([\r\n    ['left', icons.alignLeft],\r\n    ['right', icons.alignRight],\r\n    ['center', icons.alignCenter],\r\n    ['justify', icons.alignJustify]\r\n]);\r\n/**\r\n * The default alignment UI plugin.\r\n *\r\n * It introduces the `'alignment:left'`, `'alignment:right'`, `'alignment:center'` and `'alignment:justify'` buttons\r\n * and the `'alignment'` dropdown.\r\n */\r\nexport default class AlignmentUI extends Plugin {\r\n    /**\r\n     * Returns the localized option titles provided by the plugin.\r\n     *\r\n     * The following localized titles corresponding with\r\n     * {@link module:alignment/alignmentconfig~AlignmentConfig#options} are available:\r\n     *\r\n     * * `'left'`,\r\n     * * `'right'`,\r\n     * * `'center'`,\r\n     * * `'justify'`.\r\n     *\r\n     * @readonly\r\n     */\r\n    get localizedOptionTitles() {\r\n        const t = this.editor.t;\r\n        return {\r\n            'left': t('Align left'),\r\n            'right': t('Align right'),\r\n            'center': t('Align center'),\r\n            'justify': t('Justify')\r\n        };\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'AlignmentUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const componentFactory = editor.ui.componentFactory;\r\n        const t = editor.t;\r\n        const options = normalizeAlignmentOptions(editor.config.get('alignment.options'));\r\n        options\r\n            .map(option => option.name)\r\n            .filter(isSupported)\r\n            .forEach(option => this._addButton(option));\r\n        componentFactory.add('alignment', locale => {\r\n            const dropdownView = createDropdown(locale);\r\n            // Add existing alignment buttons to dropdown's toolbar.\r\n            addToolbarToDropdown(dropdownView, () => options.map(option => componentFactory.create(`alignment:${option.name}`)), {\r\n                enableActiveItemFocusOnDropdownOpen: true,\r\n                isVertical: true,\r\n                ariaLabel: t('Text alignment toolbar')\r\n            });\r\n            // Configure dropdown properties an behavior.\r\n            dropdownView.buttonView.set({\r\n                label: t('Text alignment'),\r\n                tooltip: true\r\n            });\r\n            dropdownView.extendTemplate({\r\n                attributes: {\r\n                    class: 'ck-alignment-dropdown'\r\n                }\r\n            });\r\n            // The default icon depends on the direction of the content.\r\n            const defaultIcon = locale.contentLanguageDirection === 'rtl' ? iconsMap.get('right') : iconsMap.get('left');\r\n            const command = editor.commands.get('alignment');\r\n            // Change icon to reflect current selection's alignment.\r\n            dropdownView.buttonView.bind('icon').to(command, 'value', value => iconsMap.get(value) || defaultIcon);\r\n            // Enable button if any of the buttons is enabled.\r\n            dropdownView.bind('isEnabled').to(command, 'isEnabled');\r\n            // Focus the editable after executing the command.\r\n            // Overrides a default behaviour where the focus is moved to the dropdown button (#12125).\r\n            this.listenTo(dropdownView, 'execute', () => {\r\n                editor.editing.view.focus();\r\n            });\r\n            return dropdownView;\r\n        });\r\n    }\r\n    /**\r\n     * Helper method for initializing the button and linking it with an appropriate command.\r\n     *\r\n     * @param option The name of the alignment option for which the button is added.\r\n     */\r\n    _addButton(option) {\r\n        const editor = this.editor;\r\n        editor.ui.componentFactory.add(`alignment:${option}`, locale => {\r\n            const command = editor.commands.get('alignment');\r\n            const buttonView = new ButtonView(locale);\r\n            buttonView.set({\r\n                label: this.localizedOptionTitles[option],\r\n                icon: iconsMap.get(option),\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            // Bind button model to command.\r\n            buttonView.bind('isEnabled').to(command);\r\n            buttonView.bind('isOn').to(command, 'value', value => value === option);\r\n            // Execute command.\r\n            this.listenTo(buttonView, 'execute', () => {\r\n                editor.execute('alignment', { value: option });\r\n                editor.editing.view.focus();\r\n            });\r\n            return buttonView;\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module alignment/alignment\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport AlignmentEditing from './alignmentediting';\r\nimport AlignmentUI from './alignmentui';\r\n/**\r\n * The text alignment plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/text-alignment Text alignment} feature guide\r\n * and the {@glink api/alignment package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:alignment/alignmentediting~AlignmentEditing} and\r\n * {@link module:alignment/alignmentui~AlignmentUI} plugins.\r\n */\r\nexport default class Alignment extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [AlignmentEditing, AlignmentUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Alignment';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * Creates a view element representing the inline image.\r\n *\r\n * ```html\r\n * <span class=\"image-inline\"><img></img></span>\r\n * ```\r\n *\r\n * Note that `alt` and `src` attributes are converted separately, so they are not included.\r\n *\r\n * @internal\r\n */\r\nexport function createInlineImageViewElement(writer) {\r\n    return writer.createContainerElement('span', { class: 'image-inline' }, writer.createEmptyElement('img'));\r\n}\r\n/**\r\n * Creates a view element representing the block image.\r\n *\r\n * ```html\r\n * <figure class=\"image\"><img></img></figure>\r\n * ```\r\n *\r\n * Note that `alt` and `src` attributes are converted separately, so they are not included.\r\n *\r\n * @internal\r\n */\r\nexport function createBlockImageViewElement(writer) {\r\n    return writer.createContainerElement('figure', { class: 'image' }, [\r\n        writer.createEmptyElement('img'),\r\n        writer.createSlot('children')\r\n    ]);\r\n}\r\n/**\r\n * A function returning a `MatcherPattern` for a particular type of View images.\r\n *\r\n * @internal\r\n * @param matchImageType The type of created image.\r\n */\r\nexport function getImgViewElementMatcher(editor, matchImageType) {\r\n    const imageUtils = editor.plugins.get('ImageUtils');\r\n    const areBothImagePluginsLoaded = editor.plugins.has('ImageInlineEditing') && editor.plugins.has('ImageBlockEditing');\r\n    return element => {\r\n        // Check if the matched view element is an <img>.\r\n        if (!imageUtils.isInlineImageView(element)) {\r\n            return null;\r\n        }\r\n        // If just one of the plugins is loaded (block or inline), it will match all kinds of images.\r\n        if (!areBothImagePluginsLoaded) {\r\n            return getPositiveMatchPattern(element);\r\n        }\r\n        // The <img> can be standalone, wrapped in <figure>...</figure> (ImageBlock plugin) or\r\n        // wrapped in <figure><a>...</a></figure> (LinkImage plugin).\r\n        const imageType = element.getStyle('display') == 'block' || element.findAncestor(imageUtils.isBlockImageView) ?\r\n            'imageBlock' :\r\n            'imageInline';\r\n        if (imageType !== matchImageType) {\r\n            return null;\r\n        }\r\n        return getPositiveMatchPattern(element);\r\n    };\r\n    function getPositiveMatchPattern(element) {\r\n        const pattern = {\r\n            name: true\r\n        };\r\n        // This will trigger src consumption (See https://github.com/ckeditor/ckeditor5/issues/11530).\r\n        if (element.hasAttribute('src')) {\r\n            pattern.attributes = ['src'];\r\n        }\r\n        return pattern;\r\n    }\r\n}\r\n/**\r\n * Considering the current model selection, it returns the name of the model image element\r\n * (`'imageBlock'` or `'imageInline'`) that will make most sense from the UX perspective if a new\r\n * image was inserted (also: uploaded, dropped, pasted) at that selection.\r\n *\r\n * The assumption is that inserting images into empty blocks or on other block widgets should\r\n * produce block images. Inline images should be inserted in other cases, e.g. in paragraphs\r\n * that already contain some text.\r\n *\r\n * @internal\r\n */\r\nexport function determineImageTypeForInsertionAtSelection(schema, selection) {\r\n    const firstBlock = first(selection.getSelectedBlocks());\r\n    // Insert a block image if the selection is not in/on block elements or it's on a block widget.\r\n    if (!firstBlock || schema.isObject(firstBlock)) {\r\n        return 'imageBlock';\r\n    }\r\n    // A block image should also be inserted into an empty block element\r\n    // (that is not an empty list item so the list won't get split).\r\n    if (firstBlock.isEmpty && firstBlock.name != 'listItem') {\r\n        return 'imageBlock';\r\n    }\r\n    // Otherwise insert an inline image.\r\n    return 'imageInline';\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { findOptimalInsertionRange, isWidget, toWidget } from 'ckeditor5/src/widget';\r\nimport { determineImageTypeForInsertionAtSelection } from './image/utils';\r\n/**\r\n * A set of helpers related to images.\r\n */\r\nexport default class ImageUtils extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageUtils';\r\n    }\r\n    /**\r\n     * Checks if the provided model element is an `image` or `imageInline`.\r\n     */\r\n    isImage(modelElement) {\r\n        return this.isInlineImage(modelElement) || this.isBlockImage(modelElement);\r\n    }\r\n    /**\r\n     * Checks if the provided view element represents an inline image.\r\n     *\r\n     * Also, see {@link module:image/imageutils~ImageUtils#isImageWidget}.\r\n     */\r\n    isInlineImageView(element) {\r\n        return !!element && element.is('element', 'img');\r\n    }\r\n    /**\r\n     * Checks if the provided view element represents a block image.\r\n     *\r\n     * Also, see {@link module:image/imageutils~ImageUtils#isImageWidget}.\r\n     */\r\n    isBlockImageView(element) {\r\n        return !!element && element.is('element', 'figure') && element.hasClass('image');\r\n    }\r\n    /**\r\n     * Handles inserting single file. This method unifies image insertion using {@link module:widget/utils~findOptimalInsertionRange}\r\n     * method.\r\n     *\r\n     * ```ts\r\n     * const imageUtils = editor.plugins.get( 'ImageUtils' );\r\n     *\r\n     * imageUtils.insertImage( { src: 'path/to/image.jpg' } );\r\n     * ```\r\n     *\r\n     * @param attributes Attributes of the inserted image.\r\n     * This method filters out the attributes which are disallowed by the {@link module:engine/model/schema~Schema}.\r\n     * @param selectable Place to insert the image. If not specified,\r\n     * the {@link module:widget/utils~findOptimalInsertionRange} logic will be applied for the block images\r\n     * and `model.document.selection` for the inline images.\r\n     *\r\n     * **Note**: If `selectable` is passed, this helper will not be able to set selection attributes (such as `linkHref`)\r\n     * and apply them to the new image. In this case, make sure all selection attributes are passed in `attributes`.\r\n     *\r\n     * @param imageType Image type of inserted image. If not specified,\r\n     * it will be determined automatically depending of editor config or place of the insertion.\r\n     * @return The inserted model image element.\r\n     */\r\n    insertImage(attributes = {}, selectable = null, imageType = null) {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const selection = model.document.selection;\r\n        imageType = determineImageTypeForInsertion(editor, selectable || selection, imageType);\r\n        // Mix declarative attributes with selection attributes because the new image should \"inherit\"\r\n        // the latter for best UX. For instance, inline images inserted into existing links\r\n        // should not split them. To do that, they need to have \"linkHref\" inherited from the selection.\r\n        attributes = {\r\n            ...Object.fromEntries(selection.getAttributes()),\r\n            ...attributes\r\n        };\r\n        for (const attributeName in attributes) {\r\n            if (!model.schema.checkAttribute(imageType, attributeName)) {\r\n                delete attributes[attributeName];\r\n            }\r\n        }\r\n        return model.change(writer => {\r\n            const imageElement = writer.createElement(imageType, attributes);\r\n            model.insertObject(imageElement, selectable, null, {\r\n                setSelection: 'on',\r\n                // If we want to insert a block image (for whatever reason) then we don't want to split text blocks.\r\n                // This applies only when we don't have the selectable specified (i.e., we insert multiple block images at once).\r\n                findOptimalPosition: !selectable && imageType != 'imageInline' ? 'auto' : undefined\r\n            });\r\n            // Inserting an image might've failed due to schema regulations.\r\n            if (imageElement.parent) {\r\n                return imageElement;\r\n            }\r\n            return null;\r\n        });\r\n    }\r\n    /**\r\n     * Returns an image widget editing view element if one is selected or is among the selection's ancestors.\r\n     */\r\n    getClosestSelectedImageWidget(selection) {\r\n        const selectionPosition = selection.getFirstPosition();\r\n        if (!selectionPosition) {\r\n            return null;\r\n        }\r\n        const viewElement = selection.getSelectedElement();\r\n        if (viewElement && this.isImageWidget(viewElement)) {\r\n            return viewElement;\r\n        }\r\n        let parent = selectionPosition.parent;\r\n        while (parent) {\r\n            if (parent.is('element') && this.isImageWidget(parent)) {\r\n                return parent;\r\n            }\r\n            parent = parent.parent;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns a image model element if one is selected or is among the selection's ancestors.\r\n     */\r\n    getClosestSelectedImageElement(selection) {\r\n        const selectedElement = selection.getSelectedElement();\r\n        return this.isImage(selectedElement) ? selectedElement : selection.getFirstPosition().findAncestor('imageBlock');\r\n    }\r\n    /**\r\n     * Checks if image can be inserted at current model selection.\r\n     *\r\n     * @internal\r\n     */\r\n    isImageAllowed() {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        return isImageAllowedInParent(this.editor, selection) && isNotInsideImage(selection);\r\n    }\r\n    /**\r\n     * Converts a given {@link module:engine/view/element~Element} to an image widget:\r\n     * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to recognize the image widget\r\n     * element.\r\n     * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\r\n     *\r\n     * @param writer An instance of the view writer.\r\n     * @param label The element's label. It will be concatenated with the image `alt` attribute if one is present.\r\n     */\r\n    toImageWidget(viewElement, writer, label) {\r\n        writer.setCustomProperty('image', true, viewElement);\r\n        const labelCreator = () => {\r\n            const imgElement = this.findViewImgElement(viewElement);\r\n            const altText = imgElement.getAttribute('alt');\r\n            return altText ? `${altText} ${label}` : label;\r\n        };\r\n        return toWidget(viewElement, writer, { label: labelCreator });\r\n    }\r\n    /**\r\n     * Checks if a given view element is an image widget.\r\n     */\r\n    isImageWidget(viewElement) {\r\n        return !!viewElement.getCustomProperty('image') && isWidget(viewElement);\r\n    }\r\n    /**\r\n     * Checks if the provided model element is an `image`.\r\n     */\r\n    isBlockImage(modelElement) {\r\n        return !!modelElement && modelElement.is('element', 'imageBlock');\r\n    }\r\n    /**\r\n     * Checks if the provided model element is an `imageInline`.\r\n     */\r\n    isInlineImage(modelElement) {\r\n        return !!modelElement && modelElement.is('element', 'imageInline');\r\n    }\r\n    /**\r\n     * Get the view `<img>` from another view element, e.g. a widget (`<figure class=\"image\">`), a link (`<a>`).\r\n     *\r\n     * The `<img>` can be located deep in other elements, so this helper performs a deep tree search.\r\n     */\r\n    findViewImgElement(figureView) {\r\n        if (this.isInlineImageView(figureView)) {\r\n            return figureView;\r\n        }\r\n        const editingView = this.editor.editing.view;\r\n        for (const { item } of editingView.createRangeIn(figureView)) {\r\n            if (this.isInlineImageView(item)) {\r\n                return item;\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Checks if image is allowed by schema in optimal insertion parent.\r\n */\r\nfunction isImageAllowedInParent(editor, selection) {\r\n    const imageType = determineImageTypeForInsertion(editor, selection, null);\r\n    if (imageType == 'imageBlock') {\r\n        const parent = getInsertImageParent(selection, editor.model);\r\n        if (editor.model.schema.checkChild(parent, 'imageBlock')) {\r\n            return true;\r\n        }\r\n    }\r\n    else if (editor.model.schema.checkChild(selection.focus, 'imageInline')) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Checks if selection is not placed inside an image (e.g. its caption).\r\n */\r\nfunction isNotInsideImage(selection) {\r\n    return [...selection.focus.getAncestors()].every(ancestor => !ancestor.is('element', 'imageBlock'));\r\n}\r\n/**\r\n * Returns a node that will be used to insert image with `model.insertContent`.\r\n */\r\nfunction getInsertImageParent(selection, model) {\r\n    const insertionRange = findOptimalInsertionRange(selection, model);\r\n    const parent = insertionRange.start.parent;\r\n    if (parent.isEmpty && !parent.is('element', '$root')) {\r\n        return parent.parent;\r\n    }\r\n    return parent;\r\n}\r\n/**\r\n * Determine image element type name depending on editor config or place of insertion.\r\n *\r\n * @param imageType Image element type name. Used to force return of provided element name,\r\n * but only if there is proper plugin enabled.\r\n */\r\nfunction determineImageTypeForInsertion(editor, selectable, imageType) {\r\n    const schema = editor.model.schema;\r\n    const configImageInsertType = editor.config.get('image.insert.type');\r\n    if (!editor.plugins.has('ImageBlockEditing')) {\r\n        return 'imageInline';\r\n    }\r\n    if (!editor.plugins.has('ImageInlineEditing')) {\r\n        return 'imageBlock';\r\n    }\r\n    if (imageType) {\r\n        return imageType;\r\n    }\r\n    if (configImageInsertType === 'inline') {\r\n        return 'imageInline';\r\n    }\r\n    if (configImageInsertType === 'block') {\r\n        return 'imageBlock';\r\n    }\r\n    // Try to replace the selected widget (e.g. another image).\r\n    if (selectable.is('selection')) {\r\n        return determineImageTypeForInsertionAtSelection(schema, selectable);\r\n    }\r\n    return schema.checkChild(selectable, 'imageInline') ? 'imageInline' : 'imageBlock';\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/autoimage\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Clipboard } from 'ckeditor5/src/clipboard';\r\nimport { LivePosition, LiveRange } from 'ckeditor5/src/engine';\r\nimport { Undo } from 'ckeditor5/src/undo';\r\nimport { Delete } from 'ckeditor5/src/typing';\r\nimport { global } from 'ckeditor5/src/utils';\r\nimport ImageUtils from './imageutils';\r\n// Implements the pattern: http(s)://(www.)example.com/path/to/resource.ext?query=params&maybe=too.\r\nconst IMAGE_URL_REGEXP = new RegExp(String(/^(http(s)?:\\/\\/)?[\\w-]+\\.[\\w.~:/[\\]@!$&'()*+,;=%-]+/.source +\r\n    /\\.(jpg|jpeg|png|gif|ico|webp|JPG|JPEG|PNG|GIF|ICO|WEBP)/.source +\r\n    /(\\?[\\w.~:/[\\]@!$&'()*+,;=%-]*)?/.source +\r\n    /(#[\\w.~:/[\\]@!$&'()*+,;=%-]*)?$/.source));\r\n/**\r\n * The auto-image plugin. It recognizes image links in the pasted content and embeds\r\n * them shortly after they are injected into the document.\r\n */\r\nexport default class AutoImage extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Clipboard, ImageUtils, Undo, Delete];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'AutoImage';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._timeoutId = null;\r\n        this._positionToInsert = null;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const modelDocument = editor.model.document;\r\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\r\n        // We need to listen on `Clipboard#inputTransformation` because we need to save positions of selection.\r\n        // After pasting, the content between those positions will be checked for a URL that could be transformed\r\n        // into an image.\r\n        this.listenTo(clipboardPipeline, 'inputTransformation', () => {\r\n            const firstRange = modelDocument.selection.getFirstRange();\r\n            const leftLivePosition = LivePosition.fromPosition(firstRange.start);\r\n            leftLivePosition.stickiness = 'toPrevious';\r\n            const rightLivePosition = LivePosition.fromPosition(firstRange.end);\r\n            rightLivePosition.stickiness = 'toNext';\r\n            modelDocument.once('change:data', () => {\r\n                this._embedImageBetweenPositions(leftLivePosition, rightLivePosition);\r\n                leftLivePosition.detach();\r\n                rightLivePosition.detach();\r\n            }, { priority: 'high' });\r\n        });\r\n        editor.commands.get('undo').on('execute', () => {\r\n            if (this._timeoutId) {\r\n                global.window.clearTimeout(this._timeoutId);\r\n                this._positionToInsert.detach();\r\n                this._timeoutId = null;\r\n                this._positionToInsert = null;\r\n            }\r\n        }, { priority: 'high' });\r\n    }\r\n    /**\r\n     * Analyzes the part of the document between provided positions in search for a URL representing an image.\r\n     * When the URL is found, it is automatically converted into an image.\r\n     *\r\n     * @param leftPosition Left position of the selection.\r\n     * @param rightPosition Right position of the selection.\r\n     */\r\n    _embedImageBetweenPositions(leftPosition, rightPosition) {\r\n        const editor = this.editor;\r\n        // TODO: Use a marker instead of LiveRange & LivePositions.\r\n        const urlRange = new LiveRange(leftPosition, rightPosition);\r\n        const walker = urlRange.getWalker({ ignoreElementEnd: true });\r\n        const selectionAttributes = Object.fromEntries(editor.model.document.selection.getAttributes());\r\n        const imageUtils = this.editor.plugins.get('ImageUtils');\r\n        let src = '';\r\n        for (const node of walker) {\r\n            if (node.item.is('$textProxy')) {\r\n                src += node.item.data;\r\n            }\r\n        }\r\n        src = src.trim();\r\n        // If the URL does not match the image URL regexp, let's skip that.\r\n        if (!src.match(IMAGE_URL_REGEXP)) {\r\n            urlRange.detach();\r\n            return;\r\n        }\r\n        // Position will not be available in the `setTimeout` function so let's clone it.\r\n        this._positionToInsert = LivePosition.fromPosition(leftPosition);\r\n        // This action mustn't be executed if undo was called between pasting and auto-embedding.\r\n        this._timeoutId = setTimeout(() => {\r\n            // Do nothing if image element cannot be inserted at the current position.\r\n            // See https://github.com/ckeditor/ckeditor5/issues/2763.\r\n            // Condition must be checked after timeout - pasting may take place on an element, replacing it. The final position matters.\r\n            const imageCommand = editor.commands.get('insertImage');\r\n            if (!imageCommand.isEnabled) {\r\n                urlRange.detach();\r\n                return;\r\n            }\r\n            editor.model.change(writer => {\r\n                this._timeoutId = null;\r\n                writer.remove(urlRange);\r\n                urlRange.detach();\r\n                let insertionPosition;\r\n                // Check if the position where the element should be inserted is still valid.\r\n                // Otherwise leave it as undefined to use the logic of insertImage().\r\n                if (this._positionToInsert.root.rootName !== '$graveyard') {\r\n                    insertionPosition = this._positionToInsert.toPosition();\r\n                }\r\n                imageUtils.insertImage({ ...selectionAttributes, src }, insertionPosition);\r\n                this._positionToInsert.detach();\r\n                this._positionToInsert = null;\r\n            });\r\n            const deletePlugin = editor.plugins.get('Delete');\r\n            deletePlugin.requestUndoOnBackspace();\r\n        }, 100);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagetextalternative/imagetextalternativecommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The image text alternative command. It is used to change the `alt` attribute of `<imageBlock>` and `<imageInline>` model elements.\r\n */\r\nexport default class ImageTextAlternativeCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const editor = this.editor;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const element = imageUtils.getClosestSelectedImageElement(this.editor.model.document.selection);\r\n        this.isEnabled = !!element;\r\n        if (this.isEnabled && element.hasAttribute('alt')) {\r\n            this.value = element.getAttribute('alt');\r\n        }\r\n        else {\r\n            this.value = false;\r\n        }\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options\r\n     * @param options.newValue The new value of the `alt` attribute to set.\r\n     */\r\n    execute(options) {\r\n        const editor = this.editor;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const model = editor.model;\r\n        const imageElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\r\n        model.change(writer => {\r\n            writer.setAttribute('alt', options.newValue, imageElement);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagetextalternative/imagetextalternativeediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ImageTextAlternativeCommand from './imagetextalternativecommand';\r\nimport ImageUtils from '../imageutils';\r\n/**\r\n * The image text alternative editing plugin.\r\n *\r\n * Registers the `'imageTextAlternative'` command.\r\n */\r\nexport default class ImageTextAlternativeEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageTextAlternativeEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        this.editor.commands.add('imageTextAlternative', new ImageTextAlternativeCommand(this.editor));\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./textalternativeform.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../../../css-loader/dist/cjs.js!../../../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./responsiveform.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagetextalternative/ui/textalternativeformview\r\n */\r\nimport { ButtonView, FocusCycler, LabeledFieldView, View, ViewCollection, createLabeledInputText, submitHandler } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport { icons } from 'ckeditor5/src/core';\r\nimport '../../../theme/textalternativeform.css';\r\n// See: #8833.\r\n// eslint-disable-next-line ckeditor5-rules/ckeditor-imports\r\nimport '@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css';\r\n/**\r\n * The TextAlternativeFormView class.\r\n */\r\nexport default class TextAlternativeFormView extends View {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(locale) {\r\n        super(locale);\r\n        const t = this.locale.t;\r\n        this.focusTracker = new FocusTracker();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this.labeledInput = this._createLabeledInputView();\r\n        this.saveButtonView = this._createButton(t('Save'), icons.check, 'ck-button-save');\r\n        this.saveButtonView.type = 'submit';\r\n        this.cancelButtonView = this._createButton(t('Cancel'), icons.cancel, 'ck-button-cancel', 'cancel');\r\n        this._focusables = new ViewCollection();\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate form fields backwards using the Shift + Tab keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate form fields forwards using the Tab key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        this.setTemplate({\r\n            tag: 'form',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-text-alternative-form',\r\n                    'ck-responsive-form'\r\n                ],\r\n                // https://github.com/ckeditor/ckeditor5-image/issues/40\r\n                tabindex: '-1'\r\n            },\r\n            children: [\r\n                this.labeledInput,\r\n                this.saveButtonView,\r\n                this.cancelButtonView\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        this.keystrokes.listenTo(this.element);\r\n        submitHandler({ view: this });\r\n        [this.labeledInput, this.saveButtonView, this.cancelButtonView]\r\n            .forEach(v => {\r\n            // Register the view as focusable.\r\n            this._focusables.add(v);\r\n            // Register the view in the focus tracker.\r\n            this.focusTracker.add(v.element);\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Creates the button view.\r\n     *\r\n     * @param label The button label\r\n     * @param icon The button's icon.\r\n     * @param className The additional button CSS class name.\r\n     * @param eventName The event name that the ButtonView#execute event will be delegated to.\r\n     * @returns The button view instance.\r\n     */\r\n    _createButton(label, icon, className, eventName) {\r\n        const button = new ButtonView(this.locale);\r\n        button.set({\r\n            label,\r\n            icon,\r\n            tooltip: true\r\n        });\r\n        button.extendTemplate({\r\n            attributes: {\r\n                class: className\r\n            }\r\n        });\r\n        if (eventName) {\r\n            button.delegate('execute').to(this, eventName);\r\n        }\r\n        return button;\r\n    }\r\n    /**\r\n     * Creates an input with a label.\r\n     *\r\n     * @returns Labeled field view instance.\r\n     */\r\n    _createLabeledInputView() {\r\n        const t = this.locale.t;\r\n        const labeledInput = new LabeledFieldView(this.locale, createLabeledInputText);\r\n        labeledInput.label = t('Text alternative');\r\n        return labeledInput;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { BalloonPanelView } from 'ckeditor5/src/ui';\r\n/**\r\n * A helper utility that positions the\r\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} instance\r\n * with respect to the image in the editor content, if one is selected.\r\n *\r\n * @param editor The editor instance.\r\n */\r\nexport function repositionContextualBalloon(editor) {\r\n    const balloon = editor.plugins.get('ContextualBalloon');\r\n    const imageUtils = editor.plugins.get('ImageUtils');\r\n    if (imageUtils.getClosestSelectedImageWidget(editor.editing.view.document.selection)) {\r\n        const position = getBalloonPositionData(editor);\r\n        balloon.updatePosition(position);\r\n    }\r\n}\r\n/**\r\n * Returns the positioning options that control the geometry of the\r\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} with respect\r\n * to the selected element in the editor content.\r\n *\r\n * @param editor The editor instance.\r\n */\r\nexport function getBalloonPositionData(editor) {\r\n    const editingView = editor.editing.view;\r\n    const defaultPositions = BalloonPanelView.defaultPositions;\r\n    const imageUtils = editor.plugins.get('ImageUtils');\r\n    return {\r\n        target: editingView.domConverter.mapViewToDom(imageUtils.getClosestSelectedImageWidget(editingView.document.selection)),\r\n        positions: [\r\n            defaultPositions.northArrowSouth,\r\n            defaultPositions.northArrowSouthWest,\r\n            defaultPositions.northArrowSouthEast,\r\n            defaultPositions.southArrowNorth,\r\n            defaultPositions.southArrowNorthWest,\r\n            defaultPositions.southArrowNorthEast,\r\n            defaultPositions.viewportStickyNorth\r\n        ]\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagetextalternative/imagetextalternativeui\r\n */\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { ButtonView, ContextualBalloon, clickOutsideHandler, CssTransitionDisablerMixin } from 'ckeditor5/src/ui';\r\nimport TextAlternativeFormView from './ui/textalternativeformview';\r\nimport { repositionContextualBalloon, getBalloonPositionData } from '../image/ui/utils';\r\n/**\r\n * The image text alternative UI plugin.\r\n *\r\n * The plugin uses the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon}.\r\n */\r\nexport default class ImageTextAlternativeUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ContextualBalloon];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageTextAlternativeUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        this._createButton();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        // Destroy created UI components as they are not automatically destroyed (see ckeditor5#1341).\r\n        if (this._form) {\r\n            this._form.destroy();\r\n        }\r\n    }\r\n    /**\r\n     * Creates a button showing the balloon panel for changing the image text alternative and\r\n     * registers it in the editor {@link module:ui/componentfactory~ComponentFactory ComponentFactory}.\r\n     */\r\n    _createButton() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        editor.ui.componentFactory.add('imageTextAlternative', locale => {\r\n            const command = editor.commands.get('imageTextAlternative');\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Change image text alternative'),\r\n                icon: icons.lowVision,\r\n                tooltip: true\r\n            });\r\n            view.bind('isEnabled').to(command, 'isEnabled');\r\n            view.bind('isOn').to(command, 'value', value => !!value);\r\n            this.listenTo(view, 'execute', () => {\r\n                this._showForm();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n    /**\r\n     * Creates the {@link module:image/imagetextalternative/ui/textalternativeformview~TextAlternativeFormView}\r\n     * form.\r\n     */\r\n    _createForm() {\r\n        const editor = this.editor;\r\n        const view = editor.editing.view;\r\n        const viewDocument = view.document;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        this._balloon = this.editor.plugins.get('ContextualBalloon');\r\n        this._form = new (CssTransitionDisablerMixin(TextAlternativeFormView))(editor.locale);\r\n        // Render the form so its #element is available for clickOutsideHandler.\r\n        this._form.render();\r\n        this.listenTo(this._form, 'submit', () => {\r\n            editor.execute('imageTextAlternative', {\r\n                newValue: this._form.labeledInput.fieldView.element.value\r\n            });\r\n            this._hideForm(true);\r\n        });\r\n        this.listenTo(this._form, 'cancel', () => {\r\n            this._hideForm(true);\r\n        });\r\n        // Close the form on Esc key press.\r\n        this._form.keystrokes.set('Esc', (data, cancel) => {\r\n            this._hideForm(true);\r\n            cancel();\r\n        });\r\n        // Reposition the balloon or hide the form if an image widget is no longer selected.\r\n        this.listenTo(editor.ui, 'update', () => {\r\n            if (!imageUtils.getClosestSelectedImageWidget(viewDocument.selection)) {\r\n                this._hideForm(true);\r\n            }\r\n            else if (this._isVisible) {\r\n                repositionContextualBalloon(editor);\r\n            }\r\n        });\r\n        // Close on click outside of balloon panel element.\r\n        clickOutsideHandler({\r\n            emitter: this._form,\r\n            activator: () => this._isVisible,\r\n            contextElements: () => [this._balloon.view.element],\r\n            callback: () => this._hideForm()\r\n        });\r\n    }\r\n    /**\r\n     * Shows the {@link #_form} in the {@link #_balloon}.\r\n     */\r\n    _showForm() {\r\n        if (this._isVisible) {\r\n            return;\r\n        }\r\n        if (!this._form) {\r\n            this._createForm();\r\n        }\r\n        const editor = this.editor;\r\n        const command = editor.commands.get('imageTextAlternative');\r\n        const labeledInput = this._form.labeledInput;\r\n        this._form.disableCssTransitions();\r\n        if (!this._isInBalloon) {\r\n            this._balloon.add({\r\n                view: this._form,\r\n                position: getBalloonPositionData(editor)\r\n            });\r\n        }\r\n        // Make sure that each time the panel shows up, the field remains in sync with the value of\r\n        // the command. If the user typed in the input, then canceled the balloon (`labeledInput#value`\r\n        // stays unaltered) and re-opened it without changing the value of the command, they would see the\r\n        // old value instead of the actual value of the command.\r\n        // https://github.com/ckeditor/ckeditor5-image/issues/114\r\n        labeledInput.fieldView.value = labeledInput.fieldView.element.value = command.value || '';\r\n        this._form.labeledInput.fieldView.select();\r\n        this._form.enableCssTransitions();\r\n    }\r\n    /**\r\n     * Removes the {@link #_form} from the {@link #_balloon}.\r\n     *\r\n     * @param focusEditable Controls whether the editing view is focused afterwards.\r\n     */\r\n    _hideForm(focusEditable = false) {\r\n        if (!this._isInBalloon) {\r\n            return;\r\n        }\r\n        // Blur the input element before removing it from DOM to prevent issues in some browsers.\r\n        // See https://github.com/ckeditor/ckeditor5/issues/1501.\r\n        if (this._form.focusTracker.isFocused) {\r\n            this._form.saveButtonView.focus();\r\n        }\r\n        this._balloon.remove(this._form);\r\n        if (focusEditable) {\r\n            this.editor.editing.view.focus();\r\n        }\r\n    }\r\n    /**\r\n     * Returns `true` when the {@link #_form} is the visible view in the {@link #_balloon}.\r\n     */\r\n    get _isVisible() {\r\n        return !!this._balloon && this._balloon.visibleView === this._form;\r\n    }\r\n    /**\r\n     * Returns `true` when the {@link #_form} is in the {@link #_balloon}.\r\n     */\r\n    get _isInBalloon() {\r\n        return !!this._balloon && this._balloon.hasView(this._form);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagetextalternative\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ImageTextAlternativeEditing from './imagetextalternative/imagetextalternativeediting';\r\nimport ImageTextAlternativeUI from './imagetextalternative/imagetextalternativeui';\r\n/**\r\n * The image text alternative plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/images/images-styles image styles} documentation.\r\n *\r\n * This is a \"glue\" plugin which loads the\r\n *  {@link module:image/imagetextalternative/imagetextalternativeediting~ImageTextAlternativeEditing}\r\n * and {@link module:image/imagetextalternative/imagetextalternativeui~ImageTextAlternativeUI} plugins.\r\n */\r\nexport default class ImageTextAlternative extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageTextAlternativeEditing, ImageTextAlternativeUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageTextAlternative';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * Returns a function that converts the image view representation:\r\n *\r\n * ```html\r\n * <figure class=\"image\"><img src=\"...\" alt=\"...\"></img></figure>\r\n * ```\r\n *\r\n * to the model representation:\r\n *\r\n * ```html\r\n * <imageBlock src=\"...\" alt=\"...\"></imageBlock>\r\n * ```\r\n *\r\n * The entire content of the `<figure>` element except the first `<img>` is being converted as children\r\n * of the `<imageBlock>` model element.\r\n *\r\n * @internal\r\n */\r\nexport function upcastImageFigure(imageUtils) {\r\n    const converter = (evt, data, conversionApi) => {\r\n        // Do not convert if this is not an \"image figure\".\r\n        if (!conversionApi.consumable.test(data.viewItem, { name: true, classes: 'image' })) {\r\n            return;\r\n        }\r\n        // Find an image element inside the figure element.\r\n        const viewImage = imageUtils.findViewImgElement(data.viewItem);\r\n        // Do not convert if image element is absent or was already converted.\r\n        if (!viewImage || !conversionApi.consumable.test(viewImage, { name: true })) {\r\n            return;\r\n        }\r\n        // Consume the figure to prevent other converters from processing it again.\r\n        conversionApi.consumable.consume(data.viewItem, { name: true, classes: 'image' });\r\n        // Convert view image to model image.\r\n        const conversionResult = conversionApi.convertItem(viewImage, data.modelCursor);\r\n        // Get image element from conversion result.\r\n        const modelImage = first(conversionResult.modelRange.getItems());\r\n        // When image wasn't successfully converted then finish conversion.\r\n        if (!modelImage) {\r\n            // Revert consumed figure so other features can convert it.\r\n            conversionApi.consumable.revert(data.viewItem, { name: true, classes: 'image' });\r\n            return;\r\n        }\r\n        // Convert rest of the figure element's children as an image children.\r\n        conversionApi.convertChildren(data.viewItem, modelImage);\r\n        conversionApi.updateConversionResult(modelImage, data);\r\n    };\r\n    return dispatcher => {\r\n        dispatcher.on('element:figure', converter);\r\n    };\r\n}\r\n/**\r\n * Returns a function that converts the image view representation:\r\n *\r\n * ```html\r\n * <picture><source ... /><source ... />...<img ... /></picture>\r\n * ```\r\n *\r\n * to the model representation as the `sources` attribute:\r\n *\r\n * ```html\r\n * <image[Block|Inline] ... sources=\"...\"></image[Block|Inline]>\r\n * ```\r\n *\r\n * @internal\r\n */\r\nexport function upcastPicture(imageUtils) {\r\n    const sourceAttributeNames = ['srcset', 'media', 'type', 'sizes'];\r\n    const converter = (evt, data, conversionApi) => {\r\n        const pictureViewElement = data.viewItem;\r\n        // Do not convert <picture> if already consumed.\r\n        if (!conversionApi.consumable.test(pictureViewElement, { name: true })) {\r\n            return;\r\n        }\r\n        const sources = new Map();\r\n        // Collect all <source /> elements attribute values.\r\n        for (const childSourceElement of pictureViewElement.getChildren()) {\r\n            if (childSourceElement.is('element', 'source')) {\r\n                const attributes = {};\r\n                for (const name of sourceAttributeNames) {\r\n                    if (childSourceElement.hasAttribute(name)) {\r\n                        // Don't collect <source /> attribute if already consumed somewhere else.\r\n                        if (conversionApi.consumable.test(childSourceElement, { attributes: name })) {\r\n                            attributes[name] = childSourceElement.getAttribute(name);\r\n                        }\r\n                    }\r\n                }\r\n                if (Object.keys(attributes).length) {\r\n                    sources.set(childSourceElement, attributes);\r\n                }\r\n            }\r\n        }\r\n        const imgViewElement = imageUtils.findViewImgElement(pictureViewElement);\r\n        // Don't convert when a picture has no <img/> inside (it is broken).\r\n        if (!imgViewElement) {\r\n            return;\r\n        }\r\n        let modelImage = data.modelCursor.parent;\r\n        // - In case of an inline image (cursor parent in a <paragraph>), the <img/> must be converted right away\r\n        // because no converter handled it yet and otherwise there would be no model element to set the sources attribute on.\r\n        // - In case of a block image, the <figure class=\"image\"> converter (in ImageBlockEditing) converts the\r\n        // <img/> right away on its own and the modelCursor is already inside an imageBlock and there's nothing special\r\n        // to do here.\r\n        if (!modelImage.is('element', 'imageBlock')) {\r\n            const conversionResult = conversionApi.convertItem(imgViewElement, data.modelCursor);\r\n            // Set image range as conversion result.\r\n            data.modelRange = conversionResult.modelRange;\r\n            // Continue conversion where image conversion ends.\r\n            data.modelCursor = conversionResult.modelCursor;\r\n            modelImage = first(conversionResult.modelRange.getItems());\r\n        }\r\n        conversionApi.consumable.consume(pictureViewElement, { name: true });\r\n        // Consume only these <source/> attributes that were actually collected and will be passed on\r\n        // to the image model element.\r\n        for (const [sourceElement, attributes] of sources) {\r\n            conversionApi.consumable.consume(sourceElement, { attributes: Object.keys(attributes) });\r\n        }\r\n        if (sources.size) {\r\n            conversionApi.writer.setAttribute('sources', Array.from(sources.values()), modelImage);\r\n        }\r\n        // Convert rest of the <picture> children as an image children. Other converters may want to consume them.\r\n        conversionApi.convertChildren(pictureViewElement, modelImage);\r\n    };\r\n    return dispatcher => {\r\n        dispatcher.on('element:picture', converter);\r\n    };\r\n}\r\n/**\r\n * Converter used to convert the `srcset` model image attribute to the `srcset`, `sizes` and `width` attributes in the view.\r\n *\r\n * @internal\r\n * @param imageType The type of the image.\r\n */\r\nexport function downcastSrcsetAttribute(imageUtils, imageType) {\r\n    const converter = (evt, data, conversionApi) => {\r\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n            return;\r\n        }\r\n        const writer = conversionApi.writer;\r\n        const element = conversionApi.mapper.toViewElement(data.item);\r\n        const img = imageUtils.findViewImgElement(element);\r\n        if (data.attributeNewValue === null) {\r\n            const srcset = data.attributeOldValue;\r\n            if (srcset && srcset.data) {\r\n                writer.removeAttribute('srcset', img);\r\n                writer.removeAttribute('sizes', img);\r\n                if (srcset.width) {\r\n                    writer.removeAttribute('width', img);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            const srcset = data.attributeNewValue;\r\n            if (srcset && srcset.data) {\r\n                writer.setAttribute('srcset', srcset.data, img);\r\n                // Always outputting `100vw`. See https://github.com/ckeditor/ckeditor5-image/issues/2.\r\n                writer.setAttribute('sizes', '100vw', img);\r\n                if (srcset.width) {\r\n                    writer.setAttribute('width', srcset.width, img);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return dispatcher => {\r\n        dispatcher.on(`attribute:srcset:${imageType}`, converter);\r\n    };\r\n}\r\n/**\r\n * Converts the `source` model attribute to the `<picture><source /><source />...<img /></picture>`\r\n * view structure.\r\n *\r\n * @internal\r\n */\r\nexport function downcastSourcesAttribute(imageUtils) {\r\n    const converter = (evt, data, conversionApi) => {\r\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n            return;\r\n        }\r\n        const viewWriter = conversionApi.writer;\r\n        const element = conversionApi.mapper.toViewElement(data.item);\r\n        const imgElement = imageUtils.findViewImgElement(element);\r\n        const attributeNewValue = data.attributeNewValue;\r\n        if (attributeNewValue && attributeNewValue.length) {\r\n            // Make sure <picture> does not break attribute elements, for instance <a> in linked images.\r\n            const pictureElement = viewWriter.createContainerElement('picture', null, attributeNewValue.map(sourceAttributes => {\r\n                return viewWriter.createEmptyElement('source', sourceAttributes);\r\n            }));\r\n            // Collect all wrapping attribute elements.\r\n            const attributeElements = [];\r\n            let viewElement = imgElement.parent;\r\n            while (viewElement && viewElement.is('attributeElement')) {\r\n                const parentElement = viewElement.parent;\r\n                viewWriter.unwrap(viewWriter.createRangeOn(imgElement), viewElement);\r\n                attributeElements.unshift(viewElement);\r\n                viewElement = parentElement;\r\n            }\r\n            // Insert the picture and move img into it.\r\n            viewWriter.insert(viewWriter.createPositionBefore(imgElement), pictureElement);\r\n            viewWriter.move(viewWriter.createRangeOn(imgElement), viewWriter.createPositionAt(pictureElement, 'end'));\r\n            // Apply collected attribute elements over the new picture element.\r\n            for (const attributeElement of attributeElements) {\r\n                viewWriter.wrap(viewWriter.createRangeOn(pictureElement), attributeElement);\r\n            }\r\n        }\r\n        // Both setting \"sources\" to an empty array and removing the attribute should unwrap the <img />.\r\n        // Unwrap once if the latter followed the former, though.\r\n        else if (imgElement.parent.is('element', 'picture')) {\r\n            const pictureElement = imgElement.parent;\r\n            viewWriter.move(viewWriter.createRangeOn(imgElement), viewWriter.createPositionBefore(pictureElement));\r\n            viewWriter.remove(pictureElement);\r\n        }\r\n    };\r\n    return dispatcher => {\r\n        dispatcher.on('attribute:sources:imageBlock', converter);\r\n        dispatcher.on('attribute:sources:imageInline', converter);\r\n    };\r\n}\r\n/**\r\n * Converter used to convert a given image attribute from the model to the view.\r\n *\r\n * @internal\r\n * @param imageType The type of the image.\r\n * @param attributeKey The name of the attribute to convert.\r\n */\r\nexport function downcastImageAttribute(imageUtils, imageType, attributeKey) {\r\n    const converter = (evt, data, conversionApi) => {\r\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n            return;\r\n        }\r\n        const viewWriter = conversionApi.writer;\r\n        const element = conversionApi.mapper.toViewElement(data.item);\r\n        const img = imageUtils.findViewImgElement(element);\r\n        viewWriter.setAttribute(data.attributeKey, data.attributeNewValue || '', img);\r\n    };\r\n    return dispatcher => {\r\n        dispatcher.on(`attribute:${attributeKey}:${imageType}`, converter);\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/image/imageloadobserver\r\n */\r\nimport { Observer } from 'ckeditor5/src/engine';\r\n/**\r\n * Observes all new images added to the {@link module:engine/view/document~Document},\r\n * fires {@link module:engine/view/document~Document#event:imageLoaded} and\r\n * {@link module:engine/view/document~Document#event:layoutChanged} event every time when the new image\r\n * has been loaded.\r\n *\r\n * **Note:** This event is not fired for images that has been added to the document and rendered as `complete` (already loaded).\r\n */\r\nexport default class ImageLoadObserver extends Observer {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    observe(domRoot) {\r\n        this.listenTo(domRoot, 'load', (event, domEvent) => {\r\n            const domElement = domEvent.target;\r\n            if (this.checkShouldIgnoreEventFromTarget(domElement)) {\r\n                return;\r\n            }\r\n            if (domElement.tagName == 'IMG') {\r\n                this._fireEvents(domEvent);\r\n            }\r\n            // Use capture phase for better performance (#4504).\r\n        }, { useCapture: true });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    stopObserving(domRoot) {\r\n        this.stopListening(domRoot);\r\n    }\r\n    /**\r\n     * Fires {@link module:engine/view/document~Document#event:layoutChanged} and\r\n     * {@link module:engine/view/document~Document#event:imageLoaded}\r\n     * if observer {@link #isEnabled is enabled}.\r\n     *\r\n     * @param domEvent The DOM event.\r\n     */\r\n    _fireEvents(domEvent) {\r\n        if (this.isEnabled) {\r\n            this.document.fire('layoutChanged');\r\n            this.document.fire('imageLoaded', domEvent);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/image/insertimagecommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { logWarning, toArray } from 'ckeditor5/src/utils';\r\n/**\r\n * Insert image command.\r\n *\r\n * The command is registered by the {@link module:image/image/imageediting~ImageEditing} plugin as `insertImage`\r\n * and it is also available via aliased `imageInsert` name.\r\n *\r\n * In order to insert an image at the current selection position\r\n * (according to the {@link module:widget/utils~findOptimalInsertionRange} algorithm),\r\n * execute the command and specify the image source:\r\n *\r\n * ```ts\r\n * editor.execute( 'insertImage', { source: 'http://url.to.the/image' } );\r\n * ```\r\n *\r\n * It is also possible to insert multiple images at once:\r\n *\r\n * ```ts\r\n * editor.execute( 'insertImage', {\r\n * \tsource:  [\r\n * \t\t'path/to/image.jpg',\r\n * \t\t'path/to/other-image.jpg'\r\n * \t]\r\n * } );\r\n * ```\r\n *\r\n * If you want to take the full control over the process, you can specify individual model attributes:\r\n *\r\n * ```ts\r\n * editor.execute( 'insertImage', {\r\n * \tsource:  [\r\n * \t\t{ src: 'path/to/image.jpg', alt: 'First alt text' },\r\n * \t\t{ src: 'path/to/other-image.jpg', alt: 'Second alt text', customAttribute: 'My attribute value' }\r\n * \t]\r\n * } );\r\n * ```\r\n */\r\nexport default class InsertImageCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        const configImageInsertType = editor.config.get('image.insert.type');\r\n        if (!editor.plugins.has('ImageBlockEditing')) {\r\n            if (configImageInsertType === 'block') {\r\n                /**\r\n                 * The {@link module:image/imageblock~ImageBlock} plugin must be enabled to allow inserting block images. See\r\n                 * {@link module:image/imageconfig~ImageInsertConfig#type} to learn more.\r\n                 *\r\n                 * @error image-block-plugin-required\r\n                 */\r\n                logWarning('image-block-plugin-required');\r\n            }\r\n        }\r\n        if (!editor.plugins.has('ImageInlineEditing')) {\r\n            if (configImageInsertType === 'inline') {\r\n                /**\r\n                 * The {@link module:image/imageinline~ImageInline} plugin must be enabled to allow inserting inline images. See\r\n                 * {@link module:image/imageconfig~ImageInsertConfig#type} to learn more.\r\n                 *\r\n                 * @error image-inline-plugin-required\r\n                 */\r\n                logWarning('image-inline-plugin-required');\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const imageUtils = this.editor.plugins.get('ImageUtils');\r\n        this.isEnabled = imageUtils.isImageAllowed();\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options Options for the executed command.\r\n     * @param options.source The image source or an array of image sources to insert.\r\n     * See the documentation of the command to learn more about accepted formats.\r\n     */\r\n    execute(options) {\r\n        const sourceDefinitions = toArray(options.source);\r\n        const selection = this.editor.model.document.selection;\r\n        const imageUtils = this.editor.plugins.get('ImageUtils');\r\n        // In case of multiple images, each image (starting from the 2nd) will be inserted at a position that\r\n        // follows the previous one. That will move the selection and, to stay on the safe side and make sure\r\n        // all images inherit the same selection attributes, they are collected beforehand.\r\n        //\r\n        // Applying these attributes ensures, for instance, that inserting an (inline) image into a link does\r\n        // not split that link but preserves its continuity.\r\n        //\r\n        // Note: Selection attributes that do not make sense for images will be filtered out by insertImage() anyway.\r\n        const selectionAttributes = Object.fromEntries(selection.getAttributes());\r\n        sourceDefinitions.forEach((sourceDefinition, index) => {\r\n            const selectedElement = selection.getSelectedElement();\r\n            if (typeof sourceDefinition === 'string') {\r\n                sourceDefinition = { src: sourceDefinition };\r\n            }\r\n            // Inserting of an inline image replace the selected element and make a selection on the inserted image.\r\n            // Therefore inserting multiple inline images requires creating position after each element.\r\n            if (index && selectedElement && imageUtils.isImage(selectedElement)) {\r\n                const position = this.editor.model.createPositionAfter(selectedElement);\r\n                imageUtils.insertImage({ ...sourceDefinition, ...selectionAttributes }, position);\r\n            }\r\n            else {\r\n                imageUtils.insertImage({ ...sourceDefinition, ...selectionAttributes });\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * @module image/image/replaceimagesourcecommand\r\n */\r\n/**\r\n * Replace image source command.\r\n *\r\n * Changes image source to the one provided. Can be executed as follows:\r\n *\r\n * ```ts\r\n * editor.execute( 'replaceImageSource', { source: 'http://url.to.the/image' } );\r\n * ```\r\n */\r\nexport default class ReplaceImageSourceCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const editor = this.editor;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const element = this.editor.model.document.selection.getSelectedElement();\r\n        this.isEnabled = imageUtils.isImage(element);\r\n        this.value = this.isEnabled ? element.getAttribute('src') : null;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options Options for the executed command.\r\n     * @param options.source The image source to replace.\r\n     */\r\n    execute(options) {\r\n        const image = this.editor.model.document.selection.getSelectedElement();\r\n        this.editor.model.change(writer => {\r\n            writer.setAttribute('src', options.source, image);\r\n            writer.removeAttribute('srcset', image);\r\n            writer.removeAttribute('sizes', image);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/image/imageediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ImageLoadObserver from './imageloadobserver';\r\nimport InsertImageCommand from './insertimagecommand';\r\nimport ReplaceImageSourceCommand from './replaceimagesourcecommand';\r\nimport ImageUtils from '../imageutils';\r\n/**\r\n * The image engine plugin. This module loads common code shared between\r\n * {@link module:image/image/imageinlineediting~ImageInlineEditing} and\r\n * {@link module:image/image/imageblockediting~ImageBlockEditing} plugins.\r\n *\r\n * This plugin registers the {@link module:image/image/insertimagecommand~InsertImageCommand 'insertImage'} command.\r\n */\r\nexport default class ImageEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const conversion = editor.conversion;\r\n        // See https://github.com/ckeditor/ckeditor5-image/issues/142.\r\n        editor.editing.view.addObserver(ImageLoadObserver);\r\n        conversion.for('upcast')\r\n            .attributeToAttribute({\r\n            view: {\r\n                name: 'img',\r\n                key: 'alt'\r\n            },\r\n            model: 'alt'\r\n        })\r\n            .attributeToAttribute({\r\n            view: {\r\n                name: 'img',\r\n                key: 'srcset'\r\n            },\r\n            model: {\r\n                key: 'srcset',\r\n                value: (viewImage) => {\r\n                    const value = {\r\n                        data: viewImage.getAttribute('srcset')\r\n                    };\r\n                    if (viewImage.hasAttribute('width')) {\r\n                        value.width = viewImage.getAttribute('width');\r\n                    }\r\n                    return value;\r\n                }\r\n            }\r\n        });\r\n        const insertImageCommand = new InsertImageCommand(editor);\r\n        const replaceImageSourceCommand = new ReplaceImageSourceCommand(editor);\r\n        editor.commands.add('insertImage', insertImageCommand);\r\n        editor.commands.add('replaceImageSource', replaceImageSourceCommand);\r\n        // `imageInsert` is an alias for backward compatibility.\r\n        editor.commands.add('imageInsert', insertImageCommand);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The image type command. It changes the type of a selected image, depending on the configuration.\r\n */\r\nexport default class ImageTypeCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     *\r\n     * @param modelElementName Model element name the command converts to.\r\n     */\r\n    constructor(editor, modelElementName) {\r\n        super(editor);\r\n        this._modelElementName = modelElementName;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const editor = this.editor;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const element = imageUtils.getClosestSelectedImageElement(this.editor.model.document.selection);\r\n        if (this._modelElementName === 'imageBlock') {\r\n            this.isEnabled = imageUtils.isInlineImage(element);\r\n        }\r\n        else {\r\n            this.isEnabled = imageUtils.isBlockImage(element);\r\n        }\r\n    }\r\n    /**\r\n     * Executes the command and changes the type of a selected image.\r\n     *\r\n     * @fires execute\r\n     * @returns An object containing references to old and new model image elements\r\n     * (for before and after the change) so external integrations can hook into the decorated\r\n     * `execute` event and handle this change. `null` if the type change failed.\r\n     */\r\n    execute() {\r\n        const editor = this.editor;\r\n        const model = this.editor.model;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const oldElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\r\n        const attributes = Object.fromEntries(oldElement.getAttributes());\r\n        // Don't change image type if \"src\" is missing (a broken image), unless there's \"uploadId\" set.\r\n        // This state may happen during image upload (before it finishes) and it should be possible to change type\r\n        // of the image in the meantime.\r\n        if (!attributes.src && !attributes.uploadId) {\r\n            return null;\r\n        }\r\n        return model.change(writer => {\r\n            // Get all markers that contain the old image element.\r\n            const markers = Array.from(model.markers)\r\n                .filter(marker => marker.getRange().containsItem(oldElement));\r\n            const newElement = imageUtils.insertImage(attributes, model.createSelection(oldElement, 'on'), this._modelElementName);\r\n            if (!newElement) {\r\n                return null;\r\n            }\r\n            const newElementRange = writer.createRangeOn(newElement);\r\n            // Expand the previously intersecting markers' ranges to include the new image element.\r\n            for (const marker of markers) {\r\n                const markerRange = marker.getRange();\r\n                // Join the survived part of the old marker range with the new element range\r\n                // (loosely because there could be some new paragraph or the existing one might got split).\r\n                const range = markerRange.root.rootName != '$graveyard' ?\r\n                    markerRange.getJoined(newElementRange, true) : newElementRange;\r\n                writer.updateMarker(marker, { range });\r\n            }\r\n            return {\r\n                oldElement,\r\n                newElement\r\n            };\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/image/imageblockediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ClipboardPipeline } from 'ckeditor5/src/clipboard';\r\nimport { UpcastWriter } from 'ckeditor5/src/engine';\r\nimport { downcastImageAttribute, downcastSrcsetAttribute, upcastImageFigure } from './converters';\r\nimport ImageEditing from './imageediting';\r\nimport ImageTypeCommand from './imagetypecommand';\r\nimport ImageUtils from '../imageutils';\r\nimport { getImgViewElementMatcher, createBlockImageViewElement, determineImageTypeForInsertionAtSelection } from '../image/utils';\r\n/**\r\n * The image block plugin.\r\n *\r\n * It registers:\r\n *\r\n * * `<imageBlock>` as a block element in the document schema, and allows `alt`, `src` and `srcset` attributes.\r\n * * converters for editing and data pipelines.,\r\n * * {@link module:image/image/imagetypecommand~ImageTypeCommand `'imageTypeBlock'`} command that converts inline images into\r\n * block images.\r\n */\r\nexport default class ImageBlockEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageEditing, ImageUtils, ClipboardPipeline];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageBlockEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        // Converters 'alt' and 'srcset' are added in 'ImageEditing' plugin.\r\n        schema.register('imageBlock', {\r\n            inheritAllFrom: '$blockObject',\r\n            allowAttributes: ['alt', 'src', 'srcset']\r\n        });\r\n        this._setupConversion();\r\n        if (editor.plugins.has('ImageInlineEditing')) {\r\n            editor.commands.add('imageTypeBlock', new ImageTypeCommand(this.editor, 'imageBlock'));\r\n            this._setupClipboardIntegration();\r\n        }\r\n    }\r\n    /**\r\n     * Configures conversion pipelines to support upcasting and downcasting\r\n     * block images (block image widgets) and their attributes.\r\n     */\r\n    _setupConversion() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const conversion = editor.conversion;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        conversion.for('dataDowncast')\r\n            .elementToStructure({\r\n            model: 'imageBlock',\r\n            view: (modelElement, { writer }) => createBlockImageViewElement(writer)\r\n        });\r\n        conversion.for('editingDowncast')\r\n            .elementToStructure({\r\n            model: 'imageBlock',\r\n            view: (modelElement, { writer }) => imageUtils.toImageWidget(createBlockImageViewElement(writer), writer, t('image widget'))\r\n        });\r\n        conversion.for('downcast')\r\n            .add(downcastImageAttribute(imageUtils, 'imageBlock', 'src'))\r\n            .add(downcastImageAttribute(imageUtils, 'imageBlock', 'alt'))\r\n            .add(downcastSrcsetAttribute(imageUtils, 'imageBlock'));\r\n        // More image related upcasts are in 'ImageEditing' plugin.\r\n        conversion.for('upcast')\r\n            .elementToElement({\r\n            view: getImgViewElementMatcher(editor, 'imageBlock'),\r\n            model: (viewImage, { writer }) => writer.createElement('imageBlock', viewImage.hasAttribute('src') ? { src: viewImage.getAttribute('src') } : undefined)\r\n        })\r\n            .add(upcastImageFigure(imageUtils));\r\n    }\r\n    /**\r\n     * Integrates the plugin with the clipboard pipeline.\r\n     *\r\n     * Idea is that the feature should recognize the user's intent when an **inline** image is\r\n     * pasted or dropped. If such an image is pasted/dropped:\r\n     *\r\n     * * into an empty block (e.g. an empty paragraph),\r\n     * * on another object (e.g. some block widget).\r\n     *\r\n     * it gets converted into a block image on the fly. We assume this is the user's intent\r\n     * if they decided to put their image there.\r\n     *\r\n     * See the `ImageInlineEditing` for the similar integration that works in the opposite direction.\r\n     */\r\n    _setupClipboardIntegration() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const editingView = editor.editing.view;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\r\n        this.listenTo(clipboardPipeline, 'inputTransformation', (evt, data) => {\r\n            const docFragmentChildren = Array.from(data.content.getChildren());\r\n            let modelRange;\r\n            // Make sure only <img> elements are dropped or pasted. Otherwise, if there some other HTML\r\n            // mixed up, this should be handled as a regular paste.\r\n            if (!docFragmentChildren.every(imageUtils.isInlineImageView)) {\r\n                return;\r\n            }\r\n            // When drag and dropping, data.targetRanges specifies where to drop because\r\n            // this is usually a different place than the current model selection (the user\r\n            // uses a drop marker to specify the drop location).\r\n            if (data.targetRanges) {\r\n                modelRange = editor.editing.mapper.toModelRange(data.targetRanges[0]);\r\n            }\r\n            // Pasting, however, always occurs at the current model selection.\r\n            else {\r\n                modelRange = model.document.selection.getFirstRange();\r\n            }\r\n            const selection = model.createSelection(modelRange);\r\n            // Convert inline images into block images only when the currently selected block is empty\r\n            // (e.g. an empty paragraph) or some object is selected (to replace it).\r\n            if (determineImageTypeForInsertionAtSelection(model.schema, selection) === 'imageBlock') {\r\n                const writer = new UpcastWriter(editingView.document);\r\n                // Wrap <img ... /> -> <figure class=\"image\"><img .../></figure>\r\n                const blockViewImages = docFragmentChildren.map(inlineViewImage => writer.createElement('figure', { class: 'image' }, inlineViewImage));\r\n                data.content = writer.createDocumentFragment(blockViewImages);\r\n            }\r\n        });\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./image.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imageblock\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Widget } from 'ckeditor5/src/widget';\r\nimport ImageTextAlternative from './imagetextalternative';\r\nimport ImageBlockEditing from './image/imageblockediting';\r\nimport '../theme/image.css';\r\n/**\r\n * The image block plugin.\r\n *\r\n * This is a \"glue\" plugin which loads the following plugins:\r\n *\r\n * * {@link module:image/image/imageblockediting~ImageBlockEditing},\r\n * * {@link module:image/imagetextalternative~ImageTextAlternative}.\r\n *\r\n * Usually, it is used in conjunction with other plugins from this package. See the {@glink api/image package page}\r\n * for more information.\r\n */\r\nexport default class ImageBlock extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageBlockEditing, Widget, ImageTextAlternative];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageBlock';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/image/imageinlineediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ClipboardPipeline } from 'ckeditor5/src/clipboard';\r\nimport { UpcastWriter } from 'ckeditor5/src/engine';\r\nimport { downcastImageAttribute, downcastSrcsetAttribute } from './converters';\r\nimport ImageEditing from './imageediting';\r\nimport ImageTypeCommand from './imagetypecommand';\r\nimport ImageUtils from '../imageutils';\r\nimport { getImgViewElementMatcher, createInlineImageViewElement, determineImageTypeForInsertionAtSelection } from '../image/utils';\r\n/**\r\n * The image inline plugin.\r\n *\r\n * It registers:\r\n *\r\n * * `<imageInline>` as an inline element in the document schema, and allows `alt`, `src` and `srcset` attributes.\r\n * * converters for editing and data pipelines.\r\n * * {@link module:image/image/imagetypecommand~ImageTypeCommand `'imageTypeInline'`} command that converts block images into\r\n * inline images.\r\n */\r\nexport default class ImageInlineEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageEditing, ImageUtils, ClipboardPipeline];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageInlineEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        // Converters 'alt' and 'srcset' are added in 'ImageEditing' plugin.\r\n        schema.register('imageInline', {\r\n            inheritAllFrom: '$inlineObject',\r\n            allowAttributes: ['alt', 'src', 'srcset']\r\n        });\r\n        // Disallow inline images in captions (for now). This is the best spot to do that because\r\n        // independent packages can introduce captions (ImageCaption, TableCaption, etc.) so better this\r\n        // be future-proof.\r\n        schema.addChildCheck((context, childDefinition) => {\r\n            if (context.endsWith('caption') && childDefinition.name === 'imageInline') {\r\n                return false;\r\n            }\r\n        });\r\n        this._setupConversion();\r\n        if (editor.plugins.has('ImageBlockEditing')) {\r\n            editor.commands.add('imageTypeInline', new ImageTypeCommand(this.editor, 'imageInline'));\r\n            this._setupClipboardIntegration();\r\n        }\r\n    }\r\n    /**\r\n     * Configures conversion pipelines to support upcasting and downcasting\r\n     * inline images (inline image widgets) and their attributes.\r\n     */\r\n    _setupConversion() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const conversion = editor.conversion;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        conversion.for('dataDowncast')\r\n            .elementToElement({\r\n            model: 'imageInline',\r\n            view: (modelElement, { writer }) => writer.createEmptyElement('img')\r\n        });\r\n        conversion.for('editingDowncast')\r\n            .elementToStructure({\r\n            model: 'imageInline',\r\n            view: (modelElement, { writer }) => imageUtils.toImageWidget(createInlineImageViewElement(writer), writer, t('image widget'))\r\n        });\r\n        conversion.for('downcast')\r\n            .add(downcastImageAttribute(imageUtils, 'imageInline', 'src'))\r\n            .add(downcastImageAttribute(imageUtils, 'imageInline', 'alt'))\r\n            .add(downcastSrcsetAttribute(imageUtils, 'imageInline'));\r\n        // More image related upcasts are in 'ImageEditing' plugin.\r\n        conversion.for('upcast')\r\n            .elementToElement({\r\n            view: getImgViewElementMatcher(editor, 'imageInline'),\r\n            model: (viewImage, { writer }) => writer.createElement('imageInline', viewImage.hasAttribute('src') ? { src: viewImage.getAttribute('src') } : undefined)\r\n        });\r\n    }\r\n    /**\r\n     * Integrates the plugin with the clipboard pipeline.\r\n     *\r\n     * Idea is that the feature should recognize the user's intent when an **block** image is\r\n     * pasted or dropped. If such an image is pasted/dropped into a non-empty block\r\n     * (e.g. a paragraph with some text) it gets converted into an inline image on the fly.\r\n     *\r\n     * We assume this is the user's intent if they decided to put their image there.\r\n     *\r\n     * **Note**: If a block image has a caption, it will not be converted to an inline image\r\n     * to avoid the confusion. Captions are added on purpose and they should never be lost\r\n     * in the clipboard pipeline.\r\n     *\r\n     * See the `ImageBlockEditing` for the similar integration that works in the opposite direction.\r\n     */\r\n    _setupClipboardIntegration() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const editingView = editor.editing.view;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\r\n        this.listenTo(clipboardPipeline, 'inputTransformation', (evt, data) => {\r\n            const docFragmentChildren = Array.from(data.content.getChildren());\r\n            let modelRange;\r\n            // Make sure only <figure class=\"image\"></figure> elements are dropped or pasted. Otherwise, if there some other HTML\r\n            // mixed up, this should be handled as a regular paste.\r\n            if (!docFragmentChildren.every(imageUtils.isBlockImageView)) {\r\n                return;\r\n            }\r\n            // When drag and dropping, data.targetRanges specifies where to drop because\r\n            // this is usually a different place than the current model selection (the user\r\n            // uses a drop marker to specify the drop location).\r\n            if (data.targetRanges) {\r\n                modelRange = editor.editing.mapper.toModelRange(data.targetRanges[0]);\r\n            }\r\n            // Pasting, however, always occurs at the current model selection.\r\n            else {\r\n                modelRange = model.document.selection.getFirstRange();\r\n            }\r\n            const selection = model.createSelection(modelRange);\r\n            // Convert block images into inline images only when pasting or dropping into non-empty blocks\r\n            // and when the block is not an object (e.g. pasting to replace another widget).\r\n            if (determineImageTypeForInsertionAtSelection(model.schema, selection) === 'imageInline') {\r\n                const writer = new UpcastWriter(editingView.document);\r\n                // Unwrap <figure class=\"image\"><img .../></figure> -> <img ... />\r\n                // but <figure class=\"image\"><img .../><figcaption>...</figcaption></figure> -> stays the same\r\n                const inlineViewImages = docFragmentChildren.map(blockViewImage => {\r\n                    // If there's just one child, it can be either <img /> or <a><img></a>.\r\n                    // If there are other children than <img>, this means that the block image\r\n                    // has a caption or some other features and this kind of image should be\r\n                    // pasted/dropped without modifications.\r\n                    if (blockViewImage.childCount === 1) {\r\n                        // Pass the attributes which are present only in the <figure> to the <img>\r\n                        // (e.g. the style=\"width:10%\" attribute applied by the ImageResize plugin).\r\n                        Array.from(blockViewImage.getAttributes())\r\n                            .forEach(attribute => writer.setAttribute(...attribute, imageUtils.findViewImgElement(blockViewImage)));\r\n                        return blockViewImage.getChild(0);\r\n                    }\r\n                    else {\r\n                        return blockViewImage;\r\n                    }\r\n                });\r\n                data.content = writer.createDocumentFragment(inlineViewImages);\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imageinline\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Widget } from 'ckeditor5/src/widget';\r\nimport ImageTextAlternative from './imagetextalternative';\r\nimport ImageInlineEditing from './image/imageinlineediting';\r\nimport '../theme/image.css';\r\n/**\r\n * The image inline plugin.\r\n *\r\n * This is a \"glue\" plugin which loads the following plugins:\r\n *\r\n * * {@link module:image/image/imageinlineediting~ImageInlineEditing},\r\n * * {@link module:image/imagetextalternative~ImageTextAlternative}.\r\n *\r\n * Usually, it is used in conjunction with other plugins from this package. See the {@glink api/image package page}\r\n * for more information.\r\n */\r\nexport default class ImageInline extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageInlineEditing, Widget, ImageTextAlternative];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageInline';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/image\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ImageBlock from './imageblock';\r\nimport ImageInline from './imageinline';\r\nimport '../theme/image.css';\r\n/**\r\n * The image plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/images/images-overview image feature} documentation.\r\n *\r\n * This is a \"glue\" plugin which loads the following plugins:\r\n *\r\n * * {@link module:image/imageblock~ImageBlock},\r\n * * {@link module:image/imageinline~ImageInline},\r\n *\r\n * Usually, it is used in conjunction with other plugins from this package. See the {@glink api/image package page}\r\n * for more information.\r\n */\r\nexport default class Image extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageBlock, ImageInline];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Image';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ImageUtils from '../imageutils';\r\n/**\r\n * The image caption utilities plugin.\r\n */\r\nexport default class ImageCaptionUtils extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageCaptionUtils';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageUtils];\r\n    }\r\n    /**\r\n     * Returns the caption model element from a given image element. Returns `null` if no caption is found.\r\n     */\r\n    getCaptionFromImageModelElement(imageModelElement) {\r\n        for (const node of imageModelElement.getChildren()) {\r\n            if (!!node && node.is('element', 'caption')) {\r\n                return node;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns the caption model element for a model selection. Returns `null` if the selection has no caption element ancestor.\r\n     */\r\n    getCaptionFromModelSelection(selection) {\r\n        const imageUtils = this.editor.plugins.get('ImageUtils');\r\n        const captionElement = selection.getFirstPosition().findAncestor('caption');\r\n        if (!captionElement) {\r\n            return null;\r\n        }\r\n        if (imageUtils.isBlockImage(captionElement.parent)) {\r\n            return captionElement;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * {@link module:engine/view/matcher~Matcher} pattern. Checks if a given element is a `<figcaption>` element that is placed\r\n     * inside the image `<figure>` element.\r\n     * @returns Returns the object accepted by {@link module:engine/view/matcher~Matcher} or `null` if the element\r\n     * cannot be matched.\r\n     */\r\n    matchImageCaptionViewElement(element) {\r\n        const imageUtils = this.editor.plugins.get('ImageUtils');\r\n        // Convert only captions for images.\r\n        if (element.name == 'figcaption' && imageUtils.isBlockImageView(element.parent)) {\r\n            return { name: true };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport ImageBlockEditing from '../image/imageblockediting';\r\n/**\r\n * The toggle image caption command.\r\n *\r\n * This command is registered by {@link module:image/imagecaption/imagecaptionediting~ImageCaptionEditing} as the\r\n * `'toggleImageCaption'` editor command.\r\n *\r\n * Executing this command:\r\n *\r\n * * either adds or removes the image caption of a selected image (depending on whether the caption is present or not),\r\n * * removes the image caption if the selection is anchored in one.\r\n *\r\n * ```ts\r\n * // Toggle the presence of the caption.\r\n * editor.execute( 'toggleImageCaption' );\r\n * ```\r\n *\r\n * **Note**: Upon executing this command, the selection will be set on the image if previously anchored in the caption element.\r\n *\r\n * **Note**: You can move the selection to the caption right away as it shows up upon executing this command by using\r\n * the `focusCaptionOnShow` option:\r\n *\r\n * ```ts\r\n * editor.execute( 'toggleImageCaption', { focusCaptionOnShow: true } );\r\n * ```\r\n */\r\nexport default class ToggleImageCaptionCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const editor = this.editor;\r\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        // Only block images can get captions.\r\n        if (!editor.plugins.has(ImageBlockEditing)) {\r\n            this.isEnabled = false;\r\n            this.value = false;\r\n            return;\r\n        }\r\n        const selection = editor.model.document.selection;\r\n        const selectedElement = selection.getSelectedElement();\r\n        if (!selectedElement) {\r\n            const ancestorCaptionElement = imageCaptionUtils.getCaptionFromModelSelection(selection);\r\n            this.isEnabled = !!ancestorCaptionElement;\r\n            this.value = !!ancestorCaptionElement;\r\n            return;\r\n        }\r\n        // Block images support captions by default but the command should also be enabled for inline\r\n        // images because toggling the caption when one is selected should convert it into a block image.\r\n        this.isEnabled = imageUtils.isImage(selectedElement);\r\n        if (!this.isEnabled) {\r\n            this.value = false;\r\n        }\r\n        else {\r\n            this.value = !!imageCaptionUtils.getCaptionFromImageModelElement(selectedElement);\r\n        }\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * ```ts\r\n     * editor.execute( 'toggleImageCaption' );\r\n     * ```\r\n     *\r\n     * @param options Options for the executed command.\r\n     * @param options.focusCaptionOnShow When true and the caption shows up, the selection will be moved into it straight away.\r\n     * @fires execute\r\n     */\r\n    execute(options = {}) {\r\n        const { focusCaptionOnShow } = options;\r\n        this.editor.model.change(writer => {\r\n            if (this.value) {\r\n                this._hideImageCaption(writer);\r\n            }\r\n            else {\r\n                this._showImageCaption(writer, focusCaptionOnShow);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Shows the caption of the `<imageBlock>` or `<imageInline>`. Also:\r\n     *\r\n     * * it converts `<imageInline>` to `<imageBlock>` to show the caption,\r\n     * * it attempts to restore the caption content from the `ImageCaptionEditing` caption registry,\r\n     * * it moves the selection to the caption right away, it the `focusCaptionOnShow` option was set.\r\n     */\r\n    _showImageCaption(writer, focusCaptionOnShow) {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const imageCaptionEditing = this.editor.plugins.get('ImageCaptionEditing');\r\n        const imageUtils = this.editor.plugins.get('ImageUtils');\r\n        let selectedImage = selection.getSelectedElement();\r\n        const savedCaption = imageCaptionEditing._getSavedCaption(selectedImage);\r\n        // Convert imageInline -> image first.\r\n        if (imageUtils.isInlineImage(selectedImage)) {\r\n            this.editor.execute('imageTypeBlock');\r\n            // Executing the command created a new model element. Let's pick it again.\r\n            selectedImage = selection.getSelectedElement();\r\n        }\r\n        // Try restoring the caption from the ImageCaptionEditing plugin storage.\r\n        const newCaptionElement = savedCaption || writer.createElement('caption');\r\n        writer.append(newCaptionElement, selectedImage);\r\n        if (focusCaptionOnShow) {\r\n            writer.setSelection(newCaptionElement, 'in');\r\n        }\r\n    }\r\n    /**\r\n     * Hides the caption of a selected image (or an image caption the selection is anchored to).\r\n     *\r\n     * The content of the caption is stored in the `ImageCaptionEditing` caption registry to make this\r\n     * a reversible action.\r\n     */\r\n    _hideImageCaption(writer) {\r\n        const editor = this.editor;\r\n        const selection = editor.model.document.selection;\r\n        const imageCaptionEditing = editor.plugins.get('ImageCaptionEditing');\r\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\r\n        let selectedImage = selection.getSelectedElement();\r\n        let captionElement;\r\n        if (selectedImage) {\r\n            captionElement = imageCaptionUtils.getCaptionFromImageModelElement(selectedImage);\r\n        }\r\n        else {\r\n            captionElement = imageCaptionUtils.getCaptionFromModelSelection(selection);\r\n            selectedImage = captionElement.parent;\r\n        }\r\n        // Store the caption content so it can be restored quickly if the user changes their mind even if they toggle image<->imageInline.\r\n        imageCaptionEditing._saveCaption(selectedImage, captionElement);\r\n        writer.setSelection(selectedImage, 'on');\r\n        writer.remove(captionElement);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagecaption/imagecaptionediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Element, enablePlaceholder } from 'ckeditor5/src/engine';\r\nimport { toWidgetEditable } from 'ckeditor5/src/widget';\r\nimport ToggleImageCaptionCommand from './toggleimagecaptioncommand';\r\nimport ImageUtils from '../imageutils';\r\nimport ImageCaptionUtils from './imagecaptionutils';\r\n/**\r\n * The image caption engine plugin. It is responsible for:\r\n *\r\n * * registering converters for the caption element,\r\n * * registering converters for the caption model attribute,\r\n * * registering the {@link module:image/imagecaption/toggleimagecaptioncommand~ToggleImageCaptionCommand `toggleImageCaption`} command.\r\n */\r\nexport default class ImageCaptionEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageUtils, ImageCaptionUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageCaptionEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._savedCaptionsMap = new WeakMap();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        // Schema configuration.\r\n        if (!schema.isRegistered('caption')) {\r\n            schema.register('caption', {\r\n                allowIn: 'imageBlock',\r\n                allowContentOf: '$block',\r\n                isLimit: true\r\n            });\r\n        }\r\n        else {\r\n            schema.extend('caption', {\r\n                allowIn: 'imageBlock'\r\n            });\r\n        }\r\n        editor.commands.add('toggleImageCaption', new ToggleImageCaptionCommand(this.editor));\r\n        this._setupConversion();\r\n        this._setupImageTypeCommandsIntegration();\r\n        this._registerCaptionReconversion();\r\n    }\r\n    /**\r\n     * Configures conversion pipelines to support upcasting and downcasting\r\n     * image captions.\r\n     */\r\n    _setupConversion() {\r\n        const editor = this.editor;\r\n        const view = editor.editing.view;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\r\n        const t = editor.t;\r\n        // View -> model converter for the data pipeline.\r\n        editor.conversion.for('upcast').elementToElement({\r\n            view: element => imageCaptionUtils.matchImageCaptionViewElement(element),\r\n            model: 'caption'\r\n        });\r\n        // Model -> view converter for the data pipeline.\r\n        editor.conversion.for('dataDowncast').elementToElement({\r\n            model: 'caption',\r\n            view: (modelElement, { writer }) => {\r\n                if (!imageUtils.isBlockImage(modelElement.parent)) {\r\n                    return null;\r\n                }\r\n                return writer.createContainerElement('figcaption');\r\n            }\r\n        });\r\n        // Model -> view converter for the editing pipeline.\r\n        editor.conversion.for('editingDowncast').elementToElement({\r\n            model: 'caption',\r\n            view: (modelElement, { writer }) => {\r\n                if (!imageUtils.isBlockImage(modelElement.parent)) {\r\n                    return null;\r\n                }\r\n                const figcaptionElement = writer.createEditableElement('figcaption');\r\n                writer.setCustomProperty('imageCaption', true, figcaptionElement);\r\n                enablePlaceholder({\r\n                    view,\r\n                    element: figcaptionElement,\r\n                    text: t('Enter image caption'),\r\n                    keepOnFocus: true\r\n                });\r\n                const imageAlt = modelElement.parent.getAttribute('alt');\r\n                const label = imageAlt ? t('Caption for image: %0', [imageAlt]) : t('Caption for the image');\r\n                return toWidgetEditable(figcaptionElement, writer, { label });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Integrates with {@link module:image/image/imagetypecommand~ImageTypeCommand image type commands}\r\n     * to make sure the caption is preserved when the type of an image changes so it can be restored\r\n     * in the future if the user decides they want their caption back.\r\n     */\r\n    _setupImageTypeCommandsIntegration() {\r\n        const editor = this.editor;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\r\n        const imageTypeInlineCommand = editor.commands.get('imageTypeInline');\r\n        const imageTypeBlockCommand = editor.commands.get('imageTypeBlock');\r\n        const handleImageTypeChange = evt => {\r\n            // The image type command execution can be unsuccessful.\r\n            if (!evt.return) {\r\n                return;\r\n            }\r\n            const { oldElement, newElement } = evt.return;\r\n            /* istanbul ignore if: paranoid check -- @preserve */\r\n            if (!oldElement) {\r\n                return;\r\n            }\r\n            if (imageUtils.isBlockImage(oldElement)) {\r\n                const oldCaptionElement = imageCaptionUtils.getCaptionFromImageModelElement(oldElement);\r\n                // If the old element was a captioned block image (the caption was visible),\r\n                // simply save it so it can be restored.\r\n                if (oldCaptionElement) {\r\n                    this._saveCaption(newElement, oldCaptionElement);\r\n                    return;\r\n                }\r\n            }\r\n            const savedOldElementCaption = this._getSavedCaption(oldElement);\r\n            // If either:\r\n            //\r\n            // * the block image didn't have a visible caption,\r\n            // * the block image caption was hidden (and already saved),\r\n            // * the inline image was passed\r\n            //\r\n            // just try to \"pass\" the saved caption from the old image to the new image\r\n            // so it can be retrieved in the future if the user wants it back.\r\n            if (savedOldElementCaption) {\r\n                // Note: Since we're writing to a WeakMap, we don't bother with removing the\r\n                // [ oldElement, savedOldElementCaption ] pair from it.\r\n                this._saveCaption(newElement, savedOldElementCaption);\r\n            }\r\n        };\r\n        // Presence of the commands depends on the Image(Inline|Block)Editing plugins loaded in the editor.\r\n        if (imageTypeInlineCommand) {\r\n            this.listenTo(imageTypeInlineCommand, 'execute', handleImageTypeChange, { priority: 'low' });\r\n        }\r\n        if (imageTypeBlockCommand) {\r\n            this.listenTo(imageTypeBlockCommand, 'execute', handleImageTypeChange, { priority: 'low' });\r\n        }\r\n    }\r\n    /**\r\n     * Returns the saved {@link module:engine/model/element~Element#toJSON JSONified} caption\r\n     * of an image model element.\r\n     *\r\n     * See {@link #_saveCaption}.\r\n     *\r\n     * @internal\r\n     * @param imageModelElement The model element the caption should be returned for.\r\n     * @returns The model caption element or `null` if there is none.\r\n     */\r\n    _getSavedCaption(imageModelElement) {\r\n        const jsonObject = this._savedCaptionsMap.get(imageModelElement);\r\n        return jsonObject ? Element.fromJSON(jsonObject) : null;\r\n    }\r\n    /**\r\n     * Saves a {@link module:engine/model/element~Element#toJSON JSONified} caption for\r\n     * an image element to allow restoring it in the future.\r\n     *\r\n     * A caption is saved every time it gets hidden and/or the type of an image changes. The\r\n     * user should be able to restore it on demand.\r\n     *\r\n     * **Note**: The caption cannot be stored in the image model element attribute because,\r\n     * for instance, when the model state propagates to collaborators, the attribute would get\r\n     * lost (mainly because it does not convert to anything when the caption is hidden) and\r\n     * the states of collaborators' models would de-synchronize causing numerous issues.\r\n     *\r\n     * See {@link #_getSavedCaption}.\r\n     *\r\n     * @internal\r\n     * @param imageModelElement The model element the caption is saved for.\r\n     * @param caption The caption model element to be saved.\r\n     */\r\n    _saveCaption(imageModelElement, caption) {\r\n        this._savedCaptionsMap.set(imageModelElement, caption.toJSON());\r\n    }\r\n    /**\r\n     * Reconverts image caption when image alt attribute changes.\r\n     * The change of alt attribute is reflected in caption's aria-label attribute.\r\n     */\r\n    _registerCaptionReconversion() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\r\n        model.document.on('change:data', () => {\r\n            const changes = model.document.differ.getChanges();\r\n            for (const change of changes) {\r\n                if (change.attributeKey !== 'alt') {\r\n                    continue;\r\n                }\r\n                const image = change.range.start.nodeAfter;\r\n                if (imageUtils.isBlockImage(image)) {\r\n                    const caption = imageCaptionUtils.getCaptionFromImageModelElement(image);\r\n                    if (!caption) {\r\n                        return;\r\n                    }\r\n                    editor.editing.reconvertItem(caption);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagecaption/imagecaptionui\r\n */\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport ImageCaptionUtils from './imagecaptionutils';\r\n/**\r\n * The image caption UI plugin. It introduces the `'toggleImageCaption'` UI button.\r\n */\r\nexport default class ImageCaptionUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageCaptionUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageCaptionUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const editingView = editor.editing.view;\r\n        const imageCaptionUtils = editor.plugins.get('ImageCaptionUtils');\r\n        const t = editor.t;\r\n        editor.ui.componentFactory.add('toggleImageCaption', locale => {\r\n            const command = editor.commands.get('toggleImageCaption');\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                icon: icons.caption,\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            view.bind('label').to(command, 'value', value => value ? t('Toggle caption off') : t('Toggle caption on'));\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute('toggleImageCaption', { focusCaptionOnShow: true });\r\n                // Scroll to the selection and highlight the caption if the caption showed up.\r\n                const modelCaptionElement = imageCaptionUtils.getCaptionFromModelSelection(editor.model.document.selection);\r\n                if (modelCaptionElement) {\r\n                    const figcaptionElement = editor.editing.mapper.toViewElement(modelCaptionElement);\r\n                    editingView.scrollToTheSelection();\r\n                    editingView.change(writer => {\r\n                        writer.addClass('image__caption_highlighted', figcaptionElement);\r\n                    });\r\n                }\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./imagecaption.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagecaption\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ImageCaptionEditing from './imagecaption/imagecaptionediting';\r\nimport ImageCaptionUI from './imagecaption/imagecaptionui';\r\nimport '../theme/imagecaption.css';\r\n/**\r\n * The image caption plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/images/images-captions image caption} documentation.\r\n */\r\nexport default class ImageCaption extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageCaptionEditing, ImageCaptionUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageCaption';\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./imageuploadprogress.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./imageuploadicon.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./imageuploadloader.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./imageinsertformrowview.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { View } from 'ckeditor5/src/ui';\r\nimport '../../../theme/imageinsertformrowview.css';\r\n/**\r\n * The class representing a single row in a complex form,\r\n * used by {@link module:image/imageinsert/ui/imageinsertpanelview~ImageInsertPanelView}.\r\n *\r\n * **Note**: For now this class is private. When more use cases appear (beyond `ckeditor5-table` and `ckeditor5-image`),\r\n * it will become a component in `ckeditor5-ui`.\r\n *\r\n * @private\r\n */\r\nexport default class ImageUploadFormRowView extends View {\r\n    /**\r\n     * Creates an instance of the form row class.\r\n     *\r\n     * @param locale The locale instance.\r\n     * @param options.labelView When passed, the row gets the `group` and `aria-labelledby`\r\n     * DOM attributes and gets described by the label.\r\n     */\r\n    constructor(locale, options = {}) {\r\n        super(locale);\r\n        const bind = this.bindTemplate;\r\n        this.set('class', options.class || null);\r\n        this.children = this.createCollection();\r\n        if (options.children) {\r\n            options.children.forEach(child => this.children.add(child));\r\n        }\r\n        this.set('_role', null);\r\n        this.set('_ariaLabelledBy', null);\r\n        if (options.labelView) {\r\n            this.set({\r\n                _role: 'group',\r\n                _ariaLabelledBy: options.labelView.id\r\n            });\r\n        }\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-form__row',\r\n                    bind.to('class')\r\n                ],\r\n                role: bind.to('_role'),\r\n                'aria-labelledby': bind.to('_ariaLabelledBy')\r\n            },\r\n            children: this.children\r\n        });\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./imageinsert.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imageinsert/ui/imageinsertpanelview\r\n */\r\nimport { icons } from 'ckeditor5/src/core';\r\nimport { ButtonView, View, ViewCollection, submitHandler, FocusCycler } from 'ckeditor5/src/ui';\r\nimport { Collection, FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport ImageInsertFormRowView from './imageinsertformrowview';\r\nimport '../../../theme/imageinsert.css';\r\n/**\r\n * The insert an image via URL view controller class.\r\n *\r\n * See {@link module:image/imageinsert/ui/imageinsertpanelview~ImageInsertPanelView}.\r\n */\r\nexport default class ImageInsertPanelView extends View {\r\n    /**\r\n     * Creates a view for the dropdown panel of {@link module:image/imageinsert/imageinsertui~ImageInsertUI}.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param integrations An integrations object that contains components (or tokens for components) to be shown in the panel view.\r\n     */\r\n    constructor(locale, integrations = {}) {\r\n        super(locale);\r\n        const { insertButtonView, cancelButtonView } = this._createActionButtons(locale);\r\n        this.insertButtonView = insertButtonView;\r\n        this.cancelButtonView = cancelButtonView;\r\n        this.set('imageURLInputValue', '');\r\n        this.focusTracker = new FocusTracker();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this._focusables = new ViewCollection();\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate form fields backwards using the Shift + Tab keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate form fields forwards using the Tab key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        this.set('_integrations', new Collection());\r\n        for (const [integration, integrationView] of Object.entries(integrations)) {\r\n            if (integration === 'insertImageViaUrl') {\r\n                integrationView.fieldView\r\n                    .bind('value').to(this, 'imageURLInputValue', (value) => value || '');\r\n                integrationView.fieldView.on('input', () => {\r\n                    this.imageURLInputValue = integrationView.fieldView.element.value.trim();\r\n                });\r\n            }\r\n            integrationView.name = integration;\r\n            this._integrations.add(integrationView);\r\n        }\r\n        this.setTemplate({\r\n            tag: 'form',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-image-insert-form'\r\n                ],\r\n                tabindex: '-1'\r\n            },\r\n            children: [\r\n                ...this._integrations,\r\n                new ImageInsertFormRowView(locale, {\r\n                    children: [\r\n                        this.insertButtonView,\r\n                        this.cancelButtonView\r\n                    ],\r\n                    class: 'ck-image-insert-form__action-row'\r\n                })\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        submitHandler({\r\n            view: this\r\n        });\r\n        const childViews = [\r\n            ...this._integrations,\r\n            this.insertButtonView,\r\n            this.cancelButtonView\r\n        ];\r\n        childViews.forEach(v => {\r\n            // Register the view as focusable.\r\n            this._focusables.add(v);\r\n            // Register the view in the focus tracker.\r\n            this.focusTracker.add(v.element);\r\n        });\r\n        // Start listening for the keystrokes coming from #element.\r\n        this.keystrokes.listenTo(this.element);\r\n        const stopPropagation = (data) => data.stopPropagation();\r\n        // Since the form is in the dropdown panel which is a child of the toolbar, the toolbar's\r\n        // keystroke handler would take over the key management in the URL input. We need to prevent\r\n        // this ASAP. Otherwise, the basic caret movement using the arrow keys will be impossible.\r\n        this.keystrokes.set('arrowright', stopPropagation);\r\n        this.keystrokes.set('arrowleft', stopPropagation);\r\n        this.keystrokes.set('arrowup', stopPropagation);\r\n        this.keystrokes.set('arrowdown', stopPropagation);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Returns a view of the integration.\r\n     *\r\n     * @param name The name of the integration.\r\n     */\r\n    getIntegration(name) {\r\n        return this._integrations.find(integration => integration.name === name);\r\n    }\r\n    /**\r\n     * Creates the following form controls:\r\n     *\r\n     * * {@link #insertButtonView},\r\n     * * {@link #cancelButtonView}.\r\n     *\r\n     * @param locale The localization services instance.\r\n     */\r\n    _createActionButtons(locale) {\r\n        const t = locale.t;\r\n        const insertButtonView = new ButtonView(locale);\r\n        const cancelButtonView = new ButtonView(locale);\r\n        insertButtonView.set({\r\n            label: t('Insert'),\r\n            icon: icons.check,\r\n            class: 'ck-button-save',\r\n            type: 'submit',\r\n            withText: true,\r\n            isEnabled: this.imageURLInputValue\r\n        });\r\n        cancelButtonView.set({\r\n            label: t('Cancel'),\r\n            icon: icons.cancel,\r\n            class: 'ck-button-cancel',\r\n            withText: true\r\n        });\r\n        insertButtonView.bind('isEnabled').to(this, 'imageURLInputValue', value => !!value);\r\n        insertButtonView.delegate('execute').to(this, 'submit');\r\n        cancelButtonView.delegate('execute').to(this, 'cancel');\r\n        return { insertButtonView, cancelButtonView };\r\n    }\r\n    /**\r\n     * Focuses the first {@link #_focusables focusable} in the form.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { LabeledFieldView, createLabeledInputText } from 'ckeditor5/src/ui';\r\n/**\r\n * Creates integrations object that will be passed to the\r\n * {@link module:image/imageinsert/ui/imageinsertpanelview~ImageInsertPanelView}.\r\n *\r\n * @param editor Editor instance.\r\n *\r\n * @returns Integrations object.\r\n */\r\nexport function prepareIntegrations(editor) {\r\n    const panelItems = editor.config.get('image.insert.integrations');\r\n    const imageInsertUIPlugin = editor.plugins.get('ImageInsertUI');\r\n    const PREDEFINED_INTEGRATIONS = {\r\n        'insertImageViaUrl': createLabeledInputView(editor.locale)\r\n    };\r\n    if (!panelItems) {\r\n        return PREDEFINED_INTEGRATIONS;\r\n    }\r\n    // Prepares ckfinder component for the `openCKFinder` integration token.\r\n    if (panelItems.find(item => item === 'openCKFinder') && editor.ui.componentFactory.has('ckfinder')) {\r\n        const ckFinderButton = editor.ui.componentFactory.create('ckfinder');\r\n        ckFinderButton.set({\r\n            withText: true,\r\n            class: 'ck-image-insert__ck-finder-button'\r\n        });\r\n        // We want to close the dropdown panel view when user clicks the ckFinderButton.\r\n        ckFinderButton.delegate('execute').to(imageInsertUIPlugin, 'cancel');\r\n        PREDEFINED_INTEGRATIONS.openCKFinder = ckFinderButton;\r\n    }\r\n    // Creates integrations object of valid views to pass it to the ImageInsertPanelView.\r\n    return panelItems.reduce((object, key) => {\r\n        if (PREDEFINED_INTEGRATIONS[key]) {\r\n            object[key] = PREDEFINED_INTEGRATIONS[key];\r\n        }\r\n        else if (editor.ui.componentFactory.has(key)) {\r\n            object[key] = editor.ui.componentFactory.create(key);\r\n        }\r\n        return object;\r\n    }, {});\r\n}\r\n/**\r\n * Creates labeled field view.\r\n *\r\n * @param locale The localization services instance.\r\n */\r\nexport function createLabeledInputView(locale) {\r\n    const t = locale.t;\r\n    const labeledInputView = new LabeledFieldView(locale, createLabeledInputText);\r\n    labeledInputView.set({\r\n        label: t('Insert image via URL')\r\n    });\r\n    labeledInputView.fieldView.placeholder = 'https://example.com/image.png';\r\n    return labeledInputView;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imageinsert/imageinsertui\r\n */\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { SplitButtonView, createDropdown } from 'ckeditor5/src/ui';\r\nimport ImageInsertPanelView from './ui/imageinsertpanelview';\r\nimport { prepareIntegrations } from './utils';\r\n/**\r\n * The image insert dropdown plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/images/image-upload/image-upload Image upload feature}\r\n * and {@glink features/images/images-inserting Insert images via source URL} documentation.\r\n *\r\n * Adds the `'insertImage'` dropdown to the {@link module:ui/componentfactory~ComponentFactory UI component factory}\r\n * and also the `imageInsert` dropdown as an alias for backward compatibility.\r\n */\r\nexport default class ImageInsertUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageInsertUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const componentCreator = (locale) => {\r\n            return this._createDropdownView(locale);\r\n        };\r\n        // Register `insertImage` dropdown and add `imageInsert` dropdown as an alias for backward compatibility.\r\n        editor.ui.componentFactory.add('insertImage', componentCreator);\r\n        editor.ui.componentFactory.add('imageInsert', componentCreator);\r\n    }\r\n    /**\r\n     * Creates the dropdown view.\r\n     *\r\n     * @param locale The localization services instance.\r\n     */\r\n    _createDropdownView(locale) {\r\n        const editor = this.editor;\r\n        const t = locale.t;\r\n        const uploadImageCommand = editor.commands.get('uploadImage');\r\n        const insertImageCommand = editor.commands.get('insertImage');\r\n        this.dropdownView = createDropdown(locale, uploadImageCommand ? SplitButtonView : undefined);\r\n        const buttonView = this.dropdownView.buttonView;\r\n        const panelView = this.dropdownView.panelView;\r\n        buttonView.set({\r\n            label: t('Insert image'),\r\n            icon: icons.image,\r\n            tooltip: true\r\n        });\r\n        panelView.extendTemplate({\r\n            attributes: {\r\n                class: 'ck-image-insert__panel'\r\n            }\r\n        });\r\n        if (uploadImageCommand) {\r\n            const splitButtonView = this.dropdownView.buttonView;\r\n            // We are injecting custom button replacement to readonly field.\r\n            splitButtonView.actionView = editor.ui.componentFactory.create('uploadImage');\r\n            // After we replaced action button with `uploadImage` component,\r\n            // we have lost a proper styling and some minor visual quirks have appeared.\r\n            // Brining back original split button classes helps fix the button styling\r\n            // See https://github.com/ckeditor/ckeditor5/issues/7986.\r\n            splitButtonView.actionView.extendTemplate({\r\n                attributes: {\r\n                    class: 'ck ck-button ck-splitbutton__action'\r\n                }\r\n            });\r\n        }\r\n        return this._setUpDropdown(uploadImageCommand || insertImageCommand);\r\n    }\r\n    /**\r\n     * Sets up the dropdown view.\r\n     *\r\n     * @param command An uploadImage or insertImage command.\r\n     */\r\n    _setUpDropdown(command) {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const dropdownView = this.dropdownView;\r\n        const panelView = dropdownView.panelView;\r\n        const imageUtils = this.editor.plugins.get('ImageUtils');\r\n        const replaceImageSourceCommand = editor.commands.get('replaceImageSource');\r\n        let imageInsertView;\r\n        dropdownView.bind('isEnabled').to(command);\r\n        dropdownView.once('change:isOpen', () => {\r\n            imageInsertView = new ImageInsertPanelView(editor.locale, prepareIntegrations(editor));\r\n            imageInsertView.delegate('submit', 'cancel').to(dropdownView);\r\n            panelView.children.add(imageInsertView);\r\n        });\r\n        dropdownView.on('change:isOpen', () => {\r\n            const selectedElement = editor.model.document.selection.getSelectedElement();\r\n            const insertButtonView = imageInsertView.insertButtonView;\r\n            const insertImageViaUrlForm = imageInsertView.getIntegration('insertImageViaUrl');\r\n            if (dropdownView.isOpen) {\r\n                if (imageUtils.isImage(selectedElement)) {\r\n                    imageInsertView.imageURLInputValue = replaceImageSourceCommand.value;\r\n                    insertButtonView.label = t('Update');\r\n                    insertImageViaUrlForm.label = t('Update image URL');\r\n                }\r\n                else {\r\n                    imageInsertView.imageURLInputValue = '';\r\n                    insertButtonView.label = t('Insert');\r\n                    insertImageViaUrlForm.label = t('Insert image via URL');\r\n                }\r\n            }\r\n            // Note: Use the low priority to make sure the following listener starts working after the\r\n            // default action of the drop-down is executed (i.e. the panel showed up). Otherwise, the\r\n            // invisible form/input cannot be focused/selected.\r\n        }, { priority: 'low' });\r\n        this.delegate('cancel').to(dropdownView);\r\n        dropdownView.on('submit', () => {\r\n            closePanel();\r\n            onSubmit();\r\n        });\r\n        dropdownView.on('cancel', () => {\r\n            closePanel();\r\n        });\r\n        function onSubmit() {\r\n            const selectedElement = editor.model.document.selection.getSelectedElement();\r\n            if (imageUtils.isImage(selectedElement)) {\r\n                editor.execute('replaceImageSource', { source: imageInsertView.imageURLInputValue });\r\n            }\r\n            else {\r\n                editor.execute('insertImage', { source: imageInsertView.imageURLInputValue });\r\n            }\r\n        }\r\n        function closePanel() {\r\n            editor.editing.view.focus();\r\n            dropdownView.isOpen = false;\r\n        }\r\n        return dropdownView;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imageresize/imageresizebuttons\r\n */\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { ButtonView, DropdownButtonView, Model, createDropdown, addListToDropdown } from 'ckeditor5/src/ui';\r\nimport { CKEditorError, Collection } from 'ckeditor5/src/utils';\r\nimport ImageResizeEditing from './imageresizeediting';\r\nconst RESIZE_ICONS = {\r\n    small: icons.objectSizeSmall,\r\n    medium: icons.objectSizeMedium,\r\n    large: icons.objectSizeLarge,\r\n    original: icons.objectSizeFull\r\n};\r\n/**\r\n * The image resize buttons plugin.\r\n *\r\n * It adds a possibility to resize images using the toolbar dropdown or individual buttons, depending on the plugin configuration.\r\n */\r\nexport default class ImageResizeButtons extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageResizeEditing];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageResizeButtons';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._resizeUnit = editor.config.get('image.resizeUnit');\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const options = editor.config.get('image.resizeOptions');\r\n        const command = editor.commands.get('resizeImage');\r\n        this.bind('isEnabled').to(command);\r\n        for (const option of options) {\r\n            this._registerImageResizeButton(option);\r\n        }\r\n        this._registerImageResizeDropdown(options);\r\n    }\r\n    /**\r\n     * A helper function that creates a standalone button component for the plugin.\r\n     *\r\n     * @param resizeOption A model of the resize option.\r\n     */\r\n    _registerImageResizeButton(option) {\r\n        const editor = this.editor;\r\n        const { name, value, icon } = option;\r\n        const optionValueWithUnit = value ? value + this._resizeUnit : null;\r\n        editor.ui.componentFactory.add(name, locale => {\r\n            const button = new ButtonView(locale);\r\n            const command = editor.commands.get('resizeImage');\r\n            const labelText = this._getOptionLabelValue(option, true);\r\n            if (!RESIZE_ICONS[icon]) {\r\n                /**\r\n                 * When configuring {@link module:image/imageconfig~ImageConfig#resizeOptions `config.image.resizeOptions`} for standalone\r\n                 * buttons, a valid `icon` token must be set for each option.\r\n                 *\r\n                 * See all valid options described in the\r\n                 * {@link module:image/imageconfig~ImageResizeOption plugin configuration}.\r\n                 *\r\n                 * @error imageresizebuttons-missing-icon\r\n                 * @param option Invalid image resize option.\r\n                */\r\n                throw new CKEditorError('imageresizebuttons-missing-icon', editor, option);\r\n            }\r\n            button.set({\r\n                // Use the `label` property for a verbose description (because of ARIA).\r\n                label: labelText,\r\n                icon: RESIZE_ICONS[icon],\r\n                tooltip: labelText,\r\n                isToggleable: true\r\n            });\r\n            // Bind button to the command.\r\n            button.bind('isEnabled').to(this);\r\n            button.bind('isOn').to(command, 'value', getIsOnButtonCallback(optionValueWithUnit));\r\n            this.listenTo(button, 'execute', () => {\r\n                editor.execute('resizeImage', { width: optionValueWithUnit });\r\n            });\r\n            return button;\r\n        });\r\n    }\r\n    /**\r\n     * A helper function that creates a dropdown component for the plugin containing all the resize options defined in\r\n     * the editor configuration.\r\n     *\r\n     * @param options An array of configured options.\r\n     */\r\n    _registerImageResizeDropdown(options) {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const originalSizeOption = options.find(option => !option.value);\r\n        const componentCreator = (locale) => {\r\n            const command = editor.commands.get('resizeImage');\r\n            const dropdownView = createDropdown(locale, DropdownButtonView);\r\n            const dropdownButton = dropdownView.buttonView;\r\n            const accessibleLabel = t('Resize image');\r\n            dropdownButton.set({\r\n                tooltip: accessibleLabel,\r\n                commandValue: originalSizeOption.value,\r\n                icon: RESIZE_ICONS.medium,\r\n                isToggleable: true,\r\n                label: this._getOptionLabelValue(originalSizeOption),\r\n                withText: true,\r\n                class: 'ck-resize-image-button',\r\n                ariaLabel: accessibleLabel,\r\n                ariaLabelledBy: undefined\r\n            });\r\n            dropdownButton.bind('label').to(command, 'value', commandValue => {\r\n                if (commandValue && commandValue.width) {\r\n                    return commandValue.width;\r\n                }\r\n                else {\r\n                    return this._getOptionLabelValue(originalSizeOption);\r\n                }\r\n            });\r\n            dropdownView.bind('isEnabled').to(this);\r\n            addListToDropdown(dropdownView, () => this._getResizeDropdownListItemDefinitions(options, command), {\r\n                ariaLabel: t('Image resize list'),\r\n                role: 'menu'\r\n            });\r\n            // Execute command when an item from the dropdown is selected.\r\n            this.listenTo(dropdownView, 'execute', evt => {\r\n                editor.execute(evt.source.commandName, { width: evt.source.commandValue });\r\n                editor.editing.view.focus();\r\n            });\r\n            return dropdownView;\r\n        };\r\n        // Register `resizeImage` dropdown and add `imageResize` dropdown as an alias for backward compatibility.\r\n        editor.ui.componentFactory.add('resizeImage', componentCreator);\r\n        editor.ui.componentFactory.add('imageResize', componentCreator);\r\n    }\r\n    /**\r\n     * A helper function for creating an option label value string.\r\n     *\r\n     * @param option A resize option object.\r\n     * @param forTooltip An optional flag for creating a tooltip label.\r\n     * @returns A user-defined label combined from the numeric value and the resize unit or the default label\r\n     * for reset options (`Original`).\r\n     */\r\n    _getOptionLabelValue(option, forTooltip = false) {\r\n        const t = this.editor.t;\r\n        if (option.label) {\r\n            return option.label;\r\n        }\r\n        else if (forTooltip) {\r\n            if (option.value) {\r\n                return t('Resize image to %0', option.value + this._resizeUnit);\r\n            }\r\n            else {\r\n                return t('Resize image to the original size');\r\n            }\r\n        }\r\n        else {\r\n            if (option.value) {\r\n                return option.value + this._resizeUnit;\r\n            }\r\n            else {\r\n                return t('Original');\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * A helper function that parses the resize options and returns list item definitions ready for use in the dropdown.\r\n     *\r\n     * @param options The resize options.\r\n     * @param command The resize image command.\r\n     * @returns Dropdown item definitions.\r\n     */\r\n    _getResizeDropdownListItemDefinitions(options, command) {\r\n        const itemDefinitions = new Collection();\r\n        options.map(option => {\r\n            const optionValueWithUnit = option.value ? option.value + this._resizeUnit : null;\r\n            const definition = {\r\n                type: 'button',\r\n                model: new Model({\r\n                    commandName: 'resizeImage',\r\n                    commandValue: optionValueWithUnit,\r\n                    label: this._getOptionLabelValue(option),\r\n                    role: 'menuitemradio',\r\n                    withText: true,\r\n                    icon: null\r\n                })\r\n            };\r\n            definition.model.bind('isOn').to(command, 'value', getIsOnButtonCallback(optionValueWithUnit));\r\n            itemDefinitions.add(definition);\r\n        });\r\n        return itemDefinitions;\r\n    }\r\n}\r\n/**\r\n * A helper function for setting the `isOn` state of buttons in value bindings.\r\n */\r\nfunction getIsOnButtonCallback(value) {\r\n    return (commandValue) => {\r\n        const objectCommandValue = commandValue;\r\n        if (value === null && objectCommandValue === value) {\r\n            return true;\r\n        }\r\n        return objectCommandValue !== null && objectCommandValue.width === value;\r\n    };\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./imageresize.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The image style command. It is used to apply {@link module:image/imageconfig~ImageStyleConfig#options image style option}\r\n * to a selected image.\r\n *\r\n * **Note**: Executing this command may change the image model element if the desired style requires an image of a different\r\n * type. See {@link module:image/imagestyle/imagestylecommand~ImageStyleCommand#execute} to learn more.\r\n */\r\nexport default class ImageStyleCommand extends Command {\r\n    /**\r\n     * Creates an instance of the image style command. When executed, the command applies one of\r\n     * {@link module:image/imageconfig~ImageStyleConfig#options style options} to the currently selected image.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param styles The style options that this command supports.\r\n     */\r\n    constructor(editor, styles) {\r\n        super(editor);\r\n        this._defaultStyles = {\r\n            imageBlock: false,\r\n            imageInline: false\r\n        };\r\n        this._styles = new Map(styles.map(style => {\r\n            if (style.isDefault) {\r\n                for (const modelElementName of style.modelElements) {\r\n                    this._defaultStyles[modelElementName] = style.name;\r\n                }\r\n            }\r\n            return [style.name, style];\r\n        }));\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const editor = this.editor;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        const element = imageUtils.getClosestSelectedImageElement(this.editor.model.document.selection);\r\n        this.isEnabled = !!element;\r\n        if (!this.isEnabled) {\r\n            this.value = false;\r\n        }\r\n        else if (element.hasAttribute('imageStyle')) {\r\n            this.value = element.getAttribute('imageStyle');\r\n        }\r\n        else {\r\n            this.value = this._defaultStyles[element.name];\r\n        }\r\n    }\r\n    /**\r\n     * Executes the command and applies the style to the currently selected image:\r\n     *\r\n     * ```ts\r\n     * editor.execute( 'imageStyle', { value: 'side' } );\r\n     * ```\r\n     *\r\n     * **Note**: Executing this command may change the image model element if the desired style requires an image\r\n     * of a different type. Learn more about {@link module:image/imageconfig~ImageStyleOptionDefinition#modelElements model element}\r\n     * configuration for the style option.\r\n     *\r\n     * @param options.value The name of the style (as configured in {@link module:image/imageconfig~ImageStyleConfig#options}).\r\n     * @fires execute\r\n     */\r\n    execute(options = {}) {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        model.change(writer => {\r\n            const requestedStyle = options.value;\r\n            let imageElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\r\n            // Change the image type if a style requires it.\r\n            if (requestedStyle && this.shouldConvertImageType(requestedStyle, imageElement)) {\r\n                this.editor.execute(imageUtils.isBlockImage(imageElement) ? 'imageTypeInline' : 'imageTypeBlock');\r\n                // Update the imageElement to the newly created image.\r\n                imageElement = imageUtils.getClosestSelectedImageElement(model.document.selection);\r\n            }\r\n            // Default style means that there is no `imageStyle` attribute in the model.\r\n            // https://github.com/ckeditor/ckeditor5-image/issues/147\r\n            if (!requestedStyle || this._styles.get(requestedStyle).isDefault) {\r\n                writer.removeAttribute('imageStyle', imageElement);\r\n            }\r\n            else {\r\n                writer.setAttribute('imageStyle', requestedStyle, imageElement);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns `true` if requested style change would trigger the image type change.\r\n     *\r\n     * @param requestedStyle The name of the style (as configured in {@link module:image/imageconfig~ImageStyleConfig#options}).\r\n     * @param imageElement The image model element.\r\n     */\r\n    shouldConvertImageType(requestedStyle, imageElement) {\r\n        const supportedTypes = this._styles.get(requestedStyle).modelElements;\r\n        return !supportedTypes.includes(imageElement.name);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagestyle/utils\r\n */\r\nimport { icons } from 'ckeditor5/src/core';\r\nimport { logWarning } from 'ckeditor5/src/utils';\r\nconst { objectFullWidth, objectInline, objectLeft, objectRight, objectCenter, objectBlockLeft, objectBlockRight } = icons;\r\n/**\r\n * Default image style options provided by the plugin that can be referred in the {@link module:image/imageconfig~ImageConfig#styles}\r\n * configuration.\r\n *\r\n * There are available 5 styles focused on formatting:\r\n *\r\n * * **`'alignLeft'`** aligns the inline or block image to the left and wraps it with the text using the `image-style-align-left` class,\r\n * * **`'alignRight'`** aligns the inline or block image to the right and wraps it with the text using the `image-style-align-right` class,\r\n * * **`'alignCenter'`** centers the block image using the `image-style-align-center` class,\r\n * * **`'alignBlockLeft'`** aligns the block image to the left using the `image-style-block-align-left` class,\r\n * * **`'alignBlockRight'`** aligns the block image to the right using the `image-style-block-align-right` class,\r\n *\r\n * and 3 semantic styles:\r\n *\r\n * * **`'inline'`** is an inline image without any CSS class,\r\n * * **`'block'`** is a block image without any CSS class,\r\n * * **`'side'`** is a block image styled with the `image-style-side` CSS class.\r\n */\r\nexport const DEFAULT_OPTIONS = {\r\n    // This style represents an image placed in the line of text.\r\n    get inline() {\r\n        return {\r\n            name: 'inline',\r\n            title: 'In line',\r\n            icon: objectInline,\r\n            modelElements: ['imageInline'],\r\n            isDefault: true\r\n        };\r\n    },\r\n    // This style represents an image aligned to the left and wrapped with text.\r\n    get alignLeft() {\r\n        return {\r\n            name: 'alignLeft',\r\n            title: 'Left aligned image',\r\n            icon: objectLeft,\r\n            modelElements: ['imageBlock', 'imageInline'],\r\n            className: 'image-style-align-left'\r\n        };\r\n    },\r\n    // This style represents an image aligned to the left.\r\n    get alignBlockLeft() {\r\n        return {\r\n            name: 'alignBlockLeft',\r\n            title: 'Left aligned image',\r\n            icon: objectBlockLeft,\r\n            modelElements: ['imageBlock'],\r\n            className: 'image-style-block-align-left'\r\n        };\r\n    },\r\n    // This style represents a centered image.\r\n    get alignCenter() {\r\n        return {\r\n            name: 'alignCenter',\r\n            title: 'Centered image',\r\n            icon: objectCenter,\r\n            modelElements: ['imageBlock'],\r\n            className: 'image-style-align-center'\r\n        };\r\n    },\r\n    // This style represents an image aligned to the right and wrapped with text.\r\n    get alignRight() {\r\n        return {\r\n            name: 'alignRight',\r\n            title: 'Right aligned image',\r\n            icon: objectRight,\r\n            modelElements: ['imageBlock', 'imageInline'],\r\n            className: 'image-style-align-right'\r\n        };\r\n    },\r\n    // This style represents an image aligned to the right.\r\n    get alignBlockRight() {\r\n        return {\r\n            name: 'alignBlockRight',\r\n            title: 'Right aligned image',\r\n            icon: objectBlockRight,\r\n            modelElements: ['imageBlock'],\r\n            className: 'image-style-block-align-right'\r\n        };\r\n    },\r\n    // This option is equal to the situation when no style is applied.\r\n    get block() {\r\n        return {\r\n            name: 'block',\r\n            title: 'Centered image',\r\n            icon: objectCenter,\r\n            modelElements: ['imageBlock'],\r\n            isDefault: true\r\n        };\r\n    },\r\n    // This represents a side image.\r\n    get side() {\r\n        return {\r\n            name: 'side',\r\n            title: 'Side image',\r\n            icon: objectRight,\r\n            modelElements: ['imageBlock'],\r\n            className: 'image-style-side'\r\n        };\r\n    }\r\n};\r\n/**\r\n * Default image style icons provided by the plugin that can be referred in the {@link module:image/imageconfig~ImageConfig#styles}\r\n * configuration.\r\n *\r\n * See {@link module:image/imageconfig~ImageStyleOptionDefinition#icon} to learn more.\r\n *\r\n * There are 7 default icons available: `'full'`, `'left'`, `'inlineLeft'`, `'center'`, `'right'`, `'inlineRight'`, and `'inline'`.\r\n */\r\nexport const DEFAULT_ICONS = {\r\n    full: objectFullWidth,\r\n    left: objectBlockLeft,\r\n    right: objectBlockRight,\r\n    center: objectCenter,\r\n    inlineLeft: objectLeft,\r\n    inlineRight: objectRight,\r\n    inline: objectInline\r\n};\r\n/**\r\n * Default drop-downs provided by the plugin that can be referred in the {@link module:image/imageconfig~ImageConfig#toolbar}\r\n * configuration. The drop-downs are containers for the {@link module:image/imageconfig~ImageStyleConfig#options image style options}.\r\n *\r\n * If both of the `ImageEditing` plugins are loaded, there are 2 predefined drop-downs available:\r\n *\r\n * * **`'imageStyle:wrapText'`**, which contains the `alignLeft` and `alignRight` options, that is,\r\n * those that wraps the text around the image,\r\n * * **`'imageStyle:breakText'`**, which contains the `alignBlockLeft`, `alignCenter` and `alignBlockRight` options, that is,\r\n * those that breaks the text around the image.\r\n */\r\nexport const DEFAULT_DROPDOWN_DEFINITIONS = [{\r\n        name: 'imageStyle:wrapText',\r\n        title: 'Wrap text',\r\n        defaultItem: 'imageStyle:alignLeft',\r\n        items: ['imageStyle:alignLeft', 'imageStyle:alignRight']\r\n    }, {\r\n        name: 'imageStyle:breakText',\r\n        title: 'Break text',\r\n        defaultItem: 'imageStyle:block',\r\n        items: ['imageStyle:alignBlockLeft', 'imageStyle:block', 'imageStyle:alignBlockRight']\r\n    }];\r\n/**\r\n * Returns a list of the normalized and validated image style options.\r\n *\r\n * @param config\r\n * @param config.isInlinePluginLoaded\r\n * Determines whether the {@link module:image/image/imageblockediting~ImageBlockEditing `ImageBlockEditing`} plugin has been loaded.\r\n * @param config.isBlockPluginLoaded\r\n * Determines whether the {@link module:image/image/imageinlineediting~ImageInlineEditing `ImageInlineEditing`} plugin has been loaded.\r\n * @param config.configuredStyles\r\n * The image styles configuration provided in the image styles {@link module:image/imageconfig~ImageConfig#styles configuration}\r\n * as a default or custom value.\r\n * @returns\r\n * * Each of options contains a complete icon markup.\r\n * * The image style options not supported by any of the loaded plugins are filtered out.\r\n */\r\nfunction normalizeStyles(config) {\r\n    const configuredStyles = config.configuredStyles.options || [];\r\n    const styles = configuredStyles\r\n        .map(arrangement => normalizeDefinition(arrangement))\r\n        .filter(arrangement => isValidOption(arrangement, config));\r\n    return styles;\r\n}\r\n/**\r\n * Returns the default image styles configuration depending on the loaded image editing plugins.\r\n *\r\n * @param isInlinePluginLoaded\r\n * Determines whether the {@link module:image/image/imageblockediting~ImageBlockEditing `ImageBlockEditing`} plugin has been loaded.\r\n *\r\n * @param isBlockPluginLoaded\r\n * Determines whether the {@link module:image/image/imageinlineediting~ImageInlineEditing `ImageInlineEditing`} plugin has been loaded.\r\n *\r\n * @returns\r\n * It returns an object with the lists of the image style options and groups defined as strings related to the\r\n * {@link module:image/imagestyle/utils#DEFAULT_OPTIONS default options}\r\n */\r\nfunction getDefaultStylesConfiguration(isBlockPluginLoaded, isInlinePluginLoaded) {\r\n    if (isBlockPluginLoaded && isInlinePluginLoaded) {\r\n        return {\r\n            options: [\r\n                'inline', 'alignLeft', 'alignRight',\r\n                'alignCenter', 'alignBlockLeft', 'alignBlockRight',\r\n                'block', 'side'\r\n            ]\r\n        };\r\n    }\r\n    else if (isBlockPluginLoaded) {\r\n        return {\r\n            options: ['block', 'side']\r\n        };\r\n    }\r\n    else if (isInlinePluginLoaded) {\r\n        return {\r\n            options: ['inline', 'alignLeft', 'alignRight']\r\n        };\r\n    }\r\n    return {};\r\n}\r\n/**\r\n * Returns a list of the available predefined drop-downs' definitions depending on the loaded image editing plugins.\r\n */\r\nfunction getDefaultDropdownDefinitions(pluginCollection) {\r\n    if (pluginCollection.has('ImageBlockEditing') && pluginCollection.has('ImageInlineEditing')) {\r\n        return [...DEFAULT_DROPDOWN_DEFINITIONS];\r\n    }\r\n    else {\r\n        return [];\r\n    }\r\n}\r\n/**\r\n * Normalizes an image style option or group provided in the {@link module:image/imageconfig~ImageConfig#styles}\r\n * and returns it in a {@link module:image/imageconfig~ImageStyleOptionDefinition}/\r\n */\r\nfunction normalizeDefinition(definition) {\r\n    if (typeof definition === 'string') {\r\n        // Just the name of the style has been passed, but none of the defaults.\r\n        if (!DEFAULT_OPTIONS[definition]) {\r\n            // Normalize the style anyway to prevent errors.\r\n            definition = { name: definition };\r\n        }\r\n        // Just the name of the style has been passed and it's one of the defaults, just use it.\r\n        // Clone the style to avoid overriding defaults.\r\n        else {\r\n            definition = { ...DEFAULT_OPTIONS[definition] };\r\n        }\r\n    }\r\n    else {\r\n        // If an object style has been passed and if the name matches one of the defaults,\r\n        // extend it with defaults – the user wants to customize a default style.\r\n        // Note: Don't override the user–defined style object, clone it instead.\r\n        definition = extendStyle(DEFAULT_OPTIONS[definition.name], definition);\r\n    }\r\n    // If an icon is defined as a string and correspond with a name\r\n    // in default icons, use the default icon provided by the plugin.\r\n    if (typeof definition.icon === 'string') {\r\n        definition.icon = DEFAULT_ICONS[definition.icon] || definition.icon;\r\n    }\r\n    return definition;\r\n}\r\n/**\r\n * Checks if the image style option is valid:\r\n * * if it has the modelElements fields defined and filled,\r\n * * if the defined modelElements are supported by any of the loaded image editing plugins.\r\n * It also displays a console warning these conditions are not met.\r\n *\r\n * @param option image style option\r\n */\r\nfunction isValidOption(option, { isBlockPluginLoaded, isInlinePluginLoaded }) {\r\n    const { modelElements, name } = option;\r\n    if (!modelElements || !modelElements.length || !name) {\r\n        warnInvalidStyle({ style: option });\r\n        return false;\r\n    }\r\n    else {\r\n        const supportedElements = [isBlockPluginLoaded ? 'imageBlock' : null, isInlinePluginLoaded ? 'imageInline' : null];\r\n        // Check if the option is supported by any of the loaded plugins.\r\n        if (!modelElements.some(elementName => supportedElements.includes(elementName))) {\r\n            /**\r\n             * In order to work correctly, each image style {@link module:image/imageconfig~ImageStyleOptionDefinition option}\r\n             * requires specific model elements (also: types of images) to be supported by the editor.\r\n             *\r\n             * Model element names to which the image style option can be applied are defined in the\r\n             * {@link module:image/imageconfig~ImageStyleOptionDefinition#modelElements} property of the style option\r\n             * definition.\r\n             *\r\n             * Explore the warning in the console to find out precisely which option is not supported and which editor plugins\r\n             * are missing. Make sure these plugins are loaded in your editor to get this image style option working.\r\n             *\r\n             * @error image-style-missing-dependency\r\n             * @param {String} [option] The name of the unsupported option.\r\n             * @param {String} [missingPlugins] The names of the plugins one of which has to be loaded for the particular option.\r\n             */\r\n            logWarning('image-style-missing-dependency', {\r\n                style: option,\r\n                missingPlugins: modelElements.map(name => name === 'imageBlock' ? 'ImageBlockEditing' : 'ImageInlineEditing')\r\n            });\r\n            return false;\r\n        }\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Extends the default style with a style provided by the developer.\r\n * Note: Don't override the custom–defined style object, clone it instead.\r\n */\r\nfunction extendStyle(source, style) {\r\n    const extendedStyle = { ...style };\r\n    for (const prop in source) {\r\n        if (!Object.prototype.hasOwnProperty.call(style, prop)) {\r\n            extendedStyle[prop] = source[prop];\r\n        }\r\n    }\r\n    return extendedStyle;\r\n}\r\n/**\r\n * Displays a console warning with the 'image-style-configuration-definition-invalid' error.\r\n */\r\nfunction warnInvalidStyle(info) {\r\n    /**\r\n     * The image style definition provided in the configuration is invalid.\r\n     *\r\n     * Please make sure the definition implements properly one of the following:\r\n     *\r\n     * * {@link module:image/imageconfig~ImageStyleOptionDefinition image style option definition},\r\n     * * {@link module:image/imageconfig~ImageStyleDropdownDefinition image style dropdown definition}\r\n     *\r\n     * @error image-style-configuration-definition-invalid\r\n     * @param {String} [dropdown] The name of the invalid drop-down\r\n     * @param {String} [style] The name of the invalid image style option\r\n     */\r\n    logWarning('image-style-configuration-definition-invalid', info);\r\n}\r\nexport default {\r\n    normalizeStyles,\r\n    getDefaultStylesConfiguration,\r\n    getDefaultDropdownDefinitions,\r\n    warnInvalidStyle,\r\n    DEFAULT_OPTIONS,\r\n    DEFAULT_ICONS,\r\n    DEFAULT_DROPDOWN_DEFINITIONS\r\n};\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * @module image/imagestyle/converters\r\n */\r\n/**\r\n * Returns a converter for the `imageStyle` attribute. It can be used for adding, changing and removing the attribute.\r\n *\r\n * @param styles An array containing available image style options.\r\n * @returns A model-to-view attribute converter.\r\n */\r\nexport function modelToViewStyleAttribute(styles) {\r\n    return (evt, data, conversionApi) => {\r\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n            return;\r\n        }\r\n        // Check if there is class name associated with given value.\r\n        const newStyle = getStyleDefinitionByName(data.attributeNewValue, styles);\r\n        const oldStyle = getStyleDefinitionByName(data.attributeOldValue, styles);\r\n        const viewElement = conversionApi.mapper.toViewElement(data.item);\r\n        const viewWriter = conversionApi.writer;\r\n        if (oldStyle) {\r\n            viewWriter.removeClass(oldStyle.className, viewElement);\r\n        }\r\n        if (newStyle) {\r\n            viewWriter.addClass(newStyle.className, viewElement);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Returns a view-to-model converter converting image CSS classes to a proper value in the model.\r\n *\r\n * @param styles Image style options for which the converter is created.\r\n * @returns A view-to-model converter.\r\n */\r\nexport function viewToModelStyleAttribute(styles) {\r\n    // Convert only non–default styles.\r\n    const nonDefaultStyles = {\r\n        imageInline: styles.filter(style => !style.isDefault && style.modelElements.includes('imageInline')),\r\n        imageBlock: styles.filter(style => !style.isDefault && style.modelElements.includes('imageBlock'))\r\n    };\r\n    return (evt, data, conversionApi) => {\r\n        if (!data.modelRange) {\r\n            return;\r\n        }\r\n        const viewElement = data.viewItem;\r\n        const modelImageElement = first(data.modelRange.getItems());\r\n        // Run this converter only if an image has been found in the model.\r\n        // In some cases it may not be found (for example if we run this on a figure with different type than image).\r\n        if (!modelImageElement) {\r\n            return;\r\n        }\r\n        // ...and the `imageStyle` attribute is allowed for that element, otherwise stop conversion early.\r\n        if (!conversionApi.schema.checkAttribute(modelImageElement, 'imageStyle')) {\r\n            return;\r\n        }\r\n        // Convert styles one by one.\r\n        for (const style of nonDefaultStyles[modelImageElement.name]) {\r\n            // Try to consume class corresponding with the style.\r\n            if (conversionApi.consumable.consume(viewElement, { classes: style.className })) {\r\n                // And convert this style to model attribute.\r\n                conversionApi.writer.setAttribute('imageStyle', style.name, modelImageElement);\r\n            }\r\n        }\r\n    };\r\n}\r\n/**\r\n * Returns the style with a given `name` from an array of styles.\r\n */\r\nfunction getStyleDefinitionByName(name, styles) {\r\n    for (const style of styles) {\r\n        if (style.name === name) {\r\n            return style;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagestyle/imagestyleediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ImageStyleCommand from './imagestylecommand';\r\nimport ImageUtils from '../imageutils';\r\nimport utils from './utils';\r\nimport { viewToModelStyleAttribute, modelToViewStyleAttribute } from './converters';\r\n/**\r\n * The image style engine plugin. It sets the default configuration, creates converters and registers\r\n * {@link module:image/imagestyle/imagestylecommand~ImageStyleCommand ImageStyleCommand}.\r\n */\r\nexport default class ImageStyleEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageStyleEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const { normalizeStyles, getDefaultStylesConfiguration } = utils;\r\n        const editor = this.editor;\r\n        const isBlockPluginLoaded = editor.plugins.has('ImageBlockEditing');\r\n        const isInlinePluginLoaded = editor.plugins.has('ImageInlineEditing');\r\n        editor.config.define('image.styles', getDefaultStylesConfiguration(isBlockPluginLoaded, isInlinePluginLoaded));\r\n        this.normalizedStyles = normalizeStyles({\r\n            configuredStyles: editor.config.get('image.styles'),\r\n            isBlockPluginLoaded,\r\n            isInlinePluginLoaded\r\n        });\r\n        this._setupConversion(isBlockPluginLoaded, isInlinePluginLoaded);\r\n        this._setupPostFixer();\r\n        // Register imageStyle command.\r\n        editor.commands.add('imageStyle', new ImageStyleCommand(editor, this.normalizedStyles));\r\n    }\r\n    /**\r\n     * Sets the editor conversion taking the presence of\r\n     * {@link module:image/image/imageinlineediting~ImageInlineEditing `ImageInlineEditing`}\r\n     * and {@link module:image/image/imageblockediting~ImageBlockEditing `ImageBlockEditing`} plugins into consideration.\r\n     */\r\n    _setupConversion(isBlockPluginLoaded, isInlinePluginLoaded) {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const modelToViewConverter = modelToViewStyleAttribute(this.normalizedStyles);\r\n        const viewToModelConverter = viewToModelStyleAttribute(this.normalizedStyles);\r\n        editor.editing.downcastDispatcher.on('attribute:imageStyle', modelToViewConverter);\r\n        editor.data.downcastDispatcher.on('attribute:imageStyle', modelToViewConverter);\r\n        // Allow imageStyle attribute in image and imageInline.\r\n        // We could call it 'style' but https://github.com/ckeditor/ckeditor5-engine/issues/559.\r\n        if (isBlockPluginLoaded) {\r\n            schema.extend('imageBlock', { allowAttributes: 'imageStyle' });\r\n            // Converter for figure element from view to model.\r\n            editor.data.upcastDispatcher.on('element:figure', viewToModelConverter, { priority: 'low' });\r\n        }\r\n        if (isInlinePluginLoaded) {\r\n            schema.extend('imageInline', { allowAttributes: 'imageStyle' });\r\n            // Converter for the img element from view to model.\r\n            editor.data.upcastDispatcher.on('element:img', viewToModelConverter, { priority: 'low' });\r\n        }\r\n    }\r\n    /**\r\n     * Registers a post-fixer that will make sure that the style attribute value is correct for a specific image type (block vs inline).\r\n     */\r\n    _setupPostFixer() {\r\n        const editor = this.editor;\r\n        const document = editor.model.document;\r\n        const imageUtils = editor.plugins.get(ImageUtils);\r\n        const stylesMap = new Map(this.normalizedStyles.map(style => [style.name, style]));\r\n        // Make sure that style attribute is valid for the image type.\r\n        document.registerPostFixer(writer => {\r\n            let changed = false;\r\n            for (const change of document.differ.getChanges()) {\r\n                if (change.type == 'insert' || change.type == 'attribute' && change.attributeKey == 'imageStyle') {\r\n                    let element = change.type == 'insert' ? change.position.nodeAfter : change.range.start.nodeAfter;\r\n                    if (element && element.is('element', 'paragraph') && element.childCount > 0) {\r\n                        element = element.getChild(0);\r\n                    }\r\n                    if (!imageUtils.isImage(element)) {\r\n                        continue;\r\n                    }\r\n                    const imageStyle = element.getAttribute('imageStyle');\r\n                    if (!imageStyle) {\r\n                        continue;\r\n                    }\r\n                    const imageStyleDefinition = stylesMap.get(imageStyle);\r\n                    if (!imageStyleDefinition || !imageStyleDefinition.modelElements.includes(element.name)) {\r\n                        writer.removeAttribute('imageStyle', element);\r\n                        changed = true;\r\n                    }\r\n                }\r\n            }\r\n            return changed;\r\n        });\r\n    }\r\n}\r\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./imagestyle.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagestyle/imagestyleui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView, createDropdown, addToolbarToDropdown, SplitButtonView } from 'ckeditor5/src/ui';\r\nimport { isObject, identity } from 'lodash-es';\r\nimport ImageStyleEditing from './imagestyleediting';\r\nimport utils from './utils';\r\nimport '../../theme/imagestyle.css';\r\n/**\r\n * The image style UI plugin.\r\n *\r\n * It registers buttons corresponding to the {@link module:image/imageconfig~ImageConfig#styles} configuration.\r\n * It also registers the {@link module:image/imagestyle/utils#DEFAULT_DROPDOWN_DEFINITIONS default drop-downs} and the\r\n * custom drop-downs defined by the developer in the {@link module:image/imageconfig~ImageConfig#toolbar} configuration.\r\n */\r\nexport default class ImageStyleUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageStyleEditing];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageStyleUI';\r\n    }\r\n    /**\r\n     * Returns the default localized style titles provided by the plugin.\r\n     *\r\n     * The following localized titles corresponding with\r\n     * {@link module:image/imagestyle/utils#DEFAULT_OPTIONS} are available:\r\n     *\r\n     * * `'Wrap text'`,\r\n     * * `'Break text'`,\r\n     * * `'In line'`,\r\n     * * `'Full size image'`,\r\n     * * `'Side image'`,\r\n     * * `'Left aligned image'`,\r\n     * * `'Centered image'`,\r\n     * * `'Right aligned image'`\r\n     */\r\n    get localizedDefaultStylesTitles() {\r\n        const t = this.editor.t;\r\n        return {\r\n            'Wrap text': t('Wrap text'),\r\n            'Break text': t('Break text'),\r\n            'In line': t('In line'),\r\n            'Full size image': t('Full size image'),\r\n            'Side image': t('Side image'),\r\n            'Left aligned image': t('Left aligned image'),\r\n            'Centered image': t('Centered image'),\r\n            'Right aligned image': t('Right aligned image')\r\n        };\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const plugins = this.editor.plugins;\r\n        const toolbarConfig = this.editor.config.get('image.toolbar') || [];\r\n        const imageStyleEditing = plugins.get('ImageStyleEditing');\r\n        const definedStyles = translateStyles(imageStyleEditing.normalizedStyles, this.localizedDefaultStylesTitles);\r\n        for (const styleConfig of definedStyles) {\r\n            this._createButton(styleConfig);\r\n        }\r\n        const definedDropdowns = translateStyles([\r\n            ...toolbarConfig.filter(isObject),\r\n            ...utils.getDefaultDropdownDefinitions(plugins)\r\n        ], this.localizedDefaultStylesTitles);\r\n        for (const dropdownConfig of definedDropdowns) {\r\n            this._createDropdown(dropdownConfig, definedStyles);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a dropdown and stores it in the editor {@link module:ui/componentfactory~ComponentFactory}.\r\n     */\r\n    _createDropdown(dropdownConfig, definedStyles) {\r\n        const factory = this.editor.ui.componentFactory;\r\n        factory.add(dropdownConfig.name, locale => {\r\n            let defaultButton;\r\n            const { defaultItem, items, title } = dropdownConfig;\r\n            const buttonViews = items\r\n                .filter(itemName => definedStyles.find(({ name }) => getUIComponentName(name) === itemName))\r\n                .map(buttonName => {\r\n                const button = factory.create(buttonName);\r\n                if (buttonName === defaultItem) {\r\n                    defaultButton = button;\r\n                }\r\n                return button;\r\n            });\r\n            if (items.length !== buttonViews.length) {\r\n                utils.warnInvalidStyle({ dropdown: dropdownConfig });\r\n            }\r\n            const dropdownView = createDropdown(locale, SplitButtonView);\r\n            const splitButtonView = dropdownView.buttonView;\r\n            const splitButtonViewArrow = splitButtonView.arrowView;\r\n            addToolbarToDropdown(dropdownView, buttonViews, { enableActiveItemFocusOnDropdownOpen: true });\r\n            splitButtonView.set({\r\n                label: getDropdownButtonTitle(title, defaultButton.label),\r\n                class: null,\r\n                tooltip: true\r\n            });\r\n            splitButtonViewArrow.unbind('label');\r\n            splitButtonViewArrow.set({\r\n                label: title\r\n            });\r\n            splitButtonView.bind('icon').toMany(buttonViews, 'isOn', (...areOn) => {\r\n                const index = areOn.findIndex(identity);\r\n                return (index < 0) ? defaultButton.icon : buttonViews[index].icon;\r\n            });\r\n            splitButtonView.bind('label').toMany(buttonViews, 'isOn', (...areOn) => {\r\n                const index = areOn.findIndex(identity);\r\n                return getDropdownButtonTitle(title, (index < 0) ? defaultButton.label : buttonViews[index].label);\r\n            });\r\n            splitButtonView.bind('isOn').toMany(buttonViews, 'isOn', (...areOn) => areOn.some(identity));\r\n            splitButtonView.bind('class')\r\n                .toMany(buttonViews, 'isOn', (...areOn) => areOn.some(identity) ? 'ck-splitbutton_flatten' : undefined);\r\n            splitButtonView.on('execute', () => {\r\n                if (!buttonViews.some(({ isOn }) => isOn)) {\r\n                    defaultButton.fire('execute');\r\n                }\r\n                else {\r\n                    dropdownView.isOpen = !dropdownView.isOpen;\r\n                }\r\n            });\r\n            dropdownView.bind('isEnabled')\r\n                .toMany(buttonViews, 'isEnabled', (...areEnabled) => areEnabled.some(identity));\r\n            // Focus the editable after executing the command.\r\n            // Overrides a default behaviour where the focus is moved to the dropdown button (#12125).\r\n            this.listenTo(dropdownView, 'execute', () => {\r\n                this.editor.editing.view.focus();\r\n            });\r\n            return dropdownView;\r\n        });\r\n    }\r\n    /**\r\n     * Creates a button and stores it in the editor {@link module:ui/componentfactory~ComponentFactory}.\r\n     */\r\n    _createButton(buttonConfig) {\r\n        const buttonName = buttonConfig.name;\r\n        this.editor.ui.componentFactory.add(getUIComponentName(buttonName), locale => {\r\n            const command = this.editor.commands.get('imageStyle');\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: buttonConfig.title,\r\n                icon: buttonConfig.icon,\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isEnabled').to(command, 'isEnabled');\r\n            view.bind('isOn').to(command, 'value', value => value === buttonName);\r\n            view.on('execute', this._executeCommand.bind(this, buttonName));\r\n            return view;\r\n        });\r\n    }\r\n    _executeCommand(name) {\r\n        this.editor.execute('imageStyle', { value: name });\r\n        this.editor.editing.view.focus();\r\n    }\r\n}\r\n/**\r\n * Returns the translated `title` from the passed styles array.\r\n */\r\nfunction translateStyles(styles, titles) {\r\n    for (const style of styles) {\r\n        // Localize the titles of the styles, if a title corresponds with\r\n        // a localized default provided by the plugin.\r\n        if (titles[style.title]) {\r\n            style.title = titles[style.title];\r\n        }\r\n    }\r\n    return styles;\r\n}\r\n/**\r\n * Returns the image style component name with the \"imageStyle:\" prefix.\r\n */\r\nfunction getUIComponentName(name) {\r\n    return `imageStyle:${name}`;\r\n}\r\n/**\r\n * Returns title for the splitbutton containing the dropdown title and default action item title.\r\n */\r\nfunction getDropdownButtonTitle(dropdownTitle, buttonTitle) {\r\n    return (dropdownTitle ? dropdownTitle + ': ' : '') + buttonTitle;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagestyle\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ImageStyleEditing from './imagestyle/imagestyleediting';\r\nimport ImageStyleUI from './imagestyle/imagestyleui';\r\n/**\r\n * The image style plugin.\r\n *\r\n * For a detailed overview of the image styles feature, check the {@glink features/images/images-styles documentation}.\r\n *\r\n * This is a \"glue\" plugin which loads the following plugins:\r\n * * {@link module:image/imagestyle/imagestyleediting~ImageStyleEditing},\r\n * * {@link module:image/imagestyle/imagestyleui~ImageStyleUI}\r\n *\r\n * It provides a default configuration, which can be extended or overwritten.\r\n * Read more about the {@link module:image/imageconfig~ImageConfig#styles image styles configuration}.\r\n */\r\nexport default class ImageStyle extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ImageStyleEditing, ImageStyleUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageStyle';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module image/imagetoolbar\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { WidgetToolbarRepository } from 'ckeditor5/src/widget';\r\nimport ImageUtils from './imageutils';\r\nimport { isObject } from 'lodash-es';\r\n/**\r\n * The image toolbar plugin. It creates and manages the image toolbar (the toolbar displayed when an image is selected).\r\n *\r\n * For an overview, check the {@glink features/images/images-overview#image-contextual-toolbar image contextual toolbar} documentation.\r\n *\r\n * Instances of toolbar components (e.g. buttons) are created using the editor's\r\n * {@link module:ui/componentfactory~ComponentFactory component factory}\r\n * based on the {@link module:image/imageconfig~ImageConfig#toolbar `image.toolbar` configuration option}.\r\n *\r\n * The toolbar uses the {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon}.\r\n */\r\nexport default class ImageToolbar extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [WidgetToolbarRepository, ImageUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageToolbar';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const widgetToolbarRepository = editor.plugins.get(WidgetToolbarRepository);\r\n        const imageUtils = editor.plugins.get('ImageUtils');\r\n        widgetToolbarRepository.register('image', {\r\n            ariaLabel: t('Image toolbar'),\r\n            items: normalizeDeclarativeConfig(editor.config.get('image.toolbar') || []),\r\n            getRelatedElement: selection => imageUtils.getClosestSelectedImageWidget(selection)\r\n        });\r\n    }\r\n}\r\n/**\r\n * Convert the dropdown definitions to their keys registered in the ComponentFactory.\r\n * The registration precess should be handled by the plugin which handles the UI of a particular feature.\r\n */\r\nfunction normalizeDeclarativeConfig(config) {\r\n    return config.map(item => isObject(item) ? item.name : item);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { LiveRange } from 'ckeditor5/src/engine';\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * The block autoformatting engine. It allows to format various block patterns. For example,\r\n * it can be configured to turn a paragraph starting with `*` and followed by a space into a list item.\r\n *\r\n * The autoformatting operation is integrated with the undo manager,\r\n * so the autoformatting step can be undone if the user's intention was not to format the text.\r\n *\r\n * See the {@link module:autoformat/blockautoformatediting~blockAutoformatEditing `blockAutoformatEditing`} documentation\r\n * to learn how to create custom block autoformatters. You can also use\r\n * the {@link module:autoformat/autoformat~Autoformat} feature which enables a set of default autoformatters\r\n * (lists, headings, bold and italic).\r\n *\r\n * @module autoformat/blockautoformatediting\r\n */\r\n/**\r\n * Creates a listener triggered on {@link module:engine/model/document~Document#event:change:data `change:data`} event in the document.\r\n * Calls the callback when inserted text matches the regular expression or the command name\r\n * if provided instead of the callback.\r\n *\r\n * Examples of usage:\r\n *\r\n * To convert a paragraph into heading 1 when `- ` is typed, using just the command name:\r\n *\r\n * ```ts\r\n * blockAutoformatEditing( editor, plugin, /^\\- $/, 'heading1' );\r\n * ```\r\n *\r\n * To convert a paragraph into heading 1 when `- ` is typed, using just the callback:\r\n *\r\n * ```ts\r\n * blockAutoformatEditing( editor, plugin, /^\\- $/, ( context ) => {\r\n * \tconst { match } = context;\r\n * \tconst headingLevel = match[ 1 ].length;\r\n *\r\n * \teditor.execute( 'heading', {\r\n * \t\tformatId: `heading${ headingLevel }`\r\n * \t} );\r\n * } );\r\n * ```\r\n *\r\n * @param editor The editor instance.\r\n * @param plugin The autoformat plugin instance.\r\n * @param pattern The regular expression to execute on just inserted text. The regular expression is tested against the text\r\n * from the beginning until the caret position.\r\n * @param callbackOrCommand The callback to execute or the command to run when the text is matched.\r\n * In case of providing the callback, it receives the following parameter:\r\n * * match RegExp.exec() result of matching the pattern to inserted text.\r\n */\r\nexport default function blockAutoformatEditing(editor, plugin, pattern, callbackOrCommand) {\r\n    let callback;\r\n    let command = null;\r\n    if (typeof callbackOrCommand == 'function') {\r\n        callback = callbackOrCommand;\r\n    }\r\n    else {\r\n        // We assume that the actual command name was provided.\r\n        command = editor.commands.get(callbackOrCommand);\r\n        callback = () => {\r\n            editor.execute(callbackOrCommand);\r\n        };\r\n    }\r\n    editor.model.document.on('change:data', (evt, batch) => {\r\n        if (command && !command.isEnabled || !plugin.isEnabled) {\r\n            return;\r\n        }\r\n        const range = first(editor.model.document.selection.getRanges());\r\n        if (!range.isCollapsed) {\r\n            return;\r\n        }\r\n        if (batch.isUndo || !batch.isLocal) {\r\n            return;\r\n        }\r\n        const changes = Array.from(editor.model.document.differ.getChanges());\r\n        const entry = changes[0];\r\n        // Typing is represented by only a single change.\r\n        if (changes.length != 1 || entry.type !== 'insert' || entry.name != '$text' || entry.length != 1) {\r\n            return;\r\n        }\r\n        const blockToFormat = entry.position.parent;\r\n        // Block formatting should be disabled in codeBlocks (#5800).\r\n        if (blockToFormat.is('element', 'codeBlock')) {\r\n            return;\r\n        }\r\n        // Only list commands and custom callbacks can be applied inside a list.\r\n        if (blockToFormat.is('element', 'listItem') &&\r\n            typeof callbackOrCommand !== 'function' &&\r\n            !['numberedList', 'bulletedList', 'todoList'].includes(callbackOrCommand)) {\r\n            return;\r\n        }\r\n        // In case a command is bound, do not re-execute it over an existing block style which would result in a style removal.\r\n        // Instead, just drop processing so that autoformat trigger text is not lost. E.g. writing \"# \" in a level 1 heading.\r\n        if (command && command.value === true) {\r\n            return;\r\n        }\r\n        const firstNode = blockToFormat.getChild(0);\r\n        const firstNodeRange = editor.model.createRangeOn(firstNode);\r\n        // Range is only expected to be within or at the very end of the first text node.\r\n        if (!firstNodeRange.containsRange(range) && !range.end.isEqual(firstNodeRange.end)) {\r\n            return;\r\n        }\r\n        const match = pattern.exec(firstNode.data.substr(0, range.end.offset));\r\n        // ...and this text node's data match the pattern.\r\n        if (!match) {\r\n            return;\r\n        }\r\n        // Use enqueueChange to create new batch to separate typing batch from the auto-format changes.\r\n        editor.model.enqueueChange(writer => {\r\n            // Matched range.\r\n            const start = writer.createPositionAt(blockToFormat, 0);\r\n            const end = writer.createPositionAt(blockToFormat, match[0].length);\r\n            const range = new LiveRange(start, end);\r\n            const wasChanged = callback({ match });\r\n            // Remove matched text.\r\n            if (wasChanged !== false) {\r\n                writer.remove(range);\r\n                const selectionRange = editor.model.document.selection.getFirstRange();\r\n                const blockRange = writer.createRangeIn(blockToFormat);\r\n                // If the block is empty and the document selection has been moved when\r\n                // applying formatting (e.g. is now in newly created block).\r\n                if (blockToFormat.isEmpty && !blockRange.isEqual(selectionRange) && !blockRange.containsRange(selectionRange, true)) {\r\n                    writer.remove(blockToFormat);\r\n                }\r\n            }\r\n            range.detach();\r\n            editor.model.enqueueChange(() => {\r\n                const deletePlugin = editor.plugins.get('Delete');\r\n                deletePlugin.requestUndoOnBackspace();\r\n            });\r\n        });\r\n    });\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Enables autoformatting mechanism for a given {@link module:core/editor/editor~Editor}.\r\n *\r\n * It formats the matched text by applying the given model attribute or by running the provided formatting callback.\r\n * On every {@link module:engine/model/document~Document#event:change:data data change} in the model document\r\n * the autoformatting engine checks the text on the left of the selection\r\n * and executes the provided action if the text matches given criteria (regular expression or callback).\r\n *\r\n * @param editor The editor instance.\r\n * @param plugin The autoformat plugin instance.\r\n * @param testRegexpOrCallback The regular expression or callback to execute on text.\r\n * Provided regular expression *must* have three capture groups. The first and the third capture group\r\n * should match opening and closing delimiters. The second capture group should match the text to format.\r\n *\r\n * ```ts\r\n * // Matches the `**bold text**` pattern.\r\n * // There are three capturing groups:\r\n * // - The first to match the starting `**` delimiter.\r\n * // - The second to match the text to format.\r\n * // - The third to match the ending `**` delimiter.\r\n * inlineAutoformatEditing( editor, plugin, /(\\*\\*)([^\\*]+?)(\\*\\*)$/g, formatCallback );\r\n * ```\r\n *\r\n * When a function is provided instead of the regular expression, it will be executed with the text to match as a parameter.\r\n * The function should return proper \"ranges\" to delete and format.\r\n *\r\n * ```ts\r\n * {\r\n * \tremove: [\r\n * \t\t[ 0, 1 ],\t// Remove the first letter from the given text.\r\n * \t\t[ 5, 6 ]\t// Remove the 6th letter from the given text.\r\n * \t],\r\n * \tformat: [\r\n * \t\t[ 1, 5 ]\t// Format all letters from 2nd to 5th.\r\n * \t]\r\n * }\r\n * ```\r\n *\r\n * @param formatCallback A callback to apply actual formatting.\r\n * It should return `false` if changes should not be applied (e.g. if a command is disabled).\r\n *\r\n * ```ts\r\n * inlineAutoformatEditing( editor, plugin, /(\\*\\*)([^\\*]+?)(\\*\\*)$/g, ( writer, rangesToFormat ) => {\r\n * \tconst command = editor.commands.get( 'bold' );\r\n *\r\n * \tif ( !command.isEnabled ) {\r\n * \t\treturn false;\r\n * \t}\r\n *\r\n * \tconst validRanges = editor.model.schema.getValidRanges( rangesToFormat, 'bold' );\r\n *\r\n * \tfor ( let range of validRanges ) {\r\n * \t\twriter.setAttribute( 'bold', true, range );\r\n * \t}\r\n * } );\r\n * ```\r\n */\r\nexport default function inlineAutoformatEditing(editor, plugin, testRegexpOrCallback, formatCallback) {\r\n    let regExp;\r\n    let testCallback;\r\n    if (testRegexpOrCallback instanceof RegExp) {\r\n        regExp = testRegexpOrCallback;\r\n    }\r\n    else {\r\n        testCallback = testRegexpOrCallback;\r\n    }\r\n    // A test callback run on changed text.\r\n    testCallback = testCallback || (text => {\r\n        let result;\r\n        const remove = [];\r\n        const format = [];\r\n        while ((result = regExp.exec(text)) !== null) {\r\n            // There should be full match and 3 capture groups.\r\n            if (result && result.length < 4) {\r\n                break;\r\n            }\r\n            let { index, '1': leftDel, '2': content, '3': rightDel } = result;\r\n            // Real matched string - there might be some non-capturing groups so we need to recalculate starting index.\r\n            const found = leftDel + content + rightDel;\r\n            index += result[0].length - found.length;\r\n            // Start and End offsets of delimiters to remove.\r\n            const delStart = [\r\n                index,\r\n                index + leftDel.length\r\n            ];\r\n            const delEnd = [\r\n                index + leftDel.length + content.length,\r\n                index + leftDel.length + content.length + rightDel.length\r\n            ];\r\n            remove.push(delStart);\r\n            remove.push(delEnd);\r\n            format.push([index + leftDel.length, index + leftDel.length + content.length]);\r\n        }\r\n        return {\r\n            remove,\r\n            format\r\n        };\r\n    });\r\n    editor.model.document.on('change:data', (evt, batch) => {\r\n        if (batch.isUndo || !batch.isLocal || !plugin.isEnabled) {\r\n            return;\r\n        }\r\n        const model = editor.model;\r\n        const selection = model.document.selection;\r\n        // Do nothing if selection is not collapsed.\r\n        if (!selection.isCollapsed) {\r\n            return;\r\n        }\r\n        const changes = Array.from(model.document.differ.getChanges());\r\n        const entry = changes[0];\r\n        // Typing is represented by only a single change.\r\n        if (changes.length != 1 || entry.type !== 'insert' || entry.name != '$text' || entry.length != 1) {\r\n            return;\r\n        }\r\n        const focus = selection.focus;\r\n        const block = focus.parent;\r\n        const { text, range } = getTextAfterCode(model.createRange(model.createPositionAt(block, 0), focus), model);\r\n        const testOutput = testCallback(text);\r\n        const rangesToFormat = testOutputToRanges(range.start, testOutput.format, model);\r\n        const rangesToRemove = testOutputToRanges(range.start, testOutput.remove, model);\r\n        if (!(rangesToFormat.length && rangesToRemove.length)) {\r\n            return;\r\n        }\r\n        // Use enqueueChange to create new batch to separate typing batch from the auto-format changes.\r\n        model.enqueueChange(writer => {\r\n            // Apply format.\r\n            const hasChanged = formatCallback(writer, rangesToFormat);\r\n            // Strict check on `false` to have backward compatibility (when callbacks were returning `undefined`).\r\n            if (hasChanged === false) {\r\n                return;\r\n            }\r\n            // Remove delimiters - use reversed order to not mix the offsets while removing.\r\n            for (const range of rangesToRemove.reverse()) {\r\n                writer.remove(range);\r\n            }\r\n            model.enqueueChange(() => {\r\n                const deletePlugin = editor.plugins.get('Delete');\r\n                deletePlugin.requestUndoOnBackspace();\r\n            });\r\n        });\r\n    });\r\n}\r\n/**\r\n * Converts output of the test function provided to the inlineAutoformatEditing and converts it to the model ranges\r\n * inside provided block.\r\n */\r\nfunction testOutputToRanges(start, arrays, model) {\r\n    return arrays\r\n        .filter(array => (array[0] !== undefined && array[1] !== undefined))\r\n        .map(array => {\r\n        return model.createRange(start.getShiftedBy(array[0]), start.getShiftedBy(array[1]));\r\n    });\r\n}\r\n/**\r\n * Returns the last text line after the last code element from the given range.\r\n * It is similar to {@link module:typing/utils/getlasttextline.getLastTextLine `getLastTextLine()`},\r\n * but it ignores any text before the last `code`.\r\n */\r\nfunction getTextAfterCode(range, model) {\r\n    let start = range.start;\r\n    const text = Array.from(range.getItems()).reduce((rangeText, node) => {\r\n        // Trim text to a last occurrence of an inline element and update range start.\r\n        if (!(node.is('$text') || node.is('$textProxy')) || node.getAttribute('code')) {\r\n            start = model.createPositionAfter(node);\r\n            return '';\r\n        }\r\n        return rangeText + node.data;\r\n    }, '');\r\n    return { text, range: model.createRange(start, range.end) };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Delete } from 'ckeditor5/src/typing';\r\nimport blockAutoformatEditing from './blockautoformatediting';\r\nimport inlineAutoformatEditing from './inlineautoformatediting';\r\n/**\r\n * Enables a set of predefined autoformatting actions.\r\n *\r\n * For a detailed overview, check the {@glink features/autoformat Autoformatting} feature guide\r\n * and the {@glink api/autoformat package page}.\r\n */\r\nexport default class Autoformat extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Delete];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Autoformat';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        this._addListAutoformats();\r\n        this._addBasicStylesAutoformats();\r\n        this._addHeadingAutoformats();\r\n        this._addBlockQuoteAutoformats();\r\n        this._addCodeBlockAutoformats();\r\n        this._addHorizontalLineAutoformats();\r\n    }\r\n    /**\r\n     * Adds autoformatting related to the {@link module:list/list~List}.\r\n     *\r\n     * When typed:\r\n     * - `* ` or `- ` &ndash; A paragraph will be changed into a bulleted list.\r\n     * - `1. ` or `1) ` &ndash; A paragraph will be changed into a numbered list (\"1\" can be any digit or a list of digits).\r\n     * - `[] ` or `[ ] ` &ndash; A paragraph will be changed into a to-do list.\r\n     * - `[x] ` or `[ x ] ` &ndash; A paragraph will be changed into a checked to-do list.\r\n     */\r\n    _addListAutoformats() {\r\n        const commands = this.editor.commands;\r\n        if (commands.get('bulletedList')) {\r\n            blockAutoformatEditing(this.editor, this, /^[*-]\\s$/, 'bulletedList');\r\n        }\r\n        if (commands.get('numberedList')) {\r\n            blockAutoformatEditing(this.editor, this, /^1[.|)]\\s$/, 'numberedList');\r\n        }\r\n        if (commands.get('todoList')) {\r\n            blockAutoformatEditing(this.editor, this, /^\\[\\s?\\]\\s$/, 'todoList');\r\n        }\r\n        if (commands.get('checkTodoList')) {\r\n            blockAutoformatEditing(this.editor, this, /^\\[\\s?x\\s?\\]\\s$/, () => {\r\n                this.editor.execute('todoList');\r\n                this.editor.execute('checkTodoList');\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Adds autoformatting related to the {@link module:basic-styles/bold~Bold},\r\n     * {@link module:basic-styles/italic~Italic}, {@link module:basic-styles/code~Code}\r\n     * and {@link module:basic-styles/strikethrough~Strikethrough}\r\n     *\r\n     * When typed:\r\n     * - `**foobar**` &ndash; `**` characters are removed and `foobar` is set to bold,\r\n     * - `__foobar__` &ndash; `__` characters are removed and `foobar` is set to bold,\r\n     * - `*foobar*` &ndash; `*` characters are removed and `foobar` is set to italic,\r\n     * - `_foobar_` &ndash; `_` characters are removed and `foobar` is set to italic,\r\n     * - ``` `foobar` &ndash; ``` ` ``` characters are removed and `foobar` is set to code,\r\n     * - `~~foobar~~` &ndash; `~~` characters are removed and `foobar` is set to strikethrough.\r\n     */\r\n    _addBasicStylesAutoformats() {\r\n        const commands = this.editor.commands;\r\n        if (commands.get('bold')) {\r\n            const boldCallback = getCallbackFunctionForInlineAutoformat(this.editor, 'bold');\r\n            inlineAutoformatEditing(this.editor, this, /(?:^|\\s)(\\*\\*)([^*]+)(\\*\\*)$/g, boldCallback);\r\n            inlineAutoformatEditing(this.editor, this, /(?:^|\\s)(__)([^_]+)(__)$/g, boldCallback);\r\n        }\r\n        if (commands.get('italic')) {\r\n            const italicCallback = getCallbackFunctionForInlineAutoformat(this.editor, 'italic');\r\n            // The italic autoformatter cannot be triggered by the bold markers, so we need to check the\r\n            // text before the pattern (e.g. `(?:^|[^\\*])`).\r\n            inlineAutoformatEditing(this.editor, this, /(?:^|\\s)(\\*)([^*_]+)(\\*)$/g, italicCallback);\r\n            inlineAutoformatEditing(this.editor, this, /(?:^|\\s)(_)([^_]+)(_)$/g, italicCallback);\r\n        }\r\n        if (commands.get('code')) {\r\n            const codeCallback = getCallbackFunctionForInlineAutoformat(this.editor, 'code');\r\n            inlineAutoformatEditing(this.editor, this, /(`)([^`]+)(`)$/g, codeCallback);\r\n        }\r\n        if (commands.get('strikethrough')) {\r\n            const strikethroughCallback = getCallbackFunctionForInlineAutoformat(this.editor, 'strikethrough');\r\n            inlineAutoformatEditing(this.editor, this, /(~~)([^~]+)(~~)$/g, strikethroughCallback);\r\n        }\r\n    }\r\n    /**\r\n     * Adds autoformatting related to {@link module:heading/heading~Heading}.\r\n     *\r\n     * It is using a number at the end of the command name to associate it with the proper trigger:\r\n     *\r\n     * * `heading` with a `heading1` value will be executed when typing `#`,\r\n     * * `heading` with a `heading2` value will be executed when typing `##`,\r\n     * * ... up to `heading6` for `######`.\r\n     */\r\n    _addHeadingAutoformats() {\r\n        const command = this.editor.commands.get('heading');\r\n        if (command) {\r\n            command.modelElements\r\n                .filter(name => name.match(/^heading[1-6]$/))\r\n                .forEach(modelName => {\r\n                const level = modelName[7];\r\n                const pattern = new RegExp(`^(#{${level}})\\\\s$`);\r\n                blockAutoformatEditing(this.editor, this, pattern, () => {\r\n                    // Should only be active if command is enabled and heading style associated with pattern is inactive.\r\n                    if (!command.isEnabled || command.value === modelName) {\r\n                        return false;\r\n                    }\r\n                    this.editor.execute('heading', { value: modelName });\r\n                });\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Adds autoformatting related to {@link module:block-quote/blockquote~BlockQuote}.\r\n     *\r\n     * When typed:\r\n     * * `> ` &ndash; A paragraph will be changed to a block quote.\r\n     */\r\n    _addBlockQuoteAutoformats() {\r\n        if (this.editor.commands.get('blockQuote')) {\r\n            blockAutoformatEditing(this.editor, this, /^>\\s$/, 'blockQuote');\r\n        }\r\n    }\r\n    /**\r\n     * Adds autoformatting related to {@link module:code-block/codeblock~CodeBlock}.\r\n     *\r\n     * When typed:\r\n     * - `` ``` `` &ndash; A paragraph will be changed to a code block.\r\n     */\r\n    _addCodeBlockAutoformats() {\r\n        const editor = this.editor;\r\n        const selection = editor.model.document.selection;\r\n        if (editor.commands.get('codeBlock')) {\r\n            blockAutoformatEditing(editor, this, /^```$/, () => {\r\n                if (selection.getFirstPosition().parent.is('element', 'listItem')) {\r\n                    return false;\r\n                }\r\n                this.editor.execute('codeBlock', {\r\n                    usePreviousLanguageChoice: true\r\n                });\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Adds autoformatting related to {@link module:horizontal-line/horizontalline~HorizontalLine}.\r\n     *\r\n     * When typed:\r\n     * - `` --- `` &ndash; Will be replaced with a horizontal line.\r\n     */\r\n    _addHorizontalLineAutoformats() {\r\n        if (this.editor.commands.get('horizontalLine')) {\r\n            blockAutoformatEditing(this.editor, this, /^---$/, 'horizontalLine');\r\n        }\r\n    }\r\n}\r\n/**\r\n * Helper function for getting `inlineAutoformatEditing` callbacks that checks if command is enabled.\r\n */\r\nfunction getCallbackFunctionForInlineAutoformat(editor, attributeKey) {\r\n    return (writer, rangesToFormat) => {\r\n        const command = editor.commands.get(attributeKey);\r\n        if (!command.isEnabled) {\r\n            return false;\r\n        }\r\n        const validRanges = editor.model.schema.getValidRanges(rangesToFormat, attributeKey);\r\n        for (const range of validRanges) {\r\n            writer.setAttribute(attributeKey, true, range);\r\n        }\r\n        // After applying attribute to the text, remove given attribute from the selection.\r\n        // This way user is able to type a text without attribute used by auto formatter.\r\n        writer.removeSelectionAttribute(attributeKey);\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module block-quote/blockquotecommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * The block quote command plugin.\r\n *\r\n * @extends module:core/command~Command\r\n */\r\nexport default class BlockQuoteCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.value = this._getValue();\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Executes the command. When the command {@link #value is on}, all top-most block quotes within\r\n     * the selection will be removed. If it is off, all selected blocks will be wrapped with\r\n     * a block quote.\r\n     *\r\n     * @fires execute\r\n     * @param options Command options.\r\n     * @param options.forceValue If set, it will force the command behavior. If `true`, the command will apply a block quote,\r\n     * otherwise the command will remove the block quote. If not set, the command will act basing on its current value.\r\n     */\r\n    execute(options = {}) {\r\n        const model = this.editor.model;\r\n        const schema = model.schema;\r\n        const selection = model.document.selection;\r\n        const blocks = Array.from(selection.getSelectedBlocks());\r\n        const value = (options.forceValue === undefined) ? !this.value : options.forceValue;\r\n        model.change(writer => {\r\n            if (!value) {\r\n                this._removeQuote(writer, blocks.filter(findQuote));\r\n            }\r\n            else {\r\n                const blocksToQuote = blocks.filter(block => {\r\n                    // Already quoted blocks needs to be considered while quoting too\r\n                    // in order to reuse their <bQ> elements.\r\n                    return findQuote(block) || checkCanBeQuoted(schema, block);\r\n                });\r\n                this._applyQuote(writer, blocksToQuote);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     */\r\n    _getValue() {\r\n        const selection = this.editor.model.document.selection;\r\n        const firstBlock = first(selection.getSelectedBlocks());\r\n        // In the current implementation, the block quote must be an immediate parent of a block element.\r\n        return !!(firstBlock && findQuote(firstBlock));\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        if (this.value) {\r\n            return true;\r\n        }\r\n        const selection = this.editor.model.document.selection;\r\n        const schema = this.editor.model.schema;\r\n        const firstBlock = first(selection.getSelectedBlocks());\r\n        if (!firstBlock) {\r\n            return false;\r\n        }\r\n        return checkCanBeQuoted(schema, firstBlock);\r\n    }\r\n    /**\r\n     * Removes the quote from given blocks.\r\n     *\r\n     * If blocks which are supposed to be \"unquoted\" are in the middle of a quote,\r\n     * start it or end it, then the quote will be split (if needed) and the blocks\r\n     * will be moved out of it, so other quoted blocks remained quoted.\r\n     */\r\n    _removeQuote(writer, blocks) {\r\n        // Unquote all groups of block. Iterate in the reverse order to not break following ranges.\r\n        getRangesOfBlockGroups(writer, blocks).reverse().forEach(groupRange => {\r\n            if (groupRange.start.isAtStart && groupRange.end.isAtEnd) {\r\n                writer.unwrap(groupRange.start.parent);\r\n                return;\r\n            }\r\n            // The group of blocks are at the beginning of an <bQ> so let's move them left (out of the <bQ>).\r\n            if (groupRange.start.isAtStart) {\r\n                const positionBefore = writer.createPositionBefore(groupRange.start.parent);\r\n                writer.move(groupRange, positionBefore);\r\n                return;\r\n            }\r\n            // The blocks are in the middle of an <bQ> so we need to split the <bQ> after the last block\r\n            // so we move the items there.\r\n            if (!groupRange.end.isAtEnd) {\r\n                writer.split(groupRange.end);\r\n            }\r\n            // Now we are sure that groupRange.end.isAtEnd is true, so let's move the blocks right.\r\n            const positionAfter = writer.createPositionAfter(groupRange.end.parent);\r\n            writer.move(groupRange, positionAfter);\r\n        });\r\n    }\r\n    /**\r\n     * Applies the quote to given blocks.\r\n     */\r\n    _applyQuote(writer, blocks) {\r\n        const quotesToMerge = [];\r\n        // Quote all groups of block. Iterate in the reverse order to not break following ranges.\r\n        getRangesOfBlockGroups(writer, blocks).reverse().forEach(groupRange => {\r\n            let quote = findQuote(groupRange.start);\r\n            if (!quote) {\r\n                quote = writer.createElement('blockQuote');\r\n                writer.wrap(groupRange, quote);\r\n            }\r\n            quotesToMerge.push(quote);\r\n        });\r\n        // Merge subsequent <bQ> elements. Reverse the order again because this time we want to go through\r\n        // the <bQ> elements in the source order (due to how merge works – it moves the right element's content\r\n        // to the first element and removes the right one. Since we may need to merge a couple of subsequent `<bQ>` elements\r\n        // we want to keep the reference to the first (furthest left) one.\r\n        quotesToMerge.reverse().reduce((currentQuote, nextQuote) => {\r\n            if (currentQuote.nextSibling == nextQuote) {\r\n                writer.merge(writer.createPositionAfter(currentQuote));\r\n                return currentQuote;\r\n            }\r\n            return nextQuote;\r\n        });\r\n    }\r\n}\r\nfunction findQuote(elementOrPosition) {\r\n    return elementOrPosition.parent.name == 'blockQuote' ? elementOrPosition.parent : null;\r\n}\r\n/**\r\n * Returns a minimal array of ranges containing groups of subsequent blocks.\r\n *\r\n * content:         abcdefgh\r\n * blocks:          [ a, b, d, f, g, h ]\r\n * output ranges:   [ab]c[d]e[fgh]\r\n */\r\nfunction getRangesOfBlockGroups(writer, blocks) {\r\n    let startPosition;\r\n    let i = 0;\r\n    const ranges = [];\r\n    while (i < blocks.length) {\r\n        const block = blocks[i];\r\n        const nextBlock = blocks[i + 1];\r\n        if (!startPosition) {\r\n            startPosition = writer.createPositionBefore(block);\r\n        }\r\n        if (!nextBlock || block.nextSibling != nextBlock) {\r\n            ranges.push(writer.createRange(startPosition, writer.createPositionAfter(block)));\r\n            startPosition = null;\r\n        }\r\n        i++;\r\n    }\r\n    return ranges;\r\n}\r\n/**\r\n * Checks whether <bQ> can wrap the block.\r\n */\r\nfunction checkCanBeQuoted(schema, block) {\r\n    // TMP will be replaced with schema.checkWrap().\r\n    const isBQAllowed = schema.checkChild(block.parent, 'blockQuote');\r\n    const isBlockAllowedInBQ = schema.checkChild(['$root', 'blockQuote'], block);\r\n    return isBQAllowed && isBlockAllowedInBQ;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module block-quote/blockquoteediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Enter } from 'ckeditor5/src/enter';\r\nimport { Delete } from 'ckeditor5/src/typing';\r\nimport BlockQuoteCommand from './blockquotecommand';\r\n/**\r\n * The block quote editing.\r\n *\r\n * Introduces the `'blockQuote'` command and the `'blockQuote'` model element.\r\n *\r\n * @extends module:core/plugin~Plugin\r\n */\r\nexport default class BlockQuoteEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'BlockQuoteEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Enter, Delete];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        editor.commands.add('blockQuote', new BlockQuoteCommand(editor));\r\n        schema.register('blockQuote', {\r\n            inheritAllFrom: '$container'\r\n        });\r\n        editor.conversion.elementToElement({ model: 'blockQuote', view: 'blockquote' });\r\n        // Postfixer which cleans incorrect model states connected with block quotes.\r\n        editor.model.document.registerPostFixer(writer => {\r\n            const changes = editor.model.document.differ.getChanges();\r\n            for (const entry of changes) {\r\n                if (entry.type == 'insert') {\r\n                    const element = entry.position.nodeAfter;\r\n                    if (!element) {\r\n                        // We are inside a text node.\r\n                        continue;\r\n                    }\r\n                    if (element.is('element', 'blockQuote') && element.isEmpty) {\r\n                        // Added an empty blockQuote - remove it.\r\n                        writer.remove(element);\r\n                        return true;\r\n                    }\r\n                    else if (element.is('element', 'blockQuote') && !schema.checkChild(entry.position, element)) {\r\n                        // Added a blockQuote in incorrect place. Unwrap it so the content inside is not lost.\r\n                        writer.unwrap(element);\r\n                        return true;\r\n                    }\r\n                    else if (element.is('element')) {\r\n                        // Just added an element. Check that all children meet the scheme rules.\r\n                        const range = writer.createRangeIn(element);\r\n                        for (const child of range.getItems()) {\r\n                            if (child.is('element', 'blockQuote') &&\r\n                                !schema.checkChild(writer.createPositionBefore(child), child)) {\r\n                                writer.unwrap(child);\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else if (entry.type == 'remove') {\r\n                    const parent = entry.position.parent;\r\n                    if (parent.is('element', 'blockQuote') && parent.isEmpty) {\r\n                        // Something got removed and now blockQuote is empty. Remove the blockQuote as well.\r\n                        writer.remove(parent);\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            return false;\r\n        });\r\n        const viewDocument = this.editor.editing.view.document;\r\n        const selection = editor.model.document.selection;\r\n        const blockQuoteCommand = editor.commands.get('blockQuote');\r\n        // Overwrite default Enter key behavior.\r\n        // If Enter key is pressed with selection collapsed in empty block inside a quote, break the quote.\r\n        this.listenTo(viewDocument, 'enter', (evt, data) => {\r\n            if (!selection.isCollapsed || !blockQuoteCommand.value) {\r\n                return;\r\n            }\r\n            const positionParent = selection.getLastPosition().parent;\r\n            if (positionParent.isEmpty) {\r\n                editor.execute('blockQuote');\r\n                editor.editing.view.scrollToTheSelection();\r\n                data.preventDefault();\r\n                evt.stop();\r\n            }\r\n        }, { context: 'blockquote' });\r\n        // Overwrite default Backspace key behavior.\r\n        // If Backspace key is pressed with selection collapsed in first empty block inside a quote, break the quote.\r\n        this.listenTo(viewDocument, 'delete', (evt, data) => {\r\n            if (data.direction != 'backward' || !selection.isCollapsed || !blockQuoteCommand.value) {\r\n                return;\r\n            }\r\n            const positionParent = selection.getLastPosition().parent;\r\n            if (positionParent.isEmpty && !positionParent.previousSibling) {\r\n                editor.execute('blockQuote');\r\n                editor.editing.view.scrollToTheSelection();\r\n                data.preventDefault();\r\n                evt.stop();\r\n            }\r\n        }, { context: 'blockquote' });\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./blockquote.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module block-quote/blockquoteui\r\n */\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport '../theme/blockquote.css';\r\n/**\r\n * The block quote UI plugin.\r\n *\r\n * It introduces the `'blockQuote'` button.\r\n *\r\n * @extends module:core/plugin~Plugin\r\n */\r\nexport default class BlockQuoteUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'BlockQuoteUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        editor.ui.componentFactory.add('blockQuote', locale => {\r\n            const command = editor.commands.get('blockQuote');\r\n            const buttonView = new ButtonView(locale);\r\n            buttonView.set({\r\n                label: t('Block quote'),\r\n                icon: icons.quote,\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            // Bind button model to command.\r\n            buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(buttonView, 'execute', () => {\r\n                editor.execute('blockQuote');\r\n                editor.editing.view.focus();\r\n            });\r\n            return buttonView;\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module block-quote/blockquote\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport BlockQuoteEditing from './blockquoteediting';\r\nimport BlockQuoteUI from './blockquoteui';\r\n/**\r\n * The block quote plugin.\r\n *\r\n * For more information about this feature check the {@glink api/block-quote package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:block-quote/blockquoteediting~BlockQuoteEditing block quote editing feature}\r\n * and {@link module:block-quote/blockquoteui~BlockQuoteUI block quote UI feature}.\r\n *\r\n * @extends module:core/plugin~Plugin\r\n */\r\nexport default class BlockQuote extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [BlockQuoteEditing, BlockQuoteUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'BlockQuote';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/attributecommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * An extension of the base {@link module:core/command~Command} class, which provides utilities for a command\r\n * that toggles a single attribute on a text or an element.\r\n *\r\n * `AttributeCommand` uses {@link module:engine/model/document~Document#selection}\r\n * to decide which nodes (if any) should be changed, and applies or removes the attribute from them.\r\n *\r\n * The command checks the {@link module:engine/model/model~Model#schema} to decide if it can be enabled\r\n * for the current selection and to which nodes the attribute can be applied.\r\n */\r\nexport default class AttributeCommand extends Command {\r\n    /**\r\n     * @param attributeKey Attribute that will be set by the command.\r\n     */\r\n    constructor(editor, attributeKey) {\r\n        super(editor);\r\n        this.attributeKey = attributeKey;\r\n    }\r\n    /**\r\n     * Updates the command's {@link #value} and {@link #isEnabled} based on the current selection.\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const doc = model.document;\r\n        this.value = this._getValueFromFirstAllowedNode();\r\n        this.isEnabled = model.schema.checkAttributeInSelection(doc.selection, this.attributeKey);\r\n    }\r\n    /**\r\n     * Executes the command &mdash; applies the attribute to the selection or removes it from the selection.\r\n     *\r\n     * If the command is active (`value == true`), it will remove attributes. Otherwise, it will set attributes.\r\n     *\r\n     * The execution result differs, depending on the {@link module:engine/model/document~Document#selection}:\r\n     *\r\n     * * If the selection is on a range, the command applies the attribute to all nodes in that range\r\n     * (if they are allowed to have this attribute by the {@link module:engine/model/schema~Schema schema}).\r\n     * * If the selection is collapsed in a non-empty node, the command applies the attribute to the\r\n     * {@link module:engine/model/document~Document#selection} itself (note that typed characters copy attributes from the selection).\r\n     * * If the selection is collapsed in an empty node, the command applies the attribute to the parent node of the selection (note\r\n     * that the selection inherits all attributes from a node if it is in an empty node).\r\n     *\r\n     * @fires execute\r\n     * @param options Command options.\r\n     * @param options.forceValue If set, it will force the command behavior. If `true`,\r\n     * the command will apply the attribute, otherwise the command will remove the attribute.\r\n     * If not set, the command will look for its current value to decide what it should do.\r\n     */\r\n    execute(options = {}) {\r\n        const model = this.editor.model;\r\n        const doc = model.document;\r\n        const selection = doc.selection;\r\n        const value = (options.forceValue === undefined) ? !this.value : options.forceValue;\r\n        model.change(writer => {\r\n            if (selection.isCollapsed) {\r\n                if (value) {\r\n                    writer.setSelectionAttribute(this.attributeKey, true);\r\n                }\r\n                else {\r\n                    writer.removeSelectionAttribute(this.attributeKey);\r\n                }\r\n            }\r\n            else {\r\n                const ranges = model.schema.getValidRanges(selection.getRanges(), this.attributeKey);\r\n                for (const range of ranges) {\r\n                    if (value) {\r\n                        writer.setAttribute(this.attributeKey, value, range);\r\n                    }\r\n                    else {\r\n                        writer.removeAttribute(this.attributeKey, range);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks the attribute value of the first node in the selection that allows the attribute.\r\n     * For the collapsed selection returns the selection attribute.\r\n     *\r\n     * @returns The attribute value.\r\n     */\r\n    _getValueFromFirstAllowedNode() {\r\n        const model = this.editor.model;\r\n        const schema = model.schema;\r\n        const selection = model.document.selection;\r\n        if (selection.isCollapsed) {\r\n            return selection.hasAttribute(this.attributeKey);\r\n        }\r\n        for (const range of selection.getRanges()) {\r\n            for (const item of range.getItems()) {\r\n                if (schema.checkAttribute(item, this.attributeKey)) {\r\n                    return item.hasAttribute(this.attributeKey);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/bold/boldediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport AttributeCommand from '../attributecommand';\r\nconst BOLD = 'bold';\r\n/**\r\n * The bold editing feature.\r\n *\r\n * It registers the `'bold'` command and introduces the `bold` attribute in the model which renders to the view\r\n * as a `<strong>` element.\r\n */\r\nexport default class BoldEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'BoldEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow bold attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: BOLD });\r\n        editor.model.schema.setAttributeProperties(BOLD, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n        // Build converter from model to view for data and editing pipelines.\r\n        editor.conversion.attributeToElement({\r\n            model: BOLD,\r\n            view: 'strong',\r\n            upcastAlso: [\r\n                'b',\r\n                viewElement => {\r\n                    const fontWeight = viewElement.getStyle('font-weight');\r\n                    if (!fontWeight) {\r\n                        return null;\r\n                    }\r\n                    // Value of the `font-weight` attribute can be defined as a string or a number.\r\n                    if (fontWeight == 'bold' || Number(fontWeight) >= 600) {\r\n                        return {\r\n                            name: true,\r\n                            styles: ['font-weight']\r\n                        };\r\n                    }\r\n                    return null;\r\n                }\r\n            ]\r\n        });\r\n        // Create bold command.\r\n        editor.commands.add(BOLD, new AttributeCommand(editor, BOLD));\r\n        // Set the Ctrl+B keystroke.\r\n        editor.keystrokes.set('CTRL+B', BOLD);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/bold/boldui\r\n */\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nconst BOLD = 'bold';\r\n/**\r\n * The bold UI feature. It introduces the Bold button.\r\n */\r\nexport default class BoldUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'BoldUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add bold button to feature components.\r\n        editor.ui.componentFactory.add(BOLD, locale => {\r\n            const command = editor.commands.get(BOLD);\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Bold'),\r\n                icon: icons.bold,\r\n                keystroke: 'CTRL+B',\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute(BOLD);\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/bold\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport BoldEditing from './bold/boldediting';\r\nimport BoldUI from './bold/boldui';\r\n/**\r\n * The bold feature.\r\n *\r\n * For a detailed overview check the {@glink features/basic-styles Basic styles feature} guide\r\n * and the {@glink api/basic-styles package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:basic-styles/bold/boldediting~BoldEditing bold editing feature}\r\n * and {@link module:basic-styles/bold/boldui~BoldUI bold UI feature}.\r\n */\r\nexport default class Bold extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [BoldEditing, BoldUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Bold';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/code/codeediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { TwoStepCaretMovement, inlineHighlight } from 'ckeditor5/src/typing';\r\nimport AttributeCommand from '../attributecommand';\r\nconst CODE = 'code';\r\nconst HIGHLIGHT_CLASS = 'ck-code_selected';\r\n/**\r\n * The code editing feature.\r\n *\r\n * It registers the `'code'` command and introduces the `code` attribute in the model which renders to the view\r\n * as a `<code>` element.\r\n */\r\nexport default class CodeEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'CodeEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TwoStepCaretMovement];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow code attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: CODE });\r\n        editor.model.schema.setAttributeProperties(CODE, {\r\n            isFormatting: true,\r\n            copyOnEnter: false\r\n        });\r\n        editor.conversion.attributeToElement({\r\n            model: CODE,\r\n            view: 'code',\r\n            upcastAlso: {\r\n                styles: {\r\n                    'word-wrap': 'break-word'\r\n                }\r\n            }\r\n        });\r\n        // Create code command.\r\n        editor.commands.add(CODE, new AttributeCommand(editor, CODE));\r\n        // Enable two-step caret movement for `code` attribute.\r\n        editor.plugins.get(TwoStepCaretMovement).registerAttribute(CODE);\r\n        // Setup highlight over selected element.\r\n        inlineHighlight(editor, CODE, 'code', HIGHLIGHT_CLASS);\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"m12.5 5.7 5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./code.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/code/codeui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport codeIcon from '../../theme/icons/code.svg';\r\nimport '../../theme/code.css';\r\nconst CODE = 'code';\r\n/**\r\n * The code UI feature. It introduces the Code button.\r\n */\r\nexport default class CodeUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'CodeUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add code button to feature components.\r\n        editor.ui.componentFactory.add(CODE, locale => {\r\n            const command = editor.commands.get(CODE);\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Code'),\r\n                icon: codeIcon,\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute(CODE);\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/code\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport CodeEditing from './code/codeediting';\r\nimport CodeUI from './code/codeui';\r\nimport '../theme/code.css';\r\n/**\r\n * The code feature.\r\n *\r\n * For a detailed overview check the {@glink features/basic-styles Basic styles feature} guide\r\n * and the {@glink api/basic-styles package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:basic-styles/code/codeediting~CodeEditing code editing feature}\r\n * and {@link module:basic-styles/code/codeui~CodeUI code UI feature}.\r\n */\r\nexport default class Code extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [CodeEditing, CodeUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Code';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/italic/italicediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport AttributeCommand from '../attributecommand';\r\nconst ITALIC = 'italic';\r\n/**\r\n * The italic editing feature.\r\n *\r\n * It registers the `'italic'` command, the <kbd>Ctrl+I</kbd> keystroke and introduces the `italic` attribute in the model\r\n * which renders to the view as an `<i>` element.\r\n */\r\nexport default class ItalicEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ItalicEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow italic attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: ITALIC });\r\n        editor.model.schema.setAttributeProperties(ITALIC, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n        editor.conversion.attributeToElement({\r\n            model: ITALIC,\r\n            view: 'i',\r\n            upcastAlso: [\r\n                'em',\r\n                {\r\n                    styles: {\r\n                        'font-style': 'italic'\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        // Create italic command.\r\n        editor.commands.add(ITALIC, new AttributeCommand(editor, ITALIC));\r\n        // Set the Ctrl+I keystroke.\r\n        editor.keystrokes.set('CTRL+I', ITALIC);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/italic/italicui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport italicIcon from '../../theme/icons/italic.svg';\r\nconst ITALIC = 'italic';\r\n/**\r\n * The italic UI feature. It introduces the Italic button.\r\n */\r\nexport default class ItalicUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ItalicUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add bold button to feature components.\r\n        editor.ui.componentFactory.add(ITALIC, locale => {\r\n            const command = editor.commands.get(ITALIC);\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Italic'),\r\n                icon: italicIcon,\r\n                keystroke: 'CTRL+I',\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute(ITALIC);\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"m9.586 14.633.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/italic\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ItalicEditing from './italic/italicediting';\r\nimport ItalicUI from './italic/italicui';\r\n/**\r\n * The italic feature.\r\n *\r\n * For a detailed overview check the {@glink features/basic-styles Basic styles feature} guide\r\n * and the {@glink api/basic-styles package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:basic-styles/italic/italicediting~ItalicEditing} and\r\n * {@link module:basic-styles/italic/italicui~ItalicUI} plugins.\r\n */\r\nexport default class Italic extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ItalicEditing, ItalicUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Italic';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/strikethrough/strikethroughediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport AttributeCommand from '../attributecommand';\r\nconst STRIKETHROUGH = 'strikethrough';\r\n/**\r\n * The strikethrough editing feature.\r\n *\r\n * It registers the `'strikethrough'` command, the <kbd>Ctrl+Shift+X</kbd> keystroke and introduces the\r\n * `strikethroughsthrough` attribute in the model which renders to the view\r\n * as a `<s>` element.\r\n */\r\nexport default class StrikethroughEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'StrikethroughEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow strikethrough attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: STRIKETHROUGH });\r\n        editor.model.schema.setAttributeProperties(STRIKETHROUGH, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n        editor.conversion.attributeToElement({\r\n            model: STRIKETHROUGH,\r\n            view: 's',\r\n            upcastAlso: [\r\n                'del',\r\n                'strike',\r\n                {\r\n                    styles: {\r\n                        'text-decoration': 'line-through'\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        // Create strikethrough command.\r\n        editor.commands.add(STRIKETHROUGH, new AttributeCommand(editor, STRIKETHROUGH));\r\n        // Set the Ctrl+Shift+X keystroke.\r\n        editor.keystrokes.set('CTRL+SHIFT+X', 'strikethrough');\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/strikethrough/strikethroughui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport strikethroughIcon from '../../theme/icons/strikethrough.svg';\r\nconst STRIKETHROUGH = 'strikethrough';\r\n/**\r\n * The strikethrough UI feature. It introduces the Strikethrough button.\r\n */\r\nexport default class StrikethroughUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'StrikethroughUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add strikethrough button to feature components.\r\n        editor.ui.componentFactory.add(STRIKETHROUGH, locale => {\r\n            const command = editor.commands.get(STRIKETHROUGH);\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Strikethrough'),\r\n                icon: strikethroughIcon,\r\n                keystroke: 'CTRL+SHIFT+X',\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute(STRIKETHROUGH);\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9 6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z\\\"/><path d=\\\"M3 10.5V9h14v1.5z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/strikethrough\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport StrikethroughEditing from './strikethrough/strikethroughediting';\r\nimport StrikethroughUI from './strikethrough/strikethroughui';\r\n/**\r\n * The strikethrough feature.\r\n *\r\n * For a detailed overview check the {@glink features/basic-styles Basic styles feature} guide\r\n * and the {@glink api/basic-styles package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:basic-styles/strikethrough/strikethroughediting~StrikethroughEditing} and\r\n * {@link module:basic-styles/strikethrough/strikethroughui~StrikethroughUI} plugins.\r\n */\r\nexport default class Strikethrough extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [StrikethroughEditing, StrikethroughUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Strikethrough';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/subscript/subscriptediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport AttributeCommand from '../attributecommand';\r\nconst SUBSCRIPT = 'subscript';\r\n/**\r\n * The subscript editing feature.\r\n *\r\n * It registers the `sub` command and introduces the `sub` attribute in the model which renders to the view\r\n * as a `<sub>` element.\r\n */\r\nexport default class SubscriptEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'SubscriptEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow sub attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: SUBSCRIPT });\r\n        editor.model.schema.setAttributeProperties(SUBSCRIPT, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n        // Build converter from model to view for data and editing pipelines.\r\n        editor.conversion.attributeToElement({\r\n            model: SUBSCRIPT,\r\n            view: 'sub',\r\n            upcastAlso: [\r\n                {\r\n                    styles: {\r\n                        'vertical-align': 'sub'\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        // Create sub command.\r\n        editor.commands.add(SUBSCRIPT, new AttributeCommand(editor, SUBSCRIPT));\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/subscript/subscriptui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport subscriptIcon from '../../theme/icons/subscript.svg';\r\nconst SUBSCRIPT = 'subscript';\r\n/**\r\n * The subscript UI feature. It introduces the Subscript button.\r\n */\r\nexport default class SubscriptUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'SubscriptUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add subscript button to feature components.\r\n        editor.ui.componentFactory.add(SUBSCRIPT, locale => {\r\n            const command = editor.commands.get(SUBSCRIPT);\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Subscript'),\r\n                icon: subscriptIcon,\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute(SUBSCRIPT);\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"m7.03 10.349 3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/subscript\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport SubscriptEditing from './subscript/subscriptediting';\r\nimport SubscriptUI from './subscript/subscriptui';\r\n/**\r\n * The subscript feature.\r\n *\r\n * It loads the {@link module:basic-styles/subscript/subscriptediting~SubscriptEditing} and\r\n * {@link module:basic-styles/subscript/subscriptui~SubscriptUI} plugins.\r\n */\r\nexport default class Subscript extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [SubscriptEditing, SubscriptUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Subscript';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/superscript/superscriptediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport AttributeCommand from '../attributecommand';\r\nconst SUPERSCRIPT = 'superscript';\r\n/**\r\n * The superscript editing feature.\r\n *\r\n * It registers the `super` command and introduces the `super` attribute in the model which renders to the view\r\n * as a `<super>` element.\r\n */\r\nexport default class SuperscriptEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'SuperscriptEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow super attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: SUPERSCRIPT });\r\n        editor.model.schema.setAttributeProperties(SUPERSCRIPT, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n        // Build converter from model to view for data and editing pipelines.\r\n        editor.conversion.attributeToElement({\r\n            model: SUPERSCRIPT,\r\n            view: 'sup',\r\n            upcastAlso: [\r\n                {\r\n                    styles: {\r\n                        'vertical-align': 'super'\r\n                    }\r\n                }\r\n            ]\r\n        });\r\n        // Create super command.\r\n        editor.commands.add(SUPERSCRIPT, new AttributeCommand(editor, SUPERSCRIPT));\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/superscript/superscriptui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport superscriptIcon from '../../theme/icons/superscript.svg';\r\nconst SUPERSCRIPT = 'superscript';\r\n/**\r\n * The superscript UI feature. It introduces the Superscript button.\r\n */\r\nexport default class SuperscriptUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'SuperscriptUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add superscript button to feature components.\r\n        editor.ui.componentFactory.add(SUPERSCRIPT, locale => {\r\n            const command = editor.commands.get(SUPERSCRIPT);\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Superscript'),\r\n                icon: superscriptIcon,\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute(SUPERSCRIPT);\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/superscript\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport SuperscriptEditing from './superscript/superscriptediting';\r\nimport SuperscriptUI from './superscript/superscriptui';\r\n/**\r\n * The superscript feature.\r\n *\r\n * It loads the {@link module:basic-styles/superscript/superscriptediting~SuperscriptEditing} and\r\n * {@link module:basic-styles/superscript/superscriptui~SuperscriptUI} plugins.\r\n */\r\nexport default class Superscript extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [SuperscriptEditing, SuperscriptUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Superscript';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/underline/underlineediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport AttributeCommand from '../attributecommand';\r\nconst UNDERLINE = 'underline';\r\n/**\r\n * The underline editing feature.\r\n *\r\n * It registers the `'underline'` command, the <kbd>Ctrl+U</kbd> keystroke\r\n * and introduces the `underline` attribute in the model which renders to the view as an `<u>` element.\r\n */\r\nexport default class UnderlineEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'UnderlineEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow strikethrough attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: UNDERLINE });\r\n        editor.model.schema.setAttributeProperties(UNDERLINE, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n        editor.conversion.attributeToElement({\r\n            model: UNDERLINE,\r\n            view: 'u',\r\n            upcastAlso: {\r\n                styles: {\r\n                    'text-decoration': 'underline'\r\n                }\r\n            }\r\n        });\r\n        // Create underline command.\r\n        editor.commands.add(UNDERLINE, new AttributeCommand(editor, UNDERLINE));\r\n        // Set the Ctrl+U keystroke.\r\n        editor.keystrokes.set('CTRL+U', 'underline');\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/underline/underlineui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport underlineIcon from '../../theme/icons/underline.svg';\r\nconst UNDERLINE = 'underline';\r\n/**\r\n * The underline UI feature. It introduces the Underline button.\r\n */\r\nexport default class UnderlineUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'UnderlineUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add bold button to feature components.\r\n        editor.ui.componentFactory.add(UNDERLINE, locale => {\r\n            const command = editor.commands.get(UNDERLINE);\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Underline'),\r\n                icon: underlineIcon,\r\n                keystroke: 'CTRL+U',\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute(UNDERLINE);\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module basic-styles/underline\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport UnderlineEditing from './underline/underlineediting';\r\nimport UnderlineUI from './underline/underlineui';\r\n/**\r\n * The underline feature.\r\n *\r\n * For a detailed overview check the {@glink features/basic-styles Basic styles feature} guide\r\n * and the {@glink api/basic-styles package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:basic-styles/underline/underlineediting~UnderlineEditing} and\r\n * {@link module:basic-styles/underline/underlineui~UnderlineUI} plugins.\r\n */\r\nexport default class Underline extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [UnderlineEditing, UnderlineUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Underline';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { EditorUI, normalizeToolbarConfig } from 'ckeditor5/src/ui';\r\nimport { enablePlaceholder } from 'ckeditor5/src/engine';\r\nimport { ElementReplacer, Rect } from 'ckeditor5/src/utils';\r\n/**\r\n * The classic editor UI class.\r\n */\r\nexport default class ClassicEditorUI extends EditorUI {\r\n    /**\r\n     * Creates an instance of the classic editor UI class.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param view The view of the UI.\r\n     */\r\n    constructor(editor, view) {\r\n        super(editor);\r\n        this.view = view;\r\n        this._toolbarConfig = normalizeToolbarConfig(editor.config.get('toolbar'));\r\n        this._elementReplacer = new ElementReplacer();\r\n        this.listenTo(editor.editing.view, 'scrollToTheSelection', this._handleScrollToTheSelectionWithStickyPanel.bind(this));\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    get element() {\r\n        return this.view.element;\r\n    }\r\n    /**\r\n     * Initializes the UI.\r\n     *\r\n     * @param replacementElement The DOM element that will be the source for the created editor.\r\n     */\r\n    init(replacementElement) {\r\n        const editor = this.editor;\r\n        const view = this.view;\r\n        const editingView = editor.editing.view;\r\n        const editable = view.editable;\r\n        const editingRoot = editingView.document.getRoot();\r\n        // The editable UI and editing root should share the same name. Then name is used\r\n        // to recognize the particular editable, for instance in ARIA attributes.\r\n        editable.name = editingRoot.rootName;\r\n        view.render();\r\n        // The editable UI element in DOM is available for sure only after the editor UI view has been rendered.\r\n        // But it can be available earlier if a DOM element has been passed to BalloonEditor.create().\r\n        const editableElement = editable.element;\r\n        // Register the editable UI view in the editor. A single editor instance can aggregate multiple\r\n        // editable areas (roots) but the classic editor has only one.\r\n        this.setEditableElement(editable.name, editableElement);\r\n        // Let the editable UI element respond to the changes in the global editor focus\r\n        // tracker. It has been added to the same tracker a few lines above but, in reality, there are\r\n        // many focusable areas in the editor, like balloons, toolbars or dropdowns and as long\r\n        // as they have focus, the editable should act like it is focused too (although technically\r\n        // it isn't), e.g. by setting the proper CSS class, visually announcing focus to the user.\r\n        // Doing otherwise will result in editable focus styles disappearing, once e.g. the\r\n        // toolbar gets focused.\r\n        view.editable.bind('isFocused').to(this.focusTracker);\r\n        // Bind the editable UI element to the editing view, making it an end– and entry–point\r\n        // of the editor's engine. This is where the engine meets the UI.\r\n        editingView.attachDomRoot(editableElement);\r\n        // If an element containing the initial data of the editor was provided, replace it with\r\n        // an editor instance's UI in DOM until the editor is destroyed. For instance, a <textarea>\r\n        // can be such element.\r\n        if (replacementElement) {\r\n            this._elementReplacer.replace(replacementElement, this.element);\r\n        }\r\n        this._initPlaceholder();\r\n        this._initToolbar();\r\n        this.fire('ready');\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        const view = this.view;\r\n        const editingView = this.editor.editing.view;\r\n        this._elementReplacer.restore();\r\n        editingView.detachDomRoot(view.editable.name);\r\n        view.destroy();\r\n    }\r\n    /**\r\n     * Initializes the editor toolbar.\r\n     */\r\n    _initToolbar() {\r\n        const view = this.view;\r\n        // Set–up the sticky panel with toolbar.\r\n        view.stickyPanel.bind('isActive').to(this.focusTracker, 'isFocused');\r\n        view.stickyPanel.limiterElement = view.element;\r\n        view.stickyPanel.bind('viewportTopOffset').to(this, 'viewportOffset', ({ top }) => top || 0);\r\n        view.toolbar.fillFromConfig(this._toolbarConfig, this.componentFactory);\r\n        // Register the toolbar so it becomes available for Alt+F10 and Esc navigation.\r\n        this.addToolbar(view.toolbar);\r\n    }\r\n    /**\r\n     * Enable the placeholder text on the editing root, if any was configured.\r\n     */\r\n    _initPlaceholder() {\r\n        const editor = this.editor;\r\n        const editingView = editor.editing.view;\r\n        const editingRoot = editingView.document.getRoot();\r\n        const sourceElement = editor.sourceElement;\r\n        let placeholderText;\r\n        const placeholder = editor.config.get('placeholder');\r\n        if (placeholder) {\r\n            placeholderText = typeof placeholder === 'string' ? placeholder : placeholder[this.view.editable.name];\r\n        }\r\n        if (!placeholderText && sourceElement && sourceElement.tagName.toLowerCase() === 'textarea') {\r\n            placeholderText = sourceElement.getAttribute('placeholder');\r\n        }\r\n        if (placeholderText) {\r\n            enablePlaceholder({\r\n                view: editingView,\r\n                element: editingRoot,\r\n                text: placeholderText,\r\n                isDirectHost: false,\r\n                keepOnFocus: true\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Provides an integration between the sticky toolbar and {@link module:utils/dom/scroll~scrollViewportToShowTarget}.\r\n     * It allows the UI-agnostic engine method to consider the geometry of the\r\n     * {@link module:editor-classic/classiceditoruiview~ClassicEditorUIView#stickyPanel} that pins to the\r\n     * edge of the viewport and can obscure the user caret after scrolling the window.\r\n     *\r\n     * @param evt The `scrollToTheSelection` event info.\r\n     * @param data The payload carried by the `scrollToTheSelection` event.\r\n     * @param originalArgs The original arguments passed to `scrollViewportToShowTarget()` method (see implementation to learn more).\r\n     */\r\n    _handleScrollToTheSelectionWithStickyPanel(evt, data, originalArgs) {\r\n        const stickyPanel = this.view.stickyPanel;\r\n        if (stickyPanel.isSticky) {\r\n            const stickyPanelHeight = new Rect(stickyPanel.element).height;\r\n            data.viewportOffset.top += stickyPanelHeight;\r\n        }\r\n        else {\r\n            const scrollViewportOnPanelGettingSticky = () => {\r\n                this.editor.editing.view.scrollToTheSelection(originalArgs);\r\n            };\r\n            this.listenTo(stickyPanel, 'change:isSticky', scrollViewportOnPanelGettingSticky);\r\n            // This works as a post-scroll-fixer because it's impossible predict whether the panel will be sticky after scrolling or not.\r\n            // Listen for a short period of time only and if the toolbar does not become sticky very soon, cancel the listener.\r\n            setTimeout(() => {\r\n                this.stopListening(stickyPanel, 'change:isSticky', scrollViewportOnPanelGettingSticky);\r\n            }, 20);\r\n        }\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./classiceditor.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module editor-classic/classiceditoruiview\r\n */\r\nimport { BoxedEditorUIView, InlineEditableUIView, StickyPanelView, ToolbarView } from 'ckeditor5/src/ui';\r\nimport '../theme/classiceditor.css';\r\n/**\r\n * Classic editor UI view. Uses an inline editable and a sticky toolbar, all\r\n * enclosed in a boxed UI view.\r\n */\r\nexport default class ClassicEditorUIView extends BoxedEditorUIView {\r\n    /**\r\n     * Creates an instance of the classic editor UI view.\r\n     *\r\n     * @param locale The {@link module:core/editor/editor~Editor#locale} instance.\r\n     * @param editingView The editing view instance this view is related to.\r\n     * @param options Configuration options for the view instance.\r\n     * @param options.shouldToolbarGroupWhenFull When set `true` enables automatic items grouping\r\n     * in the main {@link module:editor-classic/classiceditoruiview~ClassicEditorUIView#toolbar toolbar}.\r\n     * See {@link module:ui/toolbar/toolbarview~ToolbarOptions#shouldGroupWhenFull} to learn more.\r\n     */\r\n    constructor(locale, editingView, options = {}) {\r\n        super(locale);\r\n        this.stickyPanel = new StickyPanelView(locale);\r\n        this.toolbar = new ToolbarView(locale, {\r\n            shouldGroupWhenFull: options.shouldToolbarGroupWhenFull\r\n        });\r\n        this.editable = new InlineEditableUIView(locale, editingView);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        // Set toolbar as a child of a stickyPanel and makes toolbar sticky.\r\n        this.stickyPanel.content.add(this.toolbar);\r\n        this.top.add(this.stickyPanel);\r\n        this.main.add(this.editable);\r\n    }\r\n}\r\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import isObjectLike from './isObjectLike.js';\nimport isPlainObject from './isPlainObject.js';\n\n/**\n * Checks if `value` is likely a DOM element.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n * @example\n *\n * _.isElement(document.body);\n * // => true\n *\n * _.isElement('<body>');\n * // => false\n */\nfunction isElement(value) {\n  return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n}\n\nexport default isElement;\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module editor-classic/classiceditor\r\n */\r\nimport ClassicEditorUI from './classiceditorui';\r\nimport ClassicEditorUIView from './classiceditoruiview';\r\nimport { Editor, Context, DataApiMixin, ElementApiMixin, attachToForm } from 'ckeditor5/src/core';\r\nimport { getDataFromElement, CKEditorError } from 'ckeditor5/src/utils';\r\nimport { ContextWatchdog, EditorWatchdog } from 'ckeditor5/src/watchdog';\r\nimport { isElement as _isElement } from 'lodash-es';\r\n/**\r\n * The {@glink installation/getting-started/predefined-builds#classic-editor classic editor} implementation.\r\n * It uses an inline editable and a sticky toolbar, all enclosed in a boxed UI.\r\n * See the {@glink examples/builds/classic-editor demo}.\r\n *\r\n * In order to create a classic editor instance, use the static\r\n * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`} method.\r\n *\r\n * # Classic editor and classic build\r\n *\r\n * The classic editor can be used directly from source (if you installed the\r\n * [`@ckeditor/ckeditor5-editor-classic`](https://www.npmjs.com/package/@ckeditor/ckeditor5-editor-classic) package)\r\n * but it is also available in the {@glink installation/getting-started/predefined-builds#classic-editor classic build}.\r\n *\r\n * {@glink installation/getting-started/predefined-builds Builds}\r\n * are ready-to-use editors with plugins bundled in. When using the editor from\r\n * source you need to take care of loading all plugins by yourself\r\n * (through the {@link module:core/editor/editorconfig~EditorConfig#plugins `config.plugins`} option).\r\n * Using the editor from source gives much better flexibility and allows easier customization.\r\n *\r\n * Read more about initializing the editor from source or as a build in\r\n * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}.\r\n */\r\nexport default class ClassicEditor extends DataApiMixin(ElementApiMixin(Editor)) {\r\n    /**\r\n     * Creates an instance of the classic editor.\r\n     *\r\n     * **Note:** do not use the constructor to create editor instances. Use the static\r\n     * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`} method instead.\r\n     *\r\n     * @param sourceElementOrData The DOM element that will be the source for the created editor\r\n     * or the editor's initial data. For more information see\r\n     * {@link module:editor-classic/classiceditor~ClassicEditor.create `ClassicEditor.create()`}.\r\n     * @param config The editor configuration.\r\n     */\r\n    constructor(sourceElementOrData, config = {}) {\r\n        // If both `config.initialData` is set and initial data is passed as the constructor parameter, then throw.\r\n        if (!isElement(sourceElementOrData) && config.initialData !== undefined) {\r\n            // Documented in core/editor/editorconfig.jsdoc.\r\n            // eslint-disable-next-line ckeditor5-rules/ckeditor-error-message\r\n            throw new CKEditorError('editor-create-initial-data', null);\r\n        }\r\n        super(config);\r\n        if (this.config.get('initialData') === undefined) {\r\n            this.config.set('initialData', getInitialData(sourceElementOrData));\r\n        }\r\n        if (isElement(sourceElementOrData)) {\r\n            this.sourceElement = sourceElementOrData;\r\n        }\r\n        this.model.document.createRoot();\r\n        const shouldToolbarGroupWhenFull = !this.config.get('toolbar.shouldNotGroupWhenFull');\r\n        const view = new ClassicEditorUIView(this.locale, this.editing.view, {\r\n            shouldToolbarGroupWhenFull\r\n        });\r\n        this.ui = new ClassicEditorUI(this, view);\r\n        attachToForm(this);\r\n    }\r\n    /**\r\n     * Destroys the editor instance, releasing all resources used by it.\r\n     *\r\n     * Updates the original editor element with the data if the\r\n     * {@link module:core/editor/editorconfig~EditorConfig#updateSourceElementOnDestroy `updateSourceElementOnDestroy`}\r\n     * configuration option is set to `true`.\r\n     */\r\n    destroy() {\r\n        if (this.sourceElement) {\r\n            this.updateSourceElement();\r\n        }\r\n        this.ui.destroy();\r\n        return super.destroy();\r\n    }\r\n    /**\r\n     * Creates a new classic editor instance.\r\n     *\r\n     * There are three ways how the editor can be initialized.\r\n     *\r\n     * # Replacing a DOM element (and loading data from it)\r\n     *\r\n     * You can initialize the editor using an existing DOM element:\r\n     *\r\n     * ```ts\r\n     * ClassicEditor\r\n     * \t.create( document.querySelector( '#editor' ) )\r\n     * \t.then( editor => {\r\n     * \t\tconsole.log( 'Editor was initialized', editor );\r\n     * \t} )\r\n     * \t.catch( err => {\r\n     * \t\tconsole.error( err.stack );\r\n     * \t} );\r\n     * ```\r\n     *\r\n     * The element's content will be used as the editor data and the element will be replaced by the editor UI.\r\n     *\r\n     * # Creating a detached editor\r\n     *\r\n     * Alternatively, you can initialize the editor by passing the initial data directly as a string.\r\n     * In this case, the editor will render an element that must be inserted into the DOM:\r\n     *\r\n     * ```ts\r\n     * ClassicEditor\r\n     * \t.create( '<p>Hello world!</p>' )\r\n     * \t.then( editor => {\r\n     * \t\tconsole.log( 'Editor was initialized', editor );\r\n     *\r\n     * \t\t// Initial data was provided so the editor UI element needs to be added manually to the DOM.\r\n     * \t\tdocument.body.appendChild( editor.ui.element );\r\n     * \t} )\r\n     * \t.catch( err => {\r\n     * \t\tconsole.error( err.stack );\r\n     * \t} );\r\n     * ```\r\n     *\r\n     * This lets you dynamically append the editor to your web page whenever it is convenient for you. You may use this method if your\r\n     * web page content is generated on the client side and the DOM structure is not ready at the moment when you initialize the editor.\r\n     *\r\n     * # Replacing a DOM element (and data provided in `config.initialData`)\r\n     *\r\n     * You can also mix these two ways by providing a DOM element to be used and passing the initial data through the configuration:\r\n     *\r\n     * ```ts\r\n     * ClassicEditor\r\n     * \t.create( document.querySelector( '#editor' ), {\r\n     * \t\tinitialData: '<h2>Initial data</h2><p>Foo bar.</p>'\r\n     * \t} )\r\n     * \t.then( editor => {\r\n     * \t\tconsole.log( 'Editor was initialized', editor );\r\n     * \t} )\r\n     * \t.catch( err => {\r\n     * \t\tconsole.error( err.stack );\r\n     * \t} );\r\n     * ```\r\n     *\r\n     * This method can be used to initialize the editor on an existing element with the specified content in case if your integration\r\n     * makes it difficult to set the content of the source element.\r\n     *\r\n     * Note that an error will be thrown if you pass the initial data both as the first parameter and also in the configuration.\r\n     *\r\n     * # Configuring the editor\r\n     *\r\n     * See the {@link module:core/editor/editorconfig~EditorConfig editor configuration documentation} to learn more about\r\n     * customizing plugins, toolbar and more.\r\n     *\r\n     * # Using the editor from source\r\n     *\r\n     * The code samples listed in the previous sections of this documentation assume that you are using an\r\n     * {@glink installation/getting-started/predefined-builds editor build} (for example – `@ckeditor/ckeditor5-build-classic`).\r\n     *\r\n     * If you want to use the classic editor from source (`@ckeditor/ckeditor5-editor-classic/src/classiceditor`),\r\n     * you need to define the list of\r\n     * {@link module:core/editor/editorconfig~EditorConfig#plugins plugins to be initialized} and\r\n     * {@link module:core/editor/editorconfig~EditorConfig#toolbar toolbar items}. Read more about using the editor from\r\n     * source in the {@glink installation/advanced/alternative-setups/integrating-from-source-webpack dedicated guide}.\r\n     *\r\n     * @param sourceElementOrData The DOM element that will be the source for the created editor\r\n     * or the editor's initial data.\r\n     *\r\n     * If a DOM element is passed, its content will be automatically loaded to the editor upon initialization\r\n     * and the {@link module:editor-classic/classiceditorui~ClassicEditorUI#element editor element} will replace the passed element\r\n     * in the DOM (the original one will be hidden and the editor will be injected next to it).\r\n     *\r\n     * If the {@link module:core/editor/editorconfig~EditorConfig#updateSourceElementOnDestroy updateSourceElementOnDestroy}\r\n     * option is set to `true`, the editor data will be set back to the original element once the editor is destroyed and when a form,\r\n     * in which this element is contained, is submitted (if the original element is a `<textarea>`). This ensures seamless integration\r\n     * with native web forms.\r\n     *\r\n     * If the initial data is passed, a detached editor will be created. In this case you need to insert it into the DOM manually.\r\n     * It is available under the {@link module:editor-classic/classiceditorui~ClassicEditorUI#element `editor.ui.element`} property.\r\n     *\r\n     * @param config The editor configuration.\r\n     * @returns A promise resolved once the editor is ready. The promise resolves with the created editor instance.\r\n     */\r\n    static create(sourceElementOrData, config = {}) {\r\n        return new Promise(resolve => {\r\n            const editor = new this(sourceElementOrData, config);\r\n            resolve(editor.initPlugins()\r\n                .then(() => editor.ui.init(isElement(sourceElementOrData) ? sourceElementOrData : null))\r\n                .then(() => editor.data.init(editor.config.get('initialData')))\r\n                .then(() => editor.fire('ready'))\r\n                .then(() => editor));\r\n        });\r\n    }\r\n}\r\n/**\r\n * The {@link module:core/context~Context} class.\r\n *\r\n * Exposed as static editor field for easier access in editor builds.\r\n */\r\nClassicEditor.Context = Context;\r\n/**\r\n * The {@link module:watchdog/editorwatchdog~EditorWatchdog} class.\r\n *\r\n * Exposed as static editor field for easier access in editor builds.\r\n */\r\nClassicEditor.EditorWatchdog = EditorWatchdog;\r\n/**\r\n * The {@link module:watchdog/contextwatchdog~ContextWatchdog} class.\r\n *\r\n * Exposed as static editor field for easier access in editor builds.\r\n */\r\nClassicEditor.ContextWatchdog = ContextWatchdog;\r\nfunction getInitialData(sourceElementOrData) {\r\n    return isElement(sourceElementOrData) ? getDataFromElement(sourceElementOrData) : sourceElementOrData;\r\n}\r\nfunction isElement(value) {\r\n    return _isElement(value);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * Returns code block languages as defined in `config.codeBlock.languages` but processed:\r\n *\r\n * * To consider the editor localization, i.e. to display {@link module:code-block/codeblockconfig~CodeBlockLanguageDefinition}\r\n * in the correct language. There is no way to use {@link module:utils/locale~Locale#t} when the user\r\n * configuration is defined because the editor does not exist yet.\r\n * * To make sure each definition has a CSS class associated with it even if not specified\r\n * in the original configuration.\r\n */\r\nexport function getNormalizedAndLocalizedLanguageDefinitions(editor) {\r\n    const t = editor.t;\r\n    const languageDefs = editor.config.get('codeBlock.languages');\r\n    for (const def of languageDefs) {\r\n        if (def.label === 'Plain text') {\r\n            def.label = t('Plain text');\r\n        }\r\n        if (def.class === undefined) {\r\n            def.class = `language-${def.language}`;\r\n        }\r\n    }\r\n    return languageDefs;\r\n}\r\n/**\r\n * Returns an object associating certain language definition properties with others. For instance:\r\n *\r\n * For:\r\n *\r\n * ```ts\r\n * const definitions = {\r\n * \t{ language: 'php', class: 'language-php', label: 'PHP' },\r\n * \t{ language: 'javascript', class: 'js', label: 'JavaScript' },\r\n * };\r\n *\r\n * getPropertyAssociation( definitions, 'class', 'language' );\r\n * ```\r\n *\r\n * returns:\r\n *\r\n * ```ts\r\n * {\r\n * \t'language-php': 'php',\r\n * \t'js': 'javascript'\r\n * }\r\n * ```\r\n *\r\n * and\r\n *\r\n * ```ts\r\n * getPropertyAssociation( definitions, 'language', 'label' );\r\n * ```\r\n *\r\n * returns:\r\n *\r\n * ```ts\r\n * {\r\n * \t'php': 'PHP',\r\n * \t'javascript': 'JavaScript'\r\n * }\r\n * ```\r\n */\r\nexport function getPropertyAssociation(languageDefs, key, value) {\r\n    const association = {};\r\n    for (const def of languageDefs) {\r\n        if (key === 'class') {\r\n            // Only the first class is considered.\r\n            const newKey = (def[key]).split(' ').shift();\r\n            association[newKey] = def[value];\r\n        }\r\n        else {\r\n            association[def[key]] = def[value];\r\n        }\r\n    }\r\n    return association;\r\n}\r\n/**\r\n * For a given model text node, it returns white spaces that precede other characters in that node.\r\n * This corresponds to the indentation part of the code block line.\r\n */\r\nexport function getLeadingWhiteSpaces(textNode) {\r\n    return textNode.data.match(/^(\\s*)/)[0];\r\n}\r\n/**\r\n * For plain text containing the code (a snippet), it returns a document fragment containing\r\n * view text nodes separated by `<br>` elements (in place of new line characters \"\\n\"), for instance:\r\n *\r\n * Input:\r\n *\r\n * ```ts\r\n * \"foo()\\n\r\n * bar()\"\r\n * ```\r\n *\r\n * Output:\r\n *\r\n * ```html\r\n * <DocumentFragment>\r\n * \t\"foo()\"\r\n * \t<br/>\r\n * \t\"bar()\"\r\n * </DocumentFragment>\r\n * ```\r\n *\r\n * @param text The raw code text to be converted.\r\n */\r\nexport function rawSnippetTextToViewDocumentFragment(writer, text) {\r\n    const fragment = writer.createDocumentFragment();\r\n    const textLines = text.split('\\n');\r\n    const items = textLines.reduce((nodes, line, lineIndex) => {\r\n        nodes.push(line);\r\n        if (lineIndex < textLines.length - 1) {\r\n            nodes.push(writer.createElement('br'));\r\n        }\r\n        return nodes;\r\n    }, []);\r\n    writer.appendChild(items, fragment);\r\n    return fragment;\r\n}\r\n/**\r\n * Returns an array of all model positions within the selection that represent code block lines.\r\n *\r\n * If the selection is collapsed, it returns the exact selection anchor position:\r\n *\r\n * ```html\r\n * <codeBlock>[]foo</codeBlock>        ->     <codeBlock>^foo</codeBlock>\r\n * <codeBlock>foo[]bar</codeBlock>     ->     <codeBlock>foo^bar</codeBlock>\r\n * ```\r\n *\r\n * Otherwise, it returns positions **before** each text node belonging to all code blocks contained by the selection:\r\n *\r\n * ```html\r\n * <codeBlock>                                <codeBlock>\r\n *     foo[bar                                   ^foobar\r\n *     <softBreak></softBreak>         ->        <softBreak></softBreak>\r\n *     baz]qux                                   ^bazqux\r\n * </codeBlock>                               </codeBlock>\r\n * ```\r\n *\r\n * It also works across other non–code blocks:\r\n *\r\n * ```html\r\n * <codeBlock>                                <codeBlock>\r\n *     foo[bar                                   ^foobar\r\n * </codeBlock>                               </codeBlock>\r\n * <paragraph>text</paragraph>         ->     <paragraph>text</paragraph>\r\n * <codeBlock>                                <codeBlock>\r\n *     baz]qux                                   ^bazqux\r\n * </codeBlock>                               </codeBlock>\r\n * ```\r\n *\r\n * **Note:** The positions are in reverse order so they do not get outdated when iterating over them and\r\n * the writer inserts or removes elements at the same time.\r\n *\r\n * **Note:** The position is located after the leading white spaces in the text node.\r\n */\r\nexport function getIndentOutdentPositions(model) {\r\n    const selection = model.document.selection;\r\n    const positions = [];\r\n    // When the selection is collapsed, there's only one position we can indent or outdent.\r\n    if (selection.isCollapsed) {\r\n        return [selection.anchor];\r\n    }\r\n    // When the selection is NOT collapsed, collect all positions starting before text nodes\r\n    // (code lines) in any <codeBlock> within the selection.\r\n    // Walk backward so positions we are about to collect here do not get outdated when\r\n    // inserting or deleting using the writer.\r\n    const walker = selection.getFirstRange().getWalker({\r\n        ignoreElementEnd: true,\r\n        direction: 'backward'\r\n    });\r\n    for (const { item } of walker) {\r\n        if (!item.is('$textProxy')) {\r\n            continue;\r\n        }\r\n        const { parent, startOffset } = item.textNode;\r\n        if (!parent.is('element', 'codeBlock')) {\r\n            continue;\r\n        }\r\n        const leadingWhiteSpaces = getLeadingWhiteSpaces(item.textNode);\r\n        // Make sure the position is after all leading whitespaces in the text node.\r\n        const position = model.createPositionAt(parent, startOffset + leadingWhiteSpaces.length);\r\n        positions.push(position);\r\n    }\r\n    return positions;\r\n}\r\n/**\r\n * Checks if any of the blocks within the model selection is a code block.\r\n */\r\nexport function isModelSelectionInCodeBlock(selection) {\r\n    const firstBlock = first(selection.getSelectedBlocks());\r\n    return !!firstBlock && firstBlock.is('element', 'codeBlock');\r\n}\r\n/**\r\n * Checks if an {@link module:engine/model/element~Element Element} can become a code block.\r\n *\r\n * @param schema Model's schema.\r\n * @param element The element to be checked.\r\n * @returns Check result.\r\n */\r\nexport function canBeCodeBlock(schema, element) {\r\n    if (element.is('rootElement') || schema.isLimit(element)) {\r\n        return false;\r\n    }\r\n    return schema.checkChild(element.parent, 'codeBlock');\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\nimport { getNormalizedAndLocalizedLanguageDefinitions, canBeCodeBlock } from './utils';\r\n/**\r\n * The code block command plugin.\r\n */\r\nexport default class CodeBlockCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._lastLanguage = null;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.value = this._getValue();\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Executes the command. When the command {@link #value is on}, all topmost code blocks within\r\n     * the selection will be removed. If it is off, all selected blocks will be flattened and\r\n     * wrapped by a code block.\r\n     *\r\n     * @fires execute\r\n     * @param options Command options.\r\n     * @param options.language The code block language.\r\n     * @param options.forceValue If set, it will force the command behavior. If `true`, the command will apply a code block,\r\n     * otherwise the command will remove the code block. If not set, the command will act basing on its current value.\r\n     * @param options.usePreviousLanguageChoice If set on `true` and the `options.language` is not specified, the command\r\n     * will apply the previous language (if the command was already executed) when inserting the `codeBlock` element.\r\n     */\r\n    execute(options = {}) {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const selection = model.document.selection;\r\n        const normalizedLanguagesDefs = getNormalizedAndLocalizedLanguageDefinitions(editor);\r\n        const firstLanguageInConfig = normalizedLanguagesDefs[0];\r\n        const blocks = Array.from(selection.getSelectedBlocks());\r\n        const value = options.forceValue == undefined ? !this.value : options.forceValue;\r\n        const language = getLanguage(options, this._lastLanguage, firstLanguageInConfig.language);\r\n        model.change(writer => {\r\n            if (value) {\r\n                this._applyCodeBlock(writer, blocks, language);\r\n            }\r\n            else {\r\n                this._removeCodeBlock(writer, blocks);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     *\r\n     * @returns The current value.\r\n     */\r\n    _getValue() {\r\n        const selection = this.editor.model.document.selection;\r\n        const firstBlock = first(selection.getSelectedBlocks());\r\n        const isCodeBlock = !!(firstBlock && firstBlock.is('element', 'codeBlock'));\r\n        return isCodeBlock ? firstBlock.getAttribute('language') : false;\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        if (this.value) {\r\n            return true;\r\n        }\r\n        const selection = this.editor.model.document.selection;\r\n        const schema = this.editor.model.schema;\r\n        const firstBlock = first(selection.getSelectedBlocks());\r\n        if (!firstBlock) {\r\n            return false;\r\n        }\r\n        return canBeCodeBlock(schema, firstBlock);\r\n    }\r\n    _applyCodeBlock(writer, blocks, language) {\r\n        this._lastLanguage = language;\r\n        const schema = this.editor.model.schema;\r\n        const allowedBlocks = blocks.filter(block => canBeCodeBlock(schema, block));\r\n        for (const block of allowedBlocks) {\r\n            writer.rename(block, 'codeBlock');\r\n            writer.setAttribute('language', language, block);\r\n            schema.removeDisallowedAttributes([block], writer);\r\n            // Remove children of the  `codeBlock` element that are not allowed. See #9567.\r\n            Array.from(block.getChildren())\r\n                .filter(child => !schema.checkChild(block, child))\r\n                .forEach(child => writer.remove(child));\r\n        }\r\n        allowedBlocks.reverse().forEach((currentBlock, i) => {\r\n            const nextBlock = allowedBlocks[i + 1];\r\n            if (currentBlock.previousSibling === nextBlock) {\r\n                writer.appendElement('softBreak', nextBlock);\r\n                writer.merge(writer.createPositionBefore(currentBlock));\r\n            }\r\n        });\r\n    }\r\n    _removeCodeBlock(writer, blocks) {\r\n        const codeBlocks = blocks.filter(block => block.is('element', 'codeBlock'));\r\n        for (const block of codeBlocks) {\r\n            const range = writer.createRangeOn(block);\r\n            for (const item of Array.from(range.getItems()).reverse()) {\r\n                if (item.is('element', 'softBreak') && item.parent.is('element', 'codeBlock')) {\r\n                    const { position } = writer.split(writer.createPositionBefore(item));\r\n                    const elementAfter = position.nodeAfter;\r\n                    writer.rename(elementAfter, 'paragraph');\r\n                    writer.removeAttribute('language', elementAfter);\r\n                    writer.remove(item);\r\n                }\r\n            }\r\n            writer.rename(block, 'paragraph');\r\n            writer.removeAttribute('language', block);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Picks the language for the new code block. If any language is passed as an option,\r\n * it will be returned. Else, if option usePreviousLanguageChoice is true and some\r\n * code block was already created (lastLanguage is not null) then previously used\r\n * language will be returned. If not, it will return default language.\r\n */\r\nfunction getLanguage(options, lastLanguage, defaultLanguage) {\r\n    if (options.language) {\r\n        return options.language;\r\n    }\r\n    if (options.usePreviousLanguageChoice && lastLanguage) {\r\n        return lastLanguage;\r\n    }\r\n    return defaultLanguage;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module code-block/indentcodeblockcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { getIndentOutdentPositions, isModelSelectionInCodeBlock } from './utils';\r\n/**\r\n * The code block indentation increase command plugin.\r\n */\r\nexport default class IndentCodeBlockCommand extends Command {\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._indentSequence = editor.config.get('codeBlock.indentSequence');\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Executes the command. When the command {@link #isEnabled is enabled}, the indentation of the\r\n     * code lines in the selection will be increased.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        model.change(writer => {\r\n            const positions = getIndentOutdentPositions(model);\r\n            // Indent all positions, for instance assuming the indent sequence is 4x space (\"    \"):\r\n            //\r\n            //\t\t<codeBlock>^foo</codeBlock>        ->       <codeBlock>    foo</codeBlock>\r\n            //\r\n            //\t\t<codeBlock>foo^bar</codeBlock>     ->       <codeBlock>foo    bar</codeBlock>\r\n            //\r\n            // Also, when there is more than one position:\r\n            //\r\n            //\t\t<codeBlock>\r\n            //\t\t\t^foobar\r\n            //\t\t\t<softBreak></softBreak>\r\n            //\t\t\t^bazqux\r\n            //\t\t</codeBlock>\r\n            //\r\n            //\t\t->\r\n            //\r\n            //\t\t<codeBlock>\r\n            //\t\t\t    foobar\r\n            //\t\t\t<softBreak></softBreak>\r\n            //\t\t\t    bazqux\r\n            //\t\t</codeBlock>\r\n            //\r\n            for (const position of positions) {\r\n                const indentSequenceTextElement = writer.createText(this._indentSequence);\r\n                // Previously insertion was done by writer.insertText(). It was changed to insertContent() to enable\r\n                // integration of code block with track changes. It's the easiest way of integration because insertContent()\r\n                // is already integrated with track changes, but if it ever cause any troubles it can be reverted, however\r\n                // some additional work will be required in track changes integration of code block.\r\n                model.insertContent(indentSequenceTextElement, position);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     */\r\n    _checkEnabled() {\r\n        if (!this._indentSequence) {\r\n            return false;\r\n        }\r\n        // Indent (forward) command is always enabled when there's any code block in the selection\r\n        // because you can always indent code lines.\r\n        return isModelSelectionInCodeBlock(this.editor.model.document.selection);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { getLeadingWhiteSpaces, getIndentOutdentPositions, isModelSelectionInCodeBlock } from './utils';\r\n/**\r\n * The code block indentation decrease command plugin.\r\n */\r\nexport default class OutdentCodeBlockCommand extends Command {\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._indentSequence = editor.config.get('codeBlock.indentSequence');\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Executes the command. When the command {@link #isEnabled is enabled}, the indentation of the\r\n     * code lines in the selection will be decreased.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        model.change(() => {\r\n            const positions = getIndentOutdentPositions(model);\r\n            // Outdent all positions, for instance assuming the indent sequence is 4x space (\"    \"):\r\n            //\r\n            //\t\t<codeBlock>^foo</codeBlock>         ->       <codeBlock>foo</codeBlock>\r\n            //\r\n            //\t\t<codeBlock>    ^bar</codeBlock>     ->       <codeBlock>bar</codeBlock>\r\n            //\r\n            // Also, when there is more than one position:\r\n            //\r\n            //\t\t<codeBlock>\r\n            //\t\t\t    ^foobar\r\n            //\t\t\t<softBreak></softBreak>\r\n            //\t\t\t    ^bazqux\r\n            //\t\t</codeBlock>\r\n            //\r\n            //\t\t->\r\n            //\r\n            //\t\t<codeBlock>\r\n            //\t\t\tfoobar\r\n            //\t\t\t<softBreak></softBreak>\r\n            //\t\t\tbazqux\r\n            //\t\t</codeBlock>\r\n            for (const position of positions) {\r\n                const range = getLastOutdentableSequenceRange(model, position, this._indentSequence);\r\n                if (range) {\r\n                    // Previously deletion was done by writer.remove(). It was changed to deleteContent() to enable\r\n                    // integration of code block with track changes. It's the easiest way of integration because deleteContent()\r\n                    // is already integrated with track changes, but if it ever cause any troubles it can be reverted, however\r\n                    // some additional work will be required in track changes integration of code block.\r\n                    model.deleteContent(model.createSelection(range));\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @private\r\n     * @returns {Boolean} Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        if (!this._indentSequence) {\r\n            return false;\r\n        }\r\n        const model = this.editor.model;\r\n        if (!isModelSelectionInCodeBlock(model.document.selection)) {\r\n            return false;\r\n        }\r\n        // Outdent command can execute only when there is an indent character sequence\r\n        // in some of the lines.\r\n        return getIndentOutdentPositions(model).some(position => {\r\n            return getLastOutdentableSequenceRange(model, position, this._indentSequence);\r\n        });\r\n    }\r\n}\r\n// For a position coming from `getIndentOutdentPositions()`, it returns the range representing\r\n// the last occurrence of the indent sequence among the leading whitespaces of the code line the\r\n// position represents.\r\n//\r\n// For instance, assuming the indent sequence is 4x space (\"    \"):\r\n//\r\n//\t\t<codeBlock>foo^</codeBlock>                                 ->          null\r\n//\t\t<codeBlock>foo^<softBreak></softBreak>bar</codeBlock>       ->          null\r\n//\t\t<codeBlock>  ^foo</codeBlock>                               ->          null\r\n//\t\t<codeBlock>        ^foo</codeBlock>                         ->          <codeBlock>    [    ]foo</codeBlock>\r\n//\t\t<codeBlock>    ^foo    bar</codeBlock>                      ->          <codeBlock>[    ]foo    bar</codeBlock>\r\n//\r\n// @param {<module:engine/model/model~Model>} model\r\n// @param {<module:engine/model/position~Position>} position\r\n// @param {String} sequence\r\n// @returns {<module:engine/model/range~Range>|null}\r\nfunction getLastOutdentableSequenceRange(model, position, sequence) {\r\n    // Positions start before each text node (code line). Get the node corresponding to the position.\r\n    const nodeAtPosition = getCodeLineTextNodeAtPosition(position);\r\n    if (!nodeAtPosition) {\r\n        return null;\r\n    }\r\n    const leadingWhiteSpaces = getLeadingWhiteSpaces(nodeAtPosition);\r\n    const lastIndexOfSequence = leadingWhiteSpaces.lastIndexOf(sequence);\r\n    // For instance, assuming the indent sequence is 4x space (\"    \"):\r\n    //\r\n    //\t\t<codeBlock>    \t^foo</codeBlock>           ->             null\r\n    //\r\n    if (lastIndexOfSequence + sequence.length !== leadingWhiteSpaces.length) {\r\n        return null;\r\n    }\r\n    // For instance, assuming the indent sequence is 4x space (\"    \"):\r\n    //\r\n    //\t\t<codeBlock>  ^foo</codeBlock>           ->             null\r\n    //\r\n    if (lastIndexOfSequence === -1) {\r\n        return null;\r\n    }\r\n    const { parent, startOffset } = nodeAtPosition;\r\n    // Create a range that contains the **last** indent sequence among the leading whitespaces\r\n    // of the line.\r\n    //\r\n    // For instance, assuming the indent sequence is 4x space (\"    \"):\r\n    //\r\n    //\t\t<codeBlock>        ^foo</codeBlock>      ->     <codeBlock>    [    ]foo</codeBlock>\r\n    //\r\n    return model.createRange(model.createPositionAt(parent, startOffset + lastIndexOfSequence), model.createPositionAt(parent, startOffset + lastIndexOfSequence + sequence.length));\r\n}\r\nfunction getCodeLineTextNodeAtPosition(position) {\r\n    // Positions start before each text node (code line). Get the node corresponding to the position.\r\n    let nodeAtPosition = position.parent.getChild(position.index);\r\n    // <codeBlock>foo^</codeBlock>\r\n    // <codeBlock>foo^<softBreak></softBreak>bar</codeBlock>\r\n    if (!nodeAtPosition || nodeAtPosition.is('element', 'softBreak')) {\r\n        nodeAtPosition = position.nodeBefore;\r\n    }\r\n    // <codeBlock>^</codeBlock>\r\n    // <codeBlock>foo^<softBreak></softBreak>bar</codeBlock>\r\n    if (!nodeAtPosition || nodeAtPosition.is('element', 'softBreak')) {\r\n        return null;\r\n    }\r\n    return nodeAtPosition;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { getPropertyAssociation } from './utils';\r\n/**\r\n * A model-to-view (both editing and data) converter for the `codeBlock` element.\r\n *\r\n * Sample input:\r\n *\r\n * ```html\r\n * <codeBlock language=\"javascript\">foo();<softBreak></softBreak>bar();</codeBlock>\r\n * ```\r\n *\r\n * Sample output (editing):\r\n *\r\n * ```html\r\n * <pre data-language=\"JavaScript\"><code class=\"language-javascript\">foo();<br />bar();</code></pre>\r\n * ```\r\n *\r\n * Sample output (data, see {@link module:code-block/converters~modelToDataViewSoftBreakInsertion}):\r\n *\r\n * ```html\r\n * <pre><code class=\"language-javascript\">foo();\\nbar();</code></pre>\r\n * ```\r\n *\r\n * @param languageDefs The normalized language configuration passed to the feature.\r\n * @param useLabels When `true`, the `<pre>` element will get a `data-language` attribute with a\r\n * human–readable label of the language. Used only in the editing.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function modelToViewCodeBlockInsertion(model, languageDefs, useLabels = false) {\r\n    // Language CSS classes:\r\n    //\r\n    //\t\t{\r\n    //\t\t\tphp: 'language-php',\r\n    //\t\t\tpython: 'language-python',\r\n    //\t\t\tjavascript: 'js',\r\n    //\t\t\t...\r\n    //\t\t}\r\n    const languagesToClasses = getPropertyAssociation(languageDefs, 'language', 'class');\r\n    // Language labels:\r\n    //\r\n    //\t\t{\r\n    //\t\t\tphp: 'PHP',\r\n    //\t\t\tpython: 'Python',\r\n    //\t\t\tjavascript: 'JavaScript',\r\n    //\t\t\t...\r\n    //\t\t}\r\n    const languagesToLabels = getPropertyAssociation(languageDefs, 'language', 'label');\r\n    return (evt, data, conversionApi) => {\r\n        const { writer, mapper, consumable } = conversionApi;\r\n        if (!consumable.consume(data.item, 'insert')) {\r\n            return;\r\n        }\r\n        const codeBlockLanguage = data.item.getAttribute('language');\r\n        const targetViewPosition = mapper.toViewPosition(model.createPositionBefore(data.item));\r\n        const preAttributes = {};\r\n        // Attributes added only in the editing view.\r\n        if (useLabels) {\r\n            preAttributes['data-language'] = languagesToLabels[codeBlockLanguage];\r\n            preAttributes.spellcheck = 'false';\r\n        }\r\n        const codeAttributes = languagesToClasses[codeBlockLanguage] ? {\r\n            class: languagesToClasses[codeBlockLanguage]\r\n        } : undefined;\r\n        const code = writer.createContainerElement('code', codeAttributes);\r\n        const pre = writer.createContainerElement('pre', preAttributes, code);\r\n        writer.insert(targetViewPosition, pre);\r\n        mapper.bindElements(data.item, code);\r\n    };\r\n}\r\n/**\r\n * A model-to-data view converter for the new line (`softBreak`) separator.\r\n *\r\n * Sample input:\r\n *\r\n * ```html\r\n * <codeBlock ...>foo();<softBreak></softBreak>bar();</codeBlock>\r\n * ```\r\n *\r\n * Sample output:\r\n *\r\n * ```html\r\n * <pre><code ...>foo();\\nbar();</code></pre>\r\n * ```\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function modelToDataViewSoftBreakInsertion(model) {\r\n    return (evt, data, conversionApi) => {\r\n        if (data.item.parent.name !== 'codeBlock') {\r\n            return;\r\n        }\r\n        const { writer, mapper, consumable } = conversionApi;\r\n        if (!consumable.consume(data.item, 'insert')) {\r\n            return;\r\n        }\r\n        const position = mapper.toViewPosition(model.createPositionBefore(data.item));\r\n        writer.insert(position, writer.createText('\\n'));\r\n    };\r\n}\r\n/**\r\n * A view-to-model converter for `<pre>` with the `<code>` HTML.\r\n *\r\n * Sample input:\r\n *\r\n * ```html\r\n * <pre><code class=\"language-javascript\">foo();bar();</code></pre>\r\n * ```\r\n *\r\n * Sample output:\r\n *\r\n * ```html\r\n * <codeBlock language=\"javascript\">foo();bar();</codeBlock>\r\n * ```\r\n *\r\n * @param languageDefs The normalized language configuration passed to the feature.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function dataViewToModelCodeBlockInsertion(editingView, languageDefs) {\r\n    // Language names associated with CSS classes:\r\n    //\r\n    //\t\t{\r\n    //\t\t\t'language-php': 'php',\r\n    //\t\t\t'language-python': 'python',\r\n    //\t\t\tjs: 'javascript',\r\n    //\t\t\t...\r\n    //\t\t}\r\n    const classesToLanguages = getPropertyAssociation(languageDefs, 'class', 'language');\r\n    const defaultLanguageName = languageDefs[0].language;\r\n    return (evt, data, conversionApi) => {\r\n        const viewCodeElement = data.viewItem;\r\n        const viewPreElement = viewCodeElement.parent;\r\n        if (!viewPreElement || !viewPreElement.is('element', 'pre')) {\r\n            return;\r\n        }\r\n        // In case of nested code blocks we don't want to convert to another code block.\r\n        if (data.modelCursor.findAncestor('codeBlock')) {\r\n            return;\r\n        }\r\n        const { consumable, writer } = conversionApi;\r\n        if (!consumable.test(viewCodeElement, { name: true })) {\r\n            return;\r\n        }\r\n        const codeBlock = writer.createElement('codeBlock');\r\n        const viewChildClasses = [...viewCodeElement.getClassNames()];\r\n        // As we're to associate each class with a model language, a lack of class (empty class) can be\r\n        // also associated with a language if the language definition was configured so. Pushing an empty\r\n        // string to make sure the association will work.\r\n        if (!viewChildClasses.length) {\r\n            viewChildClasses.push('');\r\n        }\r\n        // Figure out if any of the <code> element's class names is a valid programming\r\n        // language class. If so, use it on the model element (becomes the language of the entire block).\r\n        for (const className of viewChildClasses) {\r\n            const language = classesToLanguages[className];\r\n            if (language) {\r\n                writer.setAttribute('language', language, codeBlock);\r\n                break;\r\n            }\r\n        }\r\n        // If no language value was set, use the default language from the config.\r\n        if (!codeBlock.hasAttribute('language')) {\r\n            writer.setAttribute('language', defaultLanguageName, codeBlock);\r\n        }\r\n        conversionApi.convertChildren(viewCodeElement, codeBlock);\r\n        // Let's try to insert code block.\r\n        if (!conversionApi.safeInsert(codeBlock, data.modelCursor)) {\r\n            return;\r\n        }\r\n        consumable.consume(viewCodeElement, { name: true });\r\n        conversionApi.updateConversionResult(codeBlock, data);\r\n    };\r\n}\r\n/**\r\n * A view-to-model converter for new line characters in `<pre>`.\r\n *\r\n * Sample input:\r\n *\r\n * ```html\r\n * <pre><code class=\"language-javascript\">foo();\\nbar();</code></pre>\r\n * ```\r\n *\r\n * Sample output:\r\n *\r\n * ```html\r\n * <codeBlock language=\"javascript\">foo();<softBreak></softBreak>bar();</codeBlock>\r\n * ```\r\n *\r\n * @returns {Function} Returns a conversion callback.\r\n */\r\nexport function dataViewToModelTextNewlinesInsertion() {\r\n    return (evt, data, { consumable, writer }) => {\r\n        let position = data.modelCursor;\r\n        // When node is already converted then do nothing.\r\n        if (!consumable.test(data.viewItem)) {\r\n            return;\r\n        }\r\n        // When not inside `codeBlock` then do nothing.\r\n        if (!position.findAncestor('codeBlock')) {\r\n            return;\r\n        }\r\n        consumable.consume(data.viewItem);\r\n        const text = data.viewItem.data;\r\n        const textLines = text.split('\\n').map(data => writer.createText(data));\r\n        const lastLine = textLines[textLines.length - 1];\r\n        for (const node of textLines) {\r\n            writer.insert(node, position);\r\n            position = position.getShiftedBy(node.offsetSize);\r\n            if (node !== lastLine) {\r\n                const softBreak = writer.createElement('softBreak');\r\n                writer.insert(softBreak, position);\r\n                position = writer.createPositionAfter(softBreak);\r\n            }\r\n        }\r\n        data.modelRange = writer.createRange(data.modelCursor, position);\r\n        data.modelCursor = position;\r\n    };\r\n}\r\n/**\r\n * A view-to-model converter that handles orphan text nodes (white spaces, new lines, etc.)\r\n * that surround `<code>` inside `<pre>`.\r\n *\r\n * Sample input:\r\n *\r\n * ```html\r\n * // White spaces\r\n * <pre> <code>foo()</code> </pre>\r\n *\r\n * // White spaces\r\n * <pre>      <code>foo()</code>      </pre>\r\n *\r\n * // White spaces\r\n * <pre>\t\t\t<code>foo()</code>\t\t\t</pre>\r\n *\r\n * // New lines\r\n * <pre>\r\n * \t<code>foo()</code>\r\n * </pre>\r\n *\r\n * // Redundant text\r\n * <pre>ABC<code>foo()</code>DEF</pre>\r\n * ```\r\n *\r\n * Unified output for each case:\r\n *\r\n * ```html\r\n * <codeBlock language=\"plaintext\">foo()</codeBlock>\r\n * ```\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function dataViewToModelOrphanNodeConsumer() {\r\n    return (evt, data, { consumable }) => {\r\n        const preElement = data.viewItem;\r\n        // Don't clean up nested pre elements. Their content should stay as it is, they are not upcasted\r\n        // to code blocks.\r\n        if (preElement.findAncestor('pre')) {\r\n            return;\r\n        }\r\n        const preChildren = Array.from(preElement.getChildren());\r\n        const childCodeElement = preChildren.find(node => node.is('element', 'code'));\r\n        // <code>-less <pre>. It will not upcast to code block in the model, skipping.\r\n        if (!childCodeElement) {\r\n            return;\r\n        }\r\n        for (const child of preChildren) {\r\n            if (child === childCodeElement || !child.is('$text')) {\r\n                continue;\r\n            }\r\n            // Consuming the orphan to remove it from the input data.\r\n            // Second argument in `consumable.consume` is discarded for text nodes.\r\n            consumable.consume(child, { name: true });\r\n        }\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module code-block/codeblockediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ShiftEnter } from 'ckeditor5/src/enter';\r\nimport { UpcastWriter } from 'ckeditor5/src/engine';\r\nimport CodeBlockCommand from './codeblockcommand';\r\nimport IndentCodeBlockCommand from './indentcodeblockcommand';\r\nimport OutdentCodeBlockCommand from './outdentcodeblockcommand';\r\nimport { getNormalizedAndLocalizedLanguageDefinitions, getLeadingWhiteSpaces, rawSnippetTextToViewDocumentFragment } from './utils';\r\nimport { modelToViewCodeBlockInsertion, modelToDataViewSoftBreakInsertion, dataViewToModelCodeBlockInsertion, dataViewToModelTextNewlinesInsertion, dataViewToModelOrphanNodeConsumer } from './converters';\r\nconst DEFAULT_ELEMENT = 'paragraph';\r\n/**\r\n * The editing part of the code block feature.\r\n *\r\n * Introduces the `'codeBlock'` command and the `'codeBlock'` model element.\r\n */\r\nexport default class CodeBlockEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'CodeBlockEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ShiftEnter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define('codeBlock', {\r\n            languages: [\r\n                { language: 'plaintext', label: 'Plain text' },\r\n                { language: 'c', label: 'C' },\r\n                { language: 'cs', label: 'C#' },\r\n                { language: 'cpp', label: 'C++' },\r\n                { language: 'css', label: 'CSS' },\r\n                { language: 'diff', label: 'Diff' },\r\n                { language: 'html', label: 'HTML' },\r\n                { language: 'java', label: 'Java' },\r\n                { language: 'javascript', label: 'JavaScript' },\r\n                { language: 'php', label: 'PHP' },\r\n                { language: 'python', label: 'Python' },\r\n                { language: 'ruby', label: 'Ruby' },\r\n                { language: 'typescript', label: 'TypeScript' },\r\n                { language: 'xml', label: 'XML' }\r\n            ],\r\n            // A single tab.\r\n            indentSequence: '\\t'\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const model = editor.model;\r\n        const view = editor.editing.view;\r\n        const isDocumentListEditingLoaded = editor.plugins.has('DocumentListEditing');\r\n        const normalizedLanguagesDefs = getNormalizedAndLocalizedLanguageDefinitions(editor);\r\n        // The main command.\r\n        editor.commands.add('codeBlock', new CodeBlockCommand(editor));\r\n        // Commands that change the indentation.\r\n        editor.commands.add('indentCodeBlock', new IndentCodeBlockCommand(editor));\r\n        editor.commands.add('outdentCodeBlock', new OutdentCodeBlockCommand(editor));\r\n        this.listenTo(view.document, 'tab', (evt, data) => {\r\n            const commandName = data.shiftKey ? 'outdentCodeBlock' : 'indentCodeBlock';\r\n            const command = editor.commands.get(commandName);\r\n            if (!command.isEnabled) {\r\n                return;\r\n            }\r\n            editor.execute(commandName);\r\n            data.stopPropagation();\r\n            data.preventDefault();\r\n            evt.stop();\r\n        }, { context: 'pre' });\r\n        schema.register('codeBlock', {\r\n            allowWhere: '$block',\r\n            allowChildren: '$text',\r\n            isBlock: true,\r\n            allowAttributes: ['language']\r\n        });\r\n        // Allow all list* attributes on `codeBlock` (integration with DocumentList).\r\n        // Disallow all attributes on $text inside `codeBlock`.\r\n        schema.addAttributeCheck((context, attributeName) => {\r\n            const isDocumentListAttributeOnCodeBlock = context.endsWith('codeBlock') &&\r\n                attributeName.startsWith('list') &&\r\n                attributeName !== 'list';\r\n            if (isDocumentListEditingLoaded && isDocumentListAttributeOnCodeBlock) {\r\n                return true;\r\n            }\r\n            if (context.endsWith('codeBlock $text')) {\r\n                return false;\r\n            }\r\n        });\r\n        // Disallow object elements inside `codeBlock`. See #9567.\r\n        editor.model.schema.addChildCheck((context, childDefinition) => {\r\n            if (context.endsWith('codeBlock') && childDefinition.isObject) {\r\n                return false;\r\n            }\r\n        });\r\n        // Conversion.\r\n        editor.editing.downcastDispatcher.on('insert:codeBlock', modelToViewCodeBlockInsertion(model, normalizedLanguagesDefs, true));\r\n        editor.data.downcastDispatcher.on('insert:codeBlock', modelToViewCodeBlockInsertion(model, normalizedLanguagesDefs));\r\n        editor.data.downcastDispatcher.on('insert:softBreak', modelToDataViewSoftBreakInsertion(model), { priority: 'high' });\r\n        editor.data.upcastDispatcher.on('element:code', dataViewToModelCodeBlockInsertion(view, normalizedLanguagesDefs));\r\n        editor.data.upcastDispatcher.on('text', dataViewToModelTextNewlinesInsertion());\r\n        editor.data.upcastDispatcher.on('element:pre', dataViewToModelOrphanNodeConsumer(), { priority: 'high' });\r\n        // Intercept the clipboard input (paste) when the selection is anchored in the code block and force the clipboard\r\n        // data to be pasted as a single plain text. Otherwise, the code lines will split the code block and\r\n        // \"spill out\" as separate paragraphs.\r\n        this.listenTo(editor.editing.view.document, 'clipboardInput', (evt, data) => {\r\n            let insertionRange = model.createRange(model.document.selection.anchor);\r\n            // Use target ranges in case this is a drop.\r\n            if (data.targetRanges) {\r\n                insertionRange = editor.editing.mapper.toModelRange(data.targetRanges[0]);\r\n            }\r\n            if (!insertionRange.start.parent.is('element', 'codeBlock')) {\r\n                return;\r\n            }\r\n            const text = data.dataTransfer.getData('text/plain');\r\n            const writer = new UpcastWriter(editor.editing.view.document);\r\n            // Pass the view fragment to the default clipboardInput handler.\r\n            data.content = rawSnippetTextToViewDocumentFragment(writer, text);\r\n        });\r\n        // Make sure multi–line selection is always wrapped in a code block when `getSelectedContent()`\r\n        // is used (e.g. clipboard copy). Otherwise, only the raw text will be copied to the clipboard and,\r\n        // upon next paste, this bare text will not be inserted as a code block, which is not the best UX.\r\n        // Similarly, when the selection in a single line, the selected content should be an inline code\r\n        // so it can be pasted later on and retain it's preformatted nature.\r\n        this.listenTo(model, 'getSelectedContent', (evt, [selection]) => {\r\n            const anchor = selection.anchor;\r\n            if (selection.isCollapsed || !anchor.parent.is('element', 'codeBlock') || !anchor.hasSameParentAs(selection.focus)) {\r\n                return;\r\n            }\r\n            model.change(writer => {\r\n                const docFragment = evt.return;\r\n                // fo[o<softBreak></softBreak>b]ar  ->   <codeBlock language=\"...\">[o<softBreak></softBreak>b]<codeBlock>\r\n                if (anchor.parent.is('element') &&\r\n                    (docFragment.childCount > 1 || selection.containsEntireContent(anchor.parent))) {\r\n                    const codeBlock = writer.createElement('codeBlock', anchor.parent.getAttributes());\r\n                    writer.append(docFragment, codeBlock);\r\n                    const newDocumentFragment = writer.createDocumentFragment();\r\n                    writer.append(codeBlock, newDocumentFragment);\r\n                    evt.return = newDocumentFragment;\r\n                    return;\r\n                }\r\n                // \"f[oo]\"                          ->   <$text code=\"true\">oo</text>\r\n                const textNode = docFragment.getChild(0);\r\n                if (schema.checkAttribute(textNode, 'code')) {\r\n                    writer.setAttribute('code', true, textNode);\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const editor = this.editor;\r\n        const commands = editor.commands;\r\n        const indent = commands.get('indent');\r\n        const outdent = commands.get('outdent');\r\n        if (indent) {\r\n            // Priority is highest due to integration with `IndentList` command of `List` plugin.\r\n            // If selection is in a code block we give priority to it. This way list item cannot be indented\r\n            // but if we would give priority to indenting list item then user would have to indent list item\r\n            // as much as possible and only then he could indent code block.\r\n            indent.registerChildCommand(commands.get('indentCodeBlock'), { priority: 'highest' });\r\n        }\r\n        if (outdent) {\r\n            outdent.registerChildCommand(commands.get('outdentCodeBlock'));\r\n        }\r\n        // Customize the response to the <kbd>Enter</kbd> and <kbd>Shift</kbd>+<kbd>Enter</kbd>\r\n        // key press when the selection is in the code block. Upon enter key press we can either\r\n        // leave the block if it's \"two or three enters\" in a row or create a new code block line, preserving\r\n        // previous line's indentation.\r\n        this.listenTo(editor.editing.view.document, 'enter', (evt, data) => {\r\n            const positionParent = editor.model.document.selection.getLastPosition().parent;\r\n            if (!positionParent.is('element', 'codeBlock')) {\r\n                return;\r\n            }\r\n            if (!leaveBlockStartOnEnter(editor, data.isSoft) && !leaveBlockEndOnEnter(editor, data.isSoft)) {\r\n                breakLineOnEnter(editor);\r\n            }\r\n            data.preventDefault();\r\n            evt.stop();\r\n        }, { context: 'pre' });\r\n    }\r\n}\r\n/**\r\n * Normally, when the Enter (or Shift+Enter) key is pressed, a soft line break is to be added to the\r\n * code block. Let's try to follow the indentation of the previous line when possible, for instance:\r\n *\r\n * ```html\r\n * // Before pressing enter (or shift enter)\r\n * <codeBlock>\r\n * \"    foo()\"[]                   // Indent of 4 spaces.\r\n * </codeBlock>\r\n *\r\n * // After pressing:\r\n * <codeBlock>\r\n * \"    foo()\"                 // Indent of 4 spaces.\r\n * <softBreak></softBreak>     // A new soft break created by pressing enter.\r\n * \"    \"[]                    // Retain the indent of 4 spaces.\r\n * </codeBlock>\r\n * ```\r\n */\r\nfunction breakLineOnEnter(editor) {\r\n    const model = editor.model;\r\n    const modelDoc = model.document;\r\n    const lastSelectionPosition = modelDoc.selection.getLastPosition();\r\n    const node = lastSelectionPosition.nodeBefore || lastSelectionPosition.textNode;\r\n    let leadingWhiteSpaces;\r\n    // Figure out the indentation (white space chars) at the beginning of the line.\r\n    if (node && node.is('$text')) {\r\n        leadingWhiteSpaces = getLeadingWhiteSpaces(node);\r\n    }\r\n    // Keeping everything in a change block for a single undo step.\r\n    editor.model.change(writer => {\r\n        editor.execute('shiftEnter');\r\n        // If the line before being broken in two had some indentation, let's retain it\r\n        // in the new line.\r\n        if (leadingWhiteSpaces) {\r\n            writer.insertText(leadingWhiteSpaces, modelDoc.selection.anchor);\r\n        }\r\n    });\r\n}\r\n/**\r\n * Leave the code block when Enter (but NOT Shift+Enter) has been pressed twice at the beginning\r\n * of the code block:\r\n *\r\n * ```html\r\n * // Before:\r\n * <codeBlock>[]<softBreak></softBreak>foo</codeBlock>\r\n *\r\n * // After pressing:\r\n * <paragraph>[]</paragraph><codeBlock>foo</codeBlock>\r\n * ```\r\n *\r\n * @param isSoftEnter When `true`, enter was pressed along with <kbd>Shift</kbd>.\r\n * @returns `true` when selection left the block. `false` if stayed.\r\n */\r\nfunction leaveBlockStartOnEnter(editor, isSoftEnter) {\r\n    const model = editor.model;\r\n    const modelDoc = model.document;\r\n    const view = editor.editing.view;\r\n    const lastSelectionPosition = modelDoc.selection.getLastPosition();\r\n    const nodeAfter = lastSelectionPosition.nodeAfter;\r\n    if (isSoftEnter || !modelDoc.selection.isCollapsed || !lastSelectionPosition.isAtStart) {\r\n        return false;\r\n    }\r\n    if (!isSoftBreakNode(nodeAfter)) {\r\n        return false;\r\n    }\r\n    // We're doing everything in a single change block to have a single undo step.\r\n    editor.model.change(writer => {\r\n        // \"Clone\" the <codeBlock> in the standard way.\r\n        editor.execute('enter');\r\n        // The cloned block exists now before the original code block.\r\n        const newBlock = modelDoc.selection.anchor.parent.previousSibling;\r\n        // Make the cloned <codeBlock> a regular <paragraph> (with clean attributes, so no language).\r\n        writer.rename(newBlock, DEFAULT_ELEMENT);\r\n        writer.setSelection(newBlock, 'in');\r\n        editor.model.schema.removeDisallowedAttributes([newBlock], writer);\r\n        // Remove the <softBreak> that originally followed the selection position.\r\n        writer.remove(nodeAfter);\r\n    });\r\n    // Eye candy.\r\n    view.scrollToTheSelection();\r\n    return true;\r\n}\r\n/**\r\n * Leave the code block when Enter (but NOT Shift+Enter) has been pressed twice at the end\r\n * of the code block:\r\n *\r\n * ```html\r\n * // Before:\r\n * <codeBlock>foo[]</codeBlock>\r\n *\r\n * // After first press:\r\n * <codeBlock>foo<softBreak></softBreak>[]</codeBlock>\r\n *\r\n * // After second press:\r\n * <codeBlock>foo</codeBlock><paragraph>[]</paragraph>\r\n * ```\r\n *\r\n * @param isSoftEnter When `true`, enter was pressed along with <kbd>Shift</kbd>.\r\n * @returns `true` when selection left the block. `false` if stayed.\r\n */\r\nfunction leaveBlockEndOnEnter(editor, isSoftEnter) {\r\n    const model = editor.model;\r\n    const modelDoc = model.document;\r\n    const view = editor.editing.view;\r\n    const lastSelectionPosition = modelDoc.selection.getLastPosition();\r\n    const nodeBefore = lastSelectionPosition.nodeBefore;\r\n    let emptyLineRangeToRemoveOnEnter;\r\n    if (isSoftEnter || !modelDoc.selection.isCollapsed || !lastSelectionPosition.isAtEnd || !nodeBefore || !nodeBefore.previousSibling) {\r\n        return false;\r\n    }\r\n    // When the position is directly preceded by two soft breaks\r\n    //\r\n    //\t\t<codeBlock>foo<softBreak></softBreak><softBreak></softBreak>[]</codeBlock>\r\n    //\r\n    // it creates the following range that will be cleaned up before leaving:\r\n    //\r\n    //\t\t<codeBlock>foo[<softBreak></softBreak><softBreak></softBreak>]</codeBlock>\r\n    //\r\n    if (isSoftBreakNode(nodeBefore) && isSoftBreakNode(nodeBefore.previousSibling)) {\r\n        emptyLineRangeToRemoveOnEnter = model.createRange(model.createPositionBefore(nodeBefore.previousSibling), model.createPositionAfter(nodeBefore));\r\n    }\r\n    // When there's some text before the position that is\r\n    // preceded by two soft breaks and made purely of white–space characters\r\n    //\r\n    //\t\t<codeBlock>foo<softBreak></softBreak><softBreak></softBreak>    []</codeBlock>\r\n    //\r\n    // it creates the following range to clean up before leaving:\r\n    //\r\n    //\t\t<codeBlock>foo[<softBreak></softBreak><softBreak></softBreak>    ]</codeBlock>\r\n    //\r\n    else if (isEmptyishTextNode(nodeBefore) &&\r\n        isSoftBreakNode(nodeBefore.previousSibling) &&\r\n        isSoftBreakNode(nodeBefore.previousSibling.previousSibling)) {\r\n        emptyLineRangeToRemoveOnEnter = model.createRange(model.createPositionBefore(nodeBefore.previousSibling.previousSibling), model.createPositionAfter(nodeBefore));\r\n    }\r\n    // When there's some text before the position that is made purely of white–space characters\r\n    // and is preceded by some other text made purely of white–space characters\r\n    //\r\n    //\t\t<codeBlock>foo<softBreak></softBreak>    <softBreak></softBreak>    []</codeBlock>\r\n    //\r\n    // it creates the following range to clean up before leaving:\r\n    //\r\n    //\t\t<codeBlock>foo[<softBreak></softBreak>    <softBreak></softBreak>    ]</codeBlock>\r\n    //\r\n    else if (isEmptyishTextNode(nodeBefore) &&\r\n        isSoftBreakNode(nodeBefore.previousSibling) &&\r\n        isEmptyishTextNode(nodeBefore.previousSibling.previousSibling) &&\r\n        nodeBefore.previousSibling.previousSibling &&\r\n        isSoftBreakNode(nodeBefore.previousSibling.previousSibling.previousSibling)) {\r\n        emptyLineRangeToRemoveOnEnter = model.createRange(model.createPositionBefore(nodeBefore.previousSibling.previousSibling.previousSibling), model.createPositionAfter(nodeBefore));\r\n    }\r\n    // Not leaving the block in the following cases:\r\n    //\r\n    //\t\t<codeBlock>    []</codeBlock>\r\n    //\t\t<codeBlock>  a []</codeBlock>\r\n    //\t\t<codeBlock>foo<softBreak></softBreak>[]</codeBlock>\r\n    //\t\t<codeBlock>foo<softBreak></softBreak><softBreak></softBreak>bar[]</codeBlock>\r\n    //\t\t<codeBlock>foo<softBreak></softBreak><softBreak></softBreak> a []</codeBlock>\r\n    //\r\n    else {\r\n        return false;\r\n    }\r\n    // We're doing everything in a single change block to have a single undo step.\r\n    editor.model.change(writer => {\r\n        // Remove the last <softBreak>s and all white space characters that followed them.\r\n        writer.remove(emptyLineRangeToRemoveOnEnter);\r\n        // \"Clone\" the <codeBlock> in the standard way.\r\n        editor.execute('enter');\r\n        const newBlock = modelDoc.selection.anchor.parent;\r\n        // Make the cloned <codeBlock> a regular <paragraph> (with clean attributes, so no language).\r\n        writer.rename(newBlock, DEFAULT_ELEMENT);\r\n        editor.model.schema.removeDisallowedAttributes([newBlock], writer);\r\n    });\r\n    // Eye candy.\r\n    view.scrollToTheSelection();\r\n    return true;\r\n}\r\nfunction isEmptyishTextNode(node) {\r\n    return node && node.is('$text') && !node.data.match(/\\S/);\r\n}\r\nfunction isSoftBreakNode(node) {\r\n    return node && node.is('element', 'softBreak');\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./codeblock.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module code-block/codeblockui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Collection } from 'ckeditor5/src/utils';\r\nimport { Model, SplitButtonView, createDropdown, addListToDropdown } from 'ckeditor5/src/ui';\r\nimport { getNormalizedAndLocalizedLanguageDefinitions } from './utils';\r\nimport codeBlockIcon from '../theme/icons/codeblock.svg';\r\nimport '../theme/codeblock.css';\r\n/**\r\n * The code block UI plugin.\r\n *\r\n * Introduces the `'codeBlock'` dropdown.\r\n */\r\nexport default class CodeBlockUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'CodeBlockUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const componentFactory = editor.ui.componentFactory;\r\n        const normalizedLanguageDefs = getNormalizedAndLocalizedLanguageDefinitions(editor);\r\n        componentFactory.add('codeBlock', locale => {\r\n            const command = editor.commands.get('codeBlock');\r\n            const dropdownView = createDropdown(locale, SplitButtonView);\r\n            const splitButtonView = dropdownView.buttonView;\r\n            const accessibleLabel = t('Insert code block');\r\n            splitButtonView.set({\r\n                label: accessibleLabel,\r\n                tooltip: true,\r\n                icon: codeBlockIcon,\r\n                isToggleable: true\r\n            });\r\n            splitButtonView.bind('isOn').to(command, 'value', value => !!value);\r\n            splitButtonView.on('execute', () => {\r\n                editor.execute('codeBlock', {\r\n                    usePreviousLanguageChoice: true\r\n                });\r\n                editor.editing.view.focus();\r\n            });\r\n            dropdownView.on('execute', evt => {\r\n                editor.execute('codeBlock', {\r\n                    language: evt.source._codeBlockLanguage,\r\n                    forceValue: true\r\n                });\r\n                editor.editing.view.focus();\r\n            });\r\n            dropdownView.class = 'ck-code-block-dropdown';\r\n            dropdownView.bind('isEnabled').to(command);\r\n            addListToDropdown(dropdownView, () => this._getLanguageListItemDefinitions(normalizedLanguageDefs), {\r\n                role: 'menu',\r\n                ariaLabel: accessibleLabel\r\n            });\r\n            return dropdownView;\r\n        });\r\n    }\r\n    /**\r\n     * A helper returning a collection of the `codeBlock` dropdown items representing languages\r\n     * available for the user to choose from.\r\n     */\r\n    _getLanguageListItemDefinitions(normalizedLanguageDefs) {\r\n        const editor = this.editor;\r\n        const command = editor.commands.get('codeBlock');\r\n        const itemDefinitions = new Collection();\r\n        for (const languageDef of normalizedLanguageDefs) {\r\n            const definition = {\r\n                type: 'button',\r\n                model: new Model({\r\n                    _codeBlockLanguage: languageDef.language,\r\n                    label: languageDef.label,\r\n                    role: 'menuitemradio',\r\n                    withText: true\r\n                })\r\n            };\r\n            definition.model.bind('isOn').to(command, 'value', value => {\r\n                return value === definition.model._codeBlockLanguage;\r\n            });\r\n            itemDefinitions.add(definition);\r\n        }\r\n        return itemDefinitions;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module code-block/codeblock\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport CodeBlockEditing from './codeblockediting';\r\nimport CodeBlockUI from './codeblockui';\r\n/**\r\n * The code block plugin.\r\n *\r\n * For more information about this feature check the {@glink api/code-block package page} and the\r\n * {@glink features/code-blocks code block} feature guide.\r\n *\r\n * This is a \"glue\" plugin that loads the {@link module:code-block/codeblockediting~CodeBlockEditing code block editing feature}\r\n * and the {@link module:code-block/codeblockui~CodeBlockUI code block UI feature}.\r\n */\r\nexport default class CodeBlock extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [CodeBlockEditing, CodeBlockUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'CodeBlock';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module essentials/essentials\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Clipboard } from 'ckeditor5/src/clipboard';\r\nimport { Enter, ShiftEnter } from 'ckeditor5/src/enter';\r\nimport { SelectAll } from 'ckeditor5/src/select-all';\r\nimport { Typing } from 'ckeditor5/src/typing';\r\nimport { Undo } from 'ckeditor5/src/undo';\r\n/**\r\n * A plugin including all essential editing features. It represents a set of features that enables similar functionalities\r\n * to a `<textarea>` element.\r\n *\r\n * It includes:\r\n *\r\n * * {@link module:clipboard/clipboard~Clipboard},\r\n * * {@link module:enter/enter~Enter},\r\n * * {@link module:select-all/selectall~SelectAll},\r\n * * {@link module:enter/shiftenter~ShiftEnter},\r\n * * {@link module:typing/typing~Typing},\r\n * * {@link module:undo/undo~Undo}.\r\n *\r\n * This plugin set does not define any block-level containers (such as {@link module:paragraph/paragraph~Paragraph}).\r\n * If your editor is supposed to handle block content, make sure to include it.\r\n */\r\nexport default class Essentials extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Clipboard, Enter, SelectAll, ShiftEnter, Typing, Undo];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Essentials';\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./findandreplaceform.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module find-and-replace/ui/findandreplaceformview\r\n */\r\nimport { View, ButtonView, FormHeaderView, LabeledFieldView, Model, FocusCycler, createLabeledInputText, submitHandler, ViewCollection, createDropdown, addListToDropdown } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler, Collection, Rect, isVisible } from 'ckeditor5/src/utils';\r\n// See: #8833.\r\n// eslint-disable-next-line ckeditor5-rules/ckeditor-imports\r\nimport '@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css';\r\nimport '../../theme/findandreplaceform.css';\r\n// eslint-disable-next-line ckeditor5-rules/ckeditor-imports\r\nimport previousArrow from '@ckeditor/ckeditor5-ui/theme/icons/previous-arrow.svg';\r\nimport { icons } from 'ckeditor5/src/core';\r\n/**\r\n * The find and replace form view class.\r\n *\r\n * See {@link module:find-and-replace/ui/findandreplaceformview~FindAndReplaceFormView}.\r\n */\r\nexport default class FindAndReplaceFormView extends View {\r\n    /**\r\n     * Creates a view of find and replace form.\r\n     *\r\n     * @param locale The localization services instance.\r\n     */\r\n    constructor(locale) {\r\n        super(locale);\r\n        const t = locale.t;\r\n        this.set('matchCount', 0);\r\n        this.set('highlightOffset', 0);\r\n        this.set('isDirty', false);\r\n        this.set('_areCommandsEnabled', {});\r\n        this.set('_resultsCounterText', '');\r\n        this.set('_matchCase', false);\r\n        this.set('_wholeWordsOnly', false);\r\n        this.bind('_searchResultsFound').to(this, 'matchCount', this, 'isDirty', (matchCount, isDirty) => {\r\n            return matchCount > 0 && !isDirty;\r\n        });\r\n        this._findInputView = this._createInputField(t('Find in text…'));\r\n        this._replaceInputView = this._createInputField(t('Replace with…'));\r\n        this._findButtonView = this._createButton({\r\n            label: t('Find'),\r\n            class: 'ck-button-find ck-button-action',\r\n            withText: true\r\n        });\r\n        this._findPrevButtonView = this._createButton({\r\n            label: t('Previous result'),\r\n            class: 'ck-button-prev',\r\n            icon: previousArrow,\r\n            keystroke: 'Shift+F3',\r\n            tooltip: true\r\n        });\r\n        this._findNextButtonView = this._createButton({\r\n            label: t('Next result'),\r\n            class: 'ck-button-next',\r\n            icon: previousArrow,\r\n            keystroke: 'F3',\r\n            tooltip: true\r\n        });\r\n        this._optionsDropdown = this._createOptionsDropdown();\r\n        this._replaceButtonView = this._createButton({\r\n            label: t('Replace'),\r\n            class: 'ck-button-replace',\r\n            withText: true\r\n        });\r\n        this._replaceAllButtonView = this._createButton({\r\n            label: t('Replace all'),\r\n            class: 'ck-button-replaceall',\r\n            withText: true\r\n        });\r\n        this._findFieldsetView = this._createFindFieldset();\r\n        this._replaceFieldsetView = this._createReplaceFieldset();\r\n        this._focusTracker = new FocusTracker();\r\n        this._keystrokes = new KeystrokeHandler();\r\n        this._focusables = new ViewCollection();\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this._focusTracker,\r\n            keystrokeHandler: this._keystrokes,\r\n            actions: {\r\n                // Navigate form fields backwards using the <kbd>Shift</kbd> + <kbd>Tab</kbd> keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate form fields forwards using the <kbd>Tab</kbd> key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        this.setTemplate({\r\n            tag: 'form',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-find-and-replace-form'\r\n                ],\r\n                tabindex: '-1'\r\n            },\r\n            children: [\r\n                new FormHeaderView(locale, {\r\n                    label: t('Find and replace')\r\n                }),\r\n                this._findFieldsetView,\r\n                this._replaceFieldsetView\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        submitHandler({ view: this });\r\n        this._initFocusCycling();\r\n        this._initKeystrokeHandling();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this._focusTracker.destroy();\r\n        this._keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Focuses the fist {@link #_focusables} in the form.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * Resets the form before re-appearing.\r\n     *\r\n     * It clears error messages, hides the match counter and disables the replace feature\r\n     * until the next hit of the \"Find\" button.\r\n     *\r\n     * **Note**: It does not reset inputs and options, though. This way the form works better in editors with\r\n     * disappearing toolbar (e.g. BalloonEditor): hiding the toolbar by accident (together with the find and replace UI)\r\n     * does not require filling the entire form again.\r\n     */\r\n    reset() {\r\n        this._findInputView.errorText = null;\r\n        this.isDirty = true;\r\n    }\r\n    /**\r\n     * Returns the value of the find input.\r\n     */\r\n    get _textToFind() {\r\n        return this._findInputView.fieldView.element.value;\r\n    }\r\n    /**\r\n     * Returns the value of the replace input.\r\n     */\r\n    get _textToReplace() {\r\n        return this._replaceInputView.fieldView.element.value;\r\n    }\r\n    /**\r\n     * Configures and returns the `<fieldset>` aggregating all find controls.\r\n     */\r\n    _createFindFieldset() {\r\n        const locale = this.locale;\r\n        const fieldsetView = new View(locale);\r\n        // Typing in the find field invalidates all previous results (the form is \"dirty\").\r\n        this._findInputView.fieldView.on('input', () => {\r\n            this.isDirty = true;\r\n        });\r\n        this._findButtonView.on('execute', this._onFindButtonExecute.bind(this));\r\n        // Pressing prev/next buttons fires related event on the form.\r\n        this._findPrevButtonView.delegate('execute').to(this, 'findPrevious');\r\n        this._findNextButtonView.delegate('execute').to(this, 'findNext');\r\n        // Prev/next buttons will be disabled when related editor command gets disabled.\r\n        this._findPrevButtonView.bind('isEnabled').to(this, '_areCommandsEnabled', ({ findPrevious }) => findPrevious);\r\n        this._findNextButtonView.bind('isEnabled').to(this, '_areCommandsEnabled', ({ findNext }) => findNext);\r\n        this._injectFindResultsCounter();\r\n        fieldsetView.setTemplate({\r\n            tag: 'fieldset',\r\n            attributes: {\r\n                class: ['ck', 'ck-find-and-replace-form__find']\r\n            },\r\n            children: [\r\n                this._findInputView,\r\n                this._findButtonView,\r\n                this._findPrevButtonView,\r\n                this._findNextButtonView\r\n            ]\r\n        });\r\n        return fieldsetView;\r\n    }\r\n    /**\r\n     * The action performed when the {@link #_findButtonView} is pressed.\r\n     */\r\n    _onFindButtonExecute() {\r\n        // When hitting \"Find\" in an empty input, an error should be displayed.\r\n        // Also, if the form was \"dirty\", it should remain so.\r\n        if (!this._textToFind) {\r\n            const t = this.t;\r\n            this._findInputView.errorText = t('Text to find must not be empty.');\r\n            return;\r\n        }\r\n        // Hitting \"Find\" automatically clears the dirty state.\r\n        this.isDirty = false;\r\n        this.fire('findNext', {\r\n            searchText: this._textToFind,\r\n            matchCase: this._matchCase,\r\n            wholeWords: this._wholeWordsOnly\r\n        });\r\n    }\r\n    /**\r\n     * Configures an injects the find results counter displaying a \"N of M\" label of the {@link #_findInputView}.\r\n     */\r\n    _injectFindResultsCounter() {\r\n        const locale = this.locale;\r\n        const t = locale.t;\r\n        const bind = this.bindTemplate;\r\n        const resultsCounterView = new View(this.locale);\r\n        this.bind('_resultsCounterText').to(this, 'highlightOffset', this, 'matchCount', (highlightOffset, matchCount) => t('%0 of %1', [highlightOffset, matchCount]));\r\n        resultsCounterView.setTemplate({\r\n            tag: 'span',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-results-counter',\r\n                    // The counter only makes sense when the field text corresponds to search results in the editing.\r\n                    bind.if('isDirty', 'ck-hidden')\r\n                ]\r\n            },\r\n            children: [\r\n                {\r\n                    text: bind.to('_resultsCounterText')\r\n                }\r\n            ]\r\n        });\r\n        // The whole idea is that when the text of the counter changes, its width also increases/decreases and\r\n        // it consumes more or less space over the input. The input, on the other hand, should adjust it's right\r\n        // padding so its *entire* text always remains visible and available to the user.\r\n        const updateFindInputPadding = () => {\r\n            const inputElement = this._findInputView.fieldView.element;\r\n            // Don't adjust the padding if the input (also: counter) were not rendered or not inserted into DOM yet.\r\n            if (!inputElement || !isVisible(inputElement)) {\r\n                return;\r\n            }\r\n            const counterWidth = new Rect(resultsCounterView.element).width;\r\n            const paddingPropertyName = locale.uiLanguageDirection === 'ltr' ? 'paddingRight' : 'paddingLeft';\r\n            if (!counterWidth) {\r\n                inputElement.style[paddingPropertyName] = '';\r\n            }\r\n            else {\r\n                inputElement.style[paddingPropertyName] = `calc( 2 * var(--ck-spacing-standard) + ${counterWidth}px )`;\r\n            }\r\n        };\r\n        // Adjust the input padding when the text of the counter changes, for instance \"1 of 200\" is narrower than \"123 of 200\".\r\n        // Using \"low\" priority to let the text be set by the template binding first.\r\n        this.on('change:_resultsCounterText', updateFindInputPadding, { priority: 'low' });\r\n        // Adjust the input padding when the counter shows or hides. When hidden, there should be no padding. When it shows, the\r\n        // padding should be set according to the text of the counter.\r\n        // Using \"low\" priority to let the text be set by the template binding first.\r\n        this.on('change:isDirty', updateFindInputPadding, { priority: 'low' });\r\n        // Put the counter element next to the <input> in the find field.\r\n        this._findInputView.template.children[0].children.push(resultsCounterView);\r\n    }\r\n    /**\r\n     * Configures and returns the `<fieldset>` aggregating all replace controls.\r\n     */\r\n    _createReplaceFieldset() {\r\n        const locale = this.locale;\r\n        const t = locale.t;\r\n        const fieldsetView = new View(this.locale);\r\n        this._replaceButtonView.bind('isEnabled').to(this, '_areCommandsEnabled', this, '_searchResultsFound', ({ replace }, resultsFound) => replace && resultsFound);\r\n        this._replaceAllButtonView.bind('isEnabled').to(this, '_areCommandsEnabled', this, '_searchResultsFound', ({ replaceAll }, resultsFound) => replaceAll && resultsFound);\r\n        this._replaceInputView.bind('isEnabled').to(this, '_areCommandsEnabled', this, '_searchResultsFound', ({ replace }, resultsFound) => replace && resultsFound);\r\n        this._replaceInputView.bind('infoText').to(this._replaceInputView, 'isEnabled', this._replaceInputView, 'isFocused', (isEnabled, isFocused) => {\r\n            if (isEnabled || !isFocused) {\r\n                return '';\r\n            }\r\n            return t('Tip: Find some text first in order to replace it.');\r\n        });\r\n        this._replaceButtonView.on('execute', () => {\r\n            this.fire('replace', {\r\n                searchText: this._textToFind,\r\n                replaceText: this._textToReplace\r\n            });\r\n        });\r\n        this._replaceAllButtonView.on('execute', () => {\r\n            this.fire('replaceAll', {\r\n                searchText: this._textToFind,\r\n                replaceText: this._textToReplace\r\n            });\r\n            this.focus();\r\n        });\r\n        fieldsetView.setTemplate({\r\n            tag: 'fieldset',\r\n            attributes: {\r\n                class: ['ck', 'ck-find-and-replace-form__replace']\r\n            },\r\n            children: [\r\n                this._replaceInputView,\r\n                this._optionsDropdown,\r\n                this._replaceButtonView,\r\n                this._replaceAllButtonView\r\n            ]\r\n        });\r\n        return fieldsetView;\r\n    }\r\n    /**\r\n     * Creates, configures and returns and instance of a dropdown allowing users to narrow\r\n     * the search criteria down. The dropdown has a list with switch buttons for each option.\r\n     */\r\n    _createOptionsDropdown() {\r\n        const locale = this.locale;\r\n        const t = locale.t;\r\n        const dropdownView = createDropdown(this.locale);\r\n        dropdownView.class = 'ck-options-dropdown';\r\n        dropdownView.buttonView.set({\r\n            withText: false,\r\n            label: t('Show options'),\r\n            icon: icons.cog,\r\n            tooltip: true\r\n        });\r\n        const matchCaseModel = new Model({\r\n            withText: true,\r\n            label: t('Match case'),\r\n            // A dummy read-only prop to make it easy to tell which switch was toggled.\r\n            _isMatchCaseSwitch: true\r\n        });\r\n        const wholeWordsOnlyModel = new Model({\r\n            withText: true,\r\n            label: t('Whole words only')\r\n        });\r\n        // Let the switches be controlled by form's observable properties.\r\n        matchCaseModel.bind('isOn').to(this, '_matchCase');\r\n        wholeWordsOnlyModel.bind('isOn').to(this, '_wholeWordsOnly');\r\n        // Update the state of the form when a switch is toggled.\r\n        dropdownView.on('execute', evt => {\r\n            if (evt.source._isMatchCaseSwitch) {\r\n                this._matchCase = !this._matchCase;\r\n            }\r\n            else {\r\n                this._wholeWordsOnly = !this._wholeWordsOnly;\r\n            }\r\n            // Toggling a switch makes the form dirty because this changes search criteria\r\n            // just like typing text of the find input.\r\n            this.isDirty = true;\r\n        });\r\n        addListToDropdown(dropdownView, new Collection([\r\n            { type: 'switchbutton', model: matchCaseModel },\r\n            { type: 'switchbutton', model: wholeWordsOnlyModel }\r\n        ]));\r\n        return dropdownView;\r\n    }\r\n    /**\r\n     * Initializes the {@link #_focusables} and {@link #_focusTracker} to allow navigation\r\n     * using <kbd>Tab</kbd> and <kbd>Shift</kbd>+<kbd>Tab</kbd> keystrokes in the right order.\r\n     */\r\n    _initFocusCycling() {\r\n        const childViews = [\r\n            this._findInputView,\r\n            this._findButtonView,\r\n            this._findPrevButtonView,\r\n            this._findNextButtonView,\r\n            this._replaceInputView,\r\n            this._optionsDropdown,\r\n            this._replaceButtonView,\r\n            this._replaceAllButtonView\r\n        ];\r\n        childViews.forEach(v => {\r\n            // Register the view as focusable.\r\n            this._focusables.add(v);\r\n            // Register the view in the focus tracker.\r\n            this._focusTracker.add(v.element);\r\n        });\r\n    }\r\n    /**\r\n     * Initializes the keystroke handling in the form.\r\n     */\r\n    _initKeystrokeHandling() {\r\n        const stopPropagation = (data) => data.stopPropagation();\r\n        const stopPropagationAndPreventDefault = (data) => {\r\n            data.stopPropagation();\r\n            data.preventDefault();\r\n        };\r\n        // Start listening for the keystrokes coming from #element.\r\n        this._keystrokes.listenTo(this.element);\r\n        // Find the next result upon F3.\r\n        this._keystrokes.set('f3', event => {\r\n            stopPropagationAndPreventDefault(event);\r\n            this._findNextButtonView.fire('execute');\r\n        });\r\n        // Find the previous result upon F3.\r\n        this._keystrokes.set('shift+f3', event => {\r\n            stopPropagationAndPreventDefault(event);\r\n            this._findPrevButtonView.fire('execute');\r\n        });\r\n        // Find or replace upon pressing Enter in the find and replace fields.\r\n        this._keystrokes.set('enter', event => {\r\n            const target = event.target;\r\n            if (target === this._findInputView.fieldView.element) {\r\n                if (this._areCommandsEnabled.findNext) {\r\n                    this._findNextButtonView.fire('execute');\r\n                }\r\n                else {\r\n                    this._findButtonView.fire('execute');\r\n                }\r\n                stopPropagationAndPreventDefault(event);\r\n            }\r\n            else if (target === this._replaceInputView.fieldView.element && !this.isDirty) {\r\n                this._replaceButtonView.fire('execute');\r\n                stopPropagationAndPreventDefault(event);\r\n            }\r\n        });\r\n        // Find previous upon pressing Shift+Enter in the find field.\r\n        this._keystrokes.set('shift+enter', event => {\r\n            const target = event.target;\r\n            if (target !== this._findInputView.fieldView.element) {\r\n                return;\r\n            }\r\n            if (this._areCommandsEnabled.findPrevious) {\r\n                this._findPrevButtonView.fire('execute');\r\n            }\r\n            else {\r\n                this._findButtonView.fire('execute');\r\n            }\r\n            stopPropagationAndPreventDefault(event);\r\n        });\r\n        // Since the form is in the dropdown panel which is a child of the toolbar, the toolbar's\r\n        // keystroke handler would take over the key management in the URL input.\r\n        // We need to prevent this ASAP. Otherwise, the basic caret movement using the arrow keys will be impossible.\r\n        this._keystrokes.set('arrowright', stopPropagation);\r\n        this._keystrokes.set('arrowleft', stopPropagation);\r\n        this._keystrokes.set('arrowup', stopPropagation);\r\n        this._keystrokes.set('arrowdown', stopPropagation);\r\n    }\r\n    /**\r\n     * Creates a button view.\r\n     *\r\n     * @param options The properties of the `ButtonView`.\r\n     * @returns The button view instance.\r\n     */\r\n    _createButton(options) {\r\n        const button = new ButtonView(this.locale);\r\n        button.set(options);\r\n        return button;\r\n    }\r\n    /**\r\n     * Creates a labeled input view.\r\n     *\r\n     * @param label The input label.\r\n     * @returns The labeled input view instance.\r\n     */\r\n    _createInputField(label) {\r\n        const labeledInput = new LabeledFieldView(this.locale, createLabeledInputText);\r\n        labeledInput.label = label;\r\n        return labeledInput;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module find-and-replace/findandreplaceui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { createDropdown, CssTransitionDisablerMixin } from 'ckeditor5/src/ui';\r\nimport FindAndReplaceFormView from './ui/findandreplaceformview';\r\nimport loupeIcon from '../theme/icons/find-replace.svg';\r\n/**\r\n * The default find and replace UI.\r\n *\r\n * It registers the `'findAndReplace'` UI button in the editor's {@link module:ui/componentfactory~ComponentFactory component factory}.\r\n * that uses the {@link module:find-and-replace/findandreplace~FindAndReplace FindAndReplace} plugin API.\r\n */\r\nexport default class FindAndReplaceUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FindAndReplaceUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this.formView = null;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Register the toolbar dropdown component.\r\n        editor.ui.componentFactory.add('findAndReplace', locale => {\r\n            const dropdown = createDropdown(locale);\r\n            // Dropdown should be disabled when in source editing mode. See #10001.\r\n            const findCommand = editor.commands.get('find');\r\n            dropdown.bind('isEnabled').to(findCommand);\r\n            dropdown.once('change:isOpen', () => {\r\n                this.formView = new (CssTransitionDisablerMixin(FindAndReplaceFormView))(editor.locale);\r\n                dropdown.panelView.children.add(this.formView);\r\n                this._setupFormView(this.formView);\r\n            });\r\n            // Every time a dropdown is opened, the search text field should get focused and selected for better UX.\r\n            // Note: Using the low priority here to make sure the following listener starts working after\r\n            // the default action of the drop-down is executed (i.e. the panel showed up). Otherwise,\r\n            // the invisible form/input cannot be focused/selected.\r\n            //\r\n            // Each time a dropdown is closed, move the focus back to the find and replace toolbar button\r\n            // and let the find and replace editing feature know that all search results can be invalidated\r\n            // and no longer should be marked in the content.\r\n            dropdown.on('change:isOpen', (event, name, isOpen) => {\r\n                if (isOpen) {\r\n                    this.formView.disableCssTransitions();\r\n                    this.formView.reset();\r\n                    this.formView._findInputView.fieldView.select();\r\n                    this.formView.enableCssTransitions();\r\n                }\r\n                else {\r\n                    this.fire('searchReseted');\r\n                }\r\n            }, { priority: 'low' });\r\n            this._setupDropdownButton(dropdown);\r\n            return dropdown;\r\n        });\r\n    }\r\n    /**\r\n     * Sets up the find and replace button.\r\n     */\r\n    _setupDropdownButton(dropdown) {\r\n        const editor = this.editor;\r\n        const t = editor.locale.t;\r\n        dropdown.buttonView.set({\r\n            icon: loupeIcon,\r\n            label: t('Find and replace'),\r\n            keystroke: 'CTRL+F',\r\n            tooltip: true\r\n        });\r\n        editor.keystrokes.set('Ctrl+F', (data, cancelEvent) => {\r\n            if (dropdown.isEnabled) {\r\n                dropdown.isOpen = true;\r\n                cancelEvent();\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Sets up the form view for the find and replace.\r\n     *\r\n     * @param formView A related form view.\r\n     */\r\n    _setupFormView(formView) {\r\n        const editor = this.editor;\r\n        const commands = editor.commands;\r\n        const findAndReplaceEditing = this.editor.plugins.get('FindAndReplaceEditing');\r\n        const editingState = findAndReplaceEditing.state;\r\n        const sortMapping = { before: -1, same: 0, after: 1, different: 1 };\r\n        // Let the form know which result is being highlighted.\r\n        formView.bind('highlightOffset').to(editingState, 'highlightedResult', highlightedResult => {\r\n            if (!highlightedResult) {\r\n                return 0;\r\n            }\r\n            return Array.from(editingState.results)\r\n                .sort((a, b) => sortMapping[a.marker.getStart().compareWith(b.marker.getStart())])\r\n                .indexOf(highlightedResult) + 1;\r\n        });\r\n        // Let the form know how many results were found in total.\r\n        formView.listenTo(editingState.results, 'change', () => {\r\n            formView.matchCount = editingState.results.length;\r\n        });\r\n        // Command states are used to enable/disable individual form controls.\r\n        // To keep things simple, instead of binding 4 individual observables, there's only one that combines every\r\n        // commands' isEnabled state. Yes, it will change more often but this simplifies the structure of the form.\r\n        const findNextCommand = commands.get('findNext');\r\n        const findPreviousCommand = commands.get('findPrevious');\r\n        const replaceCommand = commands.get('replace');\r\n        const replaceAllCommand = commands.get('replaceAll');\r\n        formView.bind('_areCommandsEnabled').to(findNextCommand, 'isEnabled', findPreviousCommand, 'isEnabled', replaceCommand, 'isEnabled', replaceAllCommand, 'isEnabled', (findNext, findPrevious, replace, replaceAll) => ({ findNext, findPrevious, replace, replaceAll }));\r\n        // The UI plugin works as an interface between the form and the editing part of the feature.\r\n        formView.delegate('findNext', 'findPrevious', 'replace', 'replaceAll').to(this);\r\n        // Let the feature know that search results are no longer relevant because the user changed the searched phrase\r\n        // (or options) but didn't hit the \"Find\" button yet (e.g. still typing).\r\n        formView.on('change:isDirty', (evt, data, isDirty) => {\r\n            if (isDirty) {\r\n                this.fire('searchReseted');\r\n            }\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"m12.87 13.786 1.532-1.286 3.857 4.596a1 1 0 1 1-1.532 1.286l-3.857-4.596z\\\"/><path d=\\\"M16.004 8.5a6.5 6.5 0 0 1-9.216 5.905c-1.154-.53-.863-1.415-.663-1.615.194-.194.564-.592 1.635-.141a4.5 4.5 0 0 0 5.89-5.904l-.104-.227 1.332-1.331c.045-.046.196-.041.224.007a6.47 6.47 0 0 1 .902 3.306zm-3.4-5.715c.562.305.742 1.106.354 1.494-.388.388-.995.414-1.476.178a4.5 4.5 0 0 0-6.086 5.882l.114.236-1.348 1.349c-.038.037-.17.022-.198-.023a6.5 6.5 0 0 1 5.54-9.9 6.469 6.469 0 0 1 3.1.784z\\\"/><path d=\\\"M4.001 11.93.948 8.877a.2.2 0 0 1 .141-.341h6.106a.2.2 0 0 1 .141.341L4.283 11.93a.2.2 0 0 1-.282 0zm11.083-6.789 3.053 3.053a.2.2 0 0 1-.14.342H11.89a.2.2 0 0 1-.14-.342l3.052-3.053a.2.2 0 0 1 .282 0z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The find command. It is used by the {@link module:find-and-replace/findandreplace~FindAndReplace find and replace feature}.\r\n */\r\nexport default class FindCommand extends Command {\r\n    /**\r\n     * Creates a new `FindCommand` instance.\r\n     *\r\n     * @param editor The editor on which this command will be used.\r\n     * @param state An object to hold plugin state.\r\n     */\r\n    constructor(editor, state) {\r\n        super(editor);\r\n        // The find command is always enabled.\r\n        this.isEnabled = true;\r\n        // It does not affect data so should be enabled in read-only mode.\r\n        this.affectsData = false;\r\n        this._state = state;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @param callbackOrText\r\n     * @param options Options object.\r\n     * @param options.matchCase If set to `true`, the letter case will be matched.\r\n     * @param options.wholeWords If set to `true`, only whole words that match `callbackOrText` will be matched.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute(callbackOrText, { matchCase, wholeWords } = {}) {\r\n        const { editor } = this;\r\n        const { model } = editor;\r\n        const findAndReplaceUtils = editor.plugins.get('FindAndReplaceUtils');\r\n        let findCallback;\r\n        // Allow to execute `find()` on a plugin with a keyword only.\r\n        if (typeof callbackOrText === 'string') {\r\n            findCallback = findAndReplaceUtils.findByTextCallback(callbackOrText, { matchCase, wholeWords });\r\n            this._state.searchText = callbackOrText;\r\n        }\r\n        else {\r\n            findCallback = callbackOrText;\r\n        }\r\n        // Initial search is done on all nodes in all roots inside the content.\r\n        const results = model.document.getRootNames()\r\n            .reduce(((currentResults, rootName) => findAndReplaceUtils.updateFindResultFromRange(model.createRangeIn(model.document.getRoot(rootName)), model, findCallback, currentResults)), null);\r\n        this._state.clear(model);\r\n        this._state.results.addMany(results);\r\n        this._state.highlightedResult = results.get(0);\r\n        if (typeof callbackOrText === 'string') {\r\n            this._state.searchText = callbackOrText;\r\n        }\r\n        this._state.matchCase = !!matchCase;\r\n        this._state.matchWholeWords = !!wholeWords;\r\n        return {\r\n            results,\r\n            findCallback\r\n        };\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module find-and-replace/replacecommandbase\r\n*/\r\nimport { Command } from 'ckeditor5/src/core';\r\nexport class ReplaceCommandBase extends Command {\r\n    /**\r\n     * Creates a new `ReplaceCommand` instance.\r\n     *\r\n     * @param editor Editor on which this command will be used.\r\n     * @param state An object to hold plugin state.\r\n     */\r\n    constructor(editor, state) {\r\n        super(editor);\r\n        // The replace command is always enabled.\r\n        this.isEnabled = true;\r\n        this._state = state;\r\n        // Since this command executes on particular result independent of selection, it should be checked directly in execute block.\r\n        this._isEnabledBasedOnSelection = false;\r\n    }\r\n    /**\r\n     * Common logic for both `replace` commands.\r\n     * Replace a given find result by a string or a callback.\r\n     *\r\n     * @param result A single result from the find command.\r\n     */\r\n    _replace(replacementText, result) {\r\n        const { model } = this.editor;\r\n        const range = result.marker.getRange();\r\n        // Don't replace a result that is in non-editable place.\r\n        if (!model.canEditAt(range)) {\r\n            return;\r\n        }\r\n        model.change(writer => {\r\n            // Don't replace a result (marker) that found its way into the $graveyard (e.g. removed by collaborators).\r\n            if (range.root.rootName === '$graveyard') {\r\n                this._state.results.remove(result);\r\n                return;\r\n            }\r\n            let textAttributes = {};\r\n            for (const item of range.getItems()) {\r\n                if (item.is('$text') || item.is('$textProxy')) {\r\n                    textAttributes = item.getAttributes();\r\n                    break;\r\n                }\r\n            }\r\n            model.insertContent(writer.createText(replacementText, textAttributes), range);\r\n            if (this._state.results.has(result)) {\r\n                this._state.results.remove(result);\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { ReplaceCommandBase } from './replacecommandbase';\r\n/**\r\n * The replace command. It is used by the {@link module:find-and-replace/findandreplace~FindAndReplace find and replace feature}.\r\n */\r\nexport default class ReplaceCommand extends ReplaceCommandBase {\r\n    /**\r\n     * Replace a given find result by a string or a callback.\r\n     *\r\n     * @param result A single result from the find command.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute(replacementText, result) {\r\n        this._replace(replacementText, result);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module find-and-replace/replaceallcommand\r\n */\r\nimport { Collection } from 'ckeditor5/src/utils';\r\nimport { ReplaceCommandBase } from './replacecommandbase';\r\n/**\r\n * The replace all command. It is used by the {@link module:find-and-replace/findandreplace~FindAndReplace find and replace feature}.\r\n */\r\nexport default class ReplaceAllCommand extends ReplaceCommandBase {\r\n    /**\r\n     * Replaces all the occurrences of `textToReplace` with a given `newText` string.\r\n     *\r\n     * ```ts\r\n     *\treplaceAllCommand.execute( 'replaceAll', 'new text replacement', 'text to replace' );\r\n     * ```\r\n     *\r\n     * Alternatively you can call it from editor instance:\r\n     *\r\n     * ```ts\r\n     *\teditor.execute( 'replaceAll', 'new text', 'old text' );\r\n     * ```\r\n     *\r\n     * @param newText Text that will be inserted to the editor for each match.\r\n     * @param textToReplace Text to be replaced or a collection of matches\r\n     * as returned by the find command.\r\n     *\r\n     * @fires module:core/command~Command#event:execute\r\n     */\r\n    execute(newText, textToReplace) {\r\n        const { editor } = this;\r\n        const { model } = editor;\r\n        const findAndReplaceUtils = editor.plugins.get('FindAndReplaceUtils');\r\n        const results = textToReplace instanceof Collection ?\r\n            textToReplace : model.document.getRootNames()\r\n            .reduce(((currentResults, rootName) => findAndReplaceUtils.updateFindResultFromRange(model.createRangeIn(model.document.getRoot(rootName)), model, findAndReplaceUtils.findByTextCallback(textToReplace, this._state), currentResults)), null);\r\n        if (results.length) {\r\n            [...results].forEach(searchResult => {\r\n                // Just reuse logic from the replace command to replace a single match.\r\n                this._replace(newText, searchResult);\r\n            });\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module find-and-replace/findnextcommand\r\n*/\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The find next command. Moves the highlight to the next search result.\r\n *\r\n * It is used by the {@link module:find-and-replace/findandreplace~FindAndReplace find and replace feature}.\r\n */\r\nexport default class FindNextCommand extends Command {\r\n    /**\r\n     * Creates a new `FindNextCommand` instance.\r\n     *\r\n     * @param editor The editor on which this command will be used.\r\n     * @param state An object to hold plugin state.\r\n     */\r\n    constructor(editor, state) {\r\n        super(editor);\r\n        // It does not affect data so should be enabled in read-only mode.\r\n        this.affectsData = false;\r\n        this._state = state;\r\n        this.isEnabled = false;\r\n        this.listenTo(this._state.results, 'change', () => {\r\n            this.isEnabled = this._state.results.length > 1;\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.isEnabled = this._state.results.length > 1;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute() {\r\n        const results = this._state.results;\r\n        const currentIndex = results.getIndex(this._state.highlightedResult);\r\n        const nextIndex = currentIndex + 1 >= results.length ?\r\n            0 : currentIndex + 1;\r\n        this._state.highlightedResult = this._state.results.get(nextIndex);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module find-and-replace/findpreviouscommand\r\n*/\r\nimport FindNextCommand from './findnextcommand';\r\n/**\r\n * The find previous command. Moves the highlight to the previous search result.\r\n *\r\n * It is used by the {@link module:find-and-replace/findandreplace~FindAndReplace find and replace feature}.\r\n */\r\nexport default class FindPreviousCommand extends FindNextCommand {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute() {\r\n        const results = this._state.results;\r\n        const currentIndex = results.getIndex(this._state.highlightedResult);\r\n        const previousIndex = currentIndex - 1 < 0 ?\r\n            this._state.results.length - 1 : currentIndex - 1;\r\n        this._state.highlightedResult = this._state.results.get(previousIndex);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { ObservableMixin, Collection } from 'ckeditor5/src/utils';\r\n/**\r\n * The object storing find and replace plugin state for a given editor instance.\r\n */\r\nexport default class FindAndReplaceState extends ObservableMixin() {\r\n    /**\r\n     * Creates an instance of the state.\r\n     */\r\n    constructor(model) {\r\n        super();\r\n        this.set('results', new Collection());\r\n        this.set('highlightedResult', null);\r\n        this.set('searchText', '');\r\n        this.set('replaceText', '');\r\n        this.set('matchCase', false);\r\n        this.set('matchWholeWords', false);\r\n        this.results.on('change', (eventInfo, { removed, index }) => {\r\n            if (Array.from(removed).length) {\r\n                let highlightedResultRemoved = false;\r\n                model.change(writer => {\r\n                    for (const removedResult of removed) {\r\n                        if (this.highlightedResult === removedResult) {\r\n                            highlightedResultRemoved = true;\r\n                        }\r\n                        if (model.markers.has(removedResult.marker.name)) {\r\n                            writer.removeMarker(removedResult.marker);\r\n                        }\r\n                    }\r\n                });\r\n                if (highlightedResultRemoved) {\r\n                    const nextHighlightedIndex = index >= this.results.length ? 0 : index;\r\n                    this.highlightedResult = this.results.get(nextHighlightedIndex);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Cleans the state up and removes markers from the model.\r\n     */\r\n    clear(model) {\r\n        this.searchText = '';\r\n        model.change(writer => {\r\n            if (this.highlightedResult) {\r\n                const oldMatchId = this.highlightedResult.marker.name.split(':')[1];\r\n                const oldMarker = model.markers.get(`findResultHighlighted:${oldMatchId}`);\r\n                if (oldMarker) {\r\n                    writer.removeMarker(oldMarker);\r\n                }\r\n            }\r\n            [...this.results].forEach(({ marker }) => {\r\n                writer.removeMarker(marker);\r\n            });\r\n        });\r\n        this.results.clear();\r\n    }\r\n}\r\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","import Symbol from './_Symbol.js';\nimport arrayMap from './_arrayMap.js';\nimport isArray from './isArray.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nexport default baseToString;\n","import baseToString from './_baseToString.js';\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nexport default toString;\n","import toString from './toString.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n    reHasRegExpChar = RegExp(reRegExpChar.source);\n\n/**\n * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to escape.\n * @returns {string} Returns the escaped string.\n * @example\n *\n * _.escapeRegExp('[lodash](https://lodash.com/)');\n * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n */\nfunction escapeRegExp(string) {\n  string = toString(string);\n  return (string && reHasRegExpChar.test(string))\n    ? string.replace(reRegExpChar, '\\\\$&')\n    : string;\n}\n\nexport default escapeRegExp;\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Collection, uid } from 'ckeditor5/src/utils';\r\nimport { escapeRegExp } from 'lodash-es';\r\n/**\r\n * A set of helpers related to find and replace.\r\n */\r\nexport default class FindAndReplaceUtils extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FindAndReplaceUtils';\r\n    }\r\n    /**\r\n     * Executes findCallback and updates search results list.\r\n     *\r\n     * @param range The model range to scan for matches.\r\n     * @param model The model.\r\n     * @param findCallback The callback that should return `true` if provided text matches the search term.\r\n     * @param startResults An optional collection of find matches that the function should\r\n     * start with. This would be a collection returned by a previous `updateFindResultFromRange()` call.\r\n     * @returns A collection of objects describing find match.\r\n     *\r\n     * An example structure:\r\n     *\r\n     * ```js\r\n     * {\r\n     *\tid: resultId,\r\n     *\tlabel: foundItem.label,\r\n     *\tmarker\r\n     *\t}\r\n     * ```\r\n     */\r\n    updateFindResultFromRange(range, model, findCallback, startResults) {\r\n        const results = startResults || new Collection();\r\n        model.change(writer => {\r\n            [...range].forEach(({ type, item }) => {\r\n                if (type === 'elementStart') {\r\n                    if (model.schema.checkChild(item, '$text')) {\r\n                        const foundItems = findCallback({\r\n                            item,\r\n                            text: this.rangeToText(model.createRangeIn(item))\r\n                        });\r\n                        if (!foundItems) {\r\n                            return;\r\n                        }\r\n                        foundItems.forEach(foundItem => {\r\n                            const resultId = `findResult:${uid()}`;\r\n                            const marker = writer.addMarker(resultId, {\r\n                                usingOperation: false,\r\n                                affectsData: false,\r\n                                range: writer.createRange(writer.createPositionAt(item, foundItem.start), writer.createPositionAt(item, foundItem.end))\r\n                            });\r\n                            const index = findInsertIndex(results, marker);\r\n                            results.add({\r\n                                id: resultId,\r\n                                label: foundItem.label,\r\n                                marker\r\n                            }, index);\r\n                        });\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        return results;\r\n    }\r\n    /**\r\n     * Returns text representation of a range. The returned text length should be the same as range length.\r\n     * In order to achieve this, this function will replace inline elements (text-line) as new line character (\"\\n\").\r\n     *\r\n     * @param range The model range.\r\n     * @returns The text content of the provided range.\r\n     */\r\n    rangeToText(range) {\r\n        return Array.from(range.getItems()).reduce((rangeText, node) => {\r\n            // Trim text to a last occurrence of an inline element and update range start.\r\n            if (!(node.is('$text') || node.is('$textProxy'))) {\r\n                // Editor has only one inline element defined in schema: `<softBreak>` which is treated as new line character in blocks.\r\n                // Special handling might be needed for other inline elements (inline widgets).\r\n                return `${rangeText}\\n`;\r\n            }\r\n            return rangeText + node.data;\r\n        }, '');\r\n    }\r\n    /**\r\n     * Creates a text matching callback for a specified search term and matching options.\r\n     *\r\n     * @param searchTerm The search term.\r\n     * @param options Matching options.\r\n     * \t- options.matchCase=false If set to `true` letter casing will be ignored.\r\n     * \t- options.wholeWords=false If set to `true` only whole words that match `callbackOrText` will be matched.\r\n     */\r\n    findByTextCallback(searchTerm, options) {\r\n        let flags = 'gu';\r\n        if (!options.matchCase) {\r\n            flags += 'i';\r\n        }\r\n        let regExpQuery = `(${escapeRegExp(searchTerm)})`;\r\n        if (options.wholeWords) {\r\n            const nonLetterGroup = '[^a-zA-Z\\u00C0-\\u024F\\u1E00-\\u1EFF]';\r\n            if (!new RegExp('^' + nonLetterGroup).test(searchTerm)) {\r\n                regExpQuery = `(^|${nonLetterGroup}|_)${regExpQuery}`;\r\n            }\r\n            if (!new RegExp(nonLetterGroup + '$').test(searchTerm)) {\r\n                regExpQuery = `${regExpQuery}(?=_|${nonLetterGroup}|$)`;\r\n            }\r\n        }\r\n        const regExp = new RegExp(regExpQuery, flags);\r\n        function findCallback({ text }) {\r\n            const matches = [...text.matchAll(regExp)];\r\n            return matches.map(regexpMatchToFindResult);\r\n        }\r\n        return findCallback;\r\n    }\r\n}\r\n// Finds the appropriate index in the resultsList Collection.\r\nfunction findInsertIndex(resultsList, markerToInsert) {\r\n    const result = resultsList.find(({ marker }) => {\r\n        return markerToInsert.getStart().isBefore(marker.getStart());\r\n    });\r\n    return result ? resultsList.getIndex(result) : resultsList.length;\r\n}\r\n/**\r\n *  Maps RegExp match result to find result.\r\n */\r\nfunction regexpMatchToFindResult(matchResult) {\r\n    const lastGroupIndex = matchResult.length - 1;\r\n    let startOffset = matchResult.index;\r\n    // Searches with match all flag have an extra matching group with empty string or white space matched before the word.\r\n    // If the search term starts with the space already, there is no extra group even with match all flag on.\r\n    if (matchResult.length === 3) {\r\n        startOffset += matchResult[1].length;\r\n    }\r\n    return {\r\n        label: matchResult[lastGroupIndex],\r\n        start: startOffset,\r\n        end: startOffset + matchResult[lastGroupIndex].length\r\n    };\r\n}\r\n","import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./findandreplace.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module find-and-replace/findandreplaceediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { scrollViewportToShowTarget } from 'ckeditor5/src/utils';\r\nimport FindCommand from './findcommand';\r\nimport ReplaceCommand from './replacecommand';\r\nimport ReplaceAllCommand from './replaceallcommand';\r\nimport FindNextCommand from './findnextcommand';\r\nimport FindPreviousCommand from './findpreviouscommand';\r\nimport FindAndReplaceState from './findandreplacestate';\r\nimport FindAndReplaceUtils from './findandreplaceutils';\r\nimport { debounce } from 'lodash-es';\r\nimport '../theme/findandreplace.css';\r\nconst HIGHLIGHT_CLASS = 'ck-find-result_selected';\r\n/**\r\n * Reacts to document changes in order to update search list.\r\n */\r\nfunction onDocumentChange(results, editor, searchCallback) {\r\n    const changedNodes = new Set();\r\n    const removedMarkers = new Set();\r\n    const model = editor.model;\r\n    const changes = model.document.differ.getChanges();\r\n    // Get nodes in which changes happened to re-run a search callback on them.\r\n    changes.forEach(change => {\r\n        if (change.name === '$text' || model.schema.isInline(change.position.nodeAfter)) {\r\n            changedNodes.add(change.position.parent);\r\n            [...model.markers.getMarkersAtPosition(change.position)].forEach(markerAtChange => {\r\n                removedMarkers.add(markerAtChange.name);\r\n            });\r\n        }\r\n        else if (change.type === 'insert') {\r\n            changedNodes.add(change.position.nodeAfter);\r\n        }\r\n    });\r\n    // Get markers from removed nodes also.\r\n    model.document.differ.getChangedMarkers().forEach(({ name, data: { newRange } }) => {\r\n        if (newRange && newRange.start.root.rootName === '$graveyard') {\r\n            removedMarkers.add(name);\r\n        }\r\n    });\r\n    // Get markers from the updated nodes and remove all (search will be re-run on these nodes).\r\n    changedNodes.forEach(node => {\r\n        const markersInNode = [...model.markers.getMarkersIntersectingRange(model.createRangeIn(node))];\r\n        markersInNode.forEach(marker => removedMarkers.add(marker.name));\r\n    });\r\n    // Remove results & markers from the changed part of content.\r\n    model.change(writer => {\r\n        removedMarkers.forEach(markerName => {\r\n            // Remove the result first - in order to prevent rendering a removed marker.\r\n            if (results.has(markerName)) {\r\n                results.remove(markerName);\r\n            }\r\n            writer.removeMarker(markerName);\r\n        });\r\n    });\r\n    // Run search callback again on updated nodes.\r\n    changedNodes.forEach(nodeToCheck => {\r\n        const findAndReplaceUtils = editor.plugins.get('FindAndReplaceUtils');\r\n        findAndReplaceUtils.updateFindResultFromRange(model.createRangeOn(nodeToCheck), model, searchCallback, results);\r\n    });\r\n}\r\n/**\r\n * Implements the editing part for find and replace plugin. For example conversion, commands etc.\r\n */\r\nexport default class FindAndReplaceEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [FindAndReplaceUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FindAndReplaceEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        this._activeResults = null;\r\n        this.state = new FindAndReplaceState(this.editor.model);\r\n        this._defineConverters();\r\n        this._defineCommands();\r\n        this.listenTo(this.state, 'change:highlightedResult', (eventInfo, name, newValue, oldValue) => {\r\n            const { model } = this.editor;\r\n            model.change(writer => {\r\n                if (oldValue) {\r\n                    const oldMatchId = oldValue.marker.name.split(':')[1];\r\n                    const oldMarker = model.markers.get(`findResultHighlighted:${oldMatchId}`);\r\n                    if (oldMarker) {\r\n                        writer.removeMarker(oldMarker);\r\n                    }\r\n                }\r\n                if (newValue) {\r\n                    const newMatchId = newValue.marker.name.split(':')[1];\r\n                    writer.addMarker(`findResultHighlighted:${newMatchId}`, {\r\n                        usingOperation: false,\r\n                        affectsData: false,\r\n                        range: newValue.marker.getRange()\r\n                    });\r\n                }\r\n            });\r\n        });\r\n        /* istanbul ignore next -- @preserve */\r\n        const scrollToHighlightedResult = (eventInfo, name, newValue) => {\r\n            if (newValue) {\r\n                const domConverter = this.editor.editing.view.domConverter;\r\n                const viewRange = this.editor.editing.mapper.toViewRange(newValue.marker.getRange());\r\n                scrollViewportToShowTarget({\r\n                    target: domConverter.viewRangeToDom(viewRange),\r\n                    viewportOffset: 40\r\n                });\r\n            }\r\n        };\r\n        const debouncedScrollListener = debounce(scrollToHighlightedResult.bind(this), 32);\r\n        // Debounce scroll as highlight might be changed very frequently, e.g. when there's a replace all command.\r\n        this.listenTo(this.state, 'change:highlightedResult', debouncedScrollListener, { priority: 'low' });\r\n        // It's possible that the editor will get destroyed before debounced call kicks in.\r\n        // This would result with accessing a view three that is no longer in DOM.\r\n        this.listenTo(this.editor, 'destroy', debouncedScrollListener.cancel);\r\n    }\r\n    /**\r\n     * Initiate a search.\r\n     */\r\n    find(callbackOrText) {\r\n        const { editor } = this;\r\n        const { model } = editor;\r\n        const { findCallback, results } = editor.execute('find', callbackOrText);\r\n        this._activeResults = results;\r\n        // @todo: handle this listener, another copy is in findcommand.js file.\r\n        this.listenTo(model.document, 'change:data', () => onDocumentChange(this._activeResults, editor, findCallback));\r\n        return this._activeResults;\r\n    }\r\n    /**\r\n     * Stops active results from updating, and clears out the results.\r\n     */\r\n    stop() {\r\n        if (!this._activeResults) {\r\n            return;\r\n        }\r\n        this.stopListening(this.editor.model.document);\r\n        this.state.clear(this.editor.model);\r\n        this._activeResults = null;\r\n    }\r\n    /**\r\n     * Sets up the commands.\r\n     */\r\n    _defineCommands() {\r\n        this.editor.commands.add('find', new FindCommand(this.editor, this.state));\r\n        this.editor.commands.add('findNext', new FindNextCommand(this.editor, this.state));\r\n        this.editor.commands.add('findPrevious', new FindPreviousCommand(this.editor, this.state));\r\n        this.editor.commands.add('replace', new ReplaceCommand(this.editor, this.state));\r\n        this.editor.commands.add('replaceAll', new ReplaceAllCommand(this.editor, this.state));\r\n    }\r\n    /**\r\n     * Sets up the marker downcast converters for search results highlighting.\r\n     */\r\n    _defineConverters() {\r\n        const { editor } = this;\r\n        // Setup the marker highlighting conversion.\r\n        editor.conversion.for('editingDowncast').markerToHighlight({\r\n            model: 'findResult',\r\n            view: ({ markerName }) => {\r\n                const [, id] = markerName.split(':');\r\n                // Marker removal from the view has a bug: https://github.com/ckeditor/ckeditor5/issues/7499\r\n                // A minimal option is to return a new object for each converted marker...\r\n                return {\r\n                    name: 'span',\r\n                    classes: ['ck-find-result'],\r\n                    attributes: {\r\n                        // ...however, adding a unique attribute should be future-proof..\r\n                        'data-find-result': id\r\n                    }\r\n                };\r\n            }\r\n        });\r\n        editor.conversion.for('editingDowncast').markerToHighlight({\r\n            model: 'findResultHighlighted',\r\n            view: ({ markerName }) => {\r\n                const [, id] = markerName.split(':');\r\n                // Marker removal from the view has a bug: https://github.com/ckeditor/ckeditor5/issues/7499\r\n                // A minimal option is to return a new object for each converted marker...\r\n                return {\r\n                    name: 'span',\r\n                    classes: [HIGHLIGHT_CLASS],\r\n                    attributes: {\r\n                        // ...however, adding a unique attribute should be future-proof..\r\n                        'data-find-result': id\r\n                    }\r\n                };\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module find-and-replace/findandreplace\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport FindAndReplaceUI from './findandreplaceui';\r\nimport FindAndReplaceEditing from './findandreplaceediting';\r\n/**\r\n * The find and replace plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/find-and-replace Find and replace feature documentation}.\r\n *\r\n * This is a \"glue\" plugin which loads the following plugins:\r\n *\r\n * * The {@link module:find-and-replace/findandreplaceediting~FindAndReplaceEditing find and replace editing feature},\r\n * * The {@link module:find-and-replace/findandreplaceui~FindAndReplaceUI find and replace UI feature}\r\n */\r\nexport default class FindAndReplace extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [FindAndReplaceEditing, FindAndReplaceUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FindAndReplace';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const ui = this.editor.plugins.get('FindAndReplaceUI');\r\n        const findAndReplaceEditing = this.editor.plugins.get('FindAndReplaceEditing');\r\n        const state = findAndReplaceEditing.state;\r\n        ui.on('findNext', (event, data) => {\r\n            // Data is contained only for the \"find\" button.\r\n            if (data) {\r\n                state.searchText = data.searchText;\r\n                this.editor.execute('find', data.searchText, data);\r\n            }\r\n            else {\r\n                // Find next arrow button press.\r\n                this.editor.execute('findNext');\r\n            }\r\n        });\r\n        ui.on('findPrevious', (event, data) => {\r\n            if (data && state.searchText !== data.searchText) {\r\n                this.editor.execute('find', data.searchText);\r\n            }\r\n            else {\r\n                // Subsequent calls.\r\n                this.editor.execute('findPrevious');\r\n            }\r\n        });\r\n        ui.on('replace', (event, data) => {\r\n            if (state.searchText !== data.searchText) {\r\n                this.editor.execute('find', data.searchText);\r\n            }\r\n            const highlightedResult = state.highlightedResult;\r\n            if (highlightedResult) {\r\n                this.editor.execute('replace', data.replaceText, highlightedResult);\r\n            }\r\n        });\r\n        ui.on('replaceAll', (event, data) => {\r\n            // The state hadn't been yet built for this search text.\r\n            if (state.searchText !== data.searchText) {\r\n                this.editor.execute('find', data.searchText);\r\n            }\r\n            this.editor.execute('replaceAll', data.replaceText, state.results);\r\n        });\r\n        // Reset the state when the user invalidated last search results, for instance,\r\n        // by starting typing another search query or changing options.\r\n        ui.on('searchReseted', () => {\r\n            state.clear(this.editor.model);\r\n            findAndReplaceEditing.stop();\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The base font command.\r\n */\r\nexport default class FontCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor Editor instance.\r\n     * @param attributeKey The name of a model attribute on which this command operates.\r\n     */\r\n    constructor(editor, attributeKey) {\r\n        super(editor);\r\n        this.attributeKey = attributeKey;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const doc = model.document;\r\n        this.value = doc.selection.getAttribute(this.attributeKey);\r\n        this.isEnabled = model.schema.checkAttributeInSelection(doc.selection, this.attributeKey);\r\n    }\r\n    /**\r\n     * Executes the command. Applies the `value` of the {@link #attributeKey} to the selection.\r\n     * If no `value` is passed, it removes the attribute from the selection.\r\n     *\r\n     * @param options Options for the executed command.\r\n     * @param options.value The value to apply.\r\n     * @fires execute\r\n     */\r\n    execute(options = {}) {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        const selection = document.selection;\r\n        const value = options.value;\r\n        const batch = options.batch;\r\n        const updateAttribute = (writer) => {\r\n            if (selection.isCollapsed) {\r\n                if (value) {\r\n                    writer.setSelectionAttribute(this.attributeKey, value);\r\n                }\r\n                else {\r\n                    writer.removeSelectionAttribute(this.attributeKey);\r\n                }\r\n            }\r\n            else {\r\n                const ranges = model.schema.getValidRanges(selection.getRanges(), this.attributeKey);\r\n                for (const range of ranges) {\r\n                    if (value) {\r\n                        writer.setAttribute(this.attributeKey, value, range);\r\n                    }\r\n                    else {\r\n                        writer.removeAttribute(this.attributeKey, range);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        // In some scenarios, you may want to use a single undo step for multiple changes (e.g. in color picker).\r\n        if (batch) {\r\n            model.enqueueChange(batch, writer => {\r\n                updateAttribute(writer);\r\n            });\r\n        }\r\n        else {\r\n            model.change(writer => {\r\n                updateAttribute(writer);\r\n            });\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Collection, ObservableMixin } from 'ckeditor5/src/utils';\r\n/**\r\n * A collection to store document colors. It enforces colors to be unique.\r\n */\r\nexport default class DocumentColorCollection extends ObservableMixin((Collection)) {\r\n    constructor(options) {\r\n        super(options);\r\n        this.set('isEmpty', true);\r\n        this.on('change', () => {\r\n            this.set('isEmpty', this.length === 0);\r\n        });\r\n    }\r\n    /**\r\n     * Adds a color to the document color collection.\r\n     *\r\n     * This method ensures that no color duplicates are inserted (compared using\r\n     * the color value of the {@link module:ui/colorgrid/colorgridview~ColorDefinition}).\r\n     *\r\n     * If the item does not have an ID, it will be automatically generated and set on the item.\r\n     *\r\n     * @param index The position of the item in the collection. The item is pushed to the collection when `index` is not specified.\r\n     * @fires add\r\n     * @fires change\r\n     */\r\n    add(item, index) {\r\n        if (this.find(element => element.color === item.color)) {\r\n            // No duplicates are allowed.\r\n            return this;\r\n        }\r\n        return super.add(item, index);\r\n    }\r\n    /**\r\n     * Checks if an object with given colors is present in the document color collection.\r\n     */\r\n    hasColor(color) {\r\n        return !!this.find(item => item.color === color);\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./fontcolor.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/ui/colortableview\r\n */\r\nimport { icons } from 'ckeditor5/src/core';\r\nimport { ButtonView, ColorGridView, ColorTileView, FocusCycler, LabelView, Template, View, ViewCollection, ColorPickerView, icons as uiIcons } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport DocumentColorCollection from '../documentcolorcollection';\r\nimport '../../theme/fontcolor.css';\r\n/**\r\n * A class which represents a view with the following sub–components:\r\n *\r\n * * A {@link module:font/ui/colortableview~ColorTableView#colorGridsPageView color grids component},\r\n * * A {@link module:font/ui/colortableview~ColorTableView#colorPickerPageView color picker component}.\r\n */\r\nexport default class ColorTableView extends View {\r\n    /**\r\n     * Creates a view to be inserted as a child of {@link module:ui/dropdown/dropdownview~DropdownView}.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param colors An array with definitions of colors to be displayed in the table.\r\n     * @param columns The number of columns in the color grid.\r\n     * @param removeButtonLabel The label of the button responsible for removing the color.\r\n     * @param colorPickerLabel The label of the button responsible for color picker appearing.\r\n     * @param documentColorsLabel The label for the section with the document colors.\r\n     * @param documentColorsCount The number of colors in the document colors section inside the color dropdown.\r\n     * @param colorPickerConfig The configuration of color picker feature.\r\n     */\r\n    constructor(locale, { colors, columns, removeButtonLabel, documentColorsLabel, documentColorsCount, colorPickerLabel, colorPickerConfig }) {\r\n        super(locale);\r\n        this.items = this.createCollection();\r\n        this.focusTracker = new FocusTracker();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this._focusables = new ViewCollection();\r\n        this._colorPickerConfig = colorPickerConfig;\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate list items backwards using the <kbd>Shift</kbd> + <kbd>Tab</kbd> keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate list items forwards using the <kbd>Tab</kbd> key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        this.colorGridsPageView = new ColorGridsPageView(locale, {\r\n            colors, columns, removeButtonLabel, documentColorsLabel, documentColorsCount, colorPickerLabel,\r\n            focusTracker: this.focusTracker,\r\n            focusables: this._focusables\r\n        });\r\n        this.colorPickerPageView = new ColorPickerPageView(locale, {\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokes: this.keystrokes,\r\n            colorPickerConfig\r\n        });\r\n        this.set('_isColorGridsPageVisible', true);\r\n        this.set('_isColorPickerPageVisible', false);\r\n        this.set('selectedColor', undefined);\r\n        this.colorGridsPageView.bind('isVisible').to(this, '_isColorGridsPageVisible');\r\n        this.colorPickerPageView.bind('isVisible').to(this, '_isColorPickerPageVisible');\r\n        /**\r\n         * This is kind of bindings. Unfortunately we could not use this.bind() method because the same property\r\n         * can not be binded twice. So this is work around how to bind 'selectedColor' property between components.\r\n         */\r\n        this.on('change:selectedColor', (evt, evtName, data) => {\r\n            this.colorGridsPageView.set('selectedColor', data);\r\n            this.colorPickerPageView.set('selectedColor', data);\r\n        });\r\n        this.colorGridsPageView.on('change:selectedColor', (evt, evtName, data) => {\r\n            this.set('selectedColor', data);\r\n        });\r\n        this.colorPickerPageView.on('change:selectedColor', (evt, evtName, data) => {\r\n            this.set('selectedColor', data);\r\n        });\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-color-table'\r\n                ]\r\n            },\r\n            children: this.items\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        // Start listening for the keystrokes coming from #element.\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Appends static and document color grid views.\r\n     */\r\n    appendGrids() {\r\n        if (this.items.length) {\r\n            return;\r\n        }\r\n        this.items.add(this.colorGridsPageView);\r\n        this.colorGridsPageView.delegate('execute').to(this);\r\n        this.colorGridsPageView.delegate('showColorPicker').to(this);\r\n    }\r\n    /**\r\n     * Renders UI in dropdown. Which sub-components are rendered\r\n     * depends on the component configuration.\r\n     */\r\n    appendUI() {\r\n        this.appendGrids();\r\n        if (this._colorPickerConfig) {\r\n            this._appendColorPicker();\r\n        }\r\n    }\r\n    /**\r\n     * Show \"Color picker\" and hide \"Color grids\".\r\n     */\r\n    showColorPicker() {\r\n        if (!this.colorPickerPageView.colorPickerView) {\r\n            return;\r\n        }\r\n        this.set('_isColorPickerPageVisible', true);\r\n        this.colorPickerPageView.focus();\r\n        this.set('_isColorGridsPageVisible', false);\r\n    }\r\n    /**\r\n     * Show \"Color grids\" and hide \"Color picker\".\r\n     */\r\n    showColorGrids() {\r\n        this.set('_isColorGridsPageVisible', true);\r\n        this.set('_isColorPickerPageVisible', false);\r\n    }\r\n    /**\r\n     * Focuses the first focusable element in {@link #items}.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * Focuses the last focusable element in {@link #items}.\r\n     */\r\n    focusLast() {\r\n        this._focusCycler.focusLast();\r\n    }\r\n    /**\r\n     * Scans through the editor model and searches for text node attributes with the given attribute name.\r\n     * Found entries are set as document colors.\r\n     *\r\n     * All the previously stored document colors will be lost in the process.\r\n     *\r\n     * @param model The model used as a source to obtain the document colors.\r\n     * @param attributeName Determines the name of the related model's attribute for a given dropdown.\r\n     */\r\n    updateDocumentColors(model, attributeName) {\r\n        this.colorGridsPageView.updateDocumentColors(model, attributeName);\r\n    }\r\n    /**\r\n     * Refreshes the state of the selected color in one or both {@link module:ui/colorgrid/colorgridview~ColorGridView}s\r\n     * available in the {@link module:font/ui/colortableview~ColorTableView}. It guarantees that the selection will occur only in one\r\n     * of them.\r\n     */\r\n    updateSelectedColors() {\r\n        this.colorGridsPageView.updateSelectedColors();\r\n    }\r\n    /**\r\n     * Appends the color picker view.\r\n     */\r\n    _appendColorPicker() {\r\n        if (this.items.length === 2) {\r\n            return;\r\n        }\r\n        this.items.add(this.colorPickerPageView);\r\n        if (this.colorGridsPageView.colorPickerButtonView) {\r\n            this.colorGridsPageView.colorPickerButtonView.on('execute', () => {\r\n                this.showColorPicker();\r\n            });\r\n        }\r\n        this.colorGridsPageView.addColorPickerButton();\r\n        this.colorPickerPageView.delegate('execute').to(this);\r\n        this.colorPickerPageView.delegate('cancel').to(this);\r\n    }\r\n}\r\n/**\r\n * A class which represents a view with the following sub–components:\r\n *\r\n * * A remove color button,\r\n * * A static {@link module:ui/colorgrid/colorgridview~ColorGridView} of colors defined in the configuration,\r\n * * A dynamic {@link module:ui/colorgrid/colorgridview~ColorGridView} of colors used in the document.\r\n * * If color picker is configured, the \"Color Picker\" button is visible too.\r\n */\r\nclass ColorGridsPageView extends View {\r\n    /**\r\n     * Creates a view to be inserted as a child of {@link module:ui/dropdown/dropdownview~DropdownView}.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param colors An array with definitions of colors to be displayed in the table.\r\n     * @param columns The number of columns in the color grid.\r\n     * @param removeButtonLabel The label of the button responsible for removing the color.\r\n     * @param colorPickerLabel The label of the button responsible for color picker appearing.\r\n     * @param documentColorsLabel The label for the section with the document colors.\r\n     * @param documentColorsCount The number of colors in the document colors section inside the color dropdown.\r\n     * @param focusTracker Tracks information about the DOM focus in the list.\r\n     * @param focusables A collection of views that can be focused in the view.\r\n     */\r\n    constructor(locale, { colors, columns, removeButtonLabel, documentColorsLabel, documentColorsCount, colorPickerLabel, focusTracker, focusables }) {\r\n        super(locale);\r\n        const bind = this.bindTemplate;\r\n        this.set('isVisible', true);\r\n        this.focusTracker = focusTracker;\r\n        this.items = this.createCollection();\r\n        this.colorDefinitions = colors;\r\n        this.columns = columns;\r\n        this.documentColors = new DocumentColorCollection();\r\n        this.documentColorsCount = documentColorsCount;\r\n        this._focusables = focusables;\r\n        this._removeButtonLabel = removeButtonLabel;\r\n        this._colorPickerLabel = colorPickerLabel;\r\n        this._documentColorsLabel = documentColorsLabel;\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck-color-grids-page-view',\r\n                    bind.if('isVisible', 'ck-hidden', value => !value)\r\n                ]\r\n            },\r\n            children: this.items\r\n        });\r\n        this.removeColorButtonView = this._createRemoveColorButton();\r\n        this.items.add(this.removeColorButtonView);\r\n    }\r\n    /**\r\n     * Scans through the editor model and searches for text node attributes with the given attribute name.\r\n     * Found entries are set as document colors.\r\n     *\r\n     * All the previously stored document colors will be lost in the process.\r\n     *\r\n     * @param model The model used as a source to obtain the document colors.\r\n     * @param attributeName Determines the name of the related model's attribute for a given dropdown.\r\n     */\r\n    updateDocumentColors(model, attributeName) {\r\n        const document = model.document;\r\n        const maxCount = this.documentColorsCount;\r\n        this.documentColors.clear();\r\n        for (const rootName of document.getRootNames()) {\r\n            const root = document.getRoot(rootName);\r\n            const range = model.createRangeIn(root);\r\n            for (const node of range.getItems()) {\r\n                if (node.is('$textProxy') && node.hasAttribute(attributeName)) {\r\n                    this._addColorToDocumentColors(node.getAttribute(attributeName));\r\n                    if (this.documentColors.length >= maxCount) {\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Refreshes the state of the selected color in one or both {@link module:ui/colorgrid/colorgridview~ColorGridView}s\r\n     * available in the {@link module:font/ui/colortableview~ColorTableView}. It guarantees that the selection will occur only in one\r\n     * of them.\r\n     */\r\n    updateSelectedColors() {\r\n        const documentColorsGrid = this.documentColorsGrid;\r\n        const staticColorsGrid = this.staticColorsGrid;\r\n        const selectedColor = this.selectedColor;\r\n        staticColorsGrid.selectedColor = selectedColor;\r\n        if (documentColorsGrid) {\r\n            documentColorsGrid.selectedColor = selectedColor;\r\n        }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        this.staticColorsGrid = this._createStaticColorsGrid();\r\n        this.items.add(this.staticColorsGrid);\r\n        if (this.documentColorsCount) {\r\n            // Create a label for document colors.\r\n            const bind = Template.bind(this.documentColors, this.documentColors);\r\n            const label = new LabelView(this.locale);\r\n            label.text = this._documentColorsLabel;\r\n            label.extendTemplate({\r\n                attributes: {\r\n                    class: [\r\n                        'ck',\r\n                        'ck-color-grid__label',\r\n                        bind.if('isEmpty', 'ck-hidden')\r\n                    ]\r\n                }\r\n            });\r\n            this.items.add(label);\r\n            this.documentColorsGrid = this._createDocumentColorsGrid();\r\n            this.items.add(this.documentColorsGrid);\r\n        }\r\n        this._createColorPickerButton();\r\n        this._addColorTablesElementsToFocusTracker();\r\n        this.focus();\r\n    }\r\n    /**\r\n     * Focuses the component.\r\n     */\r\n    focus() {\r\n        this.removeColorButtonView.focus();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n    }\r\n    /**\r\n     * Handles displaying the color picker button (if it was previously created) and making it focusable.\r\n     */\r\n    addColorPickerButton() {\r\n        if (this.colorPickerButtonView) {\r\n            this.items.add(this.colorPickerButtonView);\r\n            this.focusTracker.add(this.colorPickerButtonView.element);\r\n            this._focusables.add(this.colorPickerButtonView);\r\n        }\r\n    }\r\n    /**\r\n     * Adds color table elements to focus tracker.\r\n     */\r\n    _addColorTablesElementsToFocusTracker() {\r\n        this.focusTracker.add(this.removeColorButtonView.element);\r\n        this._focusables.add(this.removeColorButtonView);\r\n        if (this.staticColorsGrid) {\r\n            this.focusTracker.add(this.staticColorsGrid.element);\r\n            this._focusables.add(this.staticColorsGrid);\r\n        }\r\n        if (this.documentColorsGrid) {\r\n            this.focusTracker.add(this.documentColorsGrid.element);\r\n            this._focusables.add(this.documentColorsGrid);\r\n        }\r\n    }\r\n    /**\r\n     * Creates the button responsible for displaying the color picker component.\r\n     */\r\n    _createColorPickerButton() {\r\n        this.colorPickerButtonView = new ButtonView();\r\n        this.colorPickerButtonView.set({\r\n            label: this._colorPickerLabel,\r\n            withText: true,\r\n            icon: uiIcons.colorPaletteIcon,\r\n            class: 'ck-color-table__color-picker'\r\n        });\r\n        this.colorPickerButtonView.on('execute', () => {\r\n            this.fire('showColorPicker');\r\n        });\r\n    }\r\n    /**\r\n     * Adds the remove color button as a child of the current view.\r\n     */\r\n    _createRemoveColorButton() {\r\n        const buttonView = new ButtonView();\r\n        buttonView.set({\r\n            withText: true,\r\n            icon: icons.eraser,\r\n            label: this._removeButtonLabel\r\n        });\r\n        buttonView.class = 'ck-color-table__remove-color';\r\n        buttonView.on('execute', () => {\r\n            this.fire('execute', {\r\n                value: null,\r\n                source: 'removeColorButton'\r\n            });\r\n        });\r\n        buttonView.render();\r\n        return buttonView;\r\n    }\r\n    /**\r\n     * Creates a static color table grid based on the editor configuration.\r\n     */\r\n    _createStaticColorsGrid() {\r\n        const colorGrid = new ColorGridView(this.locale, {\r\n            colorDefinitions: this.colorDefinitions,\r\n            columns: this.columns\r\n        });\r\n        colorGrid.on('execute', (evt, data) => {\r\n            this.fire('execute', {\r\n                value: data.value,\r\n                source: 'staticColorsGrid'\r\n            });\r\n        });\r\n        return colorGrid;\r\n    }\r\n    /**\r\n     * Creates the document colors section view and binds it to {@link #documentColors}.\r\n     */\r\n    _createDocumentColorsGrid() {\r\n        const bind = Template.bind(this.documentColors, this.documentColors);\r\n        const documentColorsGrid = new ColorGridView(this.locale, {\r\n            columns: this.columns\r\n        });\r\n        documentColorsGrid.extendTemplate({\r\n            attributes: {\r\n                class: bind.if('isEmpty', 'ck-hidden')\r\n            }\r\n        });\r\n        documentColorsGrid.items.bindTo(this.documentColors).using(colorObj => {\r\n            const colorTile = new ColorTileView();\r\n            colorTile.set({\r\n                color: colorObj.color,\r\n                hasBorder: colorObj.options && colorObj.options.hasBorder\r\n            });\r\n            if (colorObj.label) {\r\n                colorTile.set({\r\n                    label: colorObj.label,\r\n                    tooltip: true\r\n                });\r\n            }\r\n            colorTile.on('execute', () => {\r\n                this.fire('execute', {\r\n                    value: colorObj.color,\r\n                    source: 'documentColorsGrid'\r\n                });\r\n            });\r\n            return colorTile;\r\n        });\r\n        // Selected color should be cleared when document colors became empty.\r\n        this.documentColors.on('change:isEmpty', (evt, name, val) => {\r\n            if (val) {\r\n                documentColorsGrid.selectedColor = null;\r\n            }\r\n        });\r\n        return documentColorsGrid;\r\n    }\r\n    /**\r\n     * Adds a given color to the document colors list. If possible, the method will attempt to use\r\n     * data from the {@link #colorDefinitions} (label, color options).\r\n     *\r\n     * @param color A string that stores the value of the recently applied color.\r\n     */\r\n    _addColorToDocumentColors(color) {\r\n        const predefinedColor = this.colorDefinitions\r\n            .find(definition => definition.color === color);\r\n        if (!predefinedColor) {\r\n            this.documentColors.add({\r\n                color,\r\n                label: color,\r\n                options: {\r\n                    hasBorder: false\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.documentColors.add(Object.assign({}, predefinedColor));\r\n        }\r\n    }\r\n}\r\n/**\r\n * A class which represents a color picker component view with the following sub–components:\r\n *\r\n * * Color picker saturation and hue sliders,\r\n * * Input accepting colors in HEX format,\r\n * * \"Save\" and \"Cancel\" action buttons.\r\n */\r\nclass ColorPickerPageView extends View {\r\n    /**\r\n     * @param locale The localization services instance.\r\n     * @param focusTracker Tracks information about the DOM focus in the list.\r\n     * @param focusables A collection of views that can be focused in the view..\r\n     * @param keystrokes An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\r\n     * @param colorPickerConfig The configuration of color picker feature.\r\n     */\r\n    constructor(locale, { focusTracker, focusables, keystrokes, colorPickerConfig }) {\r\n        super(locale);\r\n        this.items = this.createCollection();\r\n        this.focusTracker = focusTracker;\r\n        this.keystrokes = keystrokes;\r\n        this.set('isVisible', false);\r\n        this.set('selectedColor', undefined);\r\n        this._focusables = focusables;\r\n        this._pickerConfig = colorPickerConfig;\r\n        const bind = this.bindTemplate;\r\n        const { saveButtonView, cancelButtonView } = this._createActionButtons();\r\n        this.saveButtonView = saveButtonView;\r\n        this.cancelButtonView = cancelButtonView;\r\n        this.actionBarView = this._createActionBarView({ saveButtonView, cancelButtonView });\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck-color-picker-page-view',\r\n                    bind.if('isVisible', 'ck-hidden', value => !value)\r\n                ]\r\n            },\r\n            children: this.items\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        const colorPickerView = new ColorPickerView(this.locale, this._pickerConfig);\r\n        this.colorPickerView = colorPickerView;\r\n        this.colorPickerView.render();\r\n        if (this.selectedColor) {\r\n            colorPickerView.color = this.selectedColor;\r\n        }\r\n        this.listenTo(this, 'change:selectedColor', (evt, name, value) => {\r\n            colorPickerView.color = value;\r\n        });\r\n        this.items.add(this.colorPickerView);\r\n        this.items.add(this.actionBarView);\r\n        this._addColorPickersElementsToFocusTracker();\r\n        this._stopPropagationOnArrowsKeys();\r\n        this._executeOnEnterPress();\r\n        this._executeUponColorChange();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n    }\r\n    /**\r\n     * Focuses the color picker.\r\n     */\r\n    focus() {\r\n        this.colorPickerView.focus();\r\n    }\r\n    /**\r\n     * When color picker is focused and \"enter\" is pressed it executes command.\r\n     */\r\n    _executeOnEnterPress() {\r\n        this.keystrokes.set('enter', evt => {\r\n            if (this.isVisible && this.focusTracker.focusedElement !== this.cancelButtonView.element) {\r\n                this.fire('execute', {\r\n                    value: this.selectedColor\r\n                });\r\n                evt.stopPropagation();\r\n                evt.preventDefault();\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes default behavior of arrow keys in dropdown.\r\n     */\r\n    _stopPropagationOnArrowsKeys() {\r\n        const stopPropagation = (data) => data.stopPropagation();\r\n        this.keystrokes.set('arrowright', stopPropagation);\r\n        this.keystrokes.set('arrowleft', stopPropagation);\r\n        this.keystrokes.set('arrowup', stopPropagation);\r\n        this.keystrokes.set('arrowdown', stopPropagation);\r\n    }\r\n    /**\r\n     * Adds color picker elements to focus tracker.\r\n     */\r\n    _addColorPickersElementsToFocusTracker() {\r\n        for (const slider of this.colorPickerView.slidersView) {\r\n            this.focusTracker.add(slider.element);\r\n            this._focusables.add(slider);\r\n        }\r\n        this.focusTracker.add(this.colorPickerView.hexInputRow.children.get(1).element);\r\n        this._focusables.add(this.colorPickerView.hexInputRow.children.get(1));\r\n        this.focusTracker.add(this.saveButtonView.element);\r\n        this._focusables.add(this.saveButtonView);\r\n        this.focusTracker.add(this.cancelButtonView.element);\r\n        this._focusables.add(this.cancelButtonView);\r\n    }\r\n    /**\r\n     * Creates bar containing \"Save\" and \"Cancel\" buttons.\r\n     */\r\n    _createActionBarView({ saveButtonView, cancelButtonView }) {\r\n        const actionBarRow = new View();\r\n        const children = this.createCollection();\r\n        children.add(saveButtonView);\r\n        children.add(cancelButtonView);\r\n        actionBarRow.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-color-table_action-bar'\r\n                ]\r\n            },\r\n            children\r\n        });\r\n        return actionBarRow;\r\n    }\r\n    /**\r\n     * Creates \"Save\" and \"Cancel\" buttons.\r\n     */\r\n    _createActionButtons() {\r\n        const locale = this.locale;\r\n        const t = locale.t;\r\n        const saveButtonView = new ButtonView(locale);\r\n        const cancelButtonView = new ButtonView(locale);\r\n        saveButtonView.set({\r\n            icon: icons.check,\r\n            class: 'ck-button-save',\r\n            withText: false,\r\n            label: t('Accept'),\r\n            type: 'button'\r\n        });\r\n        cancelButtonView.set({\r\n            icon: icons.cancel,\r\n            class: 'ck-button-cancel',\r\n            withText: false,\r\n            label: t('Cancel')\r\n        });\r\n        saveButtonView.on('execute', () => {\r\n            this.fire('execute', {\r\n                source: 'saveButton',\r\n                value: this.selectedColor\r\n            });\r\n        });\r\n        cancelButtonView.on('execute', () => {\r\n            this.fire('cancel');\r\n        });\r\n        return {\r\n            saveButtonView, cancelButtonView\r\n        };\r\n    }\r\n    /**\r\n     * Fires the `execute` event if color in color picker changed.\r\n     *\r\n     * @fires execute\r\n     */\r\n    _executeUponColorChange() {\r\n        this.colorPickerView.on('change:color', (evt, evtName, newValue) => {\r\n            this.fire('execute', {\r\n                value: newValue,\r\n                source: 'colorPicker'\r\n            });\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/utils\r\n */\r\nimport ColorTableView from './ui/colortableview';\r\n/**\r\n * The name of the font size plugin.\r\n */\r\nexport const FONT_SIZE = 'fontSize';\r\n/**\r\n * The name of the font family plugin.\r\n */\r\nexport const FONT_FAMILY = 'fontFamily';\r\n/**\r\n * The name of the font color plugin.\r\n */\r\nexport const FONT_COLOR = 'fontColor';\r\n/**\r\n * The name of the font background color plugin.\r\n */\r\nexport const FONT_BACKGROUND_COLOR = 'fontBackgroundColor';\r\n/**\r\n * Builds a proper converter definition out of input data.\r\n */\r\nexport function buildDefinition(modelAttributeKey, options) {\r\n    const definition = {\r\n        model: {\r\n            key: modelAttributeKey,\r\n            values: []\r\n        },\r\n        view: {},\r\n        upcastAlso: {}\r\n    };\r\n    for (const option of options) {\r\n        definition.model.values.push(option.model);\r\n        definition.view[option.model] = option.view;\r\n        if (option.upcastAlso) {\r\n            definition.upcastAlso[option.model] = option.upcastAlso;\r\n        }\r\n    }\r\n    return definition;\r\n}\r\n/**\r\n * A {@link module:font/fontcolor~FontColor font color} and\r\n * {@link module:font/fontbackgroundcolor~FontBackgroundColor font background color} helper\r\n * responsible for upcasting data to the model.\r\n *\r\n * **Note**: The `styleAttr` parameter should be either `'color'` or `'background-color'`.\r\n */\r\nexport function renderUpcastAttribute(styleAttr) {\r\n    return (viewElement) => normalizeColorCode(viewElement.getStyle(styleAttr));\r\n}\r\n/**\r\n * A {@link module:font/fontcolor~FontColor font color} and\r\n * {@link module:font/fontbackgroundcolor~FontBackgroundColor font background color} helper\r\n * responsible for downcasting a color attribute to a `<span>` element.\r\n *\r\n * **Note**: The `styleAttr` parameter should be either `'color'` or `'background-color'`.\r\n */\r\nexport function renderDowncastElement(styleAttr) {\r\n    return (modelAttributeValue, { writer }) => writer.createAttributeElement('span', {\r\n        style: `${styleAttr}:${modelAttributeValue}`\r\n    }, { priority: 7 });\r\n}\r\n/**\r\n * A helper that adds {@link module:font/ui/colortableview~ColorTableView} to the color dropdown with proper initial values.\r\n *\r\n * @param config.dropdownView The dropdown view to which a {@link module:font/ui/colortableview~ColorTableView} will be added.\r\n * @param config.colors An array with definitions representing colors to be displayed in the color table.\r\n * @param config.removeButtonLabel The label for the button responsible for removing the color.\r\n * @param config.documentColorsLabel The label for the section with document colors.\r\n * @param config.documentColorsCount The number of document colors inside the dropdown.\r\n * @returns The new color table view.\r\n */\r\nexport function addColorTableToDropdown({ dropdownView, colors, columns, removeButtonLabel, colorPickerLabel, documentColorsLabel, documentColorsCount, colorPickerConfig }) {\r\n    const locale = dropdownView.locale;\r\n    const colorTableView = new ColorTableView(locale, {\r\n        colors,\r\n        columns,\r\n        removeButtonLabel,\r\n        colorPickerLabel,\r\n        documentColorsLabel,\r\n        documentColorsCount,\r\n        colorPickerConfig\r\n    });\r\n    dropdownView.colorTableView = colorTableView;\r\n    dropdownView.panelView.children.add(colorTableView);\r\n    return colorTableView;\r\n}\r\n/**\r\n * Fixes the color value string.\r\n */\r\nfunction normalizeColorCode(value) {\r\n    return value.replace(/\\s/g, '');\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport FontCommand from '../fontcommand';\r\nimport { FONT_FAMILY } from '../utils';\r\n/**\r\n * The font family command. It is used by {@link module:font/fontfamily/fontfamilyediting~FontFamilyEditing}\r\n * to apply the font family.\r\n *\r\n * ```ts\r\n * editor.execute( 'fontFamily', { value: 'Arial' } );\r\n * ```\r\n *\r\n * **Note**: Executing the command without the value removes the attribute from the model.\r\n */\r\nexport default class FontFamilyCommand extends FontCommand {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor, FONT_FAMILY);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontfamily/utils\r\n */\r\n/**\r\n * Normalizes the {@link module:font/fontconfig~FontFamilyConfig#options configuration options}\r\n * to the {@link module:font/fontconfig~FontFamilyOption} format.\r\n *\r\n * @param configuredOptions An array of options taken from the configuration.\r\n */\r\nexport function normalizeOptions(configuredOptions) {\r\n    // Convert options to objects.\r\n    return configuredOptions\r\n        .map(getOptionDefinition)\r\n        // Filter out undefined values that `getOptionDefinition` might return.\r\n        .filter(option => option !== undefined);\r\n}\r\n/**\r\n * Returns an option definition either created from string shortcut.\r\n * If object is passed then this method will return it without alternating it. Returns undefined for item than cannot be parsed.\r\n *\r\n */\r\nfunction getOptionDefinition(option) {\r\n    // Treat any object as full item definition provided by user in configuration.\r\n    if (typeof option === 'object') {\r\n        return option;\r\n    }\r\n    // Handle 'default' string as a special case. It will be used to remove the fontFamily attribute.\r\n    if (option === 'default') {\r\n        return {\r\n            title: 'Default',\r\n            model: undefined\r\n        };\r\n    }\r\n    // Ignore values that we cannot parse to a definition.\r\n    if (typeof option !== 'string') {\r\n        return undefined;\r\n    }\r\n    // Return font family definition from font string.\r\n    return generateFontPreset(option);\r\n}\r\n/**\r\n * Creates a predefined preset for pixel size. It deconstructs font-family like string into full configuration option.\r\n * A font definition is passed as coma delimited set of font family names. Font names might be quoted.\r\n *\r\n * @param fontDefinition A font definition form configuration.\r\n */\r\nfunction generateFontPreset(fontDefinition) {\r\n    // Remove quotes from font names. They will be normalized later.\r\n    const fontNames = fontDefinition.replace(/\"|'/g, '').split(',');\r\n    // The first matched font name will be used as dropdown list item title and as model value.\r\n    const firstFontName = fontNames[0];\r\n    // CSS-compatible font names.\r\n    const cssFontNames = fontNames.map(normalizeFontNameForCSS).join(', ');\r\n    return {\r\n        title: firstFontName,\r\n        model: cssFontNames,\r\n        view: {\r\n            name: 'span',\r\n            styles: {\r\n                'font-family': cssFontNames\r\n            },\r\n            priority: 7\r\n        }\r\n    };\r\n}\r\n/**\r\n * Normalizes font name for the style attribute. It adds braces (') if font name contains spaces.\r\n */\r\nfunction normalizeFontNameForCSS(fontName) {\r\n    fontName = fontName.trim();\r\n    // Compound font names should be quoted.\r\n    if (fontName.indexOf(' ') > 0) {\r\n        fontName = `'${fontName}'`;\r\n    }\r\n    return fontName;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontfamily/fontfamilyediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport FontFamilyCommand from './fontfamilycommand';\r\nimport { normalizeOptions } from './utils';\r\nimport { buildDefinition, FONT_FAMILY } from '../utils';\r\n/**\r\n * The font family editing feature.\r\n *\r\n * It introduces the {@link module:font/fontfamily/fontfamilycommand~FontFamilyCommand command} and\r\n * the `fontFamily` attribute in the {@link module:engine/model/model~Model model} which renders\r\n * in the {@link module:engine/view/view view} as an inline `<span>` element (`<span style=\"font-family: Arial\">`),\r\n * depending on the {@link module:font/fontconfig~FontFamilyConfig configuration}.\r\n */\r\nexport default class FontFamilyEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontFamilyEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        // Define default configuration using font families shortcuts.\r\n        editor.config.define(FONT_FAMILY, {\r\n            options: [\r\n                'default',\r\n                'Arial, Helvetica, sans-serif',\r\n                'Courier New, Courier, monospace',\r\n                'Georgia, serif',\r\n                'Lucida Sans Unicode, Lucida Grande, sans-serif',\r\n                'Tahoma, Geneva, sans-serif',\r\n                'Times New Roman, Times, serif',\r\n                'Trebuchet MS, Helvetica, sans-serif',\r\n                'Verdana, Geneva, sans-serif'\r\n            ],\r\n            supportAllValues: false\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow fontFamily attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: FONT_FAMILY });\r\n        editor.model.schema.setAttributeProperties(FONT_FAMILY, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n        // Get configured font family options without \"default\" option.\r\n        const options = normalizeOptions(editor.config.get('fontFamily.options')).filter(item => item.model);\r\n        const definition = buildDefinition(FONT_FAMILY, options);\r\n        // Set-up the two-way conversion.\r\n        if (editor.config.get('fontFamily.supportAllValues')) {\r\n            this._prepareAnyValueConverters();\r\n            this._prepareCompatibilityConverter();\r\n        }\r\n        else {\r\n            editor.conversion.attributeToElement(definition);\r\n        }\r\n        editor.commands.add(FONT_FAMILY, new FontFamilyCommand(editor));\r\n    }\r\n    /**\r\n     * These converters enable keeping any value found as `style=\"font-family: *\"` as a value of an attribute on a text even\r\n     * if it is not defined in the plugin configuration.\r\n     */\r\n    _prepareAnyValueConverters() {\r\n        const editor = this.editor;\r\n        editor.conversion.for('downcast').attributeToElement({\r\n            model: FONT_FAMILY,\r\n            view: (attributeValue, { writer }) => {\r\n                return writer.createAttributeElement('span', { style: 'font-family:' + attributeValue }, { priority: 7 });\r\n            }\r\n        });\r\n        editor.conversion.for('upcast').elementToAttribute({\r\n            model: {\r\n                key: FONT_FAMILY,\r\n                value: (viewElement) => viewElement.getStyle('font-family')\r\n            },\r\n            view: {\r\n                name: 'span',\r\n                styles: {\r\n                    'font-family': /.*/\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Adds support for legacy `<font face=\"..\">` formatting.\r\n     */\r\n    _prepareCompatibilityConverter() {\r\n        const editor = this.editor;\r\n        editor.conversion.for('upcast').elementToAttribute({\r\n            view: {\r\n                name: 'font',\r\n                attributes: {\r\n                    'face': /.*/\r\n                }\r\n            },\r\n            model: {\r\n                key: FONT_FAMILY,\r\n                value: (viewElement) => viewElement.getAttribute('face')\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontfamily/fontfamilyui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Collection } from 'ckeditor5/src/utils';\r\nimport { Model, createDropdown, addListToDropdown } from 'ckeditor5/src/ui';\r\nimport { normalizeOptions } from './utils';\r\nimport { FONT_FAMILY } from '../utils';\r\nimport fontFamilyIcon from '../../theme/icons/font-family.svg';\r\n/**\r\n * The font family UI plugin. It introduces the `'fontFamily'` dropdown.\r\n */\r\nexport default class FontFamilyUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontFamilyUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const options = this._getLocalizedOptions();\r\n        const command = editor.commands.get(FONT_FAMILY);\r\n        const accessibleLabel = t('Font Family');\r\n        // Register UI component.\r\n        editor.ui.componentFactory.add(FONT_FAMILY, locale => {\r\n            const dropdownView = createDropdown(locale);\r\n            addListToDropdown(dropdownView, () => _prepareListOptions(options, command), {\r\n                role: 'menu',\r\n                ariaLabel: accessibleLabel\r\n            });\r\n            dropdownView.buttonView.set({\r\n                label: accessibleLabel,\r\n                icon: fontFamilyIcon,\r\n                tooltip: true\r\n            });\r\n            dropdownView.extendTemplate({\r\n                attributes: {\r\n                    class: 'ck-font-family-dropdown'\r\n                }\r\n            });\r\n            dropdownView.bind('isEnabled').to(command);\r\n            // Execute command when an item from the dropdown is selected.\r\n            this.listenTo(dropdownView, 'execute', evt => {\r\n                editor.execute(evt.source.commandName, { value: evt.source.commandParam });\r\n                editor.editing.view.focus();\r\n            });\r\n            return dropdownView;\r\n        });\r\n    }\r\n    /**\r\n     * Returns options as defined in `config.fontFamily.options` but processed to account for\r\n     * editor localization, i.e. to display {@link module:font/fontconfig~FontFamilyOption}\r\n     * in the correct language.\r\n     *\r\n     * Note: The reason behind this method is that there is no way to use {@link module:utils/locale~Locale#t}\r\n     * when the user configuration is defined because the editor does not exist yet.\r\n     */\r\n    _getLocalizedOptions() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const options = normalizeOptions((editor.config.get(FONT_FAMILY)).options);\r\n        return options.map(option => {\r\n            // The only title to localize is \"Default\" others are font names.\r\n            if (option.title === 'Default') {\r\n                option.title = t('Default');\r\n            }\r\n            return option;\r\n        });\r\n    }\r\n}\r\n/**\r\n * Prepares FontFamily dropdown items.\r\n */\r\nfunction _prepareListOptions(options, command) {\r\n    const itemDefinitions = new Collection();\r\n    // Create dropdown items.\r\n    for (const option of options) {\r\n        const def = {\r\n            type: 'button',\r\n            model: new Model({\r\n                commandName: FONT_FAMILY,\r\n                commandParam: option.model,\r\n                label: option.title,\r\n                role: 'menuitemradio',\r\n                withText: true\r\n            })\r\n        };\r\n        def.model.bind('isOn').to(command, 'value', value => {\r\n            // \"Default\" or check in strict font-family converters mode.\r\n            if (value === option.model) {\r\n                return true;\r\n            }\r\n            if (!value || !option.model) {\r\n                return false;\r\n            }\r\n            return value.split(',')[0].replace(/'/g, '').toLowerCase() === option.model.toLowerCase();\r\n        });\r\n        // Try to set a dropdown list item style.\r\n        if (option.view && typeof option.view !== 'string' && option.view.styles) {\r\n            def.model.set('labelStyle', `font-family: ${option.view.styles['font-family']}`);\r\n        }\r\n        itemDefinitions.add(def);\r\n    }\r\n    return itemDefinitions;\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontfamily\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport FontFamilyEditing from './fontfamily/fontfamilyediting';\r\nimport FontFamilyUI from './fontfamily/fontfamilyui';\r\n/**\r\n * The font family plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/font font feature} documentatiom\r\n * and the {@glink api/font package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:font/fontfamily/fontfamilyediting~FontFamilyEditing} and\r\n * {@link module:font/fontfamily/fontfamilyui~FontFamilyUI} features in the editor.\r\n */\r\nexport default class FontFamily extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [FontFamilyEditing, FontFamilyUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontFamily';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport FontCommand from '../fontcommand';\r\nimport { FONT_SIZE } from '../utils';\r\n/**\r\n * The font size command. It is used by {@link module:font/fontsize/fontsizeediting~FontSizeEditing}\r\n * to apply the font size.\r\n *\r\n * ```ts\r\n * editor.execute( 'fontSize', { value: 'small' } );\r\n * ```\r\n *\r\n * **Note**: Executing the command without the value removes the attribute from the model.\r\n */\r\nexport default class FontSizeCommand extends FontCommand {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor, FONT_SIZE);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontsize/utils\r\n */\r\nimport { CKEditorError } from 'ckeditor5/src/utils';\r\n/**\r\n * Normalizes and translates the {@link module:font/fontconfig~FontSizeConfig#options configuration options}\r\n * to the {@link module:font/fontconfig~FontSizeOption} format.\r\n *\r\n * @param configuredOptions An array of options taken from the configuration.\r\n */\r\nexport function normalizeOptions(configuredOptions) {\r\n    // Convert options to objects.\r\n    return configuredOptions\r\n        .map(item => getOptionDefinition(item))\r\n        // Filter out undefined values that `getOptionDefinition` might return.\r\n        .filter((option) => option !== undefined);\r\n}\r\n// Default named presets map. Always create a new instance of the preset object in order to avoid modifying references.\r\nconst namedPresets = {\r\n    get tiny() {\r\n        return {\r\n            title: 'Tiny',\r\n            model: 'tiny',\r\n            view: {\r\n                name: 'span',\r\n                classes: 'text-tiny',\r\n                priority: 7\r\n            }\r\n        };\r\n    },\r\n    get small() {\r\n        return {\r\n            title: 'Small',\r\n            model: 'small',\r\n            view: {\r\n                name: 'span',\r\n                classes: 'text-small',\r\n                priority: 7\r\n            }\r\n        };\r\n    },\r\n    get big() {\r\n        return {\r\n            title: 'Big',\r\n            model: 'big',\r\n            view: {\r\n                name: 'span',\r\n                classes: 'text-big',\r\n                priority: 7\r\n            }\r\n        };\r\n    },\r\n    get huge() {\r\n        return {\r\n            title: 'Huge',\r\n            model: 'huge',\r\n            view: {\r\n                name: 'span',\r\n                classes: 'text-huge',\r\n                priority: 7\r\n            }\r\n        };\r\n    }\r\n};\r\n/**\r\n * Returns an option definition either from preset or creates one from number shortcut.\r\n * If object is passed then this method will return it without alternating it. Returns undefined for item than cannot be parsed.\r\n */\r\nfunction getOptionDefinition(option) {\r\n    if (typeof option === 'number') {\r\n        option = String(option);\r\n    }\r\n    // Check whether passed option is a full item definition provided by user in configuration.\r\n    if (typeof option === 'object' && isFullItemDefinition(option)) {\r\n        return attachPriority(option);\r\n    }\r\n    const preset = findPreset(option);\r\n    // Item is a named preset.\r\n    if (preset) {\r\n        return attachPriority(preset);\r\n    }\r\n    // 'Default' font size. It will be used to remove the fontSize attribute.\r\n    if (option === 'default') {\r\n        return {\r\n            model: undefined,\r\n            title: 'Default'\r\n        };\r\n    }\r\n    // At this stage we probably have numerical value to generate a preset so parse it's value.\r\n    // Discard any faulty values.\r\n    if (isNumericalDefinition(option)) {\r\n        return undefined;\r\n    }\r\n    // Return font size definition from size value.\r\n    return generatePixelPreset(option);\r\n}\r\n/**\r\n * Creates a predefined preset for pixel size.\r\n * @param definition Font size in pixels.\r\n * @returns\r\n */\r\nfunction generatePixelPreset(definition) {\r\n    // Extend a short (numeric value) definition.\r\n    if (typeof definition === 'string') {\r\n        definition = {\r\n            title: definition,\r\n            model: `${parseFloat(definition)}px`\r\n        };\r\n    }\r\n    definition.view = {\r\n        name: 'span',\r\n        styles: {\r\n            'font-size': definition.model\r\n        }\r\n    };\r\n    return attachPriority(definition);\r\n}\r\n/**\r\n * Adds the priority to the view element definition if missing. It's required due to ckeditor/ckeditor5#2291\r\n */\r\nfunction attachPriority(definition) {\r\n    if (definition.view && typeof definition.view !== 'string' && !definition.view.priority) {\r\n        definition.view.priority = 7;\r\n    }\r\n    return definition;\r\n}\r\n/**\r\n * Returns a prepared preset definition. If passed an object, a name of preset should be defined as `model` value.\r\n *\r\n * @param definition.model A preset name.\r\n */\r\nfunction findPreset(definition) {\r\n    return typeof definition === 'string' ? namedPresets[definition] : namedPresets[definition.model];\r\n}\r\n/**\r\n * We treat `definition` as completed if it is an object that contains `title`, `model` and `view` values.\r\n */\r\nfunction isFullItemDefinition(definition) {\r\n    return definition.title && definition.model && definition.view;\r\n}\r\nfunction isNumericalDefinition(definition) {\r\n    let numberValue;\r\n    if (typeof definition === 'object') {\r\n        if (!definition.model) {\r\n            /**\r\n             * Provided value as an option for {@link module:font/fontsize~FontSize} seems to invalid.\r\n             *\r\n             * See valid examples described in the {@link module:font/fontconfig~FontSizeConfig#options plugin configuration}.\r\n             *\r\n             * @error font-size-invalid-definition\r\n             */\r\n            throw new CKEditorError('font-size-invalid-definition', null, definition);\r\n        }\r\n        else {\r\n            numberValue = parseFloat(definition.model);\r\n        }\r\n    }\r\n    else {\r\n        numberValue = parseFloat(definition);\r\n    }\r\n    return isNaN(numberValue);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontsize/fontsizeediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { CKEditorError } from 'ckeditor5/src/utils';\r\nimport { isLength, isPercentage } from 'ckeditor5/src/engine';\r\nimport FontSizeCommand from './fontsizecommand';\r\nimport { normalizeOptions } from './utils';\r\nimport { buildDefinition, FONT_SIZE } from '../utils';\r\n// Mapping of `<font size=\"..\">` styling to CSS's `font-size` values.\r\nconst styleFontSize = [\r\n    'x-small',\r\n    'x-small',\r\n    'small',\r\n    'medium',\r\n    'large',\r\n    'x-large',\r\n    'xx-large',\r\n    'xxx-large'\r\n];\r\n/**\r\n * The font size editing feature.\r\n *\r\n * It introduces the {@link module:font/fontsize/fontsizecommand~FontSizeCommand command} and the `fontSize`\r\n * attribute in the {@link module:engine/model/model~Model model} which renders in the {@link module:engine/view/view view}\r\n * as a `<span>` element with either:\r\n * * a style attribute (`<span style=\"font-size:12px\">...</span>`),\r\n * * or a class attribute (`<span class=\"text-small\">...</span>`)\r\n *\r\n * depending on the {@link module:font/fontconfig~FontSizeConfig configuration}.\r\n */\r\nexport default class FontSizeEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontSizeEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        // Define default configuration using named presets.\r\n        editor.config.define(FONT_SIZE, {\r\n            options: [\r\n                'tiny',\r\n                'small',\r\n                'default',\r\n                'big',\r\n                'huge'\r\n            ],\r\n            supportAllValues: false\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow fontSize attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: FONT_SIZE });\r\n        editor.model.schema.setAttributeProperties(FONT_SIZE, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n        const supportAllValues = editor.config.get('fontSize.supportAllValues');\r\n        // Define view to model conversion.\r\n        const options = normalizeOptions(this.editor.config.get('fontSize.options'))\r\n            .filter(item => item.model);\r\n        const definition = buildDefinition(FONT_SIZE, options);\r\n        // Set-up the two-way conversion.\r\n        if (supportAllValues) {\r\n            this._prepareAnyValueConverters(definition);\r\n            this._prepareCompatibilityConverter();\r\n        }\r\n        else {\r\n            editor.conversion.attributeToElement(definition);\r\n        }\r\n        // Add FontSize command.\r\n        editor.commands.add(FONT_SIZE, new FontSizeCommand(editor));\r\n    }\r\n    /**\r\n     * These converters enable keeping any value found as `style=\"font-size: *\"` as a value of an attribute on a text even\r\n     * if it is not defined in the plugin configuration.\r\n     *\r\n     * @param definition Converter definition out of input data.\r\n     */\r\n    _prepareAnyValueConverters(definition) {\r\n        const editor = this.editor;\r\n        // If `fontSize.supportAllValues=true`, we do not allow to use named presets in the plugin's configuration.\r\n        const presets = definition.model.values.filter((value) => {\r\n            return !isLength(String(value)) && !isPercentage(String(value));\r\n        });\r\n        if (presets.length) {\r\n            /**\r\n             * If {@link module:font/fontconfig~FontSizeConfig#supportAllValues `config.fontSize.supportAllValues`} is `true`,\r\n             * you need to use numerical values as font size options.\r\n             *\r\n             * See valid examples described in the {@link module:font/fontconfig~FontSizeConfig#options plugin configuration}.\r\n             *\r\n             * @error font-size-invalid-use-of-named-presets\r\n             * @param {Array.<String>} presets Invalid values.\r\n             */\r\n            throw new CKEditorError('font-size-invalid-use-of-named-presets', null, { presets });\r\n        }\r\n        editor.conversion.for('downcast').attributeToElement({\r\n            model: FONT_SIZE,\r\n            view: (attributeValue, { writer }) => {\r\n                if (!attributeValue) {\r\n                    return;\r\n                }\r\n                return writer.createAttributeElement('span', { style: 'font-size:' + attributeValue }, { priority: 7 });\r\n            }\r\n        });\r\n        editor.conversion.for('upcast').elementToAttribute({\r\n            model: {\r\n                key: FONT_SIZE,\r\n                value: (viewElement) => viewElement.getStyle('font-size')\r\n            },\r\n            view: {\r\n                name: 'span',\r\n                styles: {\r\n                    'font-size': /.*/\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Adds support for legacy `<font size=\"..\">` formatting.\r\n     */\r\n    _prepareCompatibilityConverter() {\r\n        const editor = this.editor;\r\n        editor.conversion.for('upcast').elementToAttribute({\r\n            view: {\r\n                name: 'font',\r\n                attributes: {\r\n                    // Documentation mentions sizes from 1 to 7. To handle old content we support all values\r\n                    // up to 999 but clamp it to the valid range. Why 999? It should cover accidental values\r\n                    // similar to percentage, e.g. 100%, 200% which could be the usual mistake for font size.\r\n                    'size': /^[+-]?\\d{1,3}$/\r\n                }\r\n            },\r\n            model: {\r\n                key: FONT_SIZE,\r\n                value: (viewElement) => {\r\n                    const value = viewElement.getAttribute('size');\r\n                    const isRelative = value[0] === '-' || value[0] === '+';\r\n                    let size = parseInt(value, 10);\r\n                    if (isRelative) {\r\n                        // Add relative size (which can be negative) to the default size = 3.\r\n                        size = 3 + size;\r\n                    }\r\n                    const maxSize = styleFontSize.length - 1;\r\n                    const clampedSize = Math.min(Math.max(size, 0), maxSize);\r\n                    return styleFontSize[clampedSize];\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./fontsize.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontsize/fontsizeui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Model, createDropdown, addListToDropdown } from 'ckeditor5/src/ui';\r\nimport { Collection } from 'ckeditor5/src/utils';\r\nimport { normalizeOptions } from './utils';\r\nimport { FONT_SIZE } from '../utils';\r\nimport '../../theme/fontsize.css';\r\nimport fontSizeIcon from '../../theme/icons/font-size.svg';\r\n/**\r\n * The font size UI plugin. It introduces the `'fontSize'` dropdown.\r\n */\r\nexport default class FontSizeUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontSizeUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const options = this._getLocalizedOptions();\r\n        const command = editor.commands.get(FONT_SIZE);\r\n        const accessibleLabel = t('Font Size');\r\n        // Register UI component.\r\n        editor.ui.componentFactory.add(FONT_SIZE, locale => {\r\n            const dropdownView = createDropdown(locale);\r\n            addListToDropdown(dropdownView, () => _prepareListOptions(options, command), {\r\n                role: 'menu',\r\n                ariaLabel: accessibleLabel\r\n            });\r\n            // Create dropdown model.\r\n            dropdownView.buttonView.set({\r\n                label: accessibleLabel,\r\n                icon: fontSizeIcon,\r\n                tooltip: true\r\n            });\r\n            dropdownView.extendTemplate({\r\n                attributes: {\r\n                    class: [\r\n                        'ck-font-size-dropdown'\r\n                    ]\r\n                }\r\n            });\r\n            dropdownView.bind('isEnabled').to(command);\r\n            // Execute command when an item from the dropdown is selected.\r\n            this.listenTo(dropdownView, 'execute', evt => {\r\n                editor.execute(evt.source.commandName, { value: evt.source.commandParam });\r\n                editor.editing.view.focus();\r\n            });\r\n            return dropdownView;\r\n        });\r\n    }\r\n    /**\r\n     * Returns options as defined in `config.fontSize.options` but processed to account for\r\n     * editor localization, i.e. to display {@link module:font/fontconfig~FontSizeOption}\r\n     * in the correct language.\r\n     *\r\n     * Note: The reason behind this method is that there is no way to use {@link module:utils/locale~Locale#t}\r\n     * when the user configuration is defined because the editor does not exist yet.\r\n     */\r\n    _getLocalizedOptions() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const localizedTitles = {\r\n            Default: t('Default'),\r\n            Tiny: t('Tiny'),\r\n            Small: t('Small'),\r\n            Big: t('Big'),\r\n            Huge: t('Huge')\r\n        };\r\n        const options = normalizeOptions((editor.config.get(FONT_SIZE)).options);\r\n        return options.map(option => {\r\n            const title = localizedTitles[option.title];\r\n            if (title && title != option.title) {\r\n                // Clone the option to avoid altering the original `namedPresets` from `./utils.js`.\r\n                option = Object.assign({}, option, { title });\r\n            }\r\n            return option;\r\n        });\r\n    }\r\n}\r\n/**\r\n * Prepares FontSize dropdown items.\r\n */\r\nfunction _prepareListOptions(options, command) {\r\n    const itemDefinitions = new Collection();\r\n    for (const option of options) {\r\n        const def = {\r\n            type: 'button',\r\n            model: new Model({\r\n                commandName: FONT_SIZE,\r\n                commandParam: option.model,\r\n                label: option.title,\r\n                class: 'ck-fontsize-option',\r\n                role: 'menuitemradio',\r\n                withText: true\r\n            })\r\n        };\r\n        if (option.view && typeof option.view !== 'string') {\r\n            if (option.view.styles) {\r\n                def.model.set('labelStyle', `font-size:${option.view.styles['font-size']}`);\r\n            }\r\n            if (option.view.classes) {\r\n                def.model.set('class', `${def.model.class} ${option.view.classes}`);\r\n            }\r\n        }\r\n        def.model.bind('isOn').to(command, 'value', value => value === option.model);\r\n        // Add the option to the collection.\r\n        itemDefinitions.add(def);\r\n    }\r\n    return itemDefinitions;\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M9.816 11.5 7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontsize\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport FontSizeEditing from './fontsize/fontsizeediting';\r\nimport FontSizeUI from './fontsize/fontsizeui';\r\nimport { normalizeOptions } from './fontsize/utils';\r\n/**\r\n * The font size plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/font font feature} documentation\r\n * and the {@glink api/font package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:font/fontsize/fontsizeediting~FontSizeEditing} and\r\n * {@link module:font/fontsize/fontsizeui~FontSizeUI} features in the editor.\r\n */\r\nexport default class FontSize extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [FontSizeEditing, FontSizeUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontSize';\r\n    }\r\n    /**\r\n     * Normalizes and translates the {@link module:font/fontconfig~FontSizeConfig#options configuration options}\r\n     * to the {@link module:font/fontconfig~FontSizeOption} format.\r\n     *\r\n     * @param configuredOptions An array of options taken from the configuration.\r\n     */\r\n    normalizeSizeOptions(options) {\r\n        return normalizeOptions(options);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport FontCommand from '../fontcommand';\r\nimport { FONT_COLOR } from '../utils';\r\n/**\r\n * The font color command. It is used by {@link module:font/fontcolor/fontcolorediting~FontColorEditing}\r\n * to apply the font color.\r\n *\r\n * ```ts\r\n * editor.execute( 'fontColor', { value: 'rgb(250, 20, 20)' } );\r\n * ```\r\n *\r\n * **Note**: Executing the command with the `null` value removes the attribute from the model.\r\n */\r\nexport default class FontColorCommand extends FontCommand {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor, FONT_COLOR);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontcolor/fontcolorediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport FontColorCommand from './fontcolorcommand';\r\nimport { FONT_COLOR, renderDowncastElement, renderUpcastAttribute } from '../utils';\r\n/**\r\n * The font color editing feature.\r\n *\r\n * It introduces the {@link module:font/fontcolor/fontcolorcommand~FontColorCommand command} and\r\n * the `fontColor` attribute in the {@link module:engine/model/model~Model model} which renders\r\n * in the {@link module:engine/view/view view} as a `<span>` element (`<span style=\"color: ...\">`),\r\n * depending on the {@link module:font/fontconfig~FontColorConfig configuration}.\r\n */\r\nexport default class FontColorEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontColorEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define(FONT_COLOR, {\r\n            colors: [\r\n                {\r\n                    color: 'hsl(0, 0%, 0%)',\r\n                    label: 'Black'\r\n                },\r\n                {\r\n                    color: 'hsl(0, 0%, 30%)',\r\n                    label: 'Dim grey'\r\n                },\r\n                {\r\n                    color: 'hsl(0, 0%, 60%)',\r\n                    label: 'Grey'\r\n                },\r\n                {\r\n                    color: 'hsl(0, 0%, 90%)',\r\n                    label: 'Light grey'\r\n                },\r\n                {\r\n                    color: 'hsl(0, 0%, 100%)',\r\n                    label: 'White',\r\n                    hasBorder: true\r\n                },\r\n                {\r\n                    color: 'hsl(0, 75%, 60%)',\r\n                    label: 'Red'\r\n                },\r\n                {\r\n                    color: 'hsl(30, 75%, 60%)',\r\n                    label: 'Orange'\r\n                },\r\n                {\r\n                    color: 'hsl(60, 75%, 60%)',\r\n                    label: 'Yellow'\r\n                },\r\n                {\r\n                    color: 'hsl(90, 75%, 60%)',\r\n                    label: 'Light green'\r\n                },\r\n                {\r\n                    color: 'hsl(120, 75%, 60%)',\r\n                    label: 'Green'\r\n                },\r\n                {\r\n                    color: 'hsl(150, 75%, 60%)',\r\n                    label: 'Aquamarine'\r\n                },\r\n                {\r\n                    color: 'hsl(180, 75%, 60%)',\r\n                    label: 'Turquoise'\r\n                },\r\n                {\r\n                    color: 'hsl(210, 75%, 60%)',\r\n                    label: 'Light blue'\r\n                },\r\n                {\r\n                    color: 'hsl(240, 75%, 60%)',\r\n                    label: 'Blue'\r\n                },\r\n                {\r\n                    color: 'hsl(270, 75%, 60%)',\r\n                    label: 'Purple'\r\n                }\r\n            ],\r\n            columns: 5\r\n        });\r\n        editor.conversion.for('upcast').elementToAttribute({\r\n            view: {\r\n                name: 'span',\r\n                styles: {\r\n                    'color': /[\\s\\S]+/\r\n                }\r\n            },\r\n            model: {\r\n                key: FONT_COLOR,\r\n                value: renderUpcastAttribute('color')\r\n            }\r\n        });\r\n        // Support legacy `<font color=\"..\">` formatting.\r\n        editor.conversion.for('upcast').elementToAttribute({\r\n            view: {\r\n                name: 'font',\r\n                attributes: {\r\n                    'color': /^#?\\w+$/\r\n                }\r\n            },\r\n            model: {\r\n                key: FONT_COLOR,\r\n                value: (viewElement) => viewElement.getAttribute('color')\r\n            }\r\n        });\r\n        editor.conversion.for('downcast').attributeToElement({\r\n            model: FONT_COLOR,\r\n            view: renderDowncastElement('color')\r\n        });\r\n        editor.commands.add(FONT_COLOR, new FontColorCommand(editor));\r\n        // Allow the font color attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: FONT_COLOR });\r\n        editor.model.schema.setAttributeProperties(FONT_COLOR, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/ui/colorui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { createDropdown, normalizeColorOptions, getLocalizedColorOptions, focusChildOnDropdownOpen } from 'ckeditor5/src/ui';\r\nimport { addColorTableToDropdown } from '../utils';\r\n/**\r\n * The color UI plugin which isolates the common logic responsible for displaying dropdowns with color grids.\r\n *\r\n * It is used to create the `'fontBackgroundColor'` and `'fontColor'` dropdowns, each hosting\r\n * a {@link module:font/ui/colortableview~ColorTableView}.\r\n */\r\nexport default class ColorUI extends Plugin {\r\n    /**\r\n     * Creates a plugin which introduces a dropdown with a pre–configured {@link module:font/ui/colortableview~ColorTableView}.\r\n     *\r\n     * @param config The configuration object.\r\n     * @param config.commandName The name of the command which will be executed when a color tile is clicked.\r\n     * @param config.componentName The name of the dropdown in the {@link module:ui/componentfactory~ComponentFactory}\r\n     * and the configuration scope name in `editor.config`.\r\n     * @param config.icon The SVG icon used by the dropdown.\r\n     * @param config.dropdownLabel The label used by the dropdown.\r\n     */\r\n    constructor(editor, { commandName, componentName, icon, dropdownLabel }) {\r\n        super(editor);\r\n        this.commandName = commandName;\r\n        this.componentName = componentName;\r\n        this.icon = icon;\r\n        this.dropdownLabel = dropdownLabel;\r\n        this.columns = editor.config.get(`${this.componentName}.columns`);\r\n        this.colorTableView = undefined;\r\n    }\r\n    /**\r\n    * @inheritDoc\r\n    */\r\n    init() {\r\n        const editor = this.editor;\r\n        const locale = editor.locale;\r\n        const t = locale.t;\r\n        const command = editor.commands.get(this.commandName);\r\n        const componentConfig = editor.config.get(this.componentName);\r\n        const colorsConfig = normalizeColorOptions(componentConfig.colors);\r\n        const localizedColors = getLocalizedColorOptions(locale, colorsConfig);\r\n        const documentColorsCount = componentConfig.documentColors;\r\n        const hasColorPicker = componentConfig.colorPicker !== false;\r\n        // Register the UI component.\r\n        editor.ui.componentFactory.add(this.componentName, locale => {\r\n            const dropdownView = createDropdown(locale);\r\n            // Font color dropdown rendering is deferred once it gets open to improve performance (#6192).\r\n            let dropdownContentRendered = false;\r\n            this.colorTableView = addColorTableToDropdown({\r\n                dropdownView,\r\n                colors: localizedColors.map(option => ({\r\n                    label: option.label,\r\n                    color: option.model,\r\n                    options: {\r\n                        hasBorder: option.hasBorder\r\n                    }\r\n                })),\r\n                columns: this.columns,\r\n                removeButtonLabel: t('Remove color'),\r\n                colorPickerLabel: t('Color picker'),\r\n                documentColorsLabel: documentColorsCount !== 0 ? t('Document colors') : '',\r\n                documentColorsCount: documentColorsCount === undefined ? this.columns : documentColorsCount,\r\n                colorPickerConfig: hasColorPicker ? (componentConfig.colorPicker || {}) : false\r\n            });\r\n            this.colorTableView.bind('selectedColor').to(command, 'value');\r\n            dropdownView.buttonView.set({\r\n                label: this.dropdownLabel,\r\n                icon: this.icon,\r\n                tooltip: true\r\n            });\r\n            dropdownView.extendTemplate({\r\n                attributes: {\r\n                    class: 'ck-color-ui-dropdown'\r\n                }\r\n            });\r\n            dropdownView.bind('isEnabled').to(command);\r\n            this.colorTableView.on('execute', (evt, data) => {\r\n                if (dropdownView.isOpen) {\r\n                    editor.execute(this.commandName, {\r\n                        value: data.value,\r\n                        batch: this._undoStepBatch\r\n                    });\r\n                }\r\n                if (data.source !== 'colorPicker') {\r\n                    editor.editing.view.focus();\r\n                }\r\n            });\r\n            this.colorTableView.on('showColorPicker', () => {\r\n                this._undoStepBatch = editor.model.createBatch();\r\n            });\r\n            this.colorTableView.on('cancel', () => {\r\n                if (this._undoStepBatch.operations.length) {\r\n                    // We need to close the dropdown before the undo batch.\r\n                    // Otherwise, ColorUI treats undo as a selected color change,\r\n                    // propagating the update to the whole selection.\r\n                    // That's an issue if spans with various colors were selected.\r\n                    dropdownView.isOpen = false;\r\n                    editor.execute('undo', this._undoStepBatch);\r\n                }\r\n                editor.editing.view.focus();\r\n            });\r\n            dropdownView.on('change:isOpen', (evt, name, isVisible) => {\r\n                if (!dropdownContentRendered) {\r\n                    dropdownContentRendered = true;\r\n                    dropdownView.colorTableView.appendUI();\r\n                }\r\n                if (isVisible) {\r\n                    if (documentColorsCount !== 0) {\r\n                        this.colorTableView.updateDocumentColors(editor.model, this.componentName);\r\n                    }\r\n                    this.colorTableView.updateSelectedColors();\r\n                }\r\n                else {\r\n                    this.colorTableView.showColorGrids();\r\n                }\r\n            });\r\n            // Accessibility: focus the first active color when opening the dropdown.\r\n            focusChildOnDropdownOpen(dropdownView, () => dropdownView.colorTableView.colorGridsPageView.staticColorsGrid.items.find((item) => item.isOn));\r\n            return dropdownView;\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontcolor/fontcolorui\r\n */\r\nimport ColorUI from '../ui/colorui';\r\nimport { FONT_COLOR } from '../utils';\r\nimport fontColorIcon from '../../theme/icons/font-color.svg';\r\n/**\r\n * The font color UI plugin. It introduces the `'fontColor'` dropdown.\r\n */\r\nexport default class FontColorUI extends ColorUI {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        const t = editor.locale.t;\r\n        super(editor, {\r\n            commandName: FONT_COLOR,\r\n            componentName: FONT_COLOR,\r\n            icon: fontColorIcon,\r\n            dropdownLabel: t('Font Color')\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontColorUI';\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M12.4 10.3 10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontcolor\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport FontColorEditing from './fontcolor/fontcolorediting';\r\nimport FontColorUI from './fontcolor/fontcolorui';\r\n/**\r\n * The font color plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/font font feature} documentation\r\n * and the {@glink api/font package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:font/fontcolor/fontcolorediting~FontColorEditing} and\r\n * {@link module:font/fontcolor/fontcolorui~FontColorUI} features in the editor.\r\n */\r\nexport default class FontColor extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [FontColorEditing, FontColorUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontColor';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport FontCommand from '../fontcommand';\r\nimport { FONT_BACKGROUND_COLOR } from '../utils';\r\n/**\r\n * The font background color command. It is used by\r\n * {@link module:font/fontbackgroundcolor/fontbackgroundcolorediting~FontBackgroundColorEditing}\r\n * to apply the font background color.\r\n *\r\n * ```ts\r\n * editor.execute( 'fontBackgroundColor', { value: 'rgb(250, 20, 20)' } );\r\n * ```\r\n *\r\n * **Note**: Executing the command with the `null` value removes the attribute from the model.\r\n */\r\nexport default class FontBackgroundColorCommand extends FontCommand {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor, FONT_BACKGROUND_COLOR);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontbackgroundcolor/fontbackgroundcolorediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { addBackgroundRules } from 'ckeditor5/src/engine';\r\nimport FontBackgroundColorCommand from './fontbackgroundcolorcommand';\r\nimport { FONT_BACKGROUND_COLOR, renderDowncastElement, renderUpcastAttribute } from '../utils';\r\n/**\r\n * The font background color editing feature.\r\n *\r\n * It introduces the {@link module:font/fontbackgroundcolor/fontbackgroundcolorcommand~FontBackgroundColorCommand command} and\r\n * the `fontBackgroundColor` attribute in the {@link module:engine/model/model~Model model} which renders\r\n * in the {@link module:engine/view/view view} as a `<span>` element (`<span style=\"background-color: ...\">`),\r\n * depending on the {@link module:font/fontconfig~FontColorConfig configuration}.\r\n */\r\nexport default class FontBackgroundColorEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontBackgroundColorEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define(FONT_BACKGROUND_COLOR, {\r\n            colors: [\r\n                {\r\n                    color: 'hsl(0, 0%, 0%)',\r\n                    label: 'Black'\r\n                },\r\n                {\r\n                    color: 'hsl(0, 0%, 30%)',\r\n                    label: 'Dim grey'\r\n                },\r\n                {\r\n                    color: 'hsl(0, 0%, 60%)',\r\n                    label: 'Grey'\r\n                },\r\n                {\r\n                    color: 'hsl(0, 0%, 90%)',\r\n                    label: 'Light grey'\r\n                },\r\n                {\r\n                    color: 'hsl(0, 0%, 100%)',\r\n                    label: 'White',\r\n                    hasBorder: true\r\n                },\r\n                {\r\n                    color: 'hsl(0, 75%, 60%)',\r\n                    label: 'Red'\r\n                },\r\n                {\r\n                    color: 'hsl(30, 75%, 60%)',\r\n                    label: 'Orange'\r\n                },\r\n                {\r\n                    color: 'hsl(60, 75%, 60%)',\r\n                    label: 'Yellow'\r\n                },\r\n                {\r\n                    color: 'hsl(90, 75%, 60%)',\r\n                    label: 'Light green'\r\n                },\r\n                {\r\n                    color: 'hsl(120, 75%, 60%)',\r\n                    label: 'Green'\r\n                },\r\n                {\r\n                    color: 'hsl(150, 75%, 60%)',\r\n                    label: 'Aquamarine'\r\n                },\r\n                {\r\n                    color: 'hsl(180, 75%, 60%)',\r\n                    label: 'Turquoise'\r\n                },\r\n                {\r\n                    color: 'hsl(210, 75%, 60%)',\r\n                    label: 'Light blue'\r\n                },\r\n                {\r\n                    color: 'hsl(240, 75%, 60%)',\r\n                    label: 'Blue'\r\n                },\r\n                {\r\n                    color: 'hsl(270, 75%, 60%)',\r\n                    label: 'Purple'\r\n                }\r\n            ],\r\n            columns: 5\r\n        });\r\n        editor.data.addStyleProcessorRules(addBackgroundRules);\r\n        editor.conversion.for('upcast').elementToAttribute({\r\n            view: {\r\n                name: 'span',\r\n                styles: {\r\n                    'background-color': /[\\s\\S]+/\r\n                }\r\n            },\r\n            model: {\r\n                key: FONT_BACKGROUND_COLOR,\r\n                value: renderUpcastAttribute('background-color')\r\n            }\r\n        });\r\n        editor.conversion.for('downcast').attributeToElement({\r\n            model: FONT_BACKGROUND_COLOR,\r\n            view: renderDowncastElement('background-color')\r\n        });\r\n        editor.commands.add(FONT_BACKGROUND_COLOR, new FontBackgroundColorCommand(editor));\r\n        // Allow the font backgroundColor attribute on text nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: FONT_BACKGROUND_COLOR });\r\n        editor.model.schema.setAttributeProperties(FONT_BACKGROUND_COLOR, {\r\n            isFormatting: true,\r\n            copyOnEnter: true\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontbackgroundcolor/fontbackgroundcolorui\r\n */\r\nimport ColorUI from '../ui/colorui';\r\nimport { FONT_BACKGROUND_COLOR } from '../utils';\r\nimport fontBackgroundColorIcon from '../../theme/icons/font-background.svg';\r\n/**\r\n * The font background color UI plugin. It introduces the `'fontBackgroundColor'` dropdown.\r\n */\r\nexport default class FontBackgroundColorUI extends ColorUI {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        const t = editor.locale.t;\r\n        super(editor, {\r\n            commandName: FONT_BACKGROUND_COLOR,\r\n            componentName: FONT_BACKGROUND_COLOR,\r\n            icon: fontBackgroundColorIcon,\r\n            dropdownLabel: t('Font Background Color')\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontBackgroundColorUI';\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/fontbackgroundcolor\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport FontBackgroundColorEditing from './fontbackgroundcolor/fontbackgroundcolorediting';\r\nimport FontBackgroundColorUI from './fontbackgroundcolor/fontbackgroundcolorui';\r\n/**\r\n * The font background color plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/font font feature} documentation\r\n * and the {@glink api/font package page}.\r\n *\r\n * This is a \"glue\" plugin which loads\r\n * the {@link module:font/fontbackgroundcolor/fontbackgroundcolorediting~FontBackgroundColorEditing} and\r\n * {@link module:font/fontbackgroundcolor/fontbackgroundcolorui~FontBackgroundColorUI} features in the editor.\r\n */\r\nexport default class FontBackgroundColor extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [FontBackgroundColorEditing, FontBackgroundColorUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'FontBackgroundColor';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module font/font\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport FontFamily from './fontfamily';\r\nimport FontSize from './fontsize';\r\nimport FontColor from './fontcolor';\r\nimport FontBackgroundColor from './fontbackgroundcolor';\r\n/**\r\n * A plugin that enables a set of text styling features:\r\n *\r\n * * {@link module:font/fontsize~FontSize},\r\n * * {@link module:font/fontfamily~FontFamily}.\r\n * * {@link module:font/fontcolor~FontColor},\r\n * * {@link module:font/fontbackgroundcolor~FontBackgroundColor}.\r\n *\r\n * For a detailed overview, check the {@glink features/font Font feature} documentation\r\n * and the {@glink api/font package page}.\r\n */\r\nexport default class Font extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [FontFamily, FontSize, FontColor, FontBackgroundColor];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Font';\r\n    }\r\n}\r\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nexport default basePropertyOf;\n","import arrayReduce from './_arrayReduce.js';\nimport deburr from './deburr.js';\nimport words from './words.js';\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nexport default createCompounder;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import basePropertyOf from './_basePropertyOf.js';\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nexport default deburrLetter;\n","import deburrLetter from './_deburrLetter.js';\nimport toString from './toString.js';\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('déjà vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nexport default deburr;\n","/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nexport default asciiWords;\n","/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nexport default hasUnicodeWord;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nexport default unicodeWords;\n","import asciiWords from './_asciiWords.js';\nimport hasUnicodeWord from './_hasUnicodeWord.js';\nimport toString from './toString.js';\nimport unicodeWords from './_unicodeWords.js';\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nexport default words;\n","import baseSlice from './_baseSlice.js';\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nexport default castSlice;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nexport default baseSlice;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nexport default hasUnicode;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nexport default unicodeToArray;\n","import asciiToArray from './_asciiToArray.js';\nimport hasUnicode from './_hasUnicode.js';\nimport unicodeToArray from './_unicodeToArray.js';\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nexport default stringToArray;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nexport default asciiToArray;\n","import createCaseFirst from './_createCaseFirst.js';\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nexport default upperFirst;\n","import castSlice from './_castSlice.js';\nimport hasUnicode from './_hasUnicode.js';\nimport stringToArray from './_stringToArray.js';\nimport toString from './toString.js';\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nexport default createCaseFirst;\n","import createCompounder from './_createCompounder.js';\nimport upperFirst from './upperFirst.js';\n\n/**\n * Converts `string` to\n * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n *\n * @static\n * @memberOf _\n * @since 3.1.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the start cased string.\n * @example\n *\n * _.startCase('--foo-bar--');\n * // => 'Foo Bar'\n *\n * _.startCase('fooBar');\n * // => 'Foo Bar'\n *\n * _.startCase('__FOO_BAR__');\n * // => 'FOO BAR'\n */\nvar startCase = createCompounder(function(result, word, index) {\n  return result + (index ? ' ' : '') + upperFirst(word);\n});\n\nexport default startCase;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nexport default arrayReduce;\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { startCase, cloneDeep } from 'lodash-es';\r\n/**\r\n* Helper function for the downcast converter. Updates attributes on the given view element.\r\n*\r\n* @param writer The view writer.\r\n* @param oldViewAttributes The previous GHS attribute value.\r\n* @param newViewAttributes The current GHS attribute value.\r\n* @param viewElement The view element to update.\r\n*/\r\nexport function updateViewAttributes(writer, oldViewAttributes, newViewAttributes, viewElement) {\r\n    if (oldViewAttributes) {\r\n        removeViewAttributes(writer, oldViewAttributes, viewElement);\r\n    }\r\n    if (newViewAttributes) {\r\n        setViewAttributes(writer, newViewAttributes, viewElement);\r\n    }\r\n}\r\n/**\r\n * Helper function for the downcast converter. Sets attributes on the given view element.\r\n *\r\n * @param writer The view writer.\r\n * @param viewAttributes The GHS attribute value.\r\n * @param viewElement The view element to update.\r\n */\r\nexport function setViewAttributes(writer, viewAttributes, viewElement) {\r\n    if (viewAttributes.attributes) {\r\n        for (const [key, value] of Object.entries(viewAttributes.attributes)) {\r\n            writer.setAttribute(key, value, viewElement);\r\n        }\r\n    }\r\n    if (viewAttributes.styles) {\r\n        writer.setStyle(viewAttributes.styles, viewElement);\r\n    }\r\n    if (viewAttributes.classes) {\r\n        writer.addClass(viewAttributes.classes, viewElement);\r\n    }\r\n}\r\n/**\r\n * Helper function for the downcast converter. Removes attributes on the given view element.\r\n *\r\n * @param writer The view writer.\r\n * @param viewAttributes The GHS attribute value.\r\n * @param viewElement The view element to update.\r\n */\r\nexport function removeViewAttributes(writer, viewAttributes, viewElement) {\r\n    if (viewAttributes.attributes) {\r\n        for (const [key] of Object.entries(viewAttributes.attributes)) {\r\n            writer.removeAttribute(key, viewElement);\r\n        }\r\n    }\r\n    if (viewAttributes.styles) {\r\n        for (const style of Object.keys(viewAttributes.styles)) {\r\n            writer.removeStyle(style, viewElement);\r\n        }\r\n    }\r\n    if (viewAttributes.classes) {\r\n        writer.removeClass(viewAttributes.classes, viewElement);\r\n    }\r\n}\r\n/**\r\n* Merges view element attribute objects.\r\n*/\r\nexport function mergeViewElementAttributes(target, source) {\r\n    const result = cloneDeep(target);\r\n    let key = 'attributes';\r\n    for (key in source) {\r\n        // Merge classes.\r\n        if (key == 'classes') {\r\n            result[key] = Array.from(new Set([...(target[key] || []), ...source[key]]));\r\n        }\r\n        // Merge attributes or styles.\r\n        else {\r\n            result[key] = { ...target[key], ...source[key] };\r\n        }\r\n    }\r\n    return result;\r\n}\r\nexport function modifyGhsAttribute(writer, item, ghsAttributeName, subject, callback) {\r\n    const oldValue = item.getAttribute(ghsAttributeName);\r\n    const newValue = {};\r\n    for (const kind of ['attributes', 'styles', 'classes']) {\r\n        // Properties other than `subject` should be assigned from `oldValue`.\r\n        if (kind != subject) {\r\n            if (oldValue && oldValue[kind]) {\r\n                newValue[kind] = oldValue[kind];\r\n            }\r\n            continue;\r\n        }\r\n        // `callback` should be applied on property [`subject`].\r\n        if (subject == 'classes') {\r\n            const values = new Set(oldValue && oldValue.classes || []);\r\n            callback(values);\r\n            if (values.size) {\r\n                newValue[kind] = Array.from(values);\r\n            }\r\n            continue;\r\n        }\r\n        const values = new Map(Object.entries(oldValue && oldValue[kind] || {}));\r\n        callback(values);\r\n        if (values.size) {\r\n            newValue[kind] = Object.fromEntries(values);\r\n        }\r\n    }\r\n    if (Object.keys(newValue).length) {\r\n        if (item.is('documentSelection')) {\r\n            writer.setSelectionAttribute(ghsAttributeName, newValue);\r\n        }\r\n        else {\r\n            writer.setAttribute(ghsAttributeName, newValue, item);\r\n        }\r\n    }\r\n    else if (oldValue) {\r\n        if (item.is('documentSelection')) {\r\n            writer.removeSelectionAttribute(ghsAttributeName);\r\n        }\r\n        else {\r\n            writer.removeAttribute(ghsAttributeName, item);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Transforms passed string to PascalCase format. Examples:\r\n * * `div` => `Div`\r\n * * `h1` => `H1`\r\n * * `table` => `Table`\r\n */\r\nexport function toPascalCase(data) {\r\n    return startCase(data).replace(/ /g, '');\r\n}\r\n/**\r\n * Returns the attribute name of the model element that holds raw HTML attributes.\r\n */\r\nexport function getHtmlAttributeName(viewElementName) {\r\n    return `html${toPascalCase(viewElementName)}Attributes`;\r\n}\r\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { toWidget } from 'ckeditor5/src/widget';\r\nimport { setViewAttributes, mergeViewElementAttributes, updateViewAttributes, getHtmlAttributeName } from './utils';\r\n/**\r\n * View-to-model conversion helper for object elements.\r\n *\r\n * Preserves object element content in `htmlContent` attribute.\r\n *\r\n * @returns Returns a conversion callback.\r\n*/\r\nexport function viewToModelObjectConverter({ model: modelName }) {\r\n    return (viewElement, conversionApi) => {\r\n        // Let's keep element HTML and its attributes, so we can rebuild element in downcast conversions.\r\n        return conversionApi.writer.createElement(modelName, {\r\n            htmlContent: viewElement.getCustomProperty('$rawContent')\r\n        });\r\n    };\r\n}\r\n/**\r\n * Conversion helper converting an object element to an HTML object widget.\r\n *\r\n * @returns Returns a conversion callback.\r\n*/\r\nexport function toObjectWidgetConverter(editor, { view: viewName, isInline }) {\r\n    const t = editor.t;\r\n    return (modelElement, { writer }) => {\r\n        const widgetLabel = t('HTML object');\r\n        const viewElement = createObjectView(viewName, modelElement, writer);\r\n        const viewAttributes = modelElement.getAttribute(getHtmlAttributeName(viewName));\r\n        writer.addClass('html-object-embed__content', viewElement);\r\n        if (viewAttributes) {\r\n            setViewAttributes(writer, viewAttributes, viewElement);\r\n        }\r\n        // Widget cannot be a raw element because the widget system would not be able\r\n        // to add its UI to it. Thus, we need separate view container.\r\n        const viewContainer = writer.createContainerElement(isInline ? 'span' : 'div', {\r\n            class: 'html-object-embed',\r\n            'data-html-object-embed-label': widgetLabel\r\n        }, viewElement);\r\n        return toWidget(viewContainer, writer, { label: widgetLabel });\r\n    };\r\n}\r\n/**\r\n* Creates object view element from the given model element.\r\n*/\r\nexport function createObjectView(viewName, modelElement, writer) {\r\n    return writer.createRawElement(viewName, null, (domElement, domConverter) => {\r\n        domConverter.setContentOf(domElement, modelElement.getAttribute('htmlContent'));\r\n    });\r\n}\r\n/**\r\n * View-to-attribute conversion helper preserving inline element attributes on `$text`.\r\n *\r\n * @returns Returns a conversion callback.\r\n*/\r\nexport function viewToAttributeInlineConverter({ view: viewName, model: attributeKey }, dataFilter) {\r\n    return (dispatcher) => {\r\n        dispatcher.on(`element:${viewName}`, (evt, data, conversionApi) => {\r\n            let viewAttributes = dataFilter.processViewAttributes(data.viewItem, conversionApi);\r\n            // Do not apply the attribute if the element itself is already consumed and there are no view attributes to store.\r\n            if (!viewAttributes && !conversionApi.consumable.test(data.viewItem, { name: true })) {\r\n                return;\r\n            }\r\n            // Otherwise, we might need to convert it to an empty object just to preserve element itself,\r\n            // for example `<cite>` => <$text htmlCite=\"{}\">.\r\n            viewAttributes = viewAttributes || {};\r\n            // Consume the element itself if it wasn't consumed by any other converter.\r\n            conversionApi.consumable.consume(data.viewItem, { name: true });\r\n            // Since we are converting to attribute we need a range on which we will set the attribute.\r\n            // If the range is not created yet, we will create it.\r\n            if (!data.modelRange) {\r\n                data = Object.assign(data, conversionApi.convertChildren(data.viewItem, data.modelCursor));\r\n            }\r\n            // Set attribute on each item in range according to the schema.\r\n            for (const node of data.modelRange.getItems()) {\r\n                if (conversionApi.schema.checkAttribute(node, attributeKey)) {\r\n                    // Node's children are converted recursively, so node can already include model attribute.\r\n                    // We want to extend it, not replace.\r\n                    const nodeAttributes = node.getAttribute(attributeKey);\r\n                    const attributesToAdd = mergeViewElementAttributes(viewAttributes, nodeAttributes || {});\r\n                    conversionApi.writer.setAttribute(attributeKey, attributesToAdd, node);\r\n                }\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * Attribute-to-view conversion helper applying attributes to view element preserved on `$text`.\r\n *\r\n * @returns Returns a conversion callback.\r\n*/\r\nexport function attributeToViewInlineConverter({ priority, view: viewName }) {\r\n    return (attributeValue, conversionApi) => {\r\n        if (!attributeValue) {\r\n            return;\r\n        }\r\n        const { writer } = conversionApi;\r\n        const viewElement = writer.createAttributeElement(viewName, null, { priority });\r\n        setViewAttributes(writer, attributeValue, viewElement);\r\n        return viewElement;\r\n    };\r\n}\r\n/**\r\n * View-to-model conversion helper preserving allowed attributes on block element.\r\n *\r\n * All matched attributes will be preserved on `html*Attributes` attribute.\r\n *\r\n * @returns Returns a conversion callback.\r\n*/\r\nexport function viewToModelBlockAttributeConverter({ view: viewName }, dataFilter) {\r\n    return (dispatcher) => {\r\n        dispatcher.on(`element:${viewName}`, (evt, data, conversionApi) => {\r\n            // Converting an attribute of an element that has not been converted to anything does not make sense\r\n            // because there will be nowhere to set that attribute on. At this stage, the element should've already\r\n            // been converted. A collapsed range can show up in to-do lists (<input>) or complex widgets (e.g. table).\r\n            // (https://github.com/ckeditor/ckeditor5/issues/11000).\r\n            if (!data.modelRange || data.modelRange.isCollapsed) {\r\n                return;\r\n            }\r\n            const viewAttributes = dataFilter.processViewAttributes(data.viewItem, conversionApi);\r\n            if (!viewAttributes) {\r\n                return;\r\n            }\r\n            conversionApi.writer.setAttribute(getHtmlAttributeName(data.viewItem.name), viewAttributes, data.modelRange);\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * Model-to-view conversion helper applying attributes preserved in `html*Attributes` attribute\r\n * for block elements.\r\n *\r\n * @returns Returns a conversion callback.\r\n*/\r\nexport function modelToViewBlockAttributeConverter({ view: viewName, model: modelName }) {\r\n    return (dispatcher) => {\r\n        dispatcher.on(`attribute:${getHtmlAttributeName(viewName)}:${modelName}`, (evt, data, conversionApi) => {\r\n            if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n                return;\r\n            }\r\n            const { attributeOldValue, attributeNewValue } = data;\r\n            const viewWriter = conversionApi.writer;\r\n            const viewElement = conversionApi.mapper.toViewElement(data.item);\r\n            updateViewAttributes(viewWriter, attributeOldValue, attributeNewValue, viewElement);\r\n        });\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/schemadefinitions\r\n */\r\n// Skipped elements due to HTML deprecation:\r\n// * noframes (not sure if we should provide support for this element. CKE4 is not supporting frameset and frame,\r\n//   but it will unpack <frameset><noframes>foobar</noframes></frameset> to <noframes>foobar</noframes>, so there\r\n//   may be some content loss. Although using noframes as a standalone element seems invalid)\r\n// * keygen (this one is also empty)\r\n// * applet (support is limited mostly to old IE)\r\n// * basefont (this one is also empty)\r\n// * isindex (basically no support for modern browsers at all)\r\n//\r\n// Skipped elements due to lack empty element support:\r\n// * hr\r\n// * area\r\n// * br\r\n// * command\r\n// * map\r\n// * wbr\r\n// * colgroup -> col\r\n//\r\n// Skipped elements due to complexity:\r\n// * datalist with option elements used as a data source for input[list] element\r\n//\r\n// Skipped elements as they are handled as an object content:\r\n// * track\r\n// * source\r\n// * option\r\n// * param\r\n// * optgroup\r\n//\r\n// Skipped full page HTML elements:\r\n// * body\r\n// * html\r\n// * title\r\n// * head\r\n// * meta\r\n// * link\r\n// * etc...\r\n//\r\n// Skipped hidden elements:\r\n// noscript\r\nexport default {\r\n    block: [\r\n        // Existing features.\r\n        {\r\n            model: 'codeBlock',\r\n            view: 'pre'\r\n        },\r\n        {\r\n            model: 'paragraph',\r\n            view: 'p'\r\n        },\r\n        {\r\n            model: 'blockQuote',\r\n            view: 'blockquote'\r\n        },\r\n        {\r\n            model: 'listItem',\r\n            view: 'li'\r\n        },\r\n        {\r\n            model: 'pageBreak',\r\n            view: 'div'\r\n        },\r\n        {\r\n            model: 'rawHtml',\r\n            view: 'div'\r\n        },\r\n        {\r\n            model: 'table',\r\n            view: 'table'\r\n        },\r\n        {\r\n            model: 'tableRow',\r\n            view: 'tr'\r\n        },\r\n        {\r\n            model: 'tableCell',\r\n            view: 'td'\r\n        },\r\n        {\r\n            model: 'tableCell',\r\n            view: 'th'\r\n        },\r\n        {\r\n            model: 'tableColumnGroup',\r\n            view: 'colgroup'\r\n        },\r\n        {\r\n            model: 'tableColumn',\r\n            view: 'col'\r\n        },\r\n        {\r\n            model: 'caption',\r\n            view: 'caption'\r\n        },\r\n        {\r\n            model: 'caption',\r\n            view: 'figcaption'\r\n        },\r\n        {\r\n            model: 'imageBlock',\r\n            view: 'img'\r\n        },\r\n        {\r\n            model: 'imageInline',\r\n            view: 'img'\r\n        },\r\n        // Compatibility features.\r\n        {\r\n            model: 'htmlP',\r\n            view: 'p',\r\n            modelSchema: {\r\n                inheritAllFrom: '$block'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlBlockquote',\r\n            view: 'blockquote',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlTable',\r\n            view: 'table',\r\n            modelSchema: {\r\n                allowWhere: '$block',\r\n                isBlock: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlTbody',\r\n            view: 'tbody',\r\n            modelSchema: {\r\n                allowIn: 'htmlTable',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlThead',\r\n            view: 'thead',\r\n            modelSchema: {\r\n                allowIn: 'htmlTable',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlTfoot',\r\n            view: 'tfoot',\r\n            modelSchema: {\r\n                allowIn: 'htmlTable',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlCaption',\r\n            view: 'caption',\r\n            modelSchema: {\r\n                allowIn: 'htmlTable',\r\n                allowChildren: '$text',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlColgroup',\r\n            view: 'colgroup',\r\n            modelSchema: {\r\n                allowIn: 'htmlTable',\r\n                allowChildren: 'col',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlCol',\r\n            view: 'col',\r\n            modelSchema: {\r\n                allowIn: 'htmlColgroup',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlTr',\r\n            view: 'tr',\r\n            modelSchema: {\r\n                allowIn: ['htmlTable', 'htmlThead', 'htmlTbody'],\r\n                isLimit: true\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlTd',\r\n            view: 'td',\r\n            modelSchema: {\r\n                allowIn: 'htmlTr',\r\n                allowContentOf: '$container',\r\n                isLimit: true,\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlTh',\r\n            view: 'th',\r\n            modelSchema: {\r\n                allowIn: 'htmlTr',\r\n                allowContentOf: '$container',\r\n                isLimit: true,\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlFigure',\r\n            view: 'figure',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include other block elements.\r\n        {\r\n            model: 'htmlFigcaption',\r\n            view: 'figcaption',\r\n            modelSchema: {\r\n                allowIn: 'htmlFigure',\r\n                allowChildren: '$text',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlAddress',\r\n            view: 'address',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlAside',\r\n            view: 'aside',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlMain',\r\n            view: 'main',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlDetails',\r\n            view: 'details',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlSummary',\r\n            view: 'summary',\r\n            modelSchema: {\r\n                allowChildren: '$text',\r\n                allowIn: 'htmlDetails',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlDiv',\r\n            view: 'div',\r\n            paragraphLikeModel: 'htmlDivParagraph',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container'\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlFieldset',\r\n            view: 'fieldset',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include h1-h6.\r\n        {\r\n            model: 'htmlLegend',\r\n            view: 'legend',\r\n            modelSchema: {\r\n                allowIn: 'htmlFieldset',\r\n                allowChildren: '$text'\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlHeader',\r\n            view: 'header',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlFooter',\r\n            view: 'footer',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlForm',\r\n            view: 'form',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlHgroup',\r\n            view: 'hgroup',\r\n            modelSchema: {\r\n                allowChildren: [\r\n                    'htmlH1',\r\n                    'htmlH2',\r\n                    'htmlH3',\r\n                    'htmlH4',\r\n                    'htmlH5',\r\n                    'htmlH6'\r\n                ],\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlH1',\r\n            view: 'h1',\r\n            modelSchema: {\r\n                inheritAllFrom: '$block'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlH2',\r\n            view: 'h2',\r\n            modelSchema: {\r\n                inheritAllFrom: '$block'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlH3',\r\n            view: 'h3',\r\n            modelSchema: {\r\n                inheritAllFrom: '$block'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlH4',\r\n            view: 'h4',\r\n            modelSchema: {\r\n                inheritAllFrom: '$block'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlH5',\r\n            view: 'h5',\r\n            modelSchema: {\r\n                inheritAllFrom: '$block'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlH6',\r\n            view: 'h6',\r\n            modelSchema: {\r\n                inheritAllFrom: '$block'\r\n            }\r\n        },\r\n        {\r\n            model: '$htmlList',\r\n            modelSchema: {\r\n                allowWhere: '$container',\r\n                allowChildren: ['$htmlList', 'htmlLi'],\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlDir',\r\n            view: 'dir',\r\n            modelSchema: {\r\n                inheritAllFrom: '$htmlList'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlMenu',\r\n            view: 'menu',\r\n            modelSchema: {\r\n                inheritAllFrom: '$htmlList'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlUl',\r\n            view: 'ul',\r\n            modelSchema: {\r\n                inheritAllFrom: '$htmlList'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlOl',\r\n            view: 'ol',\r\n            modelSchema: {\r\n                inheritAllFrom: '$htmlList'\r\n            }\r\n        },\r\n        // TODO can also include other block elements.\r\n        {\r\n            model: 'htmlLi',\r\n            view: 'li',\r\n            modelSchema: {\r\n                allowIn: '$htmlList',\r\n                allowChildren: '$text',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlPre',\r\n            view: 'pre',\r\n            modelSchema: {\r\n                inheritAllFrom: '$block'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlArticle',\r\n            view: 'article',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlSection',\r\n            view: 'section',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        // TODO can also include text.\r\n        {\r\n            model: 'htmlNav',\r\n            view: 'nav',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlDivDl',\r\n            view: 'div',\r\n            modelSchema: {\r\n                allowChildren: ['htmlDt', 'htmlDd'],\r\n                allowIn: 'htmlDl'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlDl',\r\n            view: 'dl',\r\n            modelSchema: {\r\n                allowWhere: '$container',\r\n                allowChildren: ['htmlDt', 'htmlDd', 'htmlDivDl'],\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlDt',\r\n            view: 'dt',\r\n            modelSchema: {\r\n                allowChildren: '$block',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlDd',\r\n            view: 'dd',\r\n            modelSchema: {\r\n                allowChildren: '$block',\r\n                isBlock: false\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlCenter',\r\n            view: 'center',\r\n            modelSchema: {\r\n                inheritAllFrom: '$container',\r\n                isBlock: false\r\n            }\r\n        }\r\n    ],\r\n    inline: [\r\n        // Existing features (attribute set on an existing model element).\r\n        {\r\n            model: 'htmlLiAttributes',\r\n            view: 'li',\r\n            appliesToBlock: true,\r\n            coupledAttribute: 'listItemId'\r\n        },\r\n        {\r\n            model: 'htmlOlAttributes',\r\n            view: 'ol',\r\n            appliesToBlock: true,\r\n            coupledAttribute: 'listItemId'\r\n        },\r\n        {\r\n            model: 'htmlUlAttributes',\r\n            view: 'ul',\r\n            appliesToBlock: true,\r\n            coupledAttribute: 'listItemId'\r\n        },\r\n        {\r\n            model: 'htmlFigureAttributes',\r\n            view: 'figure',\r\n            appliesToBlock: 'table'\r\n        },\r\n        {\r\n            model: 'htmlTheadAttributes',\r\n            view: 'thead',\r\n            appliesToBlock: 'table'\r\n        },\r\n        {\r\n            model: 'htmlTbodyAttributes',\r\n            view: 'tbody',\r\n            appliesToBlock: 'table'\r\n        },\r\n        {\r\n            model: 'htmlFigureAttributes',\r\n            view: 'figure',\r\n            appliesToBlock: 'imageBlock'\r\n        },\r\n        // Compatibility features.\r\n        {\r\n            model: 'htmlAcronym',\r\n            view: 'acronym',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlTt',\r\n            view: 'tt',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlFont',\r\n            view: 'font',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlTime',\r\n            view: 'time',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlVar',\r\n            view: 'var',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlBig',\r\n            view: 'big',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlSmall',\r\n            view: 'small',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlSamp',\r\n            view: 'samp',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlQ',\r\n            view: 'q',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlOutput',\r\n            view: 'output',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlKbd',\r\n            view: 'kbd',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlBdi',\r\n            view: 'bdi',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlBdo',\r\n            view: 'bdo',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlAbbr',\r\n            view: 'abbr',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlA',\r\n            view: 'a',\r\n            priority: 5,\r\n            coupledAttribute: 'linkHref',\r\n            attributeProperties: {\r\n                copyOnEnter: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlStrong',\r\n            view: 'strong',\r\n            coupledAttribute: 'bold',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlB',\r\n            view: 'b',\r\n            coupledAttribute: 'bold',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlI',\r\n            view: 'i',\r\n            coupledAttribute: 'italic',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlEm',\r\n            view: 'em',\r\n            coupledAttribute: 'italic',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlS',\r\n            view: 's',\r\n            coupledAttribute: 'strikethrough',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        // TODO According to HTML-spec can behave as div-like element, although CKE4 only handles it as an inline element.\r\n        {\r\n            model: 'htmlDel',\r\n            view: 'del',\r\n            coupledAttribute: 'strikethrough',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        // TODO According to HTML-spec can behave as div-like element, although CKE4 only handles it as an inline element.\r\n        {\r\n            model: 'htmlIns',\r\n            view: 'ins',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlU',\r\n            view: 'u',\r\n            coupledAttribute: 'underline',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlSub',\r\n            view: 'sub',\r\n            coupledAttribute: 'subscript',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlSup',\r\n            view: 'sup',\r\n            coupledAttribute: 'superscript',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlCode',\r\n            view: 'code',\r\n            coupledAttribute: 'code',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlMark',\r\n            view: 'mark',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlSpan',\r\n            view: 'span',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlCite',\r\n            view: 'cite',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlLabel',\r\n            view: 'label',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlDfn',\r\n            view: 'dfn',\r\n            attributeProperties: {\r\n                copyOnEnter: true,\r\n                isFormatting: true\r\n            }\r\n        },\r\n        // Objects.\r\n        {\r\n            model: 'htmlObject',\r\n            view: 'object',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlIframe',\r\n            view: 'iframe',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlInput',\r\n            view: 'input',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlButton',\r\n            view: 'button',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlTextarea',\r\n            view: 'textarea',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlSelect',\r\n            view: 'select',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlVideo',\r\n            view: 'video',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlEmbed',\r\n            view: 'embed',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlOembed',\r\n            view: 'oembed',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlAudio',\r\n            view: 'audio',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlImg',\r\n            view: 'img',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlCanvas',\r\n            view: 'canvas',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        // TODO it could be probably represented as non-object element, although it has graphical representation,\r\n        // so probably makes more sense to keep it as an object.\r\n        {\r\n            model: 'htmlMeter',\r\n            view: 'meter',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        // TODO it could be probably represented as non-object element, although it has graphical representation,\r\n        // so probably makes more sense to keep it as an object.\r\n        {\r\n            model: 'htmlProgress',\r\n            view: 'progress',\r\n            isObject: true,\r\n            modelSchema: {\r\n                inheritAllFrom: '$inlineObject'\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlScript',\r\n            view: 'script',\r\n            modelSchema: {\r\n                allowWhere: ['$text', '$block'],\r\n                isInline: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlStyle',\r\n            view: 'style',\r\n            modelSchema: {\r\n                allowWhere: ['$text', '$block'],\r\n                isInline: true\r\n            }\r\n        },\r\n        {\r\n            model: 'htmlCustomElement',\r\n            view: '$customElement',\r\n            modelSchema: {\r\n                allowWhere: ['$text', '$block'],\r\n                allowAttributesOf: '$inlineObject',\r\n                isInline: true\r\n            }\r\n        }\r\n    ]\r\n};\r\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.merge` except that it accepts `customizer` which\n * is invoked to produce the merged values of the destination and source\n * properties. If `customizer` returns `undefined`, merging is handled by the\n * method instead. The `customizer` is invoked with six arguments:\n * (objValue, srcValue, key, object, source, stack).\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} sources The source objects.\n * @param {Function} customizer The function to customize assigned values.\n * @returns {Object} Returns `object`.\n * @example\n *\n * function customizer(objValue, srcValue) {\n *   if (_.isArray(objValue)) {\n *     return objValue.concat(srcValue);\n *   }\n * }\n *\n * var object = { 'a': [1], 'b': [2] };\n * var other = { 'a': [3], 'b': [4] };\n *\n * _.mergeWith(object, other, customizer);\n * // => { 'a': [1, 3], 'b': [2, 4] }\n */\nvar mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n  baseMerge(object, source, srcIndex, customizer);\n});\n\nexport default mergeWith;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/dataschema\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { toArray } from 'ckeditor5/src/utils';\r\nimport defaultConfig from './schemadefinitions';\r\nimport { mergeWith } from 'lodash-es';\r\n/**\r\n * Holds representation of the extended HTML document type definitions to be used by the\r\n * editor in HTML support.\r\n *\r\n * Data schema is represented by data schema definitions.\r\n *\r\n * To add new definition for block element,\r\n * use {@link module:html-support/dataschema~DataSchema#registerBlockElement} method:\r\n *\r\n * ```ts\r\n * dataSchema.registerBlockElement( {\r\n * \tview: 'section',\r\n * \tmodel: 'my-section',\r\n * \tmodelSchema: {\r\n * \t\tinheritAllFrom: '$block'\r\n * \t}\r\n * } );\r\n * ```\r\n *\r\n * To add new definition for inline element,\r\n * use {@link module:html-support/dataschema~DataSchema#registerInlineElement} method:\r\n *\r\n * ```\r\n * dataSchema.registerInlineElement( {\r\n * \tview: 'span',\r\n * \tmodel: 'my-span',\r\n * \tattributeProperties: {\r\n * \t\tcopyOnEnter: true\r\n * \t}\r\n * } );\r\n * ```\r\n */\r\nexport default class DataSchema extends Plugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A map of registered data schema definitions.\r\n         */\r\n        this._definitions = [];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DataSchema';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        for (const definition of defaultConfig.block) {\r\n            this.registerBlockElement(definition);\r\n        }\r\n        for (const definition of defaultConfig.inline) {\r\n            this.registerInlineElement(definition);\r\n        }\r\n    }\r\n    /**\r\n     * Add new data schema definition describing block element.\r\n     */\r\n    registerBlockElement(definition) {\r\n        this._definitions.push({ ...definition, isBlock: true });\r\n    }\r\n    /**\r\n     * Add new data schema definition describing inline element.\r\n     */\r\n    registerInlineElement(definition) {\r\n        this._definitions.push({ ...definition, isInline: true });\r\n    }\r\n    /**\r\n     * Updates schema definition describing block element with new properties.\r\n     *\r\n     * Creates new scheme if it doesn't exist.\r\n     * Array properties are concatenated with original values.\r\n     *\r\n     * @param definition Definition update.\r\n     */\r\n    extendBlockElement(definition) {\r\n        this._extendDefinition({ ...definition, isBlock: true });\r\n    }\r\n    /**\r\n     * Updates schema definition describing inline element with new properties.\r\n     *\r\n     * Creates new scheme if it doesn't exist.\r\n     * Array properties are concatenated with original values.\r\n     *\r\n     * @param definition Definition update.\r\n     */\r\n    extendInlineElement(definition) {\r\n        this._extendDefinition({ ...definition, isInline: true });\r\n    }\r\n    /**\r\n     * Returns all definitions matching the given view name.\r\n     *\r\n     * @param includeReferences Indicates if this method should also include definitions of referenced models.\r\n     */\r\n    getDefinitionsForView(viewName, includeReferences = false) {\r\n        const definitions = new Set();\r\n        for (const definition of this._getMatchingViewDefinitions(viewName)) {\r\n            if (includeReferences) {\r\n                for (const reference of this._getReferences(definition.model)) {\r\n                    definitions.add(reference);\r\n                }\r\n            }\r\n            definitions.add(definition);\r\n        }\r\n        return definitions;\r\n    }\r\n    /**\r\n     * Returns definitions matching the given model name.\r\n     */\r\n    getDefinitionsForModel(modelName) {\r\n        return this._definitions.filter(definition => definition.model == modelName);\r\n    }\r\n    /**\r\n     * Returns definitions matching the given view name.\r\n     */\r\n    _getMatchingViewDefinitions(viewName) {\r\n        return this._definitions.filter(def => def.view && testViewName(viewName, def.view));\r\n    }\r\n    /**\r\n     * Resolves all definition references registered for the given data schema definition.\r\n     *\r\n     * @param modelName Data schema model name.\r\n     */\r\n    *_getReferences(modelName) {\r\n        const inheritProperties = [\r\n            'inheritAllFrom',\r\n            'inheritTypesFrom',\r\n            'allowWhere',\r\n            'allowContentOf',\r\n            'allowAttributesOf'\r\n        ];\r\n        const definitions = this._definitions.filter(definition => definition.model == modelName);\r\n        for (const { modelSchema } of definitions) {\r\n            if (!modelSchema) {\r\n                continue;\r\n            }\r\n            for (const property of inheritProperties) {\r\n                for (const referenceName of toArray(modelSchema[property] || [])) {\r\n                    const definitions = this._definitions.filter(definition => definition.model == referenceName);\r\n                    for (const definition of definitions) {\r\n                        if (referenceName !== modelName) {\r\n                            yield* this._getReferences(definition.model);\r\n                            yield definition;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Updates schema definition with new properties.\r\n     *\r\n     * Creates new scheme if it doesn't exist.\r\n     * Array properties are concatenated with original values.\r\n     *\r\n     * @param definition Definition update.\r\n     */\r\n    _extendDefinition(definition) {\r\n        const currentDefinitions = Array.from(this._definitions.entries())\r\n            .filter(([, currentDefinition]) => currentDefinition.model == definition.model);\r\n        if (currentDefinitions.length == 0) {\r\n            this._definitions.push(definition);\r\n            return;\r\n        }\r\n        for (const [idx, currentDefinition] of currentDefinitions) {\r\n            this._definitions[idx] = mergeWith({}, currentDefinition, definition, (target, source) => {\r\n                return Array.isArray(target) ? target.concat(source) : undefined;\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * Test view name against the given pattern.\r\n */\r\nfunction testViewName(pattern, viewName) {\r\n    if (typeof pattern === 'string') {\r\n        return pattern === viewName;\r\n    }\r\n    if (pattern instanceof RegExp) {\r\n        return pattern.test(viewName);\r\n    }\r\n    return false;\r\n}\r\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nexport default baseIsNaN;\n","import baseFindIndex from './_baseFindIndex.js';\nimport baseIsNaN from './_baseIsNaN.js';\nimport strictIndexOf from './_strictIndexOf.js';\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nexport default baseIndexOf;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default strictIndexOf;\n","/**\n * This function is like `baseIndexOf` except that it accepts a comparator.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOfWith(array, value, fromIndex, comparator) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (comparator(array[index], value)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nexport default baseIndexOfWith;\n","import arrayMap from './_arrayMap.js';\nimport baseIndexOf from './_baseIndexOf.js';\nimport baseIndexOfWith from './_baseIndexOfWith.js';\nimport baseUnary from './_baseUnary.js';\nimport copyArray from './_copyArray.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * The base implementation of `_.pullAllBy` without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns `array`.\n */\nfunction basePullAll(array, values, iteratee, comparator) {\n  var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n      index = -1,\n      length = values.length,\n      seen = array;\n\n  if (array === values) {\n    values = copyArray(values);\n  }\n  if (iteratee) {\n    seen = arrayMap(array, baseUnary(iteratee));\n  }\n  while (++index < length) {\n    var fromIndex = 0,\n        value = values[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n      if (seen !== array) {\n        splice.call(seen, fromIndex, 1);\n      }\n      splice.call(array, fromIndex, 1);\n    }\n  }\n  return array;\n}\n\nexport default basePullAll;\n","import baseRest from './_baseRest.js';\nimport pullAll from './pullAll.js';\n\n/**\n * Removes all given values from `array` using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n * to remove elements from an array by predicate.\n *\n * @static\n * @memberOf _\n * @since 2.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {...*} [values] The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pull(array, 'a', 'c');\n * console.log(array);\n * // => ['b', 'b']\n */\nvar pull = baseRest(pullAll);\n\nexport default pull;\n","import basePullAll from './_basePullAll.js';\n\n/**\n * This method is like `_.pull` except that it accepts an array of values to remove.\n *\n * **Note:** Unlike `_.difference`, this method mutates `array`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to modify.\n * @param {Array} values The values to remove.\n * @returns {Array} Returns `array`.\n * @example\n *\n * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n *\n * _.pullAll(array, ['a', 'c']);\n * console.log(array);\n * // => ['b', 'b']\n */\nfunction pullAll(array, values) {\n  return (array && array.length && values && values.length)\n    ? basePullAll(array, values)\n    : array;\n}\n\nexport default pullAll;\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./datafilter.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/datafilter\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Matcher } from 'ckeditor5/src/engine';\r\nimport { CKEditorError, priorities, isValidAttributeName } from 'ckeditor5/src/utils';\r\nimport { Widget } from 'ckeditor5/src/widget';\r\nimport { viewToModelObjectConverter, toObjectWidgetConverter, createObjectView, viewToAttributeInlineConverter, attributeToViewInlineConverter, viewToModelBlockAttributeConverter, modelToViewBlockAttributeConverter } from './converters';\r\nimport { default as DataSchema } from './dataschema';\r\nimport { getHtmlAttributeName } from './utils';\r\nimport { isPlainObject, pull as removeItemFromArray } from 'lodash-es';\r\nimport '../theme/datafilter.css';\r\n/**\r\n * Allows to validate elements and element attributes registered by {@link module:html-support/dataschema~DataSchema}.\r\n *\r\n * To enable registered element in the editor, use {@link module:html-support/datafilter~DataFilter#allowElement} method:\r\n *\r\n * ```ts\r\n * dataFilter.allowElement( 'section' );\r\n * ```\r\n *\r\n * You can also allow or disallow specific element attributes:\r\n *\r\n * ```ts\r\n * // Allow `data-foo` attribute on `section` element.\r\n * dataFilter.allowAttributes( {\r\n * \tname: 'section',\r\n * \tattributes: {\r\n * \t\t'data-foo': true\r\n * \t}\r\n * } );\r\n *\r\n * // Disallow `color` style attribute on 'section' element.\r\n * dataFilter.disallowAttributes( {\r\n * \tname: 'section',\r\n * \tstyles: {\r\n * \t\tcolor: /[\\s\\S]+/\r\n * \t}\r\n * } );\r\n * ```\r\n *\r\n * To apply the information about allowed and disallowed attributes in custom integration plugin,\r\n * use the {@link module:html-support/datafilter~DataFilter#processViewAttributes `processViewAttributes()`} method.\r\n */\r\nexport default class DataFilter extends Plugin {\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._dataSchema = editor.plugins.get('DataSchema');\r\n        this._allowedAttributes = new Matcher();\r\n        this._disallowedAttributes = new Matcher();\r\n        this._allowedElements = new Set();\r\n        this._disallowedElements = new Set();\r\n        this._dataInitialized = false;\r\n        this._coupledAttributes = null;\r\n        this._registerElementsAfterInit();\r\n        this._registerElementHandlers();\r\n        this._registerCoupledAttributesPostFixer();\r\n        this._registerAssociatedHtmlAttributesPostFixer();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DataFilter';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataSchema, Widget];\r\n    }\r\n    /**\r\n     * Load a configuration of one or many elements, where their attributes should be allowed.\r\n     *\r\n     * **Note**: Rules will be applied just before next data pipeline data init or set.\r\n     *\r\n     * @param config Configuration of elements that should have their attributes accepted in the editor.\r\n     */\r\n    loadAllowedConfig(config) {\r\n        for (const pattern of config) {\r\n            // MatcherPattern allows omitting `name` to widen the search of elements.\r\n            // Let's keep it consistent and match every element if a `name` has not been provided.\r\n            const elementName = pattern.name || /[\\s\\S]+/;\r\n            const rules = splitRules(pattern);\r\n            this.allowElement(elementName);\r\n            rules.forEach(pattern => this.allowAttributes(pattern));\r\n        }\r\n    }\r\n    /**\r\n     * Load a configuration of one or many elements, where their attributes should be disallowed.\r\n     *\r\n     * **Note**: Rules will be applied just before next data pipeline data init or set.\r\n     *\r\n     * @param config Configuration of elements that should have their attributes rejected from the editor.\r\n     */\r\n    loadDisallowedConfig(config) {\r\n        for (const pattern of config) {\r\n            // MatcherPattern allows omitting `name` to widen the search of elements.\r\n            // Let's keep it consistent and match every element if a `name` has not been provided.\r\n            const elementName = pattern.name || /[\\s\\S]+/;\r\n            const rules = splitRules(pattern);\r\n            // Disallow element itself if there is no other rules.\r\n            if (rules.length == 0) {\r\n                this.disallowElement(elementName);\r\n            }\r\n            else {\r\n                rules.forEach(pattern => this.disallowAttributes(pattern));\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Allow the given element in the editor context.\r\n     *\r\n     * This method will only allow elements described by the {@link module:html-support/dataschema~DataSchema} used\r\n     * to create data filter.\r\n     *\r\n     * **Note**: Rules will be applied just before next data pipeline data init or set.\r\n     *\r\n     * @param viewName String or regular expression matching view name.\r\n     */\r\n    allowElement(viewName) {\r\n        for (const definition of this._dataSchema.getDefinitionsForView(viewName, true)) {\r\n            this._addAllowedElement(definition);\r\n            // Reset cached map to recalculate it on the next usage.\r\n            this._coupledAttributes = null;\r\n        }\r\n    }\r\n    /**\r\n     * Disallow the given element in the editor context.\r\n     *\r\n     * This method will only disallow elements described by the {@link module:html-support/dataschema~DataSchema} used\r\n     * to create data filter.\r\n     *\r\n     * @param viewName String or regular expression matching view name.\r\n     */\r\n    disallowElement(viewName) {\r\n        for (const definition of this._dataSchema.getDefinitionsForView(viewName, false)) {\r\n            this._disallowedElements.add(definition.view);\r\n        }\r\n    }\r\n    /**\r\n     * Allow the given attributes for view element allowed by {@link #allowElement} method.\r\n     *\r\n     * @param config Pattern matching all attributes which should be allowed.\r\n     */\r\n    allowAttributes(config) {\r\n        this._allowedAttributes.add(config);\r\n    }\r\n    /**\r\n     * Disallow the given attributes for view element allowed by {@link #allowElement} method.\r\n     *\r\n     * @param config Pattern matching all attributes which should be disallowed.\r\n     */\r\n    disallowAttributes(config) {\r\n        this._disallowedAttributes.add(config);\r\n    }\r\n    /**\r\n     * Processes all allowed and disallowed attributes on the view element by consuming them and returning the allowed ones.\r\n     *\r\n     * This method applies the configuration set up by {@link #allowAttributes `allowAttributes()`}\r\n     * and {@link #disallowAttributes `disallowAttributes()`} over the given view element by consuming relevant attributes.\r\n     * It returns the allowed attributes that were found on the given view element for further processing by integration code.\r\n     *\r\n     * ```ts\r\n     * dispatcher.on( 'element:myElement', ( evt, data, conversionApi ) => {\r\n     * \t// Get rid of disallowed and extract all allowed attributes from a viewElement.\r\n     * \tconst viewAttributes = dataFilter.processViewAttributes( data.viewItem, conversionApi );\r\n     * \t// Do something with them, i.e. store inside a model as a dictionary.\r\n     * \tif ( viewAttributes ) {\r\n     * \t\tconversionApi.writer.setAttribute( 'htmlAttributesOfMyElement', viewAttributes, data.modelRange );\r\n     * \t}\r\n     * } );\r\n     * ```\r\n     *\r\n     * @see module:engine/conversion/viewconsumable~ViewConsumable#consume\r\n     *\r\n     * @returns Object with following properties:\r\n     * - attributes Set with matched attribute names.\r\n     * - styles Set with matched style names.\r\n     * - classes Set with matched class names.\r\n     */\r\n    processViewAttributes(viewElement, conversionApi) {\r\n        // Make sure that the disabled attributes are handled before the allowed attributes are called.\r\n        // For example, for block images the <figure> converter triggers conversion for <img> first and then for other elements, i.e. <a>.\r\n        consumeAttributes(viewElement, conversionApi, this._disallowedAttributes);\r\n        return consumeAttributes(viewElement, conversionApi, this._allowedAttributes);\r\n    }\r\n    /**\r\n     * Adds allowed element definition and fires registration event.\r\n     */\r\n    _addAllowedElement(definition) {\r\n        if (this._allowedElements.has(definition)) {\r\n            return;\r\n        }\r\n        this._allowedElements.add(definition);\r\n        // For attribute based integrations (table figure, document lists, etc.) register related element definitions.\r\n        if ('appliesToBlock' in definition && typeof definition.appliesToBlock == 'string') {\r\n            for (const relatedDefinition of this._dataSchema.getDefinitionsForModel(definition.appliesToBlock)) {\r\n                if (relatedDefinition.isBlock) {\r\n                    this._addAllowedElement(relatedDefinition);\r\n                }\r\n            }\r\n        }\r\n        // We need to wait for all features to be initialized before we can register\r\n        // element, so we can access existing features model schemas.\r\n        // If the data has not been initialized yet, _registerElementsAfterInit() method will take care of\r\n        // registering elements.\r\n        if (this._dataInitialized) {\r\n            // Defer registration to the next data pipeline data set so any disallow rules could be applied\r\n            // even if added after allow rule (disallowElement).\r\n            this.editor.data.once('set', () => {\r\n                this._fireRegisterEvent(definition);\r\n            }, {\r\n                // With the highest priority listener we are able to register elements right before\r\n                // running data conversion.\r\n                priority: priorities.highest + 1\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Registers elements allowed by {@link module:html-support/datafilter~DataFilter#allowElement} method\r\n     * once {@link module:engine/controller/datacontroller~DataController editor's data controller} is initialized.\r\n    */\r\n    _registerElementsAfterInit() {\r\n        this.editor.data.on('init', () => {\r\n            this._dataInitialized = true;\r\n            for (const definition of this._allowedElements) {\r\n                this._fireRegisterEvent(definition);\r\n            }\r\n        }, {\r\n            // With highest priority listener we are able to register elements right before\r\n            // running data conversion. Also:\r\n            // * Make sure that priority is higher than the one used by `RealTimeCollaborationClient`,\r\n            // as RTC is stopping event propagation.\r\n            // * Make sure no other features hook into this event before GHS because otherwise the\r\n            // downcast conversion (for these features) could run before GHS registered its converters\r\n            // (https://github.com/ckeditor/ckeditor5/issues/11356).\r\n            priority: priorities.highest + 1\r\n        });\r\n    }\r\n    /**\r\n     * Registers default element handlers.\r\n     */\r\n    _registerElementHandlers() {\r\n        this.on('register', (evt, definition) => {\r\n            const schema = this.editor.model.schema;\r\n            // Object element should be only registered for new features.\r\n            // If the model schema is already registered, it should be handled by\r\n            // #_registerBlockElement() or #_registerObjectElement() attribute handlers.\r\n            if (definition.isObject && !schema.isRegistered(definition.model)) {\r\n                this._registerObjectElement(definition);\r\n            }\r\n            else if (definition.isBlock) {\r\n                this._registerBlockElement(definition);\r\n            }\r\n            else if (definition.isInline) {\r\n                this._registerInlineElement(definition);\r\n            }\r\n            else {\r\n                /**\r\n                 * The definition cannot be handled by the data filter.\r\n                 *\r\n                 * Make sure that the registered definition is correct.\r\n                 *\r\n                 * @error data-filter-invalid-definition\r\n                 */\r\n                throw new CKEditorError('data-filter-invalid-definition', null, definition);\r\n            }\r\n            evt.stop();\r\n        }, { priority: 'lowest' });\r\n    }\r\n    /**\r\n     * Registers a model post-fixer that is removing coupled GHS attributes of inline elements. Those attributes\r\n     * are removed if a coupled feature attribute is removed.\r\n     *\r\n     * For example, consider following HTML:\r\n     *\r\n     * ```html\r\n     * <a href=\"foo.html\" id=\"myId\">bar</a>\r\n     * ```\r\n     *\r\n     * Which would be upcasted to following text node in the model:\r\n     *\r\n     * ```html\r\n     * <$text linkHref=\"foo.html\" htmlA=\"{ attributes: { id: 'myId' } }\">bar</$text>\r\n     * ```\r\n     *\r\n     * When the user removes the link from that text (using UI), only `linkHref` attribute would be removed:\r\n     *\r\n     * ```html\r\n     * <$text htmlA=\"{ attributes: { id: 'myId' } }\">bar</$text>\r\n     * ```\r\n     *\r\n     * The `htmlA` attribute would stay in the model and would cause GHS to generate an `<a>` element.\r\n     * This is incorrect from UX point of view, as the user wanted to remove the whole link (not only `href`).\r\n     */\r\n    _registerCoupledAttributesPostFixer() {\r\n        const model = this.editor.model;\r\n        model.document.registerPostFixer(writer => {\r\n            const changes = model.document.differ.getChanges();\r\n            let changed = false;\r\n            const coupledAttributes = this._getCoupledAttributesMap();\r\n            for (const change of changes) {\r\n                // Handle only attribute removals.\r\n                if (change.type != 'attribute' || change.attributeNewValue !== null) {\r\n                    continue;\r\n                }\r\n                // Find a list of coupled GHS attributes.\r\n                const attributeKeys = coupledAttributes.get(change.attributeKey);\r\n                if (!attributeKeys) {\r\n                    continue;\r\n                }\r\n                // Remove the coupled GHS attributes on the same range as the feature attribute was removed.\r\n                for (const { item } of change.range.getWalker({ shallow: true })) {\r\n                    for (const attributeKey of attributeKeys) {\r\n                        if (item.hasAttribute(attributeKey)) {\r\n                            writer.removeAttribute(attributeKey, item);\r\n                            changed = true;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            return changed;\r\n        });\r\n    }\r\n    /**\r\n     * Removes `html*Attributes` attributes from incompatible elements.\r\n     *\r\n     * For example, consider the following HTML:\r\n     *\r\n     * ```html\r\n     * <heading2 htmlH2Attributes=\"...\">foobar[]</heading2>\r\n     * ```\r\n     *\r\n     * Pressing `enter` creates a new `paragraph` element that inherits\r\n     * the `htmlH2Attributes` attribute from `heading2`.\r\n     *\r\n     * ```html\r\n     * <heading2 htmlH2Attributes=\"...\">foobar</heading2>\r\n     * <paragraph htmlH2Attributes=\"...\">[]</paragraph>\r\n     * ```\r\n     *\r\n     * This postfixer ensures that this doesn't happen, and that elements can\r\n     * only have `html*Attributes` associated with them,\r\n     * e.g.: `htmlPAttributes` for `<p>`, `htmlDivAttributes` for `<div>`, etc.\r\n     *\r\n     * With it enabled, pressing `enter` at the end of `<heading2>` will create\r\n     * a new paragraph without the `htmlH2Attributes` attribute.\r\n     *\r\n     * ```html\r\n     * <heading2 htmlH2Attributes=\"...\">foobar</heading2>\r\n     * <paragraph>[]</paragraph>\r\n     * ```\r\n     */\r\n    _registerAssociatedHtmlAttributesPostFixer() {\r\n        const model = this.editor.model;\r\n        model.document.registerPostFixer(writer => {\r\n            const changes = model.document.differ.getChanges();\r\n            let changed = false;\r\n            for (const change of changes) {\r\n                if (change.type !== 'insert' || change.name === '$text') {\r\n                    continue;\r\n                }\r\n                for (const attr of change.attributes.keys()) {\r\n                    if (!attr.startsWith('html') || !attr.endsWith('Attributes')) {\r\n                        continue;\r\n                    }\r\n                    if (!model.schema.checkAttribute(change.name, attr)) {\r\n                        writer.removeAttribute(attr, change.position.nodeAfter);\r\n                        changed = true;\r\n                    }\r\n                }\r\n            }\r\n            return changed;\r\n        });\r\n    }\r\n    /**\r\n     * Collects the map of coupled attributes. The returned map is keyed by the feature attribute name\r\n     * and coupled GHS attribute names are stored in the value array.\r\n     */\r\n    _getCoupledAttributesMap() {\r\n        if (this._coupledAttributes) {\r\n            return this._coupledAttributes;\r\n        }\r\n        this._coupledAttributes = new Map();\r\n        for (const definition of this._allowedElements) {\r\n            if (definition.coupledAttribute && definition.model) {\r\n                const attributeNames = this._coupledAttributes.get(definition.coupledAttribute);\r\n                if (attributeNames) {\r\n                    attributeNames.push(definition.model);\r\n                }\r\n                else {\r\n                    this._coupledAttributes.set(definition.coupledAttribute, [definition.model]);\r\n                }\r\n            }\r\n        }\r\n        return this._coupledAttributes;\r\n    }\r\n    /**\r\n     * Fires `register` event for the given element definition.\r\n     */\r\n    _fireRegisterEvent(definition) {\r\n        if (definition.view && this._disallowedElements.has(definition.view)) {\r\n            return;\r\n        }\r\n        this.fire(definition.view ? `register:${definition.view}` : 'register', definition);\r\n    }\r\n    /**\r\n     * Registers object element and attribute converters for the given data schema definition.\r\n     */\r\n    _registerObjectElement(definition) {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const conversion = editor.conversion;\r\n        const { view: viewName, model: modelName } = definition;\r\n        schema.register(modelName, definition.modelSchema);\r\n        /* istanbul ignore next: paranoid check -- @preserve */\r\n        if (!viewName) {\r\n            return;\r\n        }\r\n        schema.extend(definition.model, {\r\n            allowAttributes: [getHtmlAttributeName(viewName), 'htmlContent']\r\n        });\r\n        // Store element content in special `$rawContent` custom property to\r\n        // avoid editor's data filtering mechanism.\r\n        editor.data.registerRawContentMatcher({\r\n            name: viewName\r\n        });\r\n        conversion.for('upcast').elementToElement({\r\n            view: viewName,\r\n            model: viewToModelObjectConverter(definition),\r\n            // With a `low` priority, `paragraph` plugin auto-paragraphing mechanism is executed. Make sure\r\n            // this listener is called before it. If not, some elements will be transformed into a paragraph.\r\n            // `+ 2` is used to take priority over `_addDefaultH1Conversion` in the Heading plugin.\r\n            converterPriority: priorities.low + 2\r\n        });\r\n        conversion.for('upcast').add(viewToModelBlockAttributeConverter(definition, this));\r\n        conversion.for('editingDowncast').elementToStructure({\r\n            model: {\r\n                name: modelName,\r\n                attributes: [getHtmlAttributeName(viewName)]\r\n            },\r\n            view: toObjectWidgetConverter(editor, definition)\r\n        });\r\n        conversion.for('dataDowncast').elementToElement({\r\n            model: modelName,\r\n            view: (modelElement, { writer }) => {\r\n                return createObjectView(viewName, modelElement, writer);\r\n            }\r\n        });\r\n        conversion.for('dataDowncast').add(modelToViewBlockAttributeConverter(definition));\r\n    }\r\n    /**\r\n     * Registers block element and attribute converters for the given data schema definition.\r\n     */\r\n    _registerBlockElement(definition) {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const conversion = editor.conversion;\r\n        const { view: viewName, model: modelName } = definition;\r\n        if (!schema.isRegistered(definition.model)) {\r\n            schema.register(definition.model, definition.modelSchema);\r\n            if (!viewName) {\r\n                return;\r\n            }\r\n            conversion.for('upcast').elementToElement({\r\n                model: modelName,\r\n                view: viewName,\r\n                // With a `low` priority, `paragraph` plugin auto-paragraphing mechanism is executed. Make sure\r\n                // this listener is called before it. If not, some elements will be transformed into a paragraph.\r\n                // `+ 2` is used to take priority over `_addDefaultH1Conversion` in the Heading plugin.\r\n                converterPriority: priorities.low + 2\r\n            });\r\n            conversion.for('downcast').elementToElement({\r\n                model: modelName,\r\n                view: viewName\r\n            });\r\n        }\r\n        if (!viewName) {\r\n            return;\r\n        }\r\n        schema.extend(definition.model, {\r\n            allowAttributes: getHtmlAttributeName(viewName)\r\n        });\r\n        conversion.for('upcast').add(viewToModelBlockAttributeConverter(definition, this));\r\n        conversion.for('downcast').add(modelToViewBlockAttributeConverter(definition));\r\n    }\r\n    /**\r\n     * Registers inline element and attribute converters for the given data schema definition.\r\n     *\r\n     * Extends `$text` model schema to allow the given definition model attribute and its properties.\r\n     */\r\n    _registerInlineElement(definition) {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const conversion = editor.conversion;\r\n        const attributeKey = definition.model;\r\n        // This element is stored in the model as an attribute on a block element, for example DocumentLists.\r\n        if (definition.appliesToBlock) {\r\n            return;\r\n        }\r\n        schema.extend('$text', {\r\n            allowAttributes: attributeKey\r\n        });\r\n        if (definition.attributeProperties) {\r\n            schema.setAttributeProperties(attributeKey, definition.attributeProperties);\r\n        }\r\n        conversion.for('upcast').add(viewToAttributeInlineConverter(definition, this));\r\n        conversion.for('downcast').attributeToElement({\r\n            model: attributeKey,\r\n            view: attributeToViewInlineConverter(definition)\r\n        });\r\n    }\r\n}\r\n/**\r\n * Matches and consumes the given view attributes.\r\n */\r\nfunction consumeAttributes(viewElement, conversionApi, matcher) {\r\n    const matches = consumeAttributeMatches(viewElement, conversionApi, matcher);\r\n    const { attributes, styles, classes } = mergeMatchResults(matches);\r\n    const viewAttributes = {};\r\n    // Remove invalid DOM element attributes.\r\n    if (attributes.size) {\r\n        for (const key of attributes) {\r\n            if (!isValidAttributeName(key)) {\r\n                attributes.delete(key);\r\n            }\r\n        }\r\n    }\r\n    if (attributes.size) {\r\n        viewAttributes.attributes = iterableToObject(attributes, key => viewElement.getAttribute(key));\r\n    }\r\n    if (styles.size) {\r\n        viewAttributes.styles = iterableToObject(styles, key => viewElement.getStyle(key));\r\n    }\r\n    if (classes.size) {\r\n        viewAttributes.classes = Array.from(classes);\r\n    }\r\n    if (!Object.keys(viewAttributes).length) {\r\n        return null;\r\n    }\r\n    return viewAttributes;\r\n}\r\n/**\r\n * Consumes matched attributes.\r\n *\r\n * @returns Array with match information about found attributes.\r\n */\r\nfunction consumeAttributeMatches(viewElement, { consumable }, matcher) {\r\n    const matches = matcher.matchAll(viewElement) || [];\r\n    const consumedMatches = [];\r\n    for (const match of matches) {\r\n        removeConsumedAttributes(consumable, viewElement, match);\r\n        // We only want to consume attributes, so element can be still processed by other converters.\r\n        delete match.match.name;\r\n        consumable.consume(viewElement, match.match);\r\n        consumedMatches.push(match);\r\n    }\r\n    return consumedMatches;\r\n}\r\n/**\r\n * Removes attributes from the given match that were already consumed by other converters.\r\n */\r\nfunction removeConsumedAttributes(consumable, viewElement, match) {\r\n    for (const key of ['attributes', 'classes', 'styles']) {\r\n        const attributes = match.match[key];\r\n        if (!attributes) {\r\n            continue;\r\n        }\r\n        // Iterating over a copy of an array so removing items doesn't influence iteration.\r\n        for (const value of Array.from(attributes)) {\r\n            if (!consumable.test(viewElement, ({ [key]: [value] }))) {\r\n                removeItemFromArray(attributes, value);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Merges the result of {@link module:engine/view/matcher~Matcher#matchAll} method.\r\n *\r\n * @param matches\r\n * @returns Object with following properties:\r\n * - attributes Set with matched attribute names.\r\n * - styles Set with matched style names.\r\n * - classes Set with matched class names.\r\n */\r\nfunction mergeMatchResults(matches) {\r\n    const matchResult = {\r\n        attributes: new Set(),\r\n        classes: new Set(),\r\n        styles: new Set()\r\n    };\r\n    for (const match of matches) {\r\n        for (const key in matchResult) {\r\n            const values = match.match[key] || [];\r\n            values.forEach(value => (matchResult[key]).add(value));\r\n        }\r\n    }\r\n    return matchResult;\r\n}\r\n/**\r\n * Converts the given iterable object into an object.\r\n */\r\nfunction iterableToObject(iterable, getValue) {\r\n    const attributesObject = {};\r\n    for (const prop of iterable) {\r\n        const value = getValue(prop);\r\n        if (value !== undefined) {\r\n            attributesObject[prop] = getValue(prop);\r\n        }\r\n    }\r\n    return attributesObject;\r\n}\r\n/**\r\n * Matcher by default has to match **all** patterns to count it as an actual match. Splitting the pattern\r\n * into separate patterns means that any matched pattern will be count as a match.\r\n *\r\n * @param pattern Pattern to split.\r\n * @param attributeName Name of the attribute to split (e.g. 'attributes', 'classes', 'styles').\r\n */\r\nfunction splitPattern(pattern, attributeName) {\r\n    const { name } = pattern;\r\n    const attributeValue = pattern[attributeName];\r\n    if (isPlainObject(attributeValue)) {\r\n        return Object.entries(attributeValue).map(([key, value]) => ({\r\n            name,\r\n            [attributeName]: {\r\n                [key]: value\r\n            }\r\n        }));\r\n    }\r\n    if (Array.isArray(attributeValue)) {\r\n        return attributeValue.map(value => ({\r\n            name,\r\n            [attributeName]: [value]\r\n        }));\r\n    }\r\n    return [pattern];\r\n}\r\n/**\r\n * Rules are matched in conjunction (AND operation), but we want to have a match if *any* of the rules is matched (OR operation).\r\n * By splitting the rules we force the latter effect.\r\n */\r\nfunction splitRules(rules) {\r\n    const { name, attributes, classes, styles } = rules;\r\n    const splittedRules = [];\r\n    if (attributes) {\r\n        splittedRules.push(...splitPattern({ name, attributes }, 'attributes'));\r\n    }\r\n    if (classes) {\r\n        splittedRules.push(...splitPattern({ name, classes }, 'classes'));\r\n    }\r\n    if (styles) {\r\n        splittedRules.push(...splitPattern({ name, styles }, 'styles'));\r\n    }\r\n    return splittedRules;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { updateViewAttributes } from '../utils';\r\nimport DataFilter from '../datafilter';\r\n/**\r\n * Provides the General HTML Support integration with {@link module:code-block/codeblock~CodeBlock Code Block} feature.\r\n */\r\nexport default class CodeBlockElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'CodeBlockElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        if (!this.editor.plugins.has('CodeBlockEditing')) {\r\n            return;\r\n        }\r\n        const dataFilter = this.editor.plugins.get(DataFilter);\r\n        dataFilter.on('register:pre', (evt, definition) => {\r\n            if (definition.model !== 'codeBlock') {\r\n                return;\r\n            }\r\n            const editor = this.editor;\r\n            const schema = editor.model.schema;\r\n            const conversion = editor.conversion;\r\n            // Extend codeBlock to allow attributes required by attribute filtration.\r\n            schema.extend('codeBlock', {\r\n                allowAttributes: ['htmlPreAttributes', 'htmlContentAttributes']\r\n            });\r\n            conversion.for('upcast').add(viewToModelCodeBlockAttributeConverter(dataFilter));\r\n            conversion.for('downcast').add(modelToViewCodeBlockAttributeConverter());\r\n            evt.stop();\r\n        });\r\n    }\r\n}\r\n/**\r\n * View-to-model conversion helper preserving allowed attributes on {@link module:code-block/codeblock~CodeBlock Code Block}\r\n * feature model element.\r\n *\r\n * Attributes are preserved as a value of `html*Attributes` model attribute.\r\n * @param dataFilter\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction viewToModelCodeBlockAttributeConverter(dataFilter) {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:code', (evt, data, conversionApi) => {\r\n            const viewCodeElement = data.viewItem;\r\n            const viewPreElement = viewCodeElement.parent;\r\n            if (!viewPreElement || !viewPreElement.is('element', 'pre')) {\r\n                return;\r\n            }\r\n            preserveElementAttributes(viewPreElement, 'htmlPreAttributes');\r\n            preserveElementAttributes(viewCodeElement, 'htmlContentAttributes');\r\n            function preserveElementAttributes(viewElement, attributeName) {\r\n                const viewAttributes = dataFilter.processViewAttributes(viewElement, conversionApi);\r\n                if (viewAttributes) {\r\n                    conversionApi.writer.setAttribute(attributeName, viewAttributes, data.modelRange);\r\n                }\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * Model-to-view conversion helper applying attributes from {@link module:code-block/codeblock~CodeBlock Code Block}\r\n * feature model element.\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction modelToViewCodeBlockAttributeConverter() {\r\n    return (dispatcher) => {\r\n        dispatcher.on('attribute:htmlPreAttributes:codeBlock', (evt, data, conversionApi) => {\r\n            if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n                return;\r\n            }\r\n            const { attributeOldValue, attributeNewValue } = data;\r\n            const viewCodeElement = conversionApi.mapper.toViewElement(data.item);\r\n            const viewPreElement = viewCodeElement.parent;\r\n            updateViewAttributes(conversionApi.writer, attributeOldValue, attributeNewValue, viewPreElement);\r\n        });\r\n        dispatcher.on('attribute:htmlContentAttributes:codeBlock', (evt, data, conversionApi) => {\r\n            if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n                return;\r\n            }\r\n            const { attributeOldValue, attributeNewValue } = data;\r\n            const viewCodeElement = conversionApi.mapper.toViewElement(data.item);\r\n            updateViewAttributes(conversionApi.writer, attributeOldValue, attributeNewValue, viewCodeElement);\r\n        });\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { priorities } from 'ckeditor5/src/utils';\r\nimport { modelToViewBlockAttributeConverter, viewToModelBlockAttributeConverter } from '../converters';\r\nimport DataFilter from '../datafilter';\r\nimport { getHtmlAttributeName } from '../utils';\r\n/**\r\n * Provides the General HTML Support integration for elements which can behave like sectioning element (e.g. article) or\r\n * element accepting only inline content (e.g. paragraph).\r\n *\r\n * The distinction between this two content models is important for choosing correct schema model and proper content conversion.\r\n * As an example, it ensures that:\r\n *\r\n * * children elements paragraphing is enabled for sectioning elements only,\r\n * * element and its content can be correctly handled by editing view (splitting and merging elements),\r\n * * model element HTML is semantically correct and easier to work with.\r\n *\r\n * If element contains any block element, it will be treated as a sectioning element and registered using\r\n * {@link module:html-support/dataschema~DataSchemaDefinition#model} and\r\n * {@link module:html-support/dataschema~DataSchemaDefinition#modelSchema} in editor schema.\r\n * Otherwise, it will be registered under {@link module:html-support/dataschema~DataSchemaBlockElementDefinition#paragraphLikeModel} model\r\n * name with model schema accepting only inline content (inheriting from `$block`).\r\n */\r\nexport default class DualContentModelElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DualContentModelElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const dataFilter = this.editor.plugins.get(DataFilter);\r\n        dataFilter.on('register', (evt, definition) => {\r\n            const blockDefinition = definition;\r\n            const editor = this.editor;\r\n            const schema = editor.model.schema;\r\n            const conversion = editor.conversion;\r\n            if (!blockDefinition.paragraphLikeModel) {\r\n                return;\r\n            }\r\n            // Can only apply to newly registered features.\r\n            if (schema.isRegistered(blockDefinition.model) || schema.isRegistered(blockDefinition.paragraphLikeModel)) {\r\n                return;\r\n            }\r\n            const paragraphLikeModelDefinition = {\r\n                model: blockDefinition.paragraphLikeModel,\r\n                view: blockDefinition.view\r\n            };\r\n            schema.register(blockDefinition.model, blockDefinition.modelSchema);\r\n            schema.register(paragraphLikeModelDefinition.model, {\r\n                inheritAllFrom: '$block'\r\n            });\r\n            conversion.for('upcast').elementToElement({\r\n                view: blockDefinition.view,\r\n                model: (viewElement, { writer }) => {\r\n                    if (this._hasBlockContent(viewElement)) {\r\n                        return writer.createElement(blockDefinition.model);\r\n                    }\r\n                    return writer.createElement(paragraphLikeModelDefinition.model);\r\n                },\r\n                // With a `low` priority, `paragraph` plugin auto-paragraphing mechanism is executed. Make sure\r\n                // this listener is called before it. If not, some elements will be transformed into a paragraph.\r\n                converterPriority: priorities.low + 0.5\r\n            });\r\n            conversion.for('downcast').elementToElement({\r\n                view: blockDefinition.view,\r\n                model: blockDefinition.model\r\n            });\r\n            this._addAttributeConversion(blockDefinition);\r\n            conversion.for('downcast').elementToElement({\r\n                view: paragraphLikeModelDefinition.view,\r\n                model: paragraphLikeModelDefinition.model\r\n            });\r\n            this._addAttributeConversion(paragraphLikeModelDefinition);\r\n            evt.stop();\r\n        });\r\n    }\r\n    /**\r\n     * Checks whether the given view element includes any other block element.\r\n     */\r\n    _hasBlockContent(viewElement) {\r\n        const view = this.editor.editing.view;\r\n        const blockElements = view.domConverter.blockElements;\r\n        // Traversing the viewElement subtree looking for block elements.\r\n        // Especially for the cases like <div><a href=\"#\"><p>foo</p></a></div>.\r\n        // https://github.com/ckeditor/ckeditor5/issues/11513\r\n        for (const viewItem of view.createRangeIn(viewElement).getItems()) {\r\n            if (viewItem.is('element') && blockElements.includes(viewItem.name)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Adds attribute filtering conversion for the given data schema.\r\n     */\r\n    _addAttributeConversion(definition) {\r\n        const editor = this.editor;\r\n        const conversion = editor.conversion;\r\n        const dataFilter = editor.plugins.get(DataFilter);\r\n        editor.model.schema.extend(definition.model, {\r\n            allowAttributes: getHtmlAttributeName(definition.view)\r\n        });\r\n        conversion.for('upcast').add(viewToModelBlockAttributeConverter(definition, dataFilter));\r\n        conversion.for('downcast').add(modelToViewBlockAttributeConverter(definition));\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/integrations/heading\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Enter } from 'ckeditor5/src/enter';\r\nimport DataSchema from '../dataschema';\r\n/**\r\n * Provides the General HTML Support integration with {@link module:heading/heading~Heading Heading} feature.\r\n */\r\nexport default class HeadingElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataSchema, Enter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HeadingElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        if (!editor.plugins.has('HeadingEditing')) {\r\n            return;\r\n        }\r\n        const options = editor.config.get('heading.options');\r\n        this.registerHeadingElements(editor, options);\r\n    }\r\n    /**\r\n     * Registers all elements supported by HeadingEditing to enable custom attributes for those elements.\r\n     */\r\n    registerHeadingElements(editor, options) {\r\n        const dataSchema = editor.plugins.get(DataSchema);\r\n        const headerModels = [];\r\n        for (const option of options) {\r\n            if ('model' in option && 'view' in option) {\r\n                dataSchema.registerBlockElement({\r\n                    view: option.view,\r\n                    model: option.model\r\n                });\r\n                headerModels.push(option.model);\r\n            }\r\n        }\r\n        dataSchema.extendBlockElement({\r\n            model: 'htmlHgroup',\r\n            modelSchema: {\r\n                allowChildren: headerModels\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/integrations/integrationutils\r\n */\r\n/**\r\n * Returns the first view element descendant matching the given view name.\r\n * Includes view element itself.\r\n *\r\n * @internal\r\n */\r\nexport function getDescendantElement(writer, containerElement, elementName) {\r\n    const range = writer.createRangeOn(containerElement);\r\n    for (const { item } of range.getWalker()) {\r\n        if (item.is('element', elementName)) {\r\n            return item;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/integrations/image\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport DataFilter from '../datafilter';\r\nimport { setViewAttributes, updateViewAttributes } from '../utils';\r\nimport { getDescendantElement } from './integrationutils';\r\n/**\r\n * Provides the General HTML Support integration with the {@link module:image/image~Image Image} feature.\r\n */\r\nexport default class ImageElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ImageElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // At least one image plugin should be loaded for the integration to work properly.\r\n        if (!editor.plugins.has('ImageInlineEditing') && !editor.plugins.has('ImageBlockEditing')) {\r\n            return;\r\n        }\r\n        const schema = editor.model.schema;\r\n        const conversion = editor.conversion;\r\n        const dataFilter = editor.plugins.get(DataFilter);\r\n        dataFilter.on('register:figure', () => {\r\n            conversion.for('upcast').add(viewToModelFigureAttributeConverter(dataFilter));\r\n        });\r\n        dataFilter.on('register:img', (evt, definition) => {\r\n            if (definition.model !== 'imageBlock' && definition.model !== 'imageInline') {\r\n                return;\r\n            }\r\n            if (schema.isRegistered('imageBlock')) {\r\n                schema.extend('imageBlock', {\r\n                    allowAttributes: [\r\n                        'htmlImgAttributes',\r\n                        // Figure and Link don't have model counterpart.\r\n                        // We will preserve attributes on image model element using these attribute keys.\r\n                        'htmlFigureAttributes',\r\n                        'htmlLinkAttributes'\r\n                    ]\r\n                });\r\n            }\r\n            if (schema.isRegistered('imageInline')) {\r\n                schema.extend('imageInline', {\r\n                    allowAttributes: [\r\n                        // `htmlA` is needed for standard GHS link integration.\r\n                        'htmlA',\r\n                        'htmlImgAttributes'\r\n                    ]\r\n                });\r\n            }\r\n            conversion.for('upcast').add(viewToModelImageAttributeConverter(dataFilter));\r\n            conversion.for('downcast').add(modelToViewImageAttributeConverter());\r\n            evt.stop();\r\n        });\r\n    }\r\n}\r\n/**\r\n * View-to-model conversion helper preserving allowed attributes on the {@link module:image/image~Image Image}\r\n * feature model element.\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction viewToModelImageAttributeConverter(dataFilter) {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:img', (evt, data, conversionApi) => {\r\n            if (!data.modelRange) {\r\n                return;\r\n            }\r\n            const viewImageElement = data.viewItem;\r\n            const viewContainerElement = viewImageElement.parent;\r\n            preserveElementAttributes(viewImageElement, 'htmlImgAttributes');\r\n            if (viewContainerElement.is('element', 'a')) {\r\n                preserveLinkAttributes(viewContainerElement);\r\n            }\r\n            function preserveElementAttributes(viewElement, attributeName) {\r\n                const viewAttributes = dataFilter.processViewAttributes(viewElement, conversionApi);\r\n                if (viewAttributes) {\r\n                    conversionApi.writer.setAttribute(attributeName, viewAttributes, data.modelRange);\r\n                }\r\n            }\r\n            function preserveLinkAttributes(viewContainerElement) {\r\n                if (data.modelRange && data.modelRange.getContainedElement().is('element', 'imageBlock')) {\r\n                    preserveElementAttributes(viewContainerElement, 'htmlLinkAttributes');\r\n                }\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * View-to-model conversion helper preserving allowed attributes on {@link module:image/image~Image Image}\r\n * feature model element from figure view element.\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction viewToModelFigureAttributeConverter(dataFilter) {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:figure', (evt, data, conversionApi) => {\r\n            const viewFigureElement = data.viewItem;\r\n            if (!data.modelRange || !viewFigureElement.hasClass('image')) {\r\n                return;\r\n            }\r\n            const viewAttributes = dataFilter.processViewAttributes(viewFigureElement, conversionApi);\r\n            if (viewAttributes) {\r\n                conversionApi.writer.setAttribute('htmlFigureAttributes', viewAttributes, data.modelRange);\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * A model-to-view conversion helper applying attributes from the {@link module:image/image~Image Image}\r\n * feature.\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction modelToViewImageAttributeConverter() {\r\n    return (dispatcher) => {\r\n        addInlineAttributeConversion('htmlImgAttributes');\r\n        addBlockAttributeConversion('img', 'htmlImgAttributes');\r\n        addBlockAttributeConversion('figure', 'htmlFigureAttributes');\r\n        addBlockAttributeConversion('a', 'htmlLinkAttributes');\r\n        function addInlineAttributeConversion(attributeName) {\r\n            dispatcher.on(`attribute:${attributeName}:imageInline`, (evt, data, conversionApi) => {\r\n                if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n                    return;\r\n                }\r\n                const { attributeOldValue, attributeNewValue } = data;\r\n                const viewElement = conversionApi.mapper.toViewElement(data.item);\r\n                updateViewAttributes(conversionApi.writer, attributeOldValue, attributeNewValue, viewElement);\r\n            }, { priority: 'low' });\r\n        }\r\n        function addBlockAttributeConversion(elementName, attributeName) {\r\n            dispatcher.on(`attribute:${attributeName}:imageBlock`, (evt, data, conversionApi) => {\r\n                if (!conversionApi.consumable.test(data.item, evt.name)) {\r\n                    return;\r\n                }\r\n                const { attributeOldValue, attributeNewValue } = data;\r\n                const containerElement = conversionApi.mapper.toViewElement(data.item);\r\n                const viewElement = getDescendantElement(conversionApi.writer, containerElement, elementName);\r\n                if (viewElement) {\r\n                    updateViewAttributes(conversionApi.writer, attributeOldValue, attributeNewValue, viewElement);\r\n                    conversionApi.consumable.consume(data.item, evt.name);\r\n                }\r\n            }, { priority: 'low' });\r\n            if (elementName === 'a') {\r\n                // To have a link element in the view, we need to attach a converter to the `linkHref` attribute as well.\r\n                dispatcher.on('attribute:linkHref:imageBlock', (evt, data, conversionApi) => {\r\n                    if (!conversionApi.consumable.consume(data.item, 'attribute:htmlLinkAttributes:imageBlock')) {\r\n                        return;\r\n                    }\r\n                    const containerElement = conversionApi.mapper.toViewElement(data.item);\r\n                    const viewElement = getDescendantElement(conversionApi.writer, containerElement, 'a');\r\n                    setViewAttributes(conversionApi.writer, data.item.getAttribute('htmlLinkAttributes'), viewElement);\r\n                }, { priority: 'low' });\r\n            }\r\n        }\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/integrations/mediaembed\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport DataFilter from '../datafilter';\r\nimport DataSchema from '../dataschema';\r\nimport { updateViewAttributes, getHtmlAttributeName } from '../utils';\r\nimport { getDescendantElement } from './integrationutils';\r\n/**\r\n * Provides the General HTML Support integration with {@link module:media-embed/mediaembed~MediaEmbed Media Embed} feature.\r\n */\r\nexport default class MediaEmbedElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'MediaEmbedElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Stop here if MediaEmbed plugin is not provided or the integrator wants to output markup with previews as\r\n        // we do not support filtering previews.\r\n        if (!editor.plugins.has('MediaEmbed') || editor.config.get('mediaEmbed.previewsInData')) {\r\n            return;\r\n        }\r\n        const schema = editor.model.schema;\r\n        const conversion = editor.conversion;\r\n        const dataFilter = this.editor.plugins.get(DataFilter);\r\n        const dataSchema = this.editor.plugins.get(DataSchema);\r\n        const mediaElementName = editor.config.get('mediaEmbed.elementName');\r\n        // Overwrite GHS schema definition for a given elementName.\r\n        dataSchema.registerBlockElement({\r\n            model: 'media',\r\n            view: mediaElementName\r\n        });\r\n        dataFilter.on('register:figure', () => {\r\n            conversion.for('upcast').add(viewToModelFigureAttributesConverter(dataFilter));\r\n        });\r\n        dataFilter.on(`register:${mediaElementName}`, (evt, definition) => {\r\n            if (definition.model !== 'media') {\r\n                return;\r\n            }\r\n            schema.extend('media', {\r\n                allowAttributes: [\r\n                    getHtmlAttributeName(mediaElementName),\r\n                    'htmlFigureAttributes'\r\n                ]\r\n            });\r\n            conversion.for('upcast').add(viewToModelMediaAttributesConverter(dataFilter, mediaElementName));\r\n            conversion.for('dataDowncast').add(modelToViewMediaAttributeConverter(mediaElementName));\r\n            evt.stop();\r\n        });\r\n    }\r\n}\r\nfunction viewToModelMediaAttributesConverter(dataFilter, mediaElementName) {\r\n    const upcastMedia = (evt, data, conversionApi) => {\r\n        const viewMediaElement = data.viewItem;\r\n        preserveElementAttributes(viewMediaElement, getHtmlAttributeName(mediaElementName));\r\n        function preserveElementAttributes(viewElement, attributeName) {\r\n            const viewAttributes = dataFilter.processViewAttributes(viewElement, conversionApi);\r\n            if (viewAttributes) {\r\n                conversionApi.writer.setAttribute(attributeName, viewAttributes, data.modelRange);\r\n            }\r\n        }\r\n    };\r\n    return (dispatcher) => {\r\n        dispatcher.on(`element:${mediaElementName}`, upcastMedia, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * View-to-model conversion helper preserving allowed attributes on {@link module:media-embed/mediaembed~MediaEmbed MediaEmbed}\r\n * feature model element from figure view element.\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction viewToModelFigureAttributesConverter(dataFilter) {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:figure', (evt, data, conversionApi) => {\r\n            const viewFigureElement = data.viewItem;\r\n            if (!data.modelRange || !viewFigureElement.hasClass('media')) {\r\n                return;\r\n            }\r\n            const viewAttributes = dataFilter.processViewAttributes(viewFigureElement, conversionApi);\r\n            if (viewAttributes) {\r\n                conversionApi.writer.setAttribute('htmlFigureAttributes', viewAttributes, data.modelRange);\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\nfunction modelToViewMediaAttributeConverter(mediaElementName) {\r\n    return (dispatcher) => {\r\n        addAttributeConversionDispatcherHandler(mediaElementName, getHtmlAttributeName(mediaElementName));\r\n        addAttributeConversionDispatcherHandler('figure', 'htmlFigureAttributes');\r\n        function addAttributeConversionDispatcherHandler(elementName, attributeName) {\r\n            dispatcher.on(`attribute:${attributeName}:media`, (evt, data, conversionApi) => {\r\n                if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n                    return;\r\n                }\r\n                const { attributeOldValue, attributeNewValue } = data;\r\n                const containerElement = conversionApi.mapper.toViewElement(data.item);\r\n                const viewElement = getDescendantElement(conversionApi.writer, containerElement, elementName);\r\n                updateViewAttributes(conversionApi.writer, attributeOldValue, attributeNewValue, viewElement);\r\n            });\r\n        }\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/integrations/script\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { createObjectView, modelToViewBlockAttributeConverter, viewToModelBlockAttributeConverter, viewToModelObjectConverter } from '../converters';\r\nimport DataFilter from '../datafilter';\r\n/**\r\n * Provides the General HTML Support for `script` elements.\r\n */\r\nexport default class ScriptElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ScriptElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const dataFilter = this.editor.plugins.get(DataFilter);\r\n        dataFilter.on('register:script', (evt, definition) => {\r\n            const editor = this.editor;\r\n            const schema = editor.model.schema;\r\n            const conversion = editor.conversion;\r\n            schema.register('htmlScript', definition.modelSchema);\r\n            schema.extend('htmlScript', {\r\n                allowAttributes: ['htmlScriptAttributes', 'htmlContent'],\r\n                isContent: true\r\n            });\r\n            editor.data.registerRawContentMatcher({\r\n                name: 'script'\r\n            });\r\n            conversion.for('upcast').elementToElement({\r\n                view: 'script',\r\n                model: viewToModelObjectConverter(definition)\r\n            });\r\n            conversion.for('upcast').add(viewToModelBlockAttributeConverter(definition, dataFilter));\r\n            conversion.for('downcast').elementToElement({\r\n                model: 'htmlScript',\r\n                view: (modelElement, { writer }) => {\r\n                    return createObjectView('script', modelElement, writer);\r\n                }\r\n            });\r\n            conversion.for('downcast').add(modelToViewBlockAttributeConverter(definition));\r\n            evt.stop();\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { updateViewAttributes } from '../utils';\r\nimport DataFilter from '../datafilter';\r\nimport { getDescendantElement } from './integrationutils';\r\n/**\r\n * Provides the General HTML Support integration with {@link module:table/table~Table Table} feature.\r\n */\r\nexport default class TableElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        if (!editor.plugins.has('TableEditing')) {\r\n            return;\r\n        }\r\n        const schema = editor.model.schema;\r\n        const conversion = editor.conversion;\r\n        const dataFilter = editor.plugins.get(DataFilter);\r\n        const tableUtils = editor.plugins.get('TableUtils');\r\n        dataFilter.on('register:figure', () => {\r\n            conversion.for('upcast').add(viewToModelFigureAttributeConverter(dataFilter));\r\n        });\r\n        dataFilter.on('register:table', (evt, definition) => {\r\n            if (definition.model !== 'table') {\r\n                return;\r\n            }\r\n            schema.extend('table', {\r\n                allowAttributes: [\r\n                    'htmlTableAttributes',\r\n                    // Figure, thead and tbody elements don't have model counterparts.\r\n                    // We will be preserving attributes on table element using these attribute keys.\r\n                    'htmlFigureAttributes', 'htmlTheadAttributes', 'htmlTbodyAttributes'\r\n                ]\r\n            });\r\n            conversion.for('upcast').add(viewToModelTableAttributeConverter(dataFilter));\r\n            conversion.for('downcast').add(modelToViewTableAttributeConverter());\r\n            editor.model.document.registerPostFixer(createHeadingRowsPostFixer(editor.model, tableUtils));\r\n            evt.stop();\r\n        });\r\n    }\r\n}\r\n/**\r\n * Creates a model post-fixer for thead and tbody GHS related attributes.\r\n */\r\nfunction createHeadingRowsPostFixer(model, tableUtils) {\r\n    return writer => {\r\n        const changes = model.document.differ.getChanges();\r\n        let wasFixed = false;\r\n        for (const change of changes) {\r\n            if (change.type != 'attribute' || change.attributeKey != 'headingRows') {\r\n                continue;\r\n            }\r\n            const table = change.range.start.nodeAfter;\r\n            const hasTHeadAttributes = table.getAttribute('htmlTheadAttributes');\r\n            const hasTBodyAttributes = table.getAttribute('htmlTbodyAttributes');\r\n            if (hasTHeadAttributes && !change.attributeNewValue) {\r\n                writer.removeAttribute('htmlTheadAttributes', table);\r\n                wasFixed = true;\r\n            }\r\n            else if (hasTBodyAttributes && change.attributeNewValue == tableUtils.getRows(table)) {\r\n                writer.removeAttribute('htmlTbodyAttributes', table);\r\n                wasFixed = true;\r\n            }\r\n        }\r\n        return wasFixed;\r\n    };\r\n}\r\n/**\r\n * View-to-model conversion helper preserving allowed attributes on {@link module:table/table~Table Table}\r\n * feature model element.\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction viewToModelTableAttributeConverter(dataFilter) {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:table', (evt, data, conversionApi) => {\r\n            if (!data.modelRange) {\r\n                return;\r\n            }\r\n            const viewTableElement = data.viewItem;\r\n            preserveElementAttributes(viewTableElement, 'htmlTableAttributes');\r\n            for (const childNode of viewTableElement.getChildren()) {\r\n                if (childNode.is('element', 'thead')) {\r\n                    preserveElementAttributes(childNode, 'htmlTheadAttributes');\r\n                }\r\n                if (childNode.is('element', 'tbody')) {\r\n                    preserveElementAttributes(childNode, 'htmlTbodyAttributes');\r\n                }\r\n            }\r\n            function preserveElementAttributes(viewElement, attributeName) {\r\n                const viewAttributes = dataFilter.processViewAttributes(viewElement, conversionApi);\r\n                if (viewAttributes) {\r\n                    conversionApi.writer.setAttribute(attributeName, viewAttributes, data.modelRange);\r\n                }\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * View-to-model conversion helper preserving allowed attributes on {@link module:table/table~Table Table}\r\n * feature model element from figure view element.\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction viewToModelFigureAttributeConverter(dataFilter) {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:figure', (evt, data, conversionApi) => {\r\n            const viewFigureElement = data.viewItem;\r\n            if (!data.modelRange || !viewFigureElement.hasClass('table')) {\r\n                return;\r\n            }\r\n            const viewAttributes = dataFilter.processViewAttributes(viewFigureElement, conversionApi);\r\n            if (viewAttributes) {\r\n                conversionApi.writer.setAttribute('htmlFigureAttributes', viewAttributes, data.modelRange);\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * Model-to-view conversion helper applying attributes from {@link module:table/table~Table Table}\r\n * feature.\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction modelToViewTableAttributeConverter() {\r\n    return (dispatcher) => {\r\n        addAttributeConversionDispatcherHandler('table', 'htmlTableAttributes');\r\n        addAttributeConversionDispatcherHandler('figure', 'htmlFigureAttributes');\r\n        addAttributeConversionDispatcherHandler('thead', 'htmlTheadAttributes');\r\n        addAttributeConversionDispatcherHandler('tbody', 'htmlTbodyAttributes');\r\n        function addAttributeConversionDispatcherHandler(elementName, attributeName) {\r\n            dispatcher.on(`attribute:${attributeName}:table`, (evt, data, conversionApi) => {\r\n                if (!conversionApi.consumable.test(data.item, evt.name)) {\r\n                    return;\r\n                }\r\n                const containerElement = conversionApi.mapper.toViewElement(data.item);\r\n                const viewElement = getDescendantElement(conversionApi.writer, containerElement, elementName);\r\n                if (!viewElement) {\r\n                    return;\r\n                }\r\n                conversionApi.consumable.consume(data.item, evt.name);\r\n                updateViewAttributes(conversionApi.writer, data.attributeOldValue, data.attributeNewValue, viewElement);\r\n            });\r\n        }\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/integrations/style\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { createObjectView, modelToViewBlockAttributeConverter, viewToModelBlockAttributeConverter, viewToModelObjectConverter } from '../converters';\r\nimport DataFilter from '../datafilter';\r\n/**\r\n * Provides the General HTML Support for `style` elements.\r\n */\r\nexport default class StyleElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'StyleElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const dataFilter = this.editor.plugins.get(DataFilter);\r\n        dataFilter.on('register:style', (evt, definition) => {\r\n            const editor = this.editor;\r\n            const schema = editor.model.schema;\r\n            const conversion = editor.conversion;\r\n            schema.register('htmlStyle', definition.modelSchema);\r\n            schema.extend('htmlStyle', {\r\n                allowAttributes: ['htmlStyleAttributes', 'htmlContent'],\r\n                isContent: true\r\n            });\r\n            editor.data.registerRawContentMatcher({\r\n                name: 'style'\r\n            });\r\n            conversion.for('upcast').elementToElement({\r\n                view: 'style',\r\n                model: viewToModelObjectConverter(definition)\r\n            });\r\n            conversion.for('upcast').add(viewToModelBlockAttributeConverter(definition, dataFilter));\r\n            conversion.for('downcast').elementToElement({\r\n                model: 'htmlStyle',\r\n                view: (modelElement, { writer }) => {\r\n                    return createObjectView('style', modelElement, writer);\r\n                }\r\n            });\r\n            conversion.for('downcast').add(modelToViewBlockAttributeConverter(definition));\r\n            evt.stop();\r\n        });\r\n    }\r\n}\r\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/integrations/documentlist\r\n */\r\nimport { isEqual } from 'lodash-es';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { getHtmlAttributeName, setViewAttributes } from '../utils';\r\nimport DataFilter from '../datafilter';\r\n/**\r\n * Provides the General HTML Support integration with the {@link module:list/documentlist~DocumentList Document List} feature.\r\n */\r\nexport default class DocumentListElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DocumentListElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        if (!editor.plugins.has('DocumentListEditing')) {\r\n            return;\r\n        }\r\n        const schema = editor.model.schema;\r\n        const conversion = editor.conversion;\r\n        const dataFilter = editor.plugins.get(DataFilter);\r\n        const documentListEditing = editor.plugins.get('DocumentListEditing');\r\n        const viewElements = ['ul', 'ol', 'li'];\r\n        // Register downcast strategy.\r\n        // Note that this must be done before document list editing registers conversion in afterInit.\r\n        documentListEditing.registerDowncastStrategy({\r\n            scope: 'item',\r\n            attributeName: 'htmlLiAttributes',\r\n            setAttributeOnDowncast: setViewAttributes\r\n        });\r\n        documentListEditing.registerDowncastStrategy({\r\n            scope: 'list',\r\n            attributeName: 'htmlUlAttributes',\r\n            setAttributeOnDowncast: setViewAttributes\r\n        });\r\n        documentListEditing.registerDowncastStrategy({\r\n            scope: 'list',\r\n            attributeName: 'htmlOlAttributes',\r\n            setAttributeOnDowncast: setViewAttributes\r\n        });\r\n        dataFilter.on('register', (evt, definition) => {\r\n            if (!viewElements.includes(definition.view)) {\r\n                return;\r\n            }\r\n            evt.stop();\r\n            // Do not register same converters twice.\r\n            if (schema.checkAttribute('$block', 'htmlLiAttributes')) {\r\n                return;\r\n            }\r\n            const allowAttributes = viewElements.map(element => getHtmlAttributeName(element));\r\n            schema.extend('$block', { allowAttributes });\r\n            schema.extend('$blockObject', { allowAttributes });\r\n            schema.extend('$container', { allowAttributes });\r\n            conversion.for('upcast').add(dispatcher => {\r\n                dispatcher.on('element:ul', viewToModelListAttributeConverter('htmlUlAttributes', dataFilter), { priority: 'low' });\r\n                dispatcher.on('element:ol', viewToModelListAttributeConverter('htmlOlAttributes', dataFilter), { priority: 'low' });\r\n                dispatcher.on('element:li', viewToModelListAttributeConverter('htmlLiAttributes', dataFilter), { priority: 'low' });\r\n            });\r\n        });\r\n        // Make sure that all items in a single list (items at the same level & listType) have the same properties.\r\n        // Note: This is almost an exact copy from DocumentListPropertiesEditing.\r\n        documentListEditing.on('postFixer', (evt, { listNodes, writer }) => {\r\n            const previousNodesByIndent = []; // Last seen nodes of lower indented lists.\r\n            for (const { node, previous } of listNodes) {\r\n                // For the first list block there is nothing to compare with.\r\n                if (!previous) {\r\n                    continue;\r\n                }\r\n                const nodeIndent = node.getAttribute('listIndent');\r\n                const previousNodeIndent = previous.getAttribute('listIndent');\r\n                let previousNodeInList = null; // It's like `previous` but has the same indent as current node.\r\n                // Let's find previous node for the same indent.\r\n                // We're going to need that when we get back to previous indent.\r\n                if (nodeIndent > previousNodeIndent) {\r\n                    previousNodesByIndent[previousNodeIndent] = previous;\r\n                }\r\n                // Restore the one for given indent.\r\n                else if (nodeIndent < previousNodeIndent) {\r\n                    previousNodeInList = previousNodesByIndent[nodeIndent];\r\n                    previousNodesByIndent.length = nodeIndent;\r\n                }\r\n                // Same indent.\r\n                else {\r\n                    previousNodeInList = previous;\r\n                }\r\n                // This is a first item of a nested list.\r\n                if (!previousNodeInList) {\r\n                    continue;\r\n                }\r\n                if (previousNodeInList.getAttribute('listType') == node.getAttribute('listType')) {\r\n                    const attribute = getAttributeFromListType(previousNodeInList.getAttribute('listType'));\r\n                    const value = previousNodeInList.getAttribute(attribute);\r\n                    if (!isEqual(node.getAttribute(attribute), value) &&\r\n                        writer.model.schema.checkAttribute(node, attribute)) {\r\n                        writer.setAttribute(attribute, value, node);\r\n                        evt.return = true;\r\n                    }\r\n                }\r\n                if (previousNodeInList.getAttribute('listItemId') == node.getAttribute('listItemId')) {\r\n                    const value = previousNodeInList.getAttribute('htmlLiAttributes');\r\n                    if (!isEqual(node.getAttribute('htmlLiAttributes'), value) &&\r\n                        writer.model.schema.checkAttribute(node, 'htmlLiAttributes')) {\r\n                        writer.setAttribute('htmlLiAttributes', value, node);\r\n                        evt.return = true;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        // Remove `ol` attributes from `ul` elements and vice versa.\r\n        documentListEditing.on('postFixer', (evt, { listNodes, writer }) => {\r\n            for (const { node } of listNodes) {\r\n                const listType = node.getAttribute('listType');\r\n                if (listType === 'bulleted' && node.getAttribute('htmlOlAttributes')) {\r\n                    writer.removeAttribute('htmlOlAttributes', node);\r\n                    evt.return = true;\r\n                }\r\n                if (listType === 'numbered' && node.getAttribute('htmlUlAttributes')) {\r\n                    writer.removeAttribute('htmlUlAttributes', node);\r\n                    evt.return = true;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const editor = this.editor;\r\n        if (!editor.commands.get('indentList')) {\r\n            return;\r\n        }\r\n        // Reset list attributes after indenting list items.\r\n        const indentList = editor.commands.get('indentList');\r\n        this.listenTo(indentList, 'afterExecute', (evt, changedBlocks) => {\r\n            editor.model.change(writer => {\r\n                for (const node of changedBlocks) {\r\n                    const attribute = getAttributeFromListType(node.getAttribute('listType'));\r\n                    if (!editor.model.schema.checkAttribute(node, attribute)) {\r\n                        continue;\r\n                    }\r\n                    // Just reset the attribute.\r\n                    // If there is a previous indented list that this node should be merged into,\r\n                    // the postfixer will unify all the attributes of both sub-lists.\r\n                    writer.setAttribute(attribute, {}, node);\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n/**\r\n * View-to-model conversion helper preserving allowed attributes on {@link TODO}\r\n * feature model element.\r\n *\r\n * @returns Returns a conversion callback.\r\n */\r\nfunction viewToModelListAttributeConverter(attributeName, dataFilter) {\r\n    return (evt, data, conversionApi) => {\r\n        const viewElement = data.viewItem;\r\n        if (!data.modelRange) {\r\n            Object.assign(data, conversionApi.convertChildren(data.viewItem, data.modelCursor));\r\n        }\r\n        const viewAttributes = dataFilter.processViewAttributes(viewElement, conversionApi);\r\n        for (const item of data.modelRange.getItems({ shallow: true })) {\r\n            // Apply only to list item blocks.\r\n            if (!item.hasAttribute('listItemId')) {\r\n                continue;\r\n            }\r\n            // Set list attributes only on same level items, those nested deeper are already handled\r\n            // by the recursive conversion.\r\n            if (item.hasAttribute(attributeName)) {\r\n                continue;\r\n            }\r\n            if (conversionApi.writer.model.schema.checkAttribute(item, attributeName)) {\r\n                conversionApi.writer.setAttribute(attributeName, viewAttributes || {}, item);\r\n            }\r\n        }\r\n    };\r\n}\r\n/**\r\n * Returns HTML attribute name based on provided list type.\r\n */\r\nfunction getAttributeFromListType(listType) {\r\n    return listType === 'bulleted' ?\r\n        'htmlUlAttributes' :\r\n        'htmlOlAttributes';\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/integrations/customelement\r\n */\r\n/* globals document */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { UpcastWriter } from 'ckeditor5/src/engine';\r\nimport DataSchema from '../dataschema';\r\nimport DataFilter from '../datafilter';\r\nimport { setViewAttributes } from '../utils';\r\n/**\r\n * Provides the General HTML Support for custom elements (not registered in the {@link module:html-support/dataschema~DataSchema}).\r\n */\r\nexport default class CustomElementSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DataFilter, DataSchema];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'CustomElementSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const dataFilter = this.editor.plugins.get(DataFilter);\r\n        const dataSchema = this.editor.plugins.get(DataSchema);\r\n        dataFilter.on('register:$customElement', (evt, definition) => {\r\n            evt.stop();\r\n            const editor = this.editor;\r\n            const schema = editor.model.schema;\r\n            const conversion = editor.conversion;\r\n            const unsafeElements = editor.editing.view.domConverter.unsafeElements;\r\n            const preLikeElements = editor.data.htmlProcessor.domConverter.preElements;\r\n            schema.register(definition.model, definition.modelSchema);\r\n            schema.extend(definition.model, {\r\n                allowAttributes: ['htmlElementName', 'htmlCustomElementAttributes', 'htmlContent'],\r\n                isContent: true\r\n            });\r\n            // Being executed on the low priority, it will catch all elements that were not caught by other converters.\r\n            conversion.for('upcast').elementToElement({\r\n                view: /.*/,\r\n                model: (viewElement, conversionApi) => {\r\n                    // Do not try to convert $comment fake element.\r\n                    if (viewElement.name == '$comment') {\r\n                        return null;\r\n                    }\r\n                    if (!isValidElementName(viewElement.name)) {\r\n                        return null;\r\n                    }\r\n                    // Allow for fallback only if this element is not defined in data schema to make sure\r\n                    // that this will handle only custom elements not registered in the data schema.\r\n                    if (dataSchema.getDefinitionsForView(viewElement.name).size) {\r\n                        return null;\r\n                    }\r\n                    // Make sure that this element will not render in the editing view.\r\n                    if (!unsafeElements.includes(viewElement.name)) {\r\n                        unsafeElements.push(viewElement.name);\r\n                    }\r\n                    // Make sure that whitespaces will not be trimmed or replaced by nbsps while stringify content.\r\n                    if (!preLikeElements.includes(viewElement.name)) {\r\n                        preLikeElements.push(viewElement.name);\r\n                    }\r\n                    const modelElement = conversionApi.writer.createElement(definition.model, {\r\n                        htmlElementName: viewElement.name\r\n                    });\r\n                    const htmlAttributes = dataFilter.processViewAttributes(viewElement, conversionApi);\r\n                    if (htmlAttributes) {\r\n                        conversionApi.writer.setAttribute('htmlCustomElementAttributes', htmlAttributes, modelElement);\r\n                    }\r\n                    // Store the whole element in the attribute so that DomConverter will be able to use the pre like element context.\r\n                    const viewWriter = new UpcastWriter(viewElement.document);\r\n                    const documentFragment = viewWriter.createDocumentFragment(viewElement);\r\n                    const htmlContent = editor.data.processor.toData(documentFragment);\r\n                    conversionApi.writer.setAttribute('htmlContent', htmlContent, modelElement);\r\n                    // Consume the content of the element.\r\n                    for (const { item } of editor.editing.view.createRangeIn(viewElement)) {\r\n                        conversionApi.consumable.consume(item, { name: true });\r\n                    }\r\n                    return modelElement;\r\n                },\r\n                converterPriority: 'low'\r\n            });\r\n            // Because this element is unsafe (DomConverter#unsafeElements), it will render as a transparent <span> but it must\r\n            // be rendered anyway for the mapping between the model and the view to exist.\r\n            conversion.for('editingDowncast').elementToElement({\r\n                model: {\r\n                    name: definition.model,\r\n                    attributes: ['htmlElementName', 'htmlCustomElementAttributes', 'htmlContent']\r\n                },\r\n                view: (modelElement, { writer }) => {\r\n                    const viewName = modelElement.getAttribute('htmlElementName');\r\n                    const viewElement = writer.createRawElement(viewName);\r\n                    if (modelElement.hasAttribute('htmlCustomElementAttributes')) {\r\n                        setViewAttributes(writer, modelElement.getAttribute('htmlCustomElementAttributes'), viewElement);\r\n                    }\r\n                    return viewElement;\r\n                }\r\n            });\r\n            conversion.for('dataDowncast').elementToElement({\r\n                model: {\r\n                    name: definition.model,\r\n                    attributes: ['htmlElementName', 'htmlCustomElementAttributes', 'htmlContent']\r\n                },\r\n                view: (modelElement, { writer }) => {\r\n                    const viewName = modelElement.getAttribute('htmlElementName');\r\n                    const htmlContent = modelElement.getAttribute('htmlContent');\r\n                    const viewElement = writer.createRawElement(viewName, null, (domElement, domConverter) => {\r\n                        domConverter.setContentOf(domElement, htmlContent);\r\n                        // Unwrap the custom element content (it was stored in the attribute as the whole custom element).\r\n                        // See the upcast conversion for the \"htmlContent\" attribute to learn more.\r\n                        const customElement = domElement.firstChild;\r\n                        customElement.remove();\r\n                        while (customElement.firstChild) {\r\n                            domElement.appendChild(customElement.firstChild);\r\n                        }\r\n                    });\r\n                    if (modelElement.hasAttribute('htmlCustomElementAttributes')) {\r\n                        setViewAttributes(writer, modelElement.getAttribute('htmlCustomElementAttributes'), viewElement);\r\n                    }\r\n                    return viewElement;\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n/**\r\n * Returns true if name is valid for a DOM element name.\r\n */\r\nfunction isValidElementName(name) {\r\n    try {\r\n        document.createElement(name);\r\n    }\r\n    catch (error) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-support/generalhtmlsupport\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { toArray } from 'ckeditor5/src/utils';\r\nimport DataFilter from './datafilter';\r\nimport CodeBlockElementSupport from './integrations/codeblock';\r\nimport DualContentModelElementSupport from './integrations/dualcontent';\r\nimport HeadingElementSupport from './integrations/heading';\r\nimport ImageElementSupport from './integrations/image';\r\nimport MediaEmbedElementSupport from './integrations/mediaembed';\r\nimport ScriptElementSupport from './integrations/script';\r\nimport TableElementSupport from './integrations/table';\r\nimport StyleElementSupport from './integrations/style';\r\nimport DocumentListElementSupport from './integrations/documentlist';\r\nimport CustomElementSupport from './integrations/customelement';\r\nimport { getHtmlAttributeName, modifyGhsAttribute } from './utils';\r\n/**\r\n * The General HTML Support feature.\r\n *\r\n * This is a \"glue\" plugin which initializes the {@link module:html-support/datafilter~DataFilter data filter} configuration\r\n * and features integration with the General HTML Support.\r\n */\r\nexport default class GeneralHtmlSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'GeneralHtmlSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [\r\n            DataFilter,\r\n            CodeBlockElementSupport,\r\n            DualContentModelElementSupport,\r\n            HeadingElementSupport,\r\n            ImageElementSupport,\r\n            MediaEmbedElementSupport,\r\n            ScriptElementSupport,\r\n            TableElementSupport,\r\n            StyleElementSupport,\r\n            DocumentListElementSupport,\r\n            CustomElementSupport\r\n        ];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const dataFilter = editor.plugins.get(DataFilter);\r\n        // Load the filtering configuration.\r\n        dataFilter.loadAllowedConfig(editor.config.get('htmlSupport.allow') || []);\r\n        dataFilter.loadDisallowedConfig(editor.config.get('htmlSupport.disallow') || []);\r\n    }\r\n    /**\r\n     * Returns a GHS model attribute name related to a given view element name.\r\n     *\r\n     * @internal\r\n     * @param viewElementName A view element name.\r\n     */\r\n    getGhsAttributeNameForElement(viewElementName) {\r\n        const dataSchema = this.editor.plugins.get('DataSchema');\r\n        const definitions = Array.from(dataSchema.getDefinitionsForView(viewElementName, false));\r\n        const inlineDefinition = definitions.find(definition => (definition.isInline && !definitions[0].isObject));\r\n        if (inlineDefinition) {\r\n            return inlineDefinition.model;\r\n        }\r\n        return getHtmlAttributeName(viewElementName);\r\n    }\r\n    /**\r\n     * Updates GHS model attribute for a specified view element name, so it includes the given class name.\r\n     *\r\n     * @internal\r\n     * @param viewElementName A view element name.\r\n     * @param className The css class to add.\r\n     * @param selectable The selection or element to update.\r\n     */\r\n    addModelHtmlClass(viewElementName, className, selectable) {\r\n        const model = this.editor.model;\r\n        const ghsAttributeName = this.getGhsAttributeNameForElement(viewElementName);\r\n        model.change(writer => {\r\n            for (const item of getItemsToUpdateGhsAttribute(model, selectable, ghsAttributeName)) {\r\n                modifyGhsAttribute(writer, item, ghsAttributeName, 'classes', classes => {\r\n                    for (const value of toArray(className)) {\r\n                        classes.add(value);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Updates GHS model attribute for a specified view element name, so it does not include the given class name.\r\n     *\r\n     * @internal\r\n     * @param viewElementName A view element name.\r\n     * @param className The css class to remove.\r\n     * @param selectable The selection or element to update.\r\n     */\r\n    removeModelHtmlClass(viewElementName, className, selectable) {\r\n        const model = this.editor.model;\r\n        const ghsAttributeName = this.getGhsAttributeNameForElement(viewElementName);\r\n        model.change(writer => {\r\n            for (const item of getItemsToUpdateGhsAttribute(model, selectable, ghsAttributeName)) {\r\n                modifyGhsAttribute(writer, item, ghsAttributeName, 'classes', classes => {\r\n                    for (const value of toArray(className)) {\r\n                        classes.delete(value);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Updates GHS model attribute for a specified view element name, so it includes the given attribute.\r\n     *\r\n     * @param viewElementName A view element name.\r\n     * @param attributes The object with attributes to set.\r\n     * @param selectable The selection or element to update.\r\n     */\r\n    setModelHtmlAttributes(viewElementName, attributes, selectable) {\r\n        const model = this.editor.model;\r\n        const ghsAttributeName = this.getGhsAttributeNameForElement(viewElementName);\r\n        model.change(writer => {\r\n            for (const item of getItemsToUpdateGhsAttribute(model, selectable, ghsAttributeName)) {\r\n                modifyGhsAttribute(writer, item, ghsAttributeName, 'attributes', attributesMap => {\r\n                    for (const [key, value] of Object.entries(attributes)) {\r\n                        attributesMap.set(key, value);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Updates GHS model attribute for a specified view element name, so it does not include the given attribute.\r\n     *\r\n     * @param viewElementName A view element name.\r\n     * @param attributeName The attribute name (or names) to remove.\r\n     * @param selectable The selection or element to update.\r\n     */\r\n    removeModelHtmlAttributes(viewElementName, attributeName, selectable) {\r\n        const model = this.editor.model;\r\n        const ghsAttributeName = this.getGhsAttributeNameForElement(viewElementName);\r\n        model.change(writer => {\r\n            for (const item of getItemsToUpdateGhsAttribute(model, selectable, ghsAttributeName)) {\r\n                modifyGhsAttribute(writer, item, ghsAttributeName, 'attributes', attributesMap => {\r\n                    for (const key of toArray(attributeName)) {\r\n                        attributesMap.delete(key);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Updates GHS model attribute for a specified view element name, so it includes a given style.\r\n     *\r\n     * @param viewElementName A view element name.\r\n     * @param styles The object with styles to set.\r\n     * @param selectable The selection or element to update.\r\n     */\r\n    setModelHtmlStyles(viewElementName, styles, selectable) {\r\n        const model = this.editor.model;\r\n        const ghsAttributeName = this.getGhsAttributeNameForElement(viewElementName);\r\n        model.change(writer => {\r\n            for (const item of getItemsToUpdateGhsAttribute(model, selectable, ghsAttributeName)) {\r\n                modifyGhsAttribute(writer, item, ghsAttributeName, 'styles', stylesMap => {\r\n                    for (const [key, value] of Object.entries(styles)) {\r\n                        stylesMap.set(key, value);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Updates GHS model attribute for a specified view element name, so it does not include a given style.\r\n     *\r\n     * @param viewElementName A view element name.\r\n     * @param properties The style (or styles list) to remove.\r\n     * @param selectable The selection or element to update.\r\n     */\r\n    removeModelHtmlStyles(viewElementName, properties, selectable) {\r\n        const model = this.editor.model;\r\n        const ghsAttributeName = this.getGhsAttributeNameForElement(viewElementName);\r\n        model.change(writer => {\r\n            for (const item of getItemsToUpdateGhsAttribute(model, selectable, ghsAttributeName)) {\r\n                modifyGhsAttribute(writer, item, ghsAttributeName, 'styles', stylesMap => {\r\n                    for (const key of toArray(properties)) {\r\n                        stylesMap.delete(key);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Returns an iterator over an items in the selectable that accept given GHS attribute.\r\n */\r\nfunction* getItemsToUpdateGhsAttribute(model, selectable, ghsAttributeName) {\r\n    if (!selectable) {\r\n        return;\r\n    }\r\n    if (!(Symbol.iterator in selectable) && selectable.is('documentSelection') && selectable.isCollapsed) {\r\n        if (model.schema.checkAttributeInSelection(selectable, ghsAttributeName)) {\r\n            yield selectable;\r\n        }\r\n    }\r\n    else {\r\n        for (const range of getValidRangesForSelectable(model, selectable, ghsAttributeName)) {\r\n            yield* range.getItems({ shallow: true });\r\n        }\r\n    }\r\n}\r\n/**\r\n * Translates a given selectable to an iterable of ranges.\r\n */\r\nfunction getValidRangesForSelectable(model, selectable, ghsAttributeName) {\r\n    if (!(Symbol.iterator in selectable) &&\r\n        (selectable.is('node') ||\r\n            selectable.is('$text') ||\r\n            selectable.is('$textProxy'))) {\r\n        if (model.schema.checkAttribute(selectable, ghsAttributeName)) {\r\n            return [model.createRangeOn(selectable)];\r\n        }\r\n        else {\r\n            return [];\r\n        }\r\n    }\r\n    else {\r\n        return model.schema.getValidRanges(model.createSelection(selectable).getRanges(), ghsAttributeName);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { uid } from 'ckeditor5/src/utils';\r\n/**\r\n * The HTML comment feature. It preserves the HTML comments (`<!-- -->`) in the editor data.\r\n *\r\n * For a detailed overview, check the {@glink features/html/html-comments HTML comment feature documentation}.\r\n */\r\nexport default class HtmlComment extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HtmlComment';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const loadedCommentsContent = new Map();\r\n        editor.data.processor.skipComments = false;\r\n        // Allow storing comment's content as the $root attribute with the name `$comment:<unique id>`.\r\n        editor.model.schema.addAttributeCheck((context, attributeName) => {\r\n            if (context.endsWith('$root') && attributeName.startsWith('$comment')) {\r\n                return true;\r\n            }\r\n        });\r\n        // Convert the `$comment` view element to `$comment:<unique id>` marker and store its content (the comment itself) as a $root\r\n        // attribute. The comment content is needed in the `dataDowncast` pipeline to re-create the comment node.\r\n        editor.conversion.for('upcast').elementToMarker({\r\n            view: '$comment',\r\n            model: viewElement => {\r\n                const markerUid = uid();\r\n                const markerName = `$comment:${markerUid}`;\r\n                const commentContent = viewElement.getCustomProperty('$rawContent');\r\n                loadedCommentsContent.set(markerName, commentContent);\r\n                return markerName;\r\n            }\r\n        });\r\n        // Convert the `$comment` marker to `$comment` UI element with `$rawContent` custom property containing the comment content.\r\n        editor.conversion.for('dataDowncast').markerToElement({\r\n            model: '$comment',\r\n            view: (modelElement, { writer }) => {\r\n                let root = undefined;\r\n                for (const rootName of this.editor.model.document.getRootNames()) {\r\n                    root = this.editor.model.document.getRoot(rootName);\r\n                    if (root.hasAttribute(modelElement.markerName)) {\r\n                        break;\r\n                    }\r\n                }\r\n                const markerName = modelElement.markerName;\r\n                const commentContent = root.getAttribute(markerName);\r\n                const comment = writer.createUIElement('$comment');\r\n                writer.setCustomProperty('$rawContent', commentContent, comment);\r\n                return comment;\r\n            }\r\n        });\r\n        // Remove comments' markers and their corresponding $root attributes, which are moved to the graveyard.\r\n        editor.model.document.registerPostFixer(writer => {\r\n            let changed = false;\r\n            const markers = editor.model.document.differ.getChangedMarkers().filter(marker => marker.name.startsWith('$comment:'));\r\n            for (const marker of markers) {\r\n                const { oldRange, newRange } = marker.data;\r\n                if (oldRange && newRange && oldRange.root == newRange.root) {\r\n                    // The marker was moved in the same root. Don't do anything.\r\n                    continue;\r\n                }\r\n                if (oldRange) {\r\n                    // The comment marker was moved from one root to another (most probably to the graveyard).\r\n                    // Remove the related attribute from the previous root.\r\n                    const oldRoot = oldRange.root;\r\n                    if (oldRoot.hasAttribute(marker.name)) {\r\n                        writer.removeAttribute(marker.name, oldRoot);\r\n                        changed = true;\r\n                    }\r\n                }\r\n                if (newRange) {\r\n                    const newRoot = newRange.root;\r\n                    if (newRoot.rootName == '$graveyard') {\r\n                        // Comment marker was moved to the graveyard -- remove it entirely.\r\n                        writer.removeMarker(marker.name);\r\n                        changed = true;\r\n                    }\r\n                    else if (!newRoot.hasAttribute(marker.name)) {\r\n                        // Comment marker was just added or was moved to another root - updated roots attributes.\r\n                        //\r\n                        // Added fallback to `''` for the comment content in case if someone incorrectly added just the marker \"by hand\"\r\n                        // and forgot to add the root attribute or add them in different change blocks.\r\n                        //\r\n                        // It caused an infinite loop in one of the unit tests.\r\n                        writer.setAttribute(marker.name, loadedCommentsContent.get(marker.name) || '', newRoot);\r\n                        changed = true;\r\n                    }\r\n                }\r\n            }\r\n            return changed;\r\n        });\r\n        // Delete all comment markers from the document before setting new data.\r\n        editor.data.on('set', () => {\r\n            for (const commentMarker of editor.model.markers.getMarkersGroup('$comment')) {\r\n                this.removeHtmlComment(commentMarker.name);\r\n            }\r\n        }, { priority: 'high' });\r\n        // Delete all comment markers that are within a removed range.\r\n        // Delete all comment markers at the limit element boundaries if the whole content of the limit element is removed.\r\n        editor.model.on('deleteContent', (evt, [selection]) => {\r\n            for (const range of selection.getRanges()) {\r\n                const limitElement = editor.model.schema.getLimitElement(range);\r\n                const firstPosition = editor.model.createPositionAt(limitElement, 0);\r\n                const lastPosition = editor.model.createPositionAt(limitElement, 'end');\r\n                let affectedCommentIDs;\r\n                if (firstPosition.isTouching(range.start) && lastPosition.isTouching(range.end)) {\r\n                    affectedCommentIDs = this.getHtmlCommentsInRange(editor.model.createRange(firstPosition, lastPosition));\r\n                }\r\n                else {\r\n                    affectedCommentIDs = this.getHtmlCommentsInRange(range, { skipBoundaries: true });\r\n                }\r\n                for (const commentMarkerID of affectedCommentIDs) {\r\n                    this.removeHtmlComment(commentMarkerID);\r\n                }\r\n            }\r\n        }, { priority: 'high' });\r\n    }\r\n    /**\r\n     * Creates an HTML comment on the specified position and returns its ID.\r\n     *\r\n     * *Note*: If two comments are created at the same position, the second comment will be inserted before the first one.\r\n     *\r\n     * @returns Comment ID. This ID can be later used to e.g. remove the comment from the content.\r\n     */\r\n    createHtmlComment(position, content) {\r\n        const id = uid();\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const root = model.document.getRoot(position.root.rootName);\r\n        const markerName = `$comment:${id}`;\r\n        return model.change(writer => {\r\n            const range = writer.createRange(position);\r\n            writer.addMarker(markerName, {\r\n                usingOperation: true,\r\n                affectsData: true,\r\n                range\r\n            });\r\n            writer.setAttribute(markerName, content, root);\r\n            return markerName;\r\n        });\r\n    }\r\n    /**\r\n     * Removes an HTML comment with the given comment ID.\r\n     *\r\n     * It does nothing and returns `false` if the comment with the given ID does not exist.\r\n     * Otherwise it removes the comment and returns `true`.\r\n     *\r\n     * Note that a comment can be removed also by removing the content around the comment.\r\n     *\r\n     * @param commentID The ID of the comment to be removed.\r\n     * @returns `true` when the comment with the given ID was removed, `false` otherwise.\r\n     */\r\n    removeHtmlComment(commentID) {\r\n        const editor = this.editor;\r\n        const marker = editor.model.markers.get(commentID);\r\n        if (!marker) {\r\n            return false;\r\n        }\r\n        editor.model.change(writer => {\r\n            writer.removeMarker(marker);\r\n        });\r\n        return true;\r\n    }\r\n    /**\r\n     * Gets the HTML comment data for the comment with a given ID.\r\n     *\r\n     * Returns `null` if the comment does not exist.\r\n     *\r\n     */\r\n    getHtmlCommentData(commentID) {\r\n        const editor = this.editor;\r\n        const marker = editor.model.markers.get(commentID);\r\n        if (!marker) {\r\n            return null;\r\n        }\r\n        let content = '';\r\n        for (const rootName of this.editor.model.document.getRootNames()) {\r\n            const root = editor.model.document.getRoot(rootName);\r\n            if (root.hasAttribute(commentID)) {\r\n                content = root.getAttribute(commentID);\r\n                break;\r\n            }\r\n        }\r\n        return {\r\n            content,\r\n            position: marker.getStart()\r\n        };\r\n    }\r\n    /**\r\n     * Gets all HTML comments in the given range.\r\n     *\r\n     * By default it includes comments at the range boundaries.\r\n     *\r\n     * @param range\r\n     * @param options.skipBoundaries When set to `true` the range boundaries will be skipped.\r\n     * @returns HTML comment IDs\r\n     */\r\n    getHtmlCommentsInRange(range, { skipBoundaries = false } = {}) {\r\n        const includeBoundaries = !skipBoundaries;\r\n        // Unfortunately, MarkerCollection#getMarkersAtPosition() filters out collapsed markers.\r\n        return Array.from(this.editor.model.markers.getMarkersGroup('$comment'))\r\n            .filter(marker => isCommentMarkerInRange(marker, range))\r\n            .map(marker => marker.name);\r\n        function isCommentMarkerInRange(commentMarker, range) {\r\n            const position = commentMarker.getRange().start;\r\n            return ((position.isAfter(range.start) || (includeBoundaries && position.isEqual(range.start))) &&\r\n                (position.isBefore(range.end) || (includeBoundaries && position.isEqual(range.end))));\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module heading/headingcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * The heading command. It is used by the {@link module:heading/heading~Heading heading feature} to apply headings.\r\n */\r\nexport default class HeadingCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor Editor instance.\r\n     * @param modelElements Names of the element which this command can apply in the model.\r\n     */\r\n    constructor(editor, modelElements) {\r\n        super(editor);\r\n        this.modelElements = modelElements;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const block = first(this.editor.model.document.selection.getSelectedBlocks());\r\n        this.value = !!block && this.modelElements.includes(block.name) && block.name;\r\n        this.isEnabled = !!block && this.modelElements.some(heading => checkCanBecomeHeading(block, heading, this.editor.model.schema));\r\n    }\r\n    /**\r\n     * Executes the command. Applies the heading to the selected blocks or, if the first selected\r\n     * block is a heading already, turns selected headings (of this level only) to paragraphs.\r\n     *\r\n     * @param options.value Name of the element which this command will apply in the model.\r\n     * @fires execute\r\n     */\r\n    execute(options) {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        const modelElement = options.value;\r\n        model.change(writer => {\r\n            const blocks = Array.from(document.selection.getSelectedBlocks())\r\n                .filter(block => {\r\n                return checkCanBecomeHeading(block, modelElement, model.schema);\r\n            });\r\n            for (const block of blocks) {\r\n                if (!block.is('element', modelElement)) {\r\n                    writer.rename(block, modelElement);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks whether the given block can be replaced by a specific heading.\r\n *\r\n * @param block A block to be tested.\r\n * @param heading Command element name in the model.\r\n * @param schema The schema of the document.\r\n */\r\nfunction checkCanBecomeHeading(block, heading, schema) {\r\n    return schema.checkChild(block.parent, heading) && !schema.isObject(block);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module heading/headingediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Paragraph } from 'ckeditor5/src/paragraph';\r\nimport { priorities } from 'ckeditor5/src/utils';\r\nimport HeadingCommand from './headingcommand';\r\nconst defaultModelElement = 'paragraph';\r\n/**\r\n * The headings engine feature. It handles switching between block formats &ndash; headings and paragraph.\r\n * This class represents the engine part of the heading feature. See also {@link module:heading/heading~Heading}.\r\n * It introduces `heading1`-`headingN` commands which allow to convert paragraphs into headings.\r\n */\r\nexport default class HeadingEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HeadingEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define('heading', {\r\n            options: [\r\n                { model: 'paragraph', title: 'Paragraph', class: 'ck-heading_paragraph' },\r\n                { model: 'heading1', view: 'h2', title: 'Heading 1', class: 'ck-heading_heading1' },\r\n                { model: 'heading2', view: 'h3', title: 'Heading 2', class: 'ck-heading_heading2' },\r\n                { model: 'heading3', view: 'h4', title: 'Heading 3', class: 'ck-heading_heading3' }\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Paragraph];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const options = editor.config.get('heading.options');\r\n        const modelElements = [];\r\n        for (const option of options) {\r\n            // Skip paragraph - it is defined in required Paragraph feature.\r\n            if (option.model === 'paragraph') {\r\n                continue;\r\n            }\r\n            // Schema.\r\n            editor.model.schema.register(option.model, {\r\n                inheritAllFrom: '$block'\r\n            });\r\n            editor.conversion.elementToElement(option);\r\n            modelElements.push(option.model);\r\n        }\r\n        this._addDefaultH1Conversion(editor);\r\n        // Register the heading command for this option.\r\n        editor.commands.add('heading', new HeadingCommand(editor, modelElements));\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        // If the enter command is added to the editor, alter its behavior.\r\n        // Enter at the end of a heading element should create a paragraph.\r\n        const editor = this.editor;\r\n        const enterCommand = editor.commands.get('enter');\r\n        const options = editor.config.get('heading.options');\r\n        if (enterCommand) {\r\n            this.listenTo(enterCommand, 'afterExecute', (evt, data) => {\r\n                const positionParent = editor.model.document.selection.getFirstPosition().parent;\r\n                const isHeading = options.some(option => positionParent.is('element', option.model));\r\n                if (isHeading && !positionParent.is('element', defaultModelElement) && positionParent.childCount === 0) {\r\n                    data.writer.rename(positionParent, defaultModelElement);\r\n                }\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Adds default conversion for `h1` -> `heading1` with a low priority.\r\n     *\r\n     * @param editor Editor instance on which to add the `h1` conversion.\r\n     */\r\n    _addDefaultH1Conversion(editor) {\r\n        editor.conversion.for('upcast').elementToElement({\r\n            model: 'heading1',\r\n            view: 'h1',\r\n            // With a `low` priority, `paragraph` plugin autoparagraphing mechanism is executed. Make sure\r\n            // this listener is called before it. If not, `h1` will be transformed into a paragraph.\r\n            converterPriority: priorities.low + 1\r\n        });\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./heading.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module heading/headingui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Model, createDropdown, addListToDropdown } from 'ckeditor5/src/ui';\r\nimport { Collection } from 'ckeditor5/src/utils';\r\nimport { getLocalizedOptions } from './utils';\r\nimport '../theme/heading.css';\r\n/**\r\n * The headings UI feature. It introduces the `headings` dropdown.\r\n */\r\nexport default class HeadingUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HeadingUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const options = getLocalizedOptions(editor);\r\n        const defaultTitle = t('Choose heading');\r\n        const accessibleLabel = t('Heading');\r\n        // Register UI component.\r\n        editor.ui.componentFactory.add('heading', locale => {\r\n            const titles = {};\r\n            const itemDefinitions = new Collection();\r\n            const headingCommand = editor.commands.get('heading');\r\n            const paragraphCommand = editor.commands.get('paragraph');\r\n            const commands = [headingCommand];\r\n            for (const option of options) {\r\n                const def = {\r\n                    type: 'button',\r\n                    model: new Model({\r\n                        label: option.title,\r\n                        class: option.class,\r\n                        role: 'menuitemradio',\r\n                        withText: true\r\n                    })\r\n                };\r\n                if (option.model === 'paragraph') {\r\n                    def.model.bind('isOn').to(paragraphCommand, 'value');\r\n                    def.model.set('commandName', 'paragraph');\r\n                    commands.push(paragraphCommand);\r\n                }\r\n                else {\r\n                    def.model.bind('isOn').to(headingCommand, 'value', value => value === option.model);\r\n                    def.model.set({\r\n                        commandName: 'heading',\r\n                        commandValue: option.model\r\n                    });\r\n                }\r\n                // Add the option to the collection.\r\n                itemDefinitions.add(def);\r\n                titles[option.model] = option.title;\r\n            }\r\n            const dropdownView = createDropdown(locale);\r\n            addListToDropdown(dropdownView, itemDefinitions, {\r\n                ariaLabel: accessibleLabel,\r\n                role: 'menu'\r\n            });\r\n            dropdownView.buttonView.set({\r\n                ariaLabel: accessibleLabel,\r\n                ariaLabelledBy: undefined,\r\n                isOn: false,\r\n                withText: true,\r\n                tooltip: accessibleLabel\r\n            });\r\n            dropdownView.extendTemplate({\r\n                attributes: {\r\n                    class: [\r\n                        'ck-heading-dropdown'\r\n                    ]\r\n                }\r\n            });\r\n            dropdownView.bind('isEnabled').toMany(commands, 'isEnabled', (...areEnabled) => {\r\n                return areEnabled.some(isEnabled => isEnabled);\r\n            });\r\n            dropdownView.buttonView.bind('label').to(headingCommand, 'value', paragraphCommand, 'value', (value, para) => {\r\n                const whichModel = value || para && 'paragraph';\r\n                if (typeof whichModel === 'boolean') {\r\n                    return defaultTitle;\r\n                }\r\n                // If none of the commands is active, display default title.\r\n                if (!titles[whichModel]) {\r\n                    return defaultTitle;\r\n                }\r\n                return titles[whichModel];\r\n            });\r\n            // Execute command when an item from the dropdown is selected.\r\n            this.listenTo(dropdownView, 'execute', evt => {\r\n                const { commandName, commandValue } = evt.source;\r\n                editor.execute(commandName, commandValue ? { value: commandValue } : undefined);\r\n                editor.editing.view.focus();\r\n            });\r\n            return dropdownView;\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Returns heading options as defined in `config.heading.options` but processed to consider\r\n * the editor localization, i.e. to display {@link module:heading/headingconfig~HeadingOption}\r\n * in the correct language.\r\n *\r\n * Note: The reason behind this method is that there is no way to use {@link module:utils/locale~Locale#t}\r\n * when the user configuration is defined because the editor does not exist yet.\r\n */\r\nexport function getLocalizedOptions(editor) {\r\n    const t = editor.t;\r\n    const localizedTitles = {\r\n        'Paragraph': t('Paragraph'),\r\n        'Heading 1': t('Heading 1'),\r\n        'Heading 2': t('Heading 2'),\r\n        'Heading 3': t('Heading 3'),\r\n        'Heading 4': t('Heading 4'),\r\n        'Heading 5': t('Heading 5'),\r\n        'Heading 6': t('Heading 6')\r\n    };\r\n    return editor.config.get('heading.options').map(option => {\r\n        const title = localizedTitles[option.title];\r\n        if (title && title != option.title) {\r\n            option.title = title;\r\n        }\r\n        return option;\r\n    });\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module heading/heading\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport HeadingEditing from './headingediting';\r\nimport HeadingUI from './headingui';\r\nimport '../theme/heading.css';\r\n/**\r\n * The headings feature.\r\n *\r\n * For a detailed overview, check the {@glink features/headings Headings feature} guide\r\n * and the {@glink api/heading package page}.\r\n *\r\n * This is a \"glue\" plugin which loads the {@link module:heading/headingediting~HeadingEditing heading editing feature}\r\n * and {@link module:heading/headingui~HeadingUI heading UI feature}.\r\n *\r\n * @extends module:core/plugin~Plugin\r\n */\r\nexport default class Heading extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [HeadingEditing, HeadingUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Heading';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module heading/title\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\nimport { DowncastWriter, enablePlaceholder, hidePlaceholder, needsPlaceholder, showPlaceholder } from 'ckeditor5/src/engine';\r\n// A list of element names that should be treated by the Title plugin as title-like.\r\n// This means that an element of a type from this list will be changed to a title element\r\n// when it is the first element in the root.\r\nconst titleLikeElements = new Set(['paragraph', 'heading1', 'heading2', 'heading3', 'heading4', 'heading5', 'heading6']);\r\n/**\r\n * The Title plugin.\r\n *\r\n * It splits the document into `Title` and `Body` sections.\r\n */\r\nexport default class Title extends Plugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A reference to an empty paragraph in the body\r\n         * created when there is no element in the body for the placeholder purposes.\r\n         */\r\n        this._bodyPlaceholder = new Map();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Title';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return ['Paragraph'];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        // To use the schema for disabling some features when the selection is inside the title element\r\n        // it is needed to create the following structure:\r\n        //\r\n        // <title>\r\n        //     <title-content>The title text</title-content>\r\n        // </title>\r\n        //\r\n        // See: https://github.com/ckeditor/ckeditor5/issues/2005.\r\n        model.schema.register('title', { isBlock: true, allowIn: '$root' });\r\n        model.schema.register('title-content', { isBlock: true, allowIn: 'title', allowAttributes: ['alignment'] });\r\n        model.schema.extend('$text', { allowIn: 'title-content' });\r\n        // Disallow all attributes in `title-content`.\r\n        model.schema.addAttributeCheck(context => {\r\n            if (context.endsWith('title-content $text')) {\r\n                return false;\r\n            }\r\n        });\r\n        // Because `title` is represented by two elements in the model\r\n        // but only one in the view, it is needed to adjust Mapper.\r\n        editor.editing.mapper.on('modelToViewPosition', mapModelPositionToView(editor.editing.view));\r\n        editor.data.mapper.on('modelToViewPosition', mapModelPositionToView(editor.editing.view));\r\n        // Conversion.\r\n        editor.conversion.for('downcast').elementToElement({ model: 'title-content', view: 'h1' });\r\n        editor.conversion.for('downcast').add(dispatcher => dispatcher.on('insert:title', (evt, data, conversionApi) => {\r\n            conversionApi.consumable.consume(data.item, evt.name);\r\n        }));\r\n        // Custom converter is used for data v -> m conversion to avoid calling post-fixer when setting data.\r\n        // See https://github.com/ckeditor/ckeditor5/issues/2036.\r\n        editor.data.upcastDispatcher.on('element:h1', dataViewModelH1Insertion, { priority: 'high' });\r\n        editor.data.upcastDispatcher.on('element:h2', dataViewModelH1Insertion, { priority: 'high' });\r\n        editor.data.upcastDispatcher.on('element:h3', dataViewModelH1Insertion, { priority: 'high' });\r\n        // Take care about correct `title` element structure.\r\n        model.document.registerPostFixer(writer => this._fixTitleContent(writer));\r\n        // Create and take care of correct position of a `title` element.\r\n        model.document.registerPostFixer(writer => this._fixTitleElement(writer));\r\n        // Create element for `Body` placeholder if it is missing.\r\n        model.document.registerPostFixer(writer => this._fixBodyElement(writer));\r\n        // Prevent from adding extra at the end of the document.\r\n        model.document.registerPostFixer(writer => this._fixExtraParagraph(writer));\r\n        // Attach `Title` and `Body` placeholders to the empty title and/or content.\r\n        this._attachPlaceholders();\r\n        // Attach Tab handling.\r\n        this._attachTabPressHandling();\r\n    }\r\n    /**\r\n     * Returns the title of the document. Note that because this plugin does not allow any formatting inside\r\n     * the title element, the output of this method will be a plain text, with no HTML tags.\r\n     *\r\n     * It is not recommended to use this method together with features that insert markers to the\r\n     * data output, like comments or track changes features. If such markers start in the title and end in the\r\n     * body, the result of this method might be incorrect.\r\n     *\r\n     * @param options Additional configuration passed to the conversion process.\r\n     * See {@link module:engine/controller/datacontroller~DataController#get `DataController#get`}.\r\n     * @returns The title of the document.\r\n     */\r\n    getTitle(options = {}) {\r\n        const rootName = options.rootName ? options.rootName : undefined;\r\n        const titleElement = this._getTitleElement(rootName);\r\n        const titleContentElement = titleElement.getChild(0);\r\n        return this.editor.data.stringify(titleContentElement, options);\r\n    }\r\n    /**\r\n     * Returns the body of the document.\r\n     *\r\n     * Note that it is not recommended to use this method together with features that insert markers to the\r\n     * data output, like comments or track changes features. If such markers start in the title and end in the\r\n     * body, the result of this method might be incorrect.\r\n     *\r\n     * @param options Additional configuration passed to the conversion process.\r\n     * See {@link module:engine/controller/datacontroller~DataController#get `DataController#get`}.\r\n     * @returns The body of the document.\r\n     */\r\n    getBody(options = {}) {\r\n        const editor = this.editor;\r\n        const data = editor.data;\r\n        const model = editor.model;\r\n        const rootName = options.rootName ? options.rootName : undefined;\r\n        const root = editor.model.document.getRoot(rootName);\r\n        const view = editor.editing.view;\r\n        const viewWriter = new DowncastWriter(view.document);\r\n        const rootRange = model.createRangeIn(root);\r\n        const viewDocumentFragment = viewWriter.createDocumentFragment();\r\n        // Find all markers that intersects with body.\r\n        const bodyStartPosition = model.createPositionAfter(root.getChild(0));\r\n        const bodyRange = model.createRange(bodyStartPosition, model.createPositionAt(root, 'end'));\r\n        const markers = new Map();\r\n        for (const marker of model.markers) {\r\n            const intersection = bodyRange.getIntersection(marker.getRange());\r\n            if (intersection) {\r\n                markers.set(marker.name, intersection);\r\n            }\r\n        }\r\n        // Convert the entire root to view.\r\n        data.mapper.clearBindings();\r\n        data.mapper.bindElements(root, viewDocumentFragment);\r\n        data.downcastDispatcher.convert(rootRange, markers, viewWriter, options);\r\n        // Remove title element from view.\r\n        viewWriter.remove(viewWriter.createRangeOn(viewDocumentFragment.getChild(0)));\r\n        // view -> data\r\n        return editor.data.processor.toData(viewDocumentFragment);\r\n    }\r\n    /**\r\n     * Returns the `title` element when it is in the document. Returns `undefined` otherwise.\r\n     */\r\n    _getTitleElement(rootName) {\r\n        const root = this.editor.model.document.getRoot(rootName);\r\n        for (const child of root.getChildren()) {\r\n            if (isTitle(child)) {\r\n                return child;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Model post-fixer callback that ensures that `title` has only one `title-content` child.\r\n     * All additional children should be moved after the `title` element and renamed to a paragraph.\r\n     */\r\n    _fixTitleContent(writer) {\r\n        let changed = false;\r\n        for (const rootName of this.editor.model.document.getRootNames()) {\r\n            const title = this._getTitleElement(rootName);\r\n            // If there is no title in the content it will be created by `_fixTitleElement` post-fixer.\r\n            // If the title has just one element, then it is correct. No fixing.\r\n            if (!title || title.maxOffset === 1) {\r\n                continue;\r\n            }\r\n            const titleChildren = Array.from(title.getChildren());\r\n            // Skip first child because it is an allowed element.\r\n            titleChildren.shift();\r\n            for (const titleChild of titleChildren) {\r\n                writer.move(writer.createRangeOn(titleChild), title, 'after');\r\n                writer.rename(titleChild, 'paragraph');\r\n            }\r\n            changed = true;\r\n        }\r\n        return changed;\r\n    }\r\n    /**\r\n     * Model post-fixer callback that creates a title element when it is missing,\r\n     * takes care of the correct position of it and removes additional title elements.\r\n     */\r\n    _fixTitleElement(writer) {\r\n        let changed = false;\r\n        const model = this.editor.model;\r\n        for (const rootName of this.editor.model.document.getRootNames()) {\r\n            const modelRoot = model.document.getRoot(rootName);\r\n            const titleElements = Array.from(modelRoot.getChildren()).filter(isTitle);\r\n            const firstTitleElement = titleElements[0];\r\n            const firstRootChild = modelRoot.getChild(0);\r\n            // When title element is at the beginning of the document then try to fix additional title elements (if there are any).\r\n            if (firstRootChild.is('element', 'title')) {\r\n                if (titleElements.length > 1) {\r\n                    fixAdditionalTitleElements(titleElements, writer, model);\r\n                    changed = true;\r\n                }\r\n                continue;\r\n            }\r\n            // When there is no title in the document and first element in the document cannot be changed\r\n            // to the title then create an empty title element at the beginning of the document.\r\n            if (!firstTitleElement && !titleLikeElements.has(firstRootChild.name)) {\r\n                const title = writer.createElement('title');\r\n                writer.insert(title, modelRoot);\r\n                writer.insertElement('title-content', title);\r\n                changed = true;\r\n                continue;\r\n            }\r\n            if (titleLikeElements.has(firstRootChild.name)) {\r\n                // Change the first element in the document to the title if it can be changed (is title-like).\r\n                changeElementToTitle(firstRootChild, writer, model);\r\n            }\r\n            else {\r\n                // Otherwise, move the first occurrence of the title element to the beginning of the document.\r\n                writer.move(writer.createRangeOn(firstTitleElement), modelRoot, 0);\r\n            }\r\n            fixAdditionalTitleElements(titleElements, writer, model);\r\n            changed = true;\r\n        }\r\n        return changed;\r\n    }\r\n    /**\r\n     * Model post-fixer callback that adds an empty paragraph at the end of the document\r\n     * when it is needed for the placeholder purposes.\r\n     */\r\n    _fixBodyElement(writer) {\r\n        let changed = false;\r\n        for (const rootName of this.editor.model.document.getRootNames()) {\r\n            const modelRoot = this.editor.model.document.getRoot(rootName);\r\n            if (modelRoot.childCount < 2) {\r\n                const placeholder = writer.createElement('paragraph');\r\n                writer.insert(placeholder, modelRoot, 1);\r\n                this._bodyPlaceholder.set(rootName, placeholder);\r\n                changed = true;\r\n            }\r\n        }\r\n        return changed;\r\n    }\r\n    /**\r\n     * Model post-fixer callback that removes a paragraph from the end of the document\r\n     * if it was created for the placeholder purposes and is not needed anymore.\r\n     */\r\n    _fixExtraParagraph(writer) {\r\n        let changed = false;\r\n        for (const rootName of this.editor.model.document.getRootNames()) {\r\n            const root = this.editor.model.document.getRoot(rootName);\r\n            const placeholder = this._bodyPlaceholder.get(rootName);\r\n            if (shouldRemoveLastParagraph(placeholder, root)) {\r\n                this._bodyPlaceholder.delete(rootName);\r\n                writer.remove(placeholder);\r\n                changed = true;\r\n            }\r\n        }\r\n        return changed;\r\n    }\r\n    /**\r\n     * Attaches the `Title` and `Body` placeholders to the title and/or content.\r\n     */\r\n    _attachPlaceholders() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const view = editor.editing.view;\r\n        const sourceElement = editor.sourceElement;\r\n        const titlePlaceholder = editor.config.get('title.placeholder') || t('Type your title');\r\n        const bodyPlaceholder = editor.config.get('placeholder') ||\r\n            sourceElement && sourceElement.tagName.toLowerCase() === 'textarea' && sourceElement.getAttribute('placeholder') ||\r\n            t('Type or paste your content here.');\r\n        // Attach placeholder to the view title element.\r\n        editor.editing.downcastDispatcher.on('insert:title-content', (evt, data, conversionApi) => {\r\n            enablePlaceholder({\r\n                view,\r\n                element: conversionApi.mapper.toViewElement(data.item),\r\n                text: titlePlaceholder,\r\n                keepOnFocus: true\r\n            });\r\n        });\r\n        // Attach placeholder to first element after a title element and remove it if it's not needed anymore.\r\n        // First element after title can change, so we need to observe all changes keep placeholder in sync.\r\n        const bodyViewElements = new Map();\r\n        // This post-fixer runs after the model post-fixer, so we can assume that the second child in view root will always exist.\r\n        view.document.registerPostFixer(writer => {\r\n            let hasChanged = false;\r\n            for (const viewRoot of view.document.roots) {\r\n                // `viewRoot` can be empty despite the model post-fixers if the model root was detached.\r\n                if (viewRoot.isEmpty) {\r\n                    continue;\r\n                }\r\n                // If `viewRoot` is not empty, then we can expect at least two elements in it.\r\n                const body = viewRoot.getChild(1);\r\n                const oldBody = bodyViewElements.get(viewRoot.rootName);\r\n                // If body element has changed we need to disable placeholder on the previous element and enable on the new one.\r\n                if (body !== oldBody) {\r\n                    if (oldBody) {\r\n                        hidePlaceholder(writer, oldBody);\r\n                        writer.removeAttribute('data-placeholder', oldBody);\r\n                    }\r\n                    writer.setAttribute('data-placeholder', bodyPlaceholder, body);\r\n                    bodyViewElements.set(viewRoot.rootName, body);\r\n                    hasChanged = true;\r\n                }\r\n                // Then we need to display placeholder if it is needed.\r\n                // See: https://github.com/ckeditor/ckeditor5/issues/8689.\r\n                if (needsPlaceholder(body, true) && viewRoot.childCount === 2 && body.name === 'p') {\r\n                    hasChanged = showPlaceholder(writer, body) ? true : hasChanged;\r\n                }\r\n                else {\r\n                    // Or hide if it is not needed.\r\n                    hasChanged = hidePlaceholder(writer, body) ? true : hasChanged;\r\n                }\r\n            }\r\n            return hasChanged;\r\n        });\r\n    }\r\n    /**\r\n     * Creates navigation between the title and body sections using <kbd>Tab</kbd> and <kbd>Shift</kbd>+<kbd>Tab</kbd> keys.\r\n     */\r\n    _attachTabPressHandling() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        // Pressing <kbd>Tab</kbd> inside the title should move the caret to the body.\r\n        editor.keystrokes.set('TAB', (data, cancel) => {\r\n            model.change(writer => {\r\n                const selection = model.document.selection;\r\n                const selectedElements = Array.from(selection.getSelectedBlocks());\r\n                if (selectedElements.length === 1 && selectedElements[0].is('element', 'title-content')) {\r\n                    const root = selection.getFirstPosition().root;\r\n                    const firstBodyElement = root.getChild(1);\r\n                    writer.setSelection(firstBodyElement, 0);\r\n                    cancel();\r\n                }\r\n            });\r\n        });\r\n        // Pressing <kbd>Shift</kbd>+<kbd>Tab</kbd> at the beginning of the body should move the caret to the title.\r\n        editor.keystrokes.set('SHIFT + TAB', (data, cancel) => {\r\n            model.change(writer => {\r\n                const selection = model.document.selection;\r\n                if (!selection.isCollapsed) {\r\n                    return;\r\n                }\r\n                const selectedElement = first(selection.getSelectedBlocks());\r\n                const selectionPosition = selection.getFirstPosition();\r\n                const root = editor.model.document.getRoot(selectionPosition.root.rootName);\r\n                const title = root.getChild(0);\r\n                const body = root.getChild(1);\r\n                if (selectedElement === body && selectionPosition.isAtStart) {\r\n                    writer.setSelection(title.getChild(0), 0);\r\n                    cancel();\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n/**\r\n * A view-to-model converter for the h1 that appears at the beginning of the document (a title element).\r\n *\r\n * @see module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\r\n * @param evt An object containing information about the fired event.\r\n * @param data An object containing conversion input, a placeholder for conversion output and possibly other values.\r\n * @param conversionApi Conversion interface to be used by the callback.\r\n */\r\nfunction dataViewModelH1Insertion(evt, data, conversionApi) {\r\n    const modelCursor = data.modelCursor;\r\n    const viewItem = data.viewItem;\r\n    if (!modelCursor.isAtStart || !modelCursor.parent.is('element', '$root')) {\r\n        return;\r\n    }\r\n    if (!conversionApi.consumable.consume(viewItem, { name: true })) {\r\n        return;\r\n    }\r\n    const modelWriter = conversionApi.writer;\r\n    const title = modelWriter.createElement('title');\r\n    const titleContent = modelWriter.createElement('title-content');\r\n    modelWriter.append(titleContent, title);\r\n    modelWriter.insert(title, modelCursor);\r\n    conversionApi.convertChildren(viewItem, titleContent);\r\n    conversionApi.updateConversionResult(title, data);\r\n}\r\n/**\r\n * Maps position from the beginning of the model `title` element to the beginning of the view `h1` element.\r\n *\r\n * ```html\r\n * <title>^<title-content>Foo</title-content></title> -> <h1>^Foo</h1>\r\n * ```\r\n */\r\nfunction mapModelPositionToView(editingView) {\r\n    return (evt, data) => {\r\n        const positionParent = data.modelPosition.parent;\r\n        if (!positionParent.is('element', 'title')) {\r\n            return;\r\n        }\r\n        const modelTitleElement = positionParent.parent;\r\n        const viewElement = data.mapper.toViewElement(modelTitleElement);\r\n        data.viewPosition = editingView.createPositionAt(viewElement, 0);\r\n        evt.stop();\r\n    };\r\n}\r\n/**\r\n * @returns Returns true when given element is a title. Returns false otherwise.\r\n */\r\nfunction isTitle(element) {\r\n    return element.is('element', 'title');\r\n}\r\n/**\r\n * Changes the given element to the title element.\r\n */\r\nfunction changeElementToTitle(element, writer, model) {\r\n    const title = writer.createElement('title');\r\n    writer.insert(title, element, 'before');\r\n    writer.insert(element, title, 0);\r\n    writer.rename(element, 'title-content');\r\n    model.schema.removeDisallowedAttributes([element], writer);\r\n}\r\n/**\r\n * Loops over the list of title elements and fixes additional ones.\r\n *\r\n * @returns Returns true when there was any change. Returns false otherwise.\r\n */\r\nfunction fixAdditionalTitleElements(titleElements, writer, model) {\r\n    let hasChanged = false;\r\n    for (const title of titleElements) {\r\n        if (title.index !== 0) {\r\n            fixTitleElement(title, writer, model);\r\n            hasChanged = true;\r\n        }\r\n    }\r\n    return hasChanged;\r\n}\r\n/**\r\n * Changes given title element to a paragraph or removes it when it is empty.\r\n */\r\nfunction fixTitleElement(title, writer, model) {\r\n    const child = title.getChild(0);\r\n    // Empty title should be removed.\r\n    // It is created as a result of pasting to the title element.\r\n    if (child.isEmpty) {\r\n        writer.remove(title);\r\n        return;\r\n    }\r\n    writer.move(writer.createRangeOn(child), title, 'before');\r\n    writer.rename(child, 'paragraph');\r\n    writer.remove(title);\r\n    model.schema.removeDisallowedAttributes([child], writer);\r\n}\r\n/**\r\n * Returns true when the last paragraph in the document was created only for the placeholder\r\n * purpose and it's not needed anymore. Returns false otherwise.\r\n */\r\nfunction shouldRemoveLastParagraph(placeholder, root) {\r\n    if (!placeholder || !placeholder.is('element', 'paragraph') || placeholder.childCount) {\r\n        return false;\r\n    }\r\n    if (root.childCount <= 2 || root.getChild(root.childCount - 1) !== placeholder) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { findOptimalInsertionRange } from 'ckeditor5/src/widget';\r\n/**\r\n * The horizontal line command.\r\n *\r\n * The command is registered by {@link module:horizontal-line/horizontallineediting~HorizontalLineEditing} as `'horizontalLine'`.\r\n *\r\n * To insert a horizontal line at the current selection, execute the command:\r\n *\r\n * ```ts\r\n * editor.execute( 'horizontalLine' );\r\n * ```\r\n */\r\nexport default class HorizontalLineCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const schema = model.schema;\r\n        const selection = model.document.selection;\r\n        this.isEnabled = isHorizontalLineAllowedInParent(selection, schema, model);\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const model = this.editor.model;\r\n        model.change(writer => {\r\n            const horizontalElement = writer.createElement('horizontalLine');\r\n            model.insertObject(horizontalElement, null, null, { setSelection: 'after' });\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks if a horizontal line is allowed by the schema in the optimal insertion parent.\r\n *\r\n * @param model Model instance.\r\n */\r\nfunction isHorizontalLineAllowedInParent(selection, schema, model) {\r\n    const parent = getInsertHorizontalLineParent(selection, model);\r\n    return schema.checkChild(parent, 'horizontalLine');\r\n}\r\n/**\r\n * Returns a node that will be used to insert a horizontal line with `model.insertContent` to check if the horizontal line can be\r\n * placed there.\r\n *\r\n * @param model Model instance.\r\n */\r\nfunction getInsertHorizontalLineParent(selection, model) {\r\n    const insertionRange = findOptimalInsertionRange(selection, model);\r\n    const parent = insertionRange.start.parent;\r\n    if (parent.isEmpty && !parent.is('element', '$root')) {\r\n        return parent.parent;\r\n    }\r\n    return parent;\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./horizontalline.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module horizontal-line/horizontallineediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { toWidget } from 'ckeditor5/src/widget';\r\nimport HorizontalLineCommand from './horizontallinecommand';\r\nimport '../theme/horizontalline.css';\r\n/**\r\n * The horizontal line editing feature.\r\n */\r\nexport default class HorizontalLineEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HorizontalLineEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const t = editor.t;\r\n        const conversion = editor.conversion;\r\n        schema.register('horizontalLine', {\r\n            inheritAllFrom: '$blockObject'\r\n        });\r\n        conversion.for('dataDowncast').elementToElement({\r\n            model: 'horizontalLine',\r\n            view: (modelElement, { writer }) => {\r\n                return writer.createEmptyElement('hr');\r\n            }\r\n        });\r\n        conversion.for('editingDowncast').elementToStructure({\r\n            model: 'horizontalLine',\r\n            view: (modelElement, { writer }) => {\r\n                const label = t('Horizontal line');\r\n                const viewWrapper = writer.createContainerElement('div', null, writer.createEmptyElement('hr'));\r\n                writer.addClass('ck-horizontal-line', viewWrapper);\r\n                writer.setCustomProperty('hr', true, viewWrapper);\r\n                return toHorizontalLineWidget(viewWrapper, writer, label);\r\n            }\r\n        });\r\n        conversion.for('upcast').elementToElement({ view: 'hr', model: 'horizontalLine' });\r\n        editor.commands.add('horizontalLine', new HorizontalLineCommand(editor));\r\n    }\r\n}\r\n/**\r\n * Converts a given {@link module:engine/view/element~Element} to a horizontal line widget:\r\n * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to\r\n *   recognize the horizontal line widget element.\r\n * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\r\n *\r\n * @param writer An instance of the view writer.\r\n */\r\nfunction toHorizontalLineWidget(viewElement, writer, label) {\r\n    writer.setCustomProperty('horizontalLine', true, viewElement);\r\n    return toWidget(viewElement, writer, { label });\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module horizontal-line/horizontallineui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport horizontalLineIcon from '../theme/icons/horizontalline.svg';\r\n/**\r\n * The horizontal line UI plugin.\r\n */\r\nexport default class HorizontalLineUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HorizontalLineUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add the `horizontalLine` button to feature components.\r\n        editor.ui.componentFactory.add('horizontalLine', locale => {\r\n            const command = editor.commands.get('horizontalLine');\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Horizontal line'),\r\n                icon: horizontalLineIcon,\r\n                tooltip: true\r\n            });\r\n            view.bind('isEnabled').to(command, 'isEnabled');\r\n            // Execute the command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute('horizontalLine');\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 9h16v2H2z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module horizontal-line/horizontalline\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Widget } from 'ckeditor5/src/widget';\r\nimport HorizontalLineEditing from './horizontallineediting';\r\nimport HorizontalLineUI from './horizontallineui';\r\n/**\r\n * The horizontal line feature.\r\n *\r\n * It provides the possibility to insert a horizontal line into the rich-text editor.\r\n *\r\n * For a detailed overview, check the {@glink features/horizontal-line Horizontal line feature} documentation.\r\n */\r\nexport default class HorizontalLine extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [HorizontalLineEditing, HorizontalLineUI, Widget];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HorizontalLine';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { findOptimalInsertionRange } from 'ckeditor5/src/widget';\r\n/**\r\n * The insert HTML embed element command.\r\n *\r\n * The command is registered by {@link module:html-embed/htmlembedediting~HtmlEmbedEditing} as `'htmlEmbed'`.\r\n *\r\n * To insert an empty HTML embed element at the current selection, execute the command:\r\n *\r\n * ```ts\r\n * editor.execute( 'htmlEmbed' );\r\n * ```\r\n *\r\n * You can specify the initial content of a new HTML embed in the argument:\r\n *\r\n * ```ts\r\n * editor.execute( 'htmlEmbed', '<b>Initial content.</b>' );\r\n * ```\r\n *\r\n * To update the content of the HTML embed, select it in the model and pass the content in the argument:\r\n *\r\n * ```ts\r\n * editor.execute( 'htmlEmbed', '<b>New content of an existing embed.</b>' );\r\n * ```\r\n */\r\nexport default class HtmlEmbedCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const schema = model.schema;\r\n        const selection = model.document.selection;\r\n        const selectedRawHtmlElement = getSelectedRawHtmlModelWidget(selection);\r\n        this.isEnabled = isHtmlEmbedAllowedInParent(selection, schema, model);\r\n        this.value = selectedRawHtmlElement ? selectedRawHtmlElement.getAttribute('value') || '' : null;\r\n    }\r\n    /**\r\n     * Executes the command, which either:\r\n     *\r\n     * * creates and inserts a new HTML embed element if none was selected,\r\n     * * updates the content of the HTML embed if one was selected.\r\n     *\r\n     * @fires execute\r\n     * @param value When passed, the value (content) will be set on a new embed or a selected one.\r\n     */\r\n    execute(value) {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        model.change(writer => {\r\n            let htmlEmbedElement;\r\n            // If the command has a non-null value, there must be some HTML embed selected in the model.\r\n            if (this.value !== null) {\r\n                htmlEmbedElement = getSelectedRawHtmlModelWidget(selection);\r\n            }\r\n            else {\r\n                htmlEmbedElement = writer.createElement('rawHtml');\r\n                model.insertObject(htmlEmbedElement, null, null, { setSelection: 'on' });\r\n            }\r\n            writer.setAttribute('value', value, htmlEmbedElement);\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks if an HTML embed is allowed by the schema in the optimal insertion parent.\r\n */\r\nfunction isHtmlEmbedAllowedInParent(selection, schema, model) {\r\n    const parent = getInsertHtmlEmbedParent(selection, model);\r\n    return schema.checkChild(parent, 'rawHtml');\r\n}\r\n/**\r\n * Returns a node that will be used to insert a html embed with `model.insertContent` to check if a html embed element can be placed there.\r\n */\r\nfunction getInsertHtmlEmbedParent(selection, model) {\r\n    const insertionRange = findOptimalInsertionRange(selection, model);\r\n    const parent = insertionRange.start.parent;\r\n    if (parent.isEmpty && !parent.is('rootElement')) {\r\n        return parent.parent;\r\n    }\r\n    return parent;\r\n}\r\n/**\r\n * Returns the selected HTML embed element in the model, if any.\r\n */\r\nfunction getSelectedRawHtmlModelWidget(selection) {\r\n    const selectedElement = selection.getSelectedElement();\r\n    if (selectedElement && selectedElement.is('element', 'rawHtml')) {\r\n        return selectedElement;\r\n    }\r\n    return null;\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./htmlembed.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-embed/htmlembedediting\r\n */\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport { toWidget } from 'ckeditor5/src/widget';\r\nimport { logWarning, createElement } from 'ckeditor5/src/utils';\r\nimport HtmlEmbedCommand from './htmlembedcommand';\r\nimport '../theme/htmlembed.css';\r\n/**\r\n * The HTML embed editing feature.\r\n */\r\nexport default class HtmlEmbedEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HtmlEmbedEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        /**\r\n         * Keeps references to {@link module:ui/button/buttonview~ButtonView edit, save, and cancel} button instances created for\r\n         * each widget so they can be destroyed if they are no longer in DOM after the editing view was re-rendered.\r\n         */\r\n        this._widgetButtonViewReferences = new Set();\r\n        editor.config.define('htmlEmbed', {\r\n            showPreviews: false,\r\n            sanitizeHtml: rawHtml => {\r\n                /**\r\n                 * When using the HTML embed feature with the `htmlEmbed.showPreviews=true` option, it is strongly recommended to\r\n                 * define a sanitize function that will clean up the input HTML in order to avoid XSS vulnerability.\r\n                 *\r\n                 * For a detailed overview, check the {@glink features/html/html-embed HTML embed feature} documentation.\r\n                 *\r\n                 * @error html-embed-provide-sanitize-function\r\n                 */\r\n                logWarning('html-embed-provide-sanitize-function');\r\n                return {\r\n                    html: rawHtml,\r\n                    hasChanged: false\r\n                };\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        schema.register('rawHtml', {\r\n            inheritAllFrom: '$blockObject',\r\n            allowAttributes: ['value']\r\n        });\r\n        editor.commands.add('htmlEmbed', new HtmlEmbedCommand(editor));\r\n        this._setupConversion();\r\n    }\r\n    /**\r\n     * Prepares converters for the feature.\r\n     */\r\n    _setupConversion() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const view = editor.editing.view;\r\n        const widgetButtonViewReferences = this._widgetButtonViewReferences;\r\n        const htmlEmbedConfig = editor.config.get('htmlEmbed');\r\n        // Destroy UI buttons created for widgets that have been removed from the view document (e.g. in the previous conversion).\r\n        // This prevents unexpected memory leaks from UI views.\r\n        this.editor.editing.view.on('render', () => {\r\n            for (const buttonView of widgetButtonViewReferences) {\r\n                if (buttonView.element && buttonView.element.isConnected) {\r\n                    return;\r\n                }\r\n                buttonView.destroy();\r\n                widgetButtonViewReferences.delete(buttonView);\r\n            }\r\n        }, { priority: 'lowest' });\r\n        // Register div.raw-html-embed as a raw content element so all of it's content will be provided\r\n        // as a view element's custom property while data upcasting.\r\n        editor.data.registerRawContentMatcher({\r\n            name: 'div',\r\n            classes: 'raw-html-embed'\r\n        });\r\n        editor.conversion.for('upcast').elementToElement({\r\n            view: {\r\n                name: 'div',\r\n                classes: 'raw-html-embed'\r\n            },\r\n            model: (viewElement, { writer }) => {\r\n                // The div.raw-html-embed is registered as a raw content element,\r\n                // so all it's content is available in a custom property.\r\n                return writer.createElement('rawHtml', {\r\n                    value: viewElement.getCustomProperty('$rawContent')\r\n                });\r\n            }\r\n        });\r\n        editor.conversion.for('dataDowncast').elementToElement({\r\n            model: 'rawHtml',\r\n            view: (modelElement, { writer }) => {\r\n                return writer.createRawElement('div', { class: 'raw-html-embed' }, function (domElement) {\r\n                    domElement.innerHTML = modelElement.getAttribute('value') || '';\r\n                });\r\n            }\r\n        });\r\n        editor.conversion.for('editingDowncast').elementToStructure({\r\n            model: { name: 'rawHtml', attributes: ['value'] },\r\n            view: (modelElement, { writer }) => {\r\n                let domContentWrapper;\r\n                let state;\r\n                let props;\r\n                const viewContentWrapper = writer.createRawElement('div', {\r\n                    class: 'raw-html-embed__content-wrapper'\r\n                }, function (domElement) {\r\n                    domContentWrapper = domElement;\r\n                    renderContent({ editor, domElement, state, props });\r\n                    // Since there is a `data-cke-ignore-events` attribute set on the wrapper element in the editable mode,\r\n                    // the explicit `mousedown` handler on the `capture` phase is needed to move the selection onto the whole\r\n                    // HTML embed widget.\r\n                    domContentWrapper.addEventListener('mousedown', () => {\r\n                        if (state.isEditable) {\r\n                            const model = editor.model;\r\n                            const selectedElement = model.document.selection.getSelectedElement();\r\n                            // Move the selection onto the whole HTML embed widget if it's currently not selected.\r\n                            if (selectedElement !== modelElement) {\r\n                                model.change(writer => writer.setSelection(modelElement, 'on'));\r\n                            }\r\n                        }\r\n                    }, true);\r\n                });\r\n                // API exposed on each raw HTML embed widget so other features can control a particular widget.\r\n                const rawHtmlApi = {\r\n                    makeEditable() {\r\n                        state = Object.assign({}, state, {\r\n                            isEditable: true\r\n                        });\r\n                        renderContent({ domElement: domContentWrapper, editor, state, props });\r\n                        view.change(writer => {\r\n                            writer.setAttribute('data-cke-ignore-events', 'true', viewContentWrapper);\r\n                        });\r\n                        // This could be potentially pulled to a separate method called focusTextarea().\r\n                        domContentWrapper.querySelector('textarea').focus();\r\n                    },\r\n                    save(newValue) {\r\n                        // If the value didn't change, we just cancel. If it changed,\r\n                        // it's enough to update the model – the entire widget will be reconverted.\r\n                        if (newValue !== state.getRawHtmlValue()) {\r\n                            editor.execute('htmlEmbed', newValue);\r\n                            editor.editing.view.focus();\r\n                        }\r\n                        else {\r\n                            this.cancel();\r\n                        }\r\n                    },\r\n                    cancel() {\r\n                        state = Object.assign({}, state, {\r\n                            isEditable: false\r\n                        });\r\n                        renderContent({ domElement: domContentWrapper, editor, state, props });\r\n                        editor.editing.view.focus();\r\n                        view.change(writer => {\r\n                            writer.removeAttribute('data-cke-ignore-events', viewContentWrapper);\r\n                        });\r\n                    }\r\n                };\r\n                state = {\r\n                    showPreviews: htmlEmbedConfig.showPreviews,\r\n                    isEditable: false,\r\n                    getRawHtmlValue: () => modelElement.getAttribute('value') || ''\r\n                };\r\n                props = {\r\n                    sanitizeHtml: htmlEmbedConfig.sanitizeHtml,\r\n                    textareaPlaceholder: t('Paste raw HTML here...'),\r\n                    onEditClick() {\r\n                        rawHtmlApi.makeEditable();\r\n                    },\r\n                    onSaveClick(newValue) {\r\n                        rawHtmlApi.save(newValue);\r\n                    },\r\n                    onCancelClick() {\r\n                        rawHtmlApi.cancel();\r\n                    }\r\n                };\r\n                const viewContainer = writer.createContainerElement('div', {\r\n                    class: 'raw-html-embed',\r\n                    'data-html-embed-label': t('HTML snippet'),\r\n                    dir: editor.locale.uiLanguageDirection\r\n                }, viewContentWrapper);\r\n                writer.setCustomProperty('rawHtmlApi', rawHtmlApi, viewContainer);\r\n                writer.setCustomProperty('rawHtml', true, viewContainer);\r\n                return toWidget(viewContainer, writer, {\r\n                    label: t('HTML snippet'),\r\n                    hasSelectionHandle: true\r\n                });\r\n            }\r\n        });\r\n        function renderContent({ editor, domElement, state, props }) {\r\n            // Remove all children;\r\n            domElement.textContent = '';\r\n            const domDocument = domElement.ownerDocument;\r\n            let domTextarea;\r\n            if (state.isEditable) {\r\n                const textareaProps = {\r\n                    isDisabled: false,\r\n                    placeholder: props.textareaPlaceholder\r\n                };\r\n                domTextarea = createDomTextarea({ domDocument, state, props: textareaProps });\r\n                domElement.append(domTextarea);\r\n            }\r\n            else if (state.showPreviews) {\r\n                const previewContainerProps = {\r\n                    sanitizeHtml: props.sanitizeHtml\r\n                };\r\n                domElement.append(createPreviewContainer({ domDocument, state, props: previewContainerProps, editor }));\r\n            }\r\n            else {\r\n                const textareaProps = {\r\n                    isDisabled: true,\r\n                    placeholder: props.textareaPlaceholder\r\n                };\r\n                domElement.append(createDomTextarea({ domDocument, state, props: textareaProps }));\r\n            }\r\n            const buttonsWrapperProps = {\r\n                onEditClick: props.onEditClick,\r\n                onSaveClick: () => {\r\n                    props.onSaveClick(domTextarea.value);\r\n                },\r\n                onCancelClick: props.onCancelClick\r\n            };\r\n            domElement.prepend(createDomButtonsWrapper({ editor, domDocument, state, props: buttonsWrapperProps }));\r\n        }\r\n        function createDomButtonsWrapper({ editor, domDocument, state, props }) {\r\n            const domButtonsWrapper = createElement(domDocument, 'div', {\r\n                class: 'raw-html-embed__buttons-wrapper'\r\n            });\r\n            if (state.isEditable) {\r\n                const saveButtonView = createUIButton(editor, 'save', props.onSaveClick);\r\n                const cancelButtonView = createUIButton(editor, 'cancel', props.onCancelClick);\r\n                domButtonsWrapper.append(saveButtonView.element, cancelButtonView.element);\r\n                widgetButtonViewReferences.add(saveButtonView).add(cancelButtonView);\r\n            }\r\n            else {\r\n                const editButtonView = createUIButton(editor, 'edit', props.onEditClick);\r\n                domButtonsWrapper.append(editButtonView.element);\r\n                widgetButtonViewReferences.add(editButtonView);\r\n            }\r\n            return domButtonsWrapper;\r\n        }\r\n        function createDomTextarea({ domDocument, state, props }) {\r\n            const domTextarea = createElement(domDocument, 'textarea', {\r\n                placeholder: props.placeholder,\r\n                class: 'ck ck-reset ck-input ck-input-text raw-html-embed__source'\r\n            });\r\n            domTextarea.disabled = props.isDisabled;\r\n            domTextarea.value = state.getRawHtmlValue();\r\n            return domTextarea;\r\n        }\r\n        function createPreviewContainer({ editor, domDocument, state, props }) {\r\n            const sanitizedOutput = props.sanitizeHtml(state.getRawHtmlValue());\r\n            const placeholderText = state.getRawHtmlValue().length > 0 ?\r\n                t('No preview available') :\r\n                t('Empty snippet content');\r\n            const domPreviewPlaceholder = createElement(domDocument, 'div', {\r\n                class: 'ck ck-reset_all raw-html-embed__preview-placeholder'\r\n            }, placeholderText);\r\n            const domPreviewContent = createElement(domDocument, 'div', {\r\n                class: 'raw-html-embed__preview-content',\r\n                dir: editor.locale.contentLanguageDirection\r\n            });\r\n            // Creating a contextual document fragment allows executing scripts when inserting into the preview element.\r\n            // See: #8326.\r\n            const domRange = domDocument.createRange();\r\n            const domDocumentFragment = domRange.createContextualFragment(sanitizedOutput.html);\r\n            domPreviewContent.appendChild(domDocumentFragment);\r\n            const domPreviewContainer = createElement(domDocument, 'div', {\r\n                class: 'raw-html-embed__preview'\r\n            }, [\r\n                domPreviewPlaceholder, domPreviewContent\r\n            ]);\r\n            return domPreviewContainer;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns a UI button view that can be used in conversion.\r\n */\r\nfunction createUIButton(editor, type, onClick) {\r\n    const { t } = editor.locale;\r\n    const buttonView = new ButtonView(editor.locale);\r\n    const command = editor.commands.get('htmlEmbed');\r\n    buttonView.set({\r\n        class: `raw-html-embed__${type}-button`,\r\n        icon: icons.pencil,\r\n        tooltip: true,\r\n        tooltipPosition: editor.locale.uiLanguageDirection === 'rtl' ? 'e' : 'w'\r\n    });\r\n    buttonView.render();\r\n    if (type === 'edit') {\r\n        buttonView.set({\r\n            icon: icons.pencil,\r\n            label: t('Edit source')\r\n        });\r\n        buttonView.bind('isEnabled').to(command);\r\n    }\r\n    else if (type === 'save') {\r\n        buttonView.set({\r\n            icon: icons.check,\r\n            label: t('Save changes')\r\n        });\r\n        buttonView.bind('isEnabled').to(command);\r\n    }\r\n    else {\r\n        buttonView.set({\r\n            icon: icons.cancel,\r\n            label: t('Cancel')\r\n        });\r\n    }\r\n    buttonView.on('execute', onClick);\r\n    return buttonView;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-embed/htmlembedui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport htmlEmbedIcon from '../theme/icons/html.svg';\r\n/**\r\n * The HTML embed UI plugin.\r\n */\r\nexport default class HtmlEmbedUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HtmlEmbedUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add the `htmlEmbed` button to feature components.\r\n        editor.ui.componentFactory.add('htmlEmbed', locale => {\r\n            const command = editor.commands.get('htmlEmbed');\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Insert HTML'),\r\n                icon: htmlEmbedIcon,\r\n                tooltip: true\r\n            });\r\n            view.bind('isEnabled').to(command, 'isEnabled');\r\n            // Execute the command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute('htmlEmbed');\r\n                editor.editing.view.focus();\r\n                const rawHtmlApi = editor.editing.view.document.selection\r\n                    .getSelectedElement()\r\n                    .getCustomProperty('rawHtmlApi');\r\n                rawHtmlApi.makeEditable();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M17 0a2 2 0 0 1 2 2v7a1 1 0 0 1 1 1v5a1 1 0 0 1-.883.993l-.118.006L19 17a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2l-.001-1.001-.116-.006A1 1 0 0 1 0 15v-5a1 1 0 0 1 .999-1L1 2a2 2 0 0 1 2-2h14zm.499 15.999h-15L2.5 17a.5.5 0 0 0 .5.5h14a.5.5 0 0 0 .5-.5l-.001-1.001zm-3.478-6.013-.014.014H14v.007l-1.525 1.525-1.46-1.46-.015.013V10h-1v5h1v-3.53l1.428 1.43.048.043.131-.129L14 11.421V15h1v-5h-.965l-.014-.014zM2 10H1v5h1v-2h2v2h1v-5H4v2H2v-2zm7 0H6v1h1v4h1v-4h1v-1zm8 0h-1v5h3v-1h-2v-4zm0-8.5H3a.5.5 0 0 0-.5.5l-.001 6.999h15L17.5 2a.5.5 0 0 0-.5-.5zM10 7v1H4V7h6zm3-2v1H4V5h9zm-3-2v1H4V3h6z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module html-embed/htmlembed\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Widget } from 'ckeditor5/src/widget';\r\nimport HtmlEmbedEditing from './htmlembedediting';\r\nimport HtmlEmbedUI from './htmlembedui';\r\n/**\r\n * The HTML embed feature.\r\n *\r\n * It allows inserting HTML snippets directly into the editor.\r\n *\r\n * For a detailed overview, check the {@glink features/html/html-embed HTML embed feature} documentation.\r\n */\r\nexport default class HtmlEmbed extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [HtmlEmbedEditing, HtmlEmbedUI, Widget];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'HtmlEmbed';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module indent/indentediting\r\n */\r\nimport { Plugin, MultiCommand } from 'ckeditor5/src/core';\r\n/**\r\n * The indent editing feature.\r\n *\r\n * This plugin registers the `'indent'` and `'outdent'` commands.\r\n *\r\n * **Note**: In order for the commands to work, at least one of the compatible features is required. Read more in the\r\n * {@link module:indent/indent~Indent indent feature} API documentation.\r\n */\r\nexport default class IndentEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'IndentEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        editor.commands.add('indent', new MultiCommand(editor));\r\n        editor.commands.add('outdent', new MultiCommand(editor));\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95 5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module indent/indentui\r\n */\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport indentIcon from '../theme/icons/indent.svg';\r\nimport outdentIcon from '../theme/icons/outdent.svg';\r\n/**\r\n * The indent UI feature.\r\n *\r\n * This plugin registers the `'indent'` and `'outdent'` buttons.\r\n *\r\n * **Note**: In order for the commands to work, at least one of the compatible features is required. Read more in\r\n * the {@link module:indent/indent~Indent indent feature} API documentation.\r\n */\r\nexport default class IndentUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'IndentUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const locale = editor.locale;\r\n        const t = editor.t;\r\n        const localizedIndentIcon = locale.uiLanguageDirection == 'ltr' ? indentIcon : outdentIcon;\r\n        const localizedOutdentIcon = locale.uiLanguageDirection == 'ltr' ? outdentIcon : indentIcon;\r\n        this._defineButton('indent', t('Increase indent'), localizedIndentIcon);\r\n        this._defineButton('outdent', t('Decrease indent'), localizedOutdentIcon);\r\n    }\r\n    /**\r\n     * Defines a UI button.\r\n     */\r\n    _defineButton(commandName, label, icon) {\r\n        const editor = this.editor;\r\n        editor.ui.componentFactory.add(commandName, locale => {\r\n            const command = editor.commands.get(commandName);\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label,\r\n                icon,\r\n                tooltip: true\r\n            });\r\n            view.bind('isEnabled').to(command, 'isEnabled');\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute(commandName);\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module indent/indent\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport IndentEditing from './indentediting';\r\nimport IndentUI from './indentui';\r\n/**\r\n * The indent feature.\r\n *\r\n * This plugin acts as a single entry point plugin for other features that implement indentation of elements like lists or paragraphs.\r\n *\r\n * The compatible features are:\r\n *\r\n * * The {@link module:list/list~List} or {@link module:list/list/listediting~ListEditing} feature for list indentation.\r\n * * The {@link module:indent/indentblock~IndentBlock} feature for block indentation.\r\n *\r\n * This is a \"glue\" plugin that loads the following plugins:\r\n *\r\n * * The {@link module:indent/indentediting~IndentEditing indent editing feature}.\r\n * * The {@link module:indent/indentui~IndentUI indent UI feature}.\r\n *\r\n * The dependent plugins register the `'indent'` and `'outdent'` commands and introduce the `'indent'` and `'outdent'` buttons\r\n * that allow to increase or decrease text indentation of supported elements.\r\n *\r\n * **Note**: In order for the commands and buttons to work, at least one of compatible features is required.\r\n */\r\nexport default class Indent extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Indent';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [IndentEditing, IndentUI];\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/utils/automaticdecorators\r\n */\r\nimport { toMap } from 'ckeditor5/src/utils';\r\n/**\r\n * Helper class that ties together all {@link module:link/linkconfig~LinkDecoratorAutomaticDefinition} and provides\r\n * the {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToElement downcast dispatchers} for them.\r\n */\r\nexport default class AutomaticDecorators {\r\n    constructor() {\r\n        /**\r\n         * Stores the definition of {@link module:link/linkconfig~LinkDecoratorAutomaticDefinition automatic decorators}.\r\n         * This data is used as a source for a downcast dispatcher to create a proper conversion to output data.\r\n         */\r\n        this._definitions = new Set();\r\n    }\r\n    /**\r\n     * Gives information about the number of decorators stored in the {@link module:link/utils/automaticdecorators~AutomaticDecorators}\r\n     * instance.\r\n     */\r\n    get length() {\r\n        return this._definitions.size;\r\n    }\r\n    /**\r\n     * Adds automatic decorator objects or an array with them to be used during downcasting.\r\n     *\r\n     * @param item A configuration object of automatic rules for decorating links. It might also be an array of such objects.\r\n     */\r\n    add(item) {\r\n        if (Array.isArray(item)) {\r\n            item.forEach(item => this._definitions.add(item));\r\n        }\r\n        else {\r\n            this._definitions.add(item);\r\n        }\r\n    }\r\n    /**\r\n     * Provides the conversion helper used in the {@link module:engine/conversion/downcasthelpers~DowncastHelpers#add} method.\r\n     *\r\n     * @returns A dispatcher function used as conversion helper in {@link module:engine/conversion/downcasthelpers~DowncastHelpers#add}.\r\n     */\r\n    getDispatcher() {\r\n        return dispatcher => {\r\n            dispatcher.on('attribute:linkHref', (evt, data, conversionApi) => {\r\n                // There is only test as this behavior decorates links and\r\n                // it is run before dispatcher which actually consumes this node.\r\n                // This allows on writing own dispatcher with highest priority,\r\n                // which blocks both native converter and this additional decoration.\r\n                if (!conversionApi.consumable.test(data.item, 'attribute:linkHref')) {\r\n                    return;\r\n                }\r\n                // Automatic decorators for block links are handled e.g. in LinkImageEditing.\r\n                if (!(data.item.is('selection') || conversionApi.schema.isInline(data.item))) {\r\n                    return;\r\n                }\r\n                const viewWriter = conversionApi.writer;\r\n                const viewSelection = viewWriter.document.selection;\r\n                for (const item of this._definitions) {\r\n                    const viewElement = viewWriter.createAttributeElement('a', item.attributes, {\r\n                        priority: 5\r\n                    });\r\n                    if (item.classes) {\r\n                        viewWriter.addClass(item.classes, viewElement);\r\n                    }\r\n                    for (const key in item.styles) {\r\n                        viewWriter.setStyle(key, item.styles[key], viewElement);\r\n                    }\r\n                    viewWriter.setCustomProperty('link', true, viewElement);\r\n                    if (item.callback(data.attributeNewValue)) {\r\n                        if (data.item.is('selection')) {\r\n                            viewWriter.wrap(viewSelection.getFirstRange(), viewElement);\r\n                        }\r\n                        else {\r\n                            viewWriter.wrap(conversionApi.mapper.toViewRange(data.range), viewElement);\r\n                        }\r\n                    }\r\n                    else {\r\n                        viewWriter.unwrap(conversionApi.mapper.toViewRange(data.range), viewElement);\r\n                    }\r\n                }\r\n            }, { priority: 'high' });\r\n        };\r\n    }\r\n    /**\r\n     * Provides the conversion helper used in the {@link module:engine/conversion/downcasthelpers~DowncastHelpers#add} method\r\n     * when linking images.\r\n     *\r\n     * @returns A dispatcher function used as conversion helper in {@link module:engine/conversion/downcasthelpers~DowncastHelpers#add}.\r\n     */\r\n    getDispatcherForLinkedImage() {\r\n        return dispatcher => {\r\n            dispatcher.on('attribute:linkHref:imageBlock', (evt, data, { writer, mapper }) => {\r\n                const viewFigure = mapper.toViewElement(data.item);\r\n                const linkInImage = Array.from(viewFigure.getChildren())\r\n                    .find((child) => child.is('element', 'a'));\r\n                for (const item of this._definitions) {\r\n                    const attributes = toMap(item.attributes);\r\n                    if (item.callback(data.attributeNewValue)) {\r\n                        for (const [key, val] of attributes) {\r\n                            // Left for backward compatibility. Since v30 decorator should\r\n                            // accept `classes` and `styles` separately from `attributes`.\r\n                            if (key === 'class') {\r\n                                writer.addClass(val, linkInImage);\r\n                            }\r\n                            else {\r\n                                writer.setAttribute(key, val, linkInImage);\r\n                            }\r\n                        }\r\n                        if (item.classes) {\r\n                            writer.addClass(item.classes, linkInImage);\r\n                        }\r\n                        for (const key in item.styles) {\r\n                            writer.setStyle(key, item.styles[key], linkInImage);\r\n                        }\r\n                    }\r\n                    else {\r\n                        for (const [key, val] of attributes) {\r\n                            if (key === 'class') {\r\n                                writer.removeClass(val, linkInImage);\r\n                            }\r\n                            else {\r\n                                writer.removeAttribute(key, linkInImage);\r\n                            }\r\n                        }\r\n                        if (item.classes) {\r\n                            writer.removeClass(item.classes, linkInImage);\r\n                        }\r\n                        for (const key in item.styles) {\r\n                            writer.removeStyle(key, linkInImage);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        };\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { upperFirst } from 'lodash-es';\r\nconst ATTRIBUTE_WHITESPACES = /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g; // eslint-disable-line no-control-regex\r\nconst SAFE_URL = /^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;\r\n// Simplified email test - should be run over previously found URL.\r\nconst EMAIL_REG_EXP = /^[\\S]+@((?![-_])(?:[-\\w\\u00a1-\\uffff]{0,63}[^-_]\\.))+(?:[a-z\\u00a1-\\uffff]{2,})$/i;\r\n// The regex checks for the protocol syntax ('xxxx://' or 'xxxx:')\r\n// or non-word characters at the beginning of the link ('/', '#' etc.).\r\nconst PROTOCOL_REG_EXP = /^((\\w+:(\\/{2,})?)|(\\W))/i;\r\n/**\r\n * A keystroke used by the {@link module:link/linkui~LinkUI link UI feature}.\r\n */\r\nexport const LINK_KEYSTROKE = 'Ctrl+K';\r\n/**\r\n * Returns `true` if a given view node is the link element.\r\n */\r\nexport function isLinkElement(node) {\r\n    return node.is('attributeElement') && !!node.getCustomProperty('link');\r\n}\r\n/**\r\n * Creates a link {@link module:engine/view/attributeelement~AttributeElement} with the provided `href` attribute.\r\n */\r\nexport function createLinkElement(href, { writer }) {\r\n    // Priority 5 - https://github.com/ckeditor/ckeditor5-link/issues/121.\r\n    const linkElement = writer.createAttributeElement('a', { href }, { priority: 5 });\r\n    writer.setCustomProperty('link', true, linkElement);\r\n    return linkElement;\r\n}\r\n/**\r\n * Returns a safe URL based on a given value.\r\n *\r\n * A URL is considered safe if it is safe for the user (does not contain any malicious code).\r\n *\r\n * If a URL is considered unsafe, a simple `\"#\"` is returned.\r\n *\r\n * @internal\r\n */\r\nexport function ensureSafeUrl(url) {\r\n    const urlString = String(url);\r\n    return isSafeUrl(urlString) ? urlString : '#';\r\n}\r\n/**\r\n * Checks whether the given URL is safe for the user (does not contain any malicious code).\r\n */\r\nfunction isSafeUrl(url) {\r\n    const normalizedUrl = url.replace(ATTRIBUTE_WHITESPACES, '');\r\n    return !!normalizedUrl.match(SAFE_URL);\r\n}\r\n/**\r\n * Returns the {@link module:link/linkconfig~LinkConfig#decorators `config.link.decorators`} configuration processed\r\n * to respect the locale of the editor, i.e. to display the {@link module:link/linkconfig~LinkDecoratorManualDefinition label}\r\n * in the correct language.\r\n *\r\n * **Note**: Only the few most commonly used labels are translated automatically. Other labels should be manually\r\n * translated in the {@link module:link/linkconfig~LinkConfig#decorators `config.link.decorators`} configuration.\r\n *\r\n * @param t Shorthand for {@link module:utils/locale~Locale#t Locale#t}.\r\n * @param decorators The decorator reference where the label values should be localized.\r\n */\r\nexport function getLocalizedDecorators(t, decorators) {\r\n    const localizedDecoratorsLabels = {\r\n        'Open in a new tab': t('Open in a new tab'),\r\n        'Downloadable': t('Downloadable')\r\n    };\r\n    decorators.forEach(decorator => {\r\n        if ('label' in decorator && localizedDecoratorsLabels[decorator.label]) {\r\n            decorator.label = localizedDecoratorsLabels[decorator.label];\r\n        }\r\n        return decorator;\r\n    });\r\n    return decorators;\r\n}\r\n/**\r\n * Converts an object with defined decorators to a normalized array of decorators. The `id` key is added for each decorator and\r\n * is used as the attribute's name in the model.\r\n */\r\nexport function normalizeDecorators(decorators) {\r\n    const retArray = [];\r\n    if (decorators) {\r\n        for (const [key, value] of Object.entries(decorators)) {\r\n            const decorator = Object.assign({}, value, { id: `link${upperFirst(key)}` });\r\n            retArray.push(decorator);\r\n        }\r\n    }\r\n    return retArray;\r\n}\r\n/**\r\n * Returns `true` if the specified `element` can be linked (the element allows the `linkHref` attribute).\r\n */\r\nexport function isLinkableElement(element, schema) {\r\n    if (!element) {\r\n        return false;\r\n    }\r\n    return schema.checkAttribute(element.name, 'linkHref');\r\n}\r\n/**\r\n * Returns `true` if the specified `value` is an email.\r\n */\r\nexport function isEmail(value) {\r\n    return EMAIL_REG_EXP.test(value);\r\n}\r\n/**\r\n * Adds the protocol prefix to the specified `link` when:\r\n *\r\n * * it does not contain it already, and there is a {@link module:link/linkconfig~LinkConfig#defaultProtocol `defaultProtocol` }\r\n * configuration value provided,\r\n * * or the link is an email address.\r\n */\r\nexport function addLinkProtocolIfApplicable(link, defaultProtocol) {\r\n    const protocol = isEmail(link) ? 'mailto:' : defaultProtocol;\r\n    const isProtocolNeeded = !!protocol && !linkHasProtocol(link);\r\n    return link && isProtocolNeeded ? protocol + link : link;\r\n}\r\n/**\r\n * Checks if protocol is already included in the link.\r\n */\r\nexport function linkHasProtocol(link) {\r\n    return PROTOCOL_REG_EXP.test(link);\r\n}\r\n/**\r\n * Opens the link in a new browser tab.\r\n */\r\nexport function openLink(link) {\r\n    window.open(link, '_blank', 'noopener');\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/linkcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { findAttributeRange } from 'ckeditor5/src/typing';\r\nimport { Collection, first, toMap } from 'ckeditor5/src/utils';\r\nimport AutomaticDecorators from './utils/automaticdecorators';\r\nimport { isLinkableElement } from './utils';\r\n/**\r\n * The link command. It is used by the {@link module:link/link~Link link feature}.\r\n */\r\nexport default class LinkCommand extends Command {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * A collection of {@link module:link/utils/manualdecorator~ManualDecorator manual decorators}\r\n         * corresponding to the {@link module:link/linkconfig~LinkConfig#decorators decorator configuration}.\r\n         *\r\n         * You can consider it a model with states of manual decorators added to the currently selected link.\r\n         */\r\n        this.manualDecorators = new Collection();\r\n        /**\r\n         * An instance of the helper that ties together all {@link module:link/linkconfig~LinkDecoratorAutomaticDefinition}\r\n         * that are used by the {@glink features/link link} and the {@glink features/images/images-linking linking images} features.\r\n         */\r\n        this.automaticDecorators = new AutomaticDecorators();\r\n    }\r\n    /**\r\n     * Synchronizes the state of {@link #manualDecorators} with the currently present elements in the model.\r\n     */\r\n    restoreManualDecoratorStates() {\r\n        for (const manualDecorator of this.manualDecorators) {\r\n            manualDecorator.value = this._getDecoratorStateFromModel(manualDecorator.id);\r\n        }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const selectedElement = selection.getSelectedElement() || first(selection.getSelectedBlocks());\r\n        // A check for any integration that allows linking elements (e.g. `LinkImage`).\r\n        // Currently the selection reads attributes from text nodes only. See #7429 and #7465.\r\n        if (isLinkableElement(selectedElement, model.schema)) {\r\n            this.value = selectedElement.getAttribute('linkHref');\r\n            this.isEnabled = model.schema.checkAttribute(selectedElement, 'linkHref');\r\n        }\r\n        else {\r\n            this.value = selection.getAttribute('linkHref');\r\n            this.isEnabled = model.schema.checkAttributeInSelection(selection, 'linkHref');\r\n        }\r\n        for (const manualDecorator of this.manualDecorators) {\r\n            manualDecorator.value = this._getDecoratorStateFromModel(manualDecorator.id);\r\n        }\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * When the selection is non-collapsed, the `linkHref` attribute will be applied to nodes inside the selection, but only to\r\n     * those nodes where the `linkHref` attribute is allowed (disallowed nodes will be omitted).\r\n     *\r\n     * When the selection is collapsed and is not inside the text with the `linkHref` attribute, a\r\n     * new {@link module:engine/model/text~Text text node} with the `linkHref` attribute will be inserted in place of the caret, but\r\n     * only if such element is allowed in this place. The `_data` of the inserted text will equal the `href` parameter.\r\n     * The selection will be updated to wrap the just inserted text node.\r\n     *\r\n     * When the selection is collapsed and inside the text with the `linkHref` attribute, the attribute value will be updated.\r\n     *\r\n     * # Decorators and model attribute management\r\n     *\r\n     * There is an optional argument to this command that applies or removes model\r\n     * {@glink framework/architecture/editing-engine#text-attributes text attributes} brought by\r\n     * {@link module:link/utils/manualdecorator~ManualDecorator manual link decorators}.\r\n     *\r\n     * Text attribute names in the model correspond to the entries in the {@link module:link/linkconfig~LinkConfig#decorators\r\n     * configuration}.\r\n     * For every decorator configured, a model text attribute exists with the \"link\" prefix. For example, a `'linkMyDecorator'` attribute\r\n     * corresponds to `'myDecorator'` in the configuration.\r\n     *\r\n     * To learn more about link decorators, check out the {@link module:link/linkconfig~LinkConfig#decorators `config.link.decorators`}\r\n     * documentation.\r\n     *\r\n     * Here is how to manage decorator attributes with the link command:\r\n     *\r\n     * ```ts\r\n     * const linkCommand = editor.commands.get( 'link' );\r\n     *\r\n     * // Adding a new decorator attribute.\r\n     * linkCommand.execute( 'http://example.com', {\r\n     * \tlinkIsExternal: true\r\n     * } );\r\n     *\r\n     * // Removing a decorator attribute from the selection.\r\n     * linkCommand.execute( 'http://example.com', {\r\n     * \tlinkIsExternal: false\r\n     * } );\r\n     *\r\n     * // Adding multiple decorator attributes at the same time.\r\n     * linkCommand.execute( 'http://example.com', {\r\n     * \tlinkIsExternal: true,\r\n     * \tlinkIsDownloadable: true,\r\n     * } );\r\n     *\r\n     * // Removing and adding decorator attributes at the same time.\r\n     * linkCommand.execute( 'http://example.com', {\r\n     * \tlinkIsExternal: false,\r\n     * \tlinkFoo: true,\r\n     * \tlinkIsDownloadable: false,\r\n     * } );\r\n     * ```\r\n     *\r\n     * **Note**: If the decorator attribute name is not specified, its state remains untouched.\r\n     *\r\n     * **Note**: {@link module:link/unlinkcommand~UnlinkCommand#execute `UnlinkCommand#execute()`} removes all\r\n     * decorator attributes.\r\n     *\r\n     * @fires execute\r\n     * @param href Link destination.\r\n     * @param manualDecoratorIds The information about manual decorator attributes to be applied or removed upon execution.\r\n     */\r\n    execute(href, manualDecoratorIds = {}) {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        // Stores information about manual decorators to turn them on/off when command is applied.\r\n        const truthyManualDecorators = [];\r\n        const falsyManualDecorators = [];\r\n        for (const name in manualDecoratorIds) {\r\n            if (manualDecoratorIds[name]) {\r\n                truthyManualDecorators.push(name);\r\n            }\r\n            else {\r\n                falsyManualDecorators.push(name);\r\n            }\r\n        }\r\n        model.change(writer => {\r\n            // If selection is collapsed then update selected link or insert new one at the place of caret.\r\n            if (selection.isCollapsed) {\r\n                const position = selection.getFirstPosition();\r\n                // When selection is inside text with `linkHref` attribute.\r\n                if (selection.hasAttribute('linkHref')) {\r\n                    const linkText = extractTextFromSelection(selection);\r\n                    // Then update `linkHref` value.\r\n                    let linkRange = findAttributeRange(position, 'linkHref', selection.getAttribute('linkHref'), model);\r\n                    if (selection.getAttribute('linkHref') === linkText) {\r\n                        linkRange = this._updateLinkContent(model, writer, linkRange, href);\r\n                    }\r\n                    writer.setAttribute('linkHref', href, linkRange);\r\n                    truthyManualDecorators.forEach(item => {\r\n                        writer.setAttribute(item, true, linkRange);\r\n                    });\r\n                    falsyManualDecorators.forEach(item => {\r\n                        writer.removeAttribute(item, linkRange);\r\n                    });\r\n                    // Put the selection at the end of the updated link.\r\n                    writer.setSelection(writer.createPositionAfter(linkRange.end.nodeBefore));\r\n                }\r\n                // If not then insert text node with `linkHref` attribute in place of caret.\r\n                // However, since selection is collapsed, attribute value will be used as data for text node.\r\n                // So, if `href` is empty, do not create text node.\r\n                else if (href !== '') {\r\n                    const attributes = toMap(selection.getAttributes());\r\n                    attributes.set('linkHref', href);\r\n                    truthyManualDecorators.forEach(item => {\r\n                        attributes.set(item, true);\r\n                    });\r\n                    const { end: positionAfter } = model.insertContent(writer.createText(href, attributes), position);\r\n                    // Put the selection at the end of the inserted link.\r\n                    // Using end of range returned from insertContent in case nodes with the same attributes got merged.\r\n                    writer.setSelection(positionAfter);\r\n                }\r\n                // Remove the `linkHref` attribute and all link decorators from the selection.\r\n                // It stops adding a new content into the link element.\r\n                ['linkHref', ...truthyManualDecorators, ...falsyManualDecorators].forEach(item => {\r\n                    writer.removeSelectionAttribute(item);\r\n                });\r\n            }\r\n            else {\r\n                // If selection has non-collapsed ranges, we change attribute on nodes inside those ranges\r\n                // omitting nodes where the `linkHref` attribute is disallowed.\r\n                const ranges = model.schema.getValidRanges(selection.getRanges(), 'linkHref');\r\n                // But for the first, check whether the `linkHref` attribute is allowed on selected blocks (e.g. the \"image\" element).\r\n                const allowedRanges = [];\r\n                for (const element of selection.getSelectedBlocks()) {\r\n                    if (model.schema.checkAttribute(element, 'linkHref')) {\r\n                        allowedRanges.push(writer.createRangeOn(element));\r\n                    }\r\n                }\r\n                // Ranges that accept the `linkHref` attribute. Since we will iterate over `allowedRanges`, let's clone it.\r\n                const rangesToUpdate = allowedRanges.slice();\r\n                // For all selection ranges we want to check whether given range is inside an element that accepts the `linkHref` attribute.\r\n                // If so, we don't want to propagate applying the attribute to its children.\r\n                for (const range of ranges) {\r\n                    if (this._isRangeToUpdate(range, allowedRanges)) {\r\n                        rangesToUpdate.push(range);\r\n                    }\r\n                }\r\n                for (const range of rangesToUpdate) {\r\n                    let linkRange = range;\r\n                    if (rangesToUpdate.length === 1) {\r\n                        // Current text of the link in the document.\r\n                        const linkText = extractTextFromSelection(selection);\r\n                        if (selection.getAttribute('linkHref') === linkText) {\r\n                            linkRange = this._updateLinkContent(model, writer, range, href);\r\n                            writer.setSelection(writer.createSelection(linkRange));\r\n                        }\r\n                    }\r\n                    writer.setAttribute('linkHref', href, linkRange);\r\n                    truthyManualDecorators.forEach(item => {\r\n                        writer.setAttribute(item, true, linkRange);\r\n                    });\r\n                    falsyManualDecorators.forEach(item => {\r\n                        writer.removeAttribute(item, linkRange);\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Provides information whether a decorator with a given name is present in the currently processed selection.\r\n     *\r\n     * @param decoratorName The name of the manual decorator used in the model\r\n     * @returns The information whether a given decorator is currently present in the selection.\r\n     */\r\n    _getDecoratorStateFromModel(decoratorName) {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const selectedElement = selection.getSelectedElement();\r\n        // A check for the `LinkImage` plugin. If the selection contains an element, get values from the element.\r\n        // Currently the selection reads attributes from text nodes only. See #7429 and #7465.\r\n        if (isLinkableElement(selectedElement, model.schema)) {\r\n            return selectedElement.getAttribute(decoratorName);\r\n        }\r\n        return selection.getAttribute(decoratorName);\r\n    }\r\n    /**\r\n     * Checks whether specified `range` is inside an element that accepts the `linkHref` attribute.\r\n     *\r\n     * @param range A range to check.\r\n     * @param allowedRanges An array of ranges created on elements where the attribute is accepted.\r\n     */\r\n    _isRangeToUpdate(range, allowedRanges) {\r\n        for (const allowedRange of allowedRanges) {\r\n            // A range is inside an element that will have the `linkHref` attribute. Do not modify its nodes.\r\n            if (allowedRange.containsRange(range)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Updates selected link with a new value as its content and as its href attribute.\r\n     *\r\n     * @param model Model is need to insert content.\r\n     * @param writer Writer is need to create text element in model.\r\n     * @param range A range where should be inserted content.\r\n     * @param href A link value which should be in the href attribute and in the content.\r\n     */\r\n    _updateLinkContent(model, writer, range, href) {\r\n        const text = writer.createText(href, { linkHref: href });\r\n        return model.insertContent(text, range);\r\n    }\r\n}\r\n// Returns a text of a link under the collapsed selection or a selection that contains the entire link.\r\nfunction extractTextFromSelection(selection) {\r\n    if (selection.isCollapsed) {\r\n        const firstPosition = selection.getFirstPosition();\r\n        return firstPosition.textNode && firstPosition.textNode.data;\r\n    }\r\n    else {\r\n        const rangeItems = Array.from(selection.getFirstRange().getItems());\r\n        if (rangeItems.length > 1) {\r\n            return null;\r\n        }\r\n        const firstNode = rangeItems[0];\r\n        if (firstNode.is('$text') || firstNode.is('$textProxy')) {\r\n            return firstNode.data;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/unlinkcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { findAttributeRange } from 'ckeditor5/src/typing';\r\nimport { isLinkableElement } from './utils';\r\n/**\r\n * The unlink command. It is used by the {@link module:link/link~Link link plugin}.\r\n */\r\nexport default class UnlinkCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const selectedElement = selection.getSelectedElement();\r\n        // A check for any integration that allows linking elements (e.g. `LinkImage`).\r\n        // Currently the selection reads attributes from text nodes only. See #7429 and #7465.\r\n        if (isLinkableElement(selectedElement, model.schema)) {\r\n            this.isEnabled = model.schema.checkAttribute(selectedElement, 'linkHref');\r\n        }\r\n        else {\r\n            this.isEnabled = model.schema.checkAttributeInSelection(selection, 'linkHref');\r\n        }\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * When the selection is collapsed, it removes the `linkHref` attribute from each node with the same `linkHref` attribute value.\r\n     * When the selection is non-collapsed, it removes the `linkHref` attribute from each node in selected ranges.\r\n     *\r\n     * # Decorators\r\n     *\r\n     * If {@link module:link/linkconfig~LinkConfig#decorators `config.link.decorators`} is specified,\r\n     * all configured decorators are removed together with the `linkHref` attribute.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const editor = this.editor;\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const linkCommand = editor.commands.get('link');\r\n        model.change(writer => {\r\n            // Get ranges to unlink.\r\n            const rangesToUnlink = selection.isCollapsed ?\r\n                [findAttributeRange(selection.getFirstPosition(), 'linkHref', selection.getAttribute('linkHref'), model)] :\r\n                model.schema.getValidRanges(selection.getRanges(), 'linkHref');\r\n            // Remove `linkHref` attribute from specified ranges.\r\n            for (const range of rangesToUnlink) {\r\n                writer.removeAttribute('linkHref', range);\r\n                // If there are registered custom attributes, then remove them during unlink.\r\n                if (linkCommand) {\r\n                    for (const manualDecorator of linkCommand.manualDecorators) {\r\n                        writer.removeAttribute(manualDecorator.id, range);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/utils/manualdecorator\r\n */\r\nimport { ObservableMixin } from 'ckeditor5/src/utils';\r\n/**\r\n * Helper class that stores manual decorators with observable {@link module:link/utils/manualdecorator~ManualDecorator#value}\r\n * to support integration with the UI state. An instance of this class is a model with the state of individual manual decorators.\r\n * These decorators are kept as collections in {@link module:link/linkcommand~LinkCommand#manualDecorators}.\r\n */\r\nexport default class ManualDecorator extends ObservableMixin() {\r\n    /**\r\n     * Creates a new instance of {@link module:link/utils/manualdecorator~ManualDecorator}.\r\n     *\r\n     * @param config.id The name of the attribute used in the model that represents a given manual decorator.\r\n     * For example: `'linkIsExternal'`.\r\n     * @param config.label The label used in the user interface to toggle the manual decorator.\r\n     * @param config.attributes A set of attributes added to output data when the decorator is active for a specific link.\r\n     * Attributes should keep the format of attributes defined in {@link module:engine/view/elementdefinition~ElementDefinition}.\r\n     * @param [config.defaultValue] Controls whether the decorator is \"on\" by default.\r\n     */\r\n    constructor({ id, label, attributes, classes, styles, defaultValue }) {\r\n        super();\r\n        this.id = id;\r\n        this.set('value', undefined);\r\n        this.defaultValue = defaultValue;\r\n        this.label = label;\r\n        this.attributes = attributes;\r\n        this.classes = classes;\r\n        this.styles = styles;\r\n    }\r\n    /**\r\n     * Returns {@link module:engine/view/matcher~MatcherPattern} with decorator attributes.\r\n     *\r\n     * @internal\r\n     */\r\n    _createPattern() {\r\n        return {\r\n            attributes: this.attributes,\r\n            classes: this.classes,\r\n            styles: this.styles\r\n        };\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./link.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/linkediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { MouseObserver } from 'ckeditor5/src/engine';\r\nimport { Input, TwoStepCaretMovement, inlineHighlight, findAttributeRange } from 'ckeditor5/src/typing';\r\nimport { ClipboardPipeline } from 'ckeditor5/src/clipboard';\r\nimport { keyCodes, env } from 'ckeditor5/src/utils';\r\nimport LinkCommand from './linkcommand';\r\nimport UnlinkCommand from './unlinkcommand';\r\nimport ManualDecorator from './utils/manualdecorator';\r\nimport { createLinkElement, ensureSafeUrl, getLocalizedDecorators, normalizeDecorators, openLink, addLinkProtocolIfApplicable } from './utils';\r\nimport '../theme/link.css';\r\nconst HIGHLIGHT_CLASS = 'ck-link_selected';\r\nconst DECORATOR_AUTOMATIC = 'automatic';\r\nconst DECORATOR_MANUAL = 'manual';\r\nconst EXTERNAL_LINKS_REGEXP = /^(https?:)?\\/\\//;\r\n/**\r\n * The link engine feature.\r\n *\r\n * It introduces the `linkHref=\"url\"` attribute in the model which renders to the view as a `<a href=\"url\">` element\r\n * as well as `'link'` and `'unlink'` commands.\r\n */\r\nexport default class LinkEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'LinkEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        // Clipboard is required for handling cut and paste events while typing over the link.\r\n        return [TwoStepCaretMovement, Input, ClipboardPipeline];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define('link', {\r\n            addTargetToExternalLinks: false\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Allow link attribute on all inline nodes.\r\n        editor.model.schema.extend('$text', { allowAttributes: 'linkHref' });\r\n        editor.conversion.for('dataDowncast')\r\n            .attributeToElement({ model: 'linkHref', view: createLinkElement });\r\n        editor.conversion.for('editingDowncast')\r\n            .attributeToElement({ model: 'linkHref', view: (href, conversionApi) => {\r\n                return createLinkElement(ensureSafeUrl(href), conversionApi);\r\n            } });\r\n        editor.conversion.for('upcast')\r\n            .elementToAttribute({\r\n            view: {\r\n                name: 'a',\r\n                attributes: {\r\n                    href: true\r\n                }\r\n            },\r\n            model: {\r\n                key: 'linkHref',\r\n                value: (viewElement) => viewElement.getAttribute('href')\r\n            }\r\n        });\r\n        // Create linking commands.\r\n        editor.commands.add('link', new LinkCommand(editor));\r\n        editor.commands.add('unlink', new UnlinkCommand(editor));\r\n        const linkDecorators = getLocalizedDecorators(editor.t, normalizeDecorators(editor.config.get('link.decorators')));\r\n        this._enableAutomaticDecorators(linkDecorators\r\n            .filter((item) => item.mode === DECORATOR_AUTOMATIC));\r\n        this._enableManualDecorators(linkDecorators\r\n            .filter((item) => item.mode === DECORATOR_MANUAL));\r\n        // Enable two-step caret movement for `linkHref` attribute.\r\n        const twoStepCaretMovementPlugin = editor.plugins.get(TwoStepCaretMovement);\r\n        twoStepCaretMovementPlugin.registerAttribute('linkHref');\r\n        // Setup highlight over selected link.\r\n        inlineHighlight(editor, 'linkHref', 'a', HIGHLIGHT_CLASS);\r\n        // Handle link following by CTRL+click or ALT+ENTER\r\n        this._enableLinkOpen();\r\n        // Change the attributes of the selection in certain situations after the link was inserted into the document.\r\n        this._enableInsertContentSelectionAttributesFixer();\r\n        // Handle a click at the beginning/end of a link element.\r\n        this._enableClickingAfterLink();\r\n        // Handle typing over the link.\r\n        this._enableTypingOverLink();\r\n        // Handle removing the content after the link element.\r\n        this._handleDeleteContentAfterLink();\r\n        // Handle adding default protocol to pasted links.\r\n        this._enableClipboardIntegration();\r\n    }\r\n    /**\r\n     * Processes an array of configured {@link module:link/linkconfig~LinkDecoratorAutomaticDefinition automatic decorators}\r\n     * and registers a {@link module:engine/conversion/downcastdispatcher~DowncastDispatcher downcast dispatcher}\r\n     * for each one of them. Downcast dispatchers are obtained using the\r\n     * {@link module:link/utils/automaticdecorators~AutomaticDecorators#getDispatcher} method.\r\n     *\r\n     * **Note**: This method also activates the automatic external link decorator if enabled with\r\n     * {@link module:link/linkconfig~LinkConfig#addTargetToExternalLinks `config.link.addTargetToExternalLinks`}.\r\n     */\r\n    _enableAutomaticDecorators(automaticDecoratorDefinitions) {\r\n        const editor = this.editor;\r\n        // Store automatic decorators in the command instance as we do the same with manual decorators.\r\n        // Thanks to that, `LinkImageEditing` plugin can re-use the same definitions.\r\n        const command = editor.commands.get('link');\r\n        const automaticDecorators = command.automaticDecorators;\r\n        // Adds a default decorator for external links.\r\n        if (editor.config.get('link.addTargetToExternalLinks')) {\r\n            automaticDecorators.add({\r\n                id: 'linkIsExternal',\r\n                mode: DECORATOR_AUTOMATIC,\r\n                callback: url => !!url && EXTERNAL_LINKS_REGEXP.test(url),\r\n                attributes: {\r\n                    target: '_blank',\r\n                    rel: 'noopener noreferrer'\r\n                }\r\n            });\r\n        }\r\n        automaticDecorators.add(automaticDecoratorDefinitions);\r\n        if (automaticDecorators.length) {\r\n            editor.conversion.for('downcast').add(automaticDecorators.getDispatcher());\r\n        }\r\n    }\r\n    /**\r\n     * Processes an array of configured {@link module:link/linkconfig~LinkDecoratorManualDefinition manual decorators},\r\n     * transforms them into {@link module:link/utils/manualdecorator~ManualDecorator} instances and stores them in the\r\n     * {@link module:link/linkcommand~LinkCommand#manualDecorators} collection (a model for manual decorators state).\r\n     *\r\n     * Also registers an {@link module:engine/conversion/downcasthelpers~DowncastHelpers#attributeToElement attribute-to-element}\r\n     * converter for each manual decorator and extends the {@link module:engine/model/schema~Schema model's schema}\r\n     * with adequate model attributes.\r\n     */\r\n    _enableManualDecorators(manualDecoratorDefinitions) {\r\n        if (!manualDecoratorDefinitions.length) {\r\n            return;\r\n        }\r\n        const editor = this.editor;\r\n        const command = editor.commands.get('link');\r\n        const manualDecorators = command.manualDecorators;\r\n        manualDecoratorDefinitions.forEach(decoratorDefinition => {\r\n            editor.model.schema.extend('$text', { allowAttributes: decoratorDefinition.id });\r\n            // Keeps reference to manual decorator to decode its name to attributes during downcast.\r\n            const decorator = new ManualDecorator(decoratorDefinition);\r\n            manualDecorators.add(decorator);\r\n            editor.conversion.for('downcast').attributeToElement({\r\n                model: decorator.id,\r\n                view: (manualDecoratorValue, { writer, schema }, { item }) => {\r\n                    // Manual decorators for block links are handled e.g. in LinkImageEditing.\r\n                    if (!(item.is('selection') || schema.isInline(item))) {\r\n                        return;\r\n                    }\r\n                    if (manualDecoratorValue) {\r\n                        const element = writer.createAttributeElement('a', decorator.attributes, { priority: 5 });\r\n                        if (decorator.classes) {\r\n                            writer.addClass(decorator.classes, element);\r\n                        }\r\n                        for (const key in decorator.styles) {\r\n                            writer.setStyle(key, decorator.styles[key], element);\r\n                        }\r\n                        writer.setCustomProperty('link', true, element);\r\n                        return element;\r\n                    }\r\n                }\r\n            });\r\n            editor.conversion.for('upcast').elementToAttribute({\r\n                view: {\r\n                    name: 'a',\r\n                    ...decorator._createPattern()\r\n                },\r\n                model: {\r\n                    key: decorator.id\r\n                }\r\n            });\r\n        });\r\n    }\r\n    /**\r\n     * Attaches handlers for {@link module:engine/view/document~Document#event:enter} and\r\n     * {@link module:engine/view/document~Document#event:click} to enable link following.\r\n     */\r\n    _enableLinkOpen() {\r\n        const editor = this.editor;\r\n        const view = editor.editing.view;\r\n        const viewDocument = view.document;\r\n        this.listenTo(viewDocument, 'click', (evt, data) => {\r\n            const shouldOpen = env.isMac ? data.domEvent.metaKey : data.domEvent.ctrlKey;\r\n            if (!shouldOpen) {\r\n                return;\r\n            }\r\n            let clickedElement = data.domTarget;\r\n            if (clickedElement.tagName.toLowerCase() != 'a') {\r\n                clickedElement = clickedElement.closest('a');\r\n            }\r\n            if (!clickedElement) {\r\n                return;\r\n            }\r\n            const url = clickedElement.getAttribute('href');\r\n            if (!url) {\r\n                return;\r\n            }\r\n            evt.stop();\r\n            data.preventDefault();\r\n            openLink(url);\r\n        }, { context: '$capture' });\r\n        // Open link on Alt+Enter.\r\n        this.listenTo(viewDocument, 'keydown', (evt, data) => {\r\n            const linkCommand = editor.commands.get('link');\r\n            const url = linkCommand.value;\r\n            const shouldOpen = !!url && data.keyCode === keyCodes.enter && data.altKey;\r\n            if (!shouldOpen) {\r\n                return;\r\n            }\r\n            evt.stop();\r\n            openLink(url);\r\n        });\r\n    }\r\n    /**\r\n     * Starts listening to {@link module:engine/model/model~Model#event:insertContent} and corrects the model\r\n     * selection attributes if the selection is at the end of a link after inserting the content.\r\n     *\r\n     * The purpose of this action is to improve the overall UX because the user is no longer \"trapped\" by the\r\n     * `linkHref` attribute of the selection and they can type a \"clean\" (`linkHref`–less) text right away.\r\n     *\r\n     * See https://github.com/ckeditor/ckeditor5/issues/6053.\r\n     */\r\n    _enableInsertContentSelectionAttributesFixer() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const selection = model.document.selection;\r\n        this.listenTo(model, 'insertContent', () => {\r\n            const nodeBefore = selection.anchor.nodeBefore;\r\n            const nodeAfter = selection.anchor.nodeAfter;\r\n            // NOTE: ↰ and ↱ represent the gravity of the selection.\r\n            // The only truly valid case is:\r\n            //\r\n            //\t\t                                 ↰\r\n            //\t\t...<$text linkHref=\"foo\">INSERTED[]</$text>\r\n            //\r\n            // If the selection is not \"trapped\" by the `linkHref` attribute after inserting, there's nothing\r\n            // to fix there.\r\n            if (!selection.hasAttribute('linkHref')) {\r\n                return;\r\n            }\r\n            // Filter out the following case where a link with the same href (e.g. <a href=\"foo\">INSERTED</a>) is inserted\r\n            // in the middle of an existing link:\r\n            //\r\n            // Before insertion:\r\n            //\t\t                       ↰\r\n            //\t\t<$text linkHref=\"foo\">l[]ink</$text>\r\n            //\r\n            // Expected after insertion:\r\n            //\t\t                               ↰\r\n            //\t\t<$text linkHref=\"foo\">lINSERTED[]ink</$text>\r\n            //\r\n            if (!nodeBefore) {\r\n                return;\r\n            }\r\n            // Filter out the following case where the selection has the \"linkHref\" attribute because the\r\n            // gravity is overridden and some text with another attribute (e.g. <b>INSERTED</b>) is inserted:\r\n            //\r\n            // Before insertion:\r\n            //\r\n            //\t\t                       ↱\r\n            //\t\t<$text linkHref=\"foo\">[]link</$text>\r\n            //\r\n            // Expected after insertion:\r\n            //\r\n            //\t\t                                                          ↱\r\n            //\t\t<$text bold=\"true\">INSERTED</$text><$text linkHref=\"foo\">[]link</$text>\r\n            //\r\n            if (!nodeBefore.hasAttribute('linkHref')) {\r\n                return;\r\n            }\r\n            // Filter out the following case where a link is a inserted in the middle (or before) another link\r\n            // (different URLs, so they will not merge). In this (let's say weird) case, we can leave the selection\r\n            // attributes as they are because the user will end up writing in one link or another anyway.\r\n            //\r\n            // Before insertion:\r\n            //\r\n            //\t\t                       ↰\r\n            //\t\t<$text linkHref=\"foo\">l[]ink</$text>\r\n            //\r\n            // Expected after insertion:\r\n            //\r\n            //\t\t                                                             ↰\r\n            //\t\t<$text linkHref=\"foo\">l</$text><$text linkHref=\"bar\">INSERTED[]</$text><$text linkHref=\"foo\">ink</$text>\r\n            //\r\n            if (nodeAfter && nodeAfter.hasAttribute('linkHref')) {\r\n                return;\r\n            }\r\n            model.change(writer => {\r\n                removeLinkAttributesFromSelection(writer, getLinkAttributesAllowedOnText(model.schema));\r\n            });\r\n        }, { priority: 'low' });\r\n    }\r\n    /**\r\n     * Starts listening to {@link module:engine/view/document~Document#event:mousedown} and\r\n     * {@link module:engine/view/document~Document#event:selectionChange} and puts the selection before/after a link node\r\n     * if clicked at the beginning/ending of the link.\r\n     *\r\n     * The purpose of this action is to allow typing around the link node directly after a click.\r\n     *\r\n     * See https://github.com/ckeditor/ckeditor5/issues/1016.\r\n     */\r\n    _enableClickingAfterLink() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        editor.editing.view.addObserver(MouseObserver);\r\n        let clicked = false;\r\n        // Detect the click.\r\n        this.listenTo(editor.editing.view.document, 'mousedown', () => {\r\n            clicked = true;\r\n        });\r\n        // When the selection has changed...\r\n        this.listenTo(editor.editing.view.document, 'selectionChange', () => {\r\n            if (!clicked) {\r\n                return;\r\n            }\r\n            // ...and it was caused by the click...\r\n            clicked = false;\r\n            const selection = model.document.selection;\r\n            // ...and no text is selected...\r\n            if (!selection.isCollapsed) {\r\n                return;\r\n            }\r\n            // ...and clicked text is the link...\r\n            if (!selection.hasAttribute('linkHref')) {\r\n                return;\r\n            }\r\n            const position = selection.getFirstPosition();\r\n            const linkRange = findAttributeRange(position, 'linkHref', selection.getAttribute('linkHref'), model);\r\n            // ...check whether clicked start/end boundary of the link.\r\n            // If so, remove the `linkHref` attribute.\r\n            if (position.isTouching(linkRange.start) || position.isTouching(linkRange.end)) {\r\n                model.change(writer => {\r\n                    removeLinkAttributesFromSelection(writer, getLinkAttributesAllowedOnText(model.schema));\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Starts listening to {@link module:engine/model/model~Model#deleteContent} and {@link module:engine/model/model~Model#insertContent}\r\n     * and checks whether typing over the link. If so, attributes of removed text are preserved and applied to the inserted text.\r\n     *\r\n     * The purpose of this action is to allow modifying a text without loosing the `linkHref` attribute (and other).\r\n     *\r\n     * See https://github.com/ckeditor/ckeditor5/issues/4762.\r\n     */\r\n    _enableTypingOverLink() {\r\n        const editor = this.editor;\r\n        const view = editor.editing.view;\r\n        // Selection attributes when started typing over the link.\r\n        let selectionAttributes = null;\r\n        // Whether pressed `Backspace` or `Delete`. If so, attributes should not be preserved.\r\n        let deletedContent = false;\r\n        // Detect pressing `Backspace` / `Delete`.\r\n        this.listenTo(view.document, 'delete', () => {\r\n            deletedContent = true;\r\n        }, { priority: 'high' });\r\n        // Listening to `model#deleteContent` allows detecting whether selected content was a link.\r\n        // If so, before removing the element, we will copy its attributes.\r\n        this.listenTo(editor.model, 'deleteContent', () => {\r\n            const selection = editor.model.document.selection;\r\n            // Copy attributes only if anything is selected.\r\n            if (selection.isCollapsed) {\r\n                return;\r\n            }\r\n            // When the content was deleted, do not preserve attributes.\r\n            if (deletedContent) {\r\n                deletedContent = false;\r\n                return;\r\n            }\r\n            // Enabled only when typing.\r\n            if (!isTyping(editor)) {\r\n                return;\r\n            }\r\n            if (shouldCopyAttributes(editor.model)) {\r\n                selectionAttributes = selection.getAttributes();\r\n            }\r\n        }, { priority: 'high' });\r\n        // Listening to `model#insertContent` allows detecting the content insertion.\r\n        // We want to apply attributes that were removed while typing over the link.\r\n        this.listenTo(editor.model, 'insertContent', (evt, [element]) => {\r\n            deletedContent = false;\r\n            // Enabled only when typing.\r\n            if (!isTyping(editor)) {\r\n                return;\r\n            }\r\n            if (!selectionAttributes) {\r\n                return;\r\n            }\r\n            editor.model.change(writer => {\r\n                for (const [attribute, value] of selectionAttributes) {\r\n                    writer.setAttribute(attribute, value, element);\r\n                }\r\n            });\r\n            selectionAttributes = null;\r\n        }, { priority: 'high' });\r\n    }\r\n    /**\r\n     * Starts listening to {@link module:engine/model/model~Model#deleteContent} and checks whether\r\n     * removing a content right after the \"linkHref\" attribute.\r\n     *\r\n     * If so, the selection should not preserve the `linkHref` attribute. However, if\r\n     * the {@link module:typing/twostepcaretmovement~TwoStepCaretMovement} plugin is active and\r\n     * the selection has the \"linkHref\" attribute due to overriden gravity (at the end), the `linkHref` attribute should stay untouched.\r\n     *\r\n     * The purpose of this action is to allow removing the link text and keep the selection outside the link.\r\n     *\r\n     * See https://github.com/ckeditor/ckeditor5/issues/7521.\r\n     */\r\n    _handleDeleteContentAfterLink() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const selection = model.document.selection;\r\n        const view = editor.editing.view;\r\n        // A flag whether attributes `linkHref` attribute should be preserved.\r\n        let shouldPreserveAttributes = false;\r\n        // A flag whether the `Backspace` key was pressed.\r\n        let hasBackspacePressed = false;\r\n        // Detect pressing `Backspace`.\r\n        this.listenTo(view.document, 'delete', (evt, data) => {\r\n            hasBackspacePressed = data.direction === 'backward';\r\n        }, { priority: 'high' });\r\n        // Before removing the content, check whether the selection is inside a link or at the end of link but with 2-SCM enabled.\r\n        // If so, we want to preserve link attributes.\r\n        this.listenTo(model, 'deleteContent', () => {\r\n            // Reset the state.\r\n            shouldPreserveAttributes = false;\r\n            const position = selection.getFirstPosition();\r\n            const linkHref = selection.getAttribute('linkHref');\r\n            if (!linkHref) {\r\n                return;\r\n            }\r\n            const linkRange = findAttributeRange(position, 'linkHref', linkHref, model);\r\n            // Preserve `linkHref` attribute if the selection is in the middle of the link or\r\n            // the selection is at the end of the link and 2-SCM is activated.\r\n            shouldPreserveAttributes = linkRange.containsPosition(position) || linkRange.end.isEqual(position);\r\n        }, { priority: 'high' });\r\n        // After removing the content, check whether the current selection should preserve the `linkHref` attribute.\r\n        this.listenTo(model, 'deleteContent', () => {\r\n            // If didn't press `Backspace`.\r\n            if (!hasBackspacePressed) {\r\n                return;\r\n            }\r\n            hasBackspacePressed = false;\r\n            // Disable the mechanism if inside a link (`<$text url=\"foo\">F[]oo</$text>` or <$text url=\"foo\">Foo[]</$text>`).\r\n            if (shouldPreserveAttributes) {\r\n                return;\r\n            }\r\n            // Use `model.enqueueChange()` in order to execute the callback at the end of the changes process.\r\n            editor.model.enqueueChange(writer => {\r\n                removeLinkAttributesFromSelection(writer, getLinkAttributesAllowedOnText(model.schema));\r\n            });\r\n        }, { priority: 'low' });\r\n    }\r\n    /**\r\n     * Enables URL fixing on pasting.\r\n     */\r\n    _enableClipboardIntegration() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const defaultProtocol = this.editor.config.get('link.defaultProtocol');\r\n        if (!defaultProtocol) {\r\n            return;\r\n        }\r\n        this.listenTo(editor.plugins.get('ClipboardPipeline'), 'contentInsertion', (evt, data) => {\r\n            model.change(writer => {\r\n                const range = writer.createRangeIn(data.content);\r\n                for (const item of range.getItems()) {\r\n                    if (item.hasAttribute('linkHref')) {\r\n                        const newLink = addLinkProtocolIfApplicable(item.getAttribute('linkHref'), defaultProtocol);\r\n                        writer.setAttribute('linkHref', newLink, item);\r\n                    }\r\n                }\r\n            });\r\n        });\r\n    }\r\n}\r\n/**\r\n * Make the selection free of link-related model attributes.\r\n * All link-related model attributes start with \"link\". That includes not only \"linkHref\"\r\n * but also all decorator attributes (they have dynamic names), or even custom plugins.\r\n */\r\nfunction removeLinkAttributesFromSelection(writer, linkAttributes) {\r\n    writer.removeSelectionAttribute('linkHref');\r\n    for (const attribute of linkAttributes) {\r\n        writer.removeSelectionAttribute(attribute);\r\n    }\r\n}\r\n/**\r\n * Checks whether selection's attributes should be copied to the new inserted text.\r\n */\r\nfunction shouldCopyAttributes(model) {\r\n    const selection = model.document.selection;\r\n    const firstPosition = selection.getFirstPosition();\r\n    const lastPosition = selection.getLastPosition();\r\n    const nodeAtFirstPosition = firstPosition.nodeAfter;\r\n    // The text link node does not exist...\r\n    if (!nodeAtFirstPosition) {\r\n        return false;\r\n    }\r\n    // ...or it isn't the text node...\r\n    if (!nodeAtFirstPosition.is('$text')) {\r\n        return false;\r\n    }\r\n    // ...or isn't the link.\r\n    if (!nodeAtFirstPosition.hasAttribute('linkHref')) {\r\n        return false;\r\n    }\r\n    // `textNode` = the position is inside the link element.\r\n    // `nodeBefore` = the position is at the end of the link element.\r\n    const nodeAtLastPosition = lastPosition.textNode || lastPosition.nodeBefore;\r\n    // If both references the same node selection contains a single text node.\r\n    if (nodeAtFirstPosition === nodeAtLastPosition) {\r\n        return true;\r\n    }\r\n    // If nodes are not equal, maybe the link nodes has defined additional attributes inside.\r\n    // First, we need to find the entire link range.\r\n    const linkRange = findAttributeRange(firstPosition, 'linkHref', nodeAtFirstPosition.getAttribute('linkHref'), model);\r\n    // Then we can check whether selected range is inside the found link range. If so, attributes should be preserved.\r\n    return linkRange.containsRange(model.createRange(firstPosition, lastPosition), true);\r\n}\r\n/**\r\n * Checks whether provided changes were caused by typing.\r\n */\r\nfunction isTyping(editor) {\r\n    const currentBatch = editor.model.change(writer => writer.batch);\r\n    return currentBatch.isTyping;\r\n}\r\n/**\r\n * Returns an array containing names of the attributes allowed on `$text` that describes the link item.\r\n */\r\nfunction getLinkAttributesAllowedOnText(schema) {\r\n    const textAttributes = schema.getDefinition('$text').allowAttributes;\r\n    return textAttributes.filter(attribute => attribute.startsWith('link'));\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./linkform.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/ui/linkformview\r\n */\r\nimport { ButtonView, FocusCycler, LabeledFieldView, SwitchButtonView, View, ViewCollection, createLabeledInputText, submitHandler } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport { icons } from 'ckeditor5/src/core';\r\n// See: #8833.\r\n// eslint-disable-next-line ckeditor5-rules/ckeditor-imports\r\nimport '@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css';\r\nimport '../../theme/linkform.css';\r\n/**\r\n * The link form view controller class.\r\n *\r\n * See {@link module:link/ui/linkformview~LinkFormView}.\r\n */\r\nexport default class LinkFormView extends View {\r\n    /**\r\n     * Creates an instance of the {@link module:link/ui/linkformview~LinkFormView} class.\r\n     *\r\n     * Also see {@link #render}.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param linkCommand Reference to {@link module:link/linkcommand~LinkCommand}.\r\n     */\r\n    constructor(locale, linkCommand) {\r\n        super(locale);\r\n        /**\r\n         * Tracks information about DOM focus in the form.\r\n         */\r\n        this.focusTracker = new FocusTracker();\r\n        /**\r\n         * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\r\n         */\r\n        this.keystrokes = new KeystrokeHandler();\r\n        /**\r\n         * A collection of views that can be focused in the form.\r\n         */\r\n        this._focusables = new ViewCollection();\r\n        const t = locale.t;\r\n        this.urlInputView = this._createUrlInput();\r\n        this.saveButtonView = this._createButton(t('Save'), icons.check, 'ck-button-save');\r\n        this.saveButtonView.type = 'submit';\r\n        this.cancelButtonView = this._createButton(t('Cancel'), icons.cancel, 'ck-button-cancel', 'cancel');\r\n        this._manualDecoratorSwitches = this._createManualDecoratorSwitches(linkCommand);\r\n        this.children = this._createFormChildren(linkCommand.manualDecorators);\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate form fields backwards using the Shift + Tab keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate form fields forwards using the Tab key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        const classList = ['ck', 'ck-link-form', 'ck-responsive-form'];\r\n        if (linkCommand.manualDecorators.length) {\r\n            classList.push('ck-link-form_layout-vertical', 'ck-vertical-form');\r\n        }\r\n        this.setTemplate({\r\n            tag: 'form',\r\n            attributes: {\r\n                class: classList,\r\n                // https://github.com/ckeditor/ckeditor5-link/issues/90\r\n                tabindex: '-1'\r\n            },\r\n            children: this.children\r\n        });\r\n    }\r\n    /**\r\n     * Obtains the state of the {@link module:ui/button/switchbuttonview~SwitchButtonView switch buttons} representing\r\n     * {@link module:link/linkcommand~LinkCommand#manualDecorators manual link decorators}\r\n     * in the {@link module:link/ui/linkformview~LinkFormView}.\r\n     *\r\n     * @returns Key-value pairs, where the key is the name of the decorator and the value is its state.\r\n     */\r\n    getDecoratorSwitchesState() {\r\n        return Array\r\n            .from(this._manualDecoratorSwitches)\r\n            .reduce((accumulator, switchButton) => {\r\n            accumulator[switchButton.name] = switchButton.isOn;\r\n            return accumulator;\r\n        }, {});\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        submitHandler({\r\n            view: this\r\n        });\r\n        const childViews = [\r\n            this.urlInputView,\r\n            ...this._manualDecoratorSwitches,\r\n            this.saveButtonView,\r\n            this.cancelButtonView\r\n        ];\r\n        childViews.forEach(v => {\r\n            // Register the view as focusable.\r\n            this._focusables.add(v);\r\n            // Register the view in the focus tracker.\r\n            this.focusTracker.add(v.element);\r\n        });\r\n        // Start listening for the keystrokes coming from #element.\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Focuses the fist {@link #_focusables} in the form.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * Creates a labeled input view.\r\n     *\r\n     * @returns Labeled field view instance.\r\n     */\r\n    _createUrlInput() {\r\n        const t = this.locale.t;\r\n        const labeledInput = new LabeledFieldView(this.locale, createLabeledInputText);\r\n        labeledInput.label = t('Link URL');\r\n        return labeledInput;\r\n    }\r\n    /**\r\n     * Creates a button view.\r\n     *\r\n     * @param label The button label.\r\n     * @param icon The button icon.\r\n     * @param className The additional button CSS class name.\r\n     * @param eventName An event name that the `ButtonView#execute` event will be delegated to.\r\n     * @returns The button view instance.\r\n     */\r\n    _createButton(label, icon, className, eventName) {\r\n        const button = new ButtonView(this.locale);\r\n        button.set({\r\n            label,\r\n            icon,\r\n            tooltip: true\r\n        });\r\n        button.extendTemplate({\r\n            attributes: {\r\n                class: className\r\n            }\r\n        });\r\n        if (eventName) {\r\n            button.delegate('execute').to(this, eventName);\r\n        }\r\n        return button;\r\n    }\r\n    /**\r\n     * Populates {@link module:ui/viewcollection~ViewCollection} of {@link module:ui/button/switchbuttonview~SwitchButtonView}\r\n     * made based on {@link module:link/linkcommand~LinkCommand#manualDecorators}.\r\n     *\r\n     * @param linkCommand A reference to the link command.\r\n     * @returns ViewCollection of switch buttons.\r\n     */\r\n    _createManualDecoratorSwitches(linkCommand) {\r\n        const switches = this.createCollection();\r\n        for (const manualDecorator of linkCommand.manualDecorators) {\r\n            const switchButton = new SwitchButtonView(this.locale);\r\n            switchButton.set({\r\n                name: manualDecorator.id,\r\n                label: manualDecorator.label,\r\n                withText: true\r\n            });\r\n            switchButton.bind('isOn').toMany([manualDecorator, linkCommand], 'value', (decoratorValue, commandValue) => {\r\n                return commandValue === undefined && decoratorValue === undefined ? !!manualDecorator.defaultValue : !!decoratorValue;\r\n            });\r\n            switchButton.on('execute', () => {\r\n                manualDecorator.set('value', !switchButton.isOn);\r\n            });\r\n            switches.add(switchButton);\r\n        }\r\n        return switches;\r\n    }\r\n    /**\r\n     * Populates the {@link #children} collection of the form.\r\n     *\r\n     * If {@link module:link/linkcommand~LinkCommand#manualDecorators manual decorators} are configured in the editor, it creates an\r\n     * additional `View` wrapping all {@link #_manualDecoratorSwitches} switch buttons corresponding\r\n     * to these decorators.\r\n     *\r\n     * @param manualDecorators A reference to\r\n     * the collection of manual decorators stored in the link command.\r\n     * @returns The children of link form view.\r\n     */\r\n    _createFormChildren(manualDecorators) {\r\n        const children = this.createCollection();\r\n        children.add(this.urlInputView);\r\n        if (manualDecorators.length) {\r\n            const additionalButtonsView = new View();\r\n            additionalButtonsView.setTemplate({\r\n                tag: 'ul',\r\n                children: this._manualDecoratorSwitches.map(switchButton => ({\r\n                    tag: 'li',\r\n                    children: [switchButton],\r\n                    attributes: {\r\n                        class: [\r\n                            'ck',\r\n                            'ck-list__item'\r\n                        ]\r\n                    }\r\n                })),\r\n                attributes: {\r\n                    class: [\r\n                        'ck',\r\n                        'ck-reset',\r\n                        'ck-list'\r\n                    ]\r\n                }\r\n            });\r\n            children.add(additionalButtonsView);\r\n        }\r\n        children.add(this.saveButtonView);\r\n        children.add(this.cancelButtonView);\r\n        return children;\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./linkactions.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/ui/linkactionsview\r\n */\r\nimport { ButtonView, View, ViewCollection, FocusCycler } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport { icons } from 'ckeditor5/src/core';\r\nimport { ensureSafeUrl } from '../utils';\r\n// See: #8833.\r\n// eslint-disable-next-line ckeditor5-rules/ckeditor-imports\r\nimport '@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css';\r\nimport '../../theme/linkactions.css';\r\nimport unlinkIcon from '../../theme/icons/unlink.svg';\r\n/**\r\n * The link actions view class. This view displays the link preview, allows\r\n * unlinking or editing the link.\r\n */\r\nexport default class LinkActionsView extends View {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(locale) {\r\n        super(locale);\r\n        /**\r\n         * Tracks information about DOM focus in the actions.\r\n         */\r\n        this.focusTracker = new FocusTracker();\r\n        /**\r\n         * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\r\n         */\r\n        this.keystrokes = new KeystrokeHandler();\r\n        /**\r\n         * A collection of views that can be focused in the view.\r\n         */\r\n        this._focusables = new ViewCollection();\r\n        const t = locale.t;\r\n        this.previewButtonView = this._createPreviewButton();\r\n        this.unlinkButtonView = this._createButton(t('Unlink'), unlinkIcon, 'unlink');\r\n        this.editButtonView = this._createButton(t('Edit link'), icons.pencil, 'edit');\r\n        this.set('href', undefined);\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate fields backwards using the Shift + Tab keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate fields forwards using the Tab key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-link-actions',\r\n                    'ck-responsive-form'\r\n                ],\r\n                // https://github.com/ckeditor/ckeditor5-link/issues/90\r\n                tabindex: '-1'\r\n            },\r\n            children: [\r\n                this.previewButtonView,\r\n                this.editButtonView,\r\n                this.unlinkButtonView\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        const childViews = [\r\n            this.previewButtonView,\r\n            this.editButtonView,\r\n            this.unlinkButtonView\r\n        ];\r\n        childViews.forEach(v => {\r\n            // Register the view as focusable.\r\n            this._focusables.add(v);\r\n            // Register the view in the focus tracker.\r\n            this.focusTracker.add(v.element);\r\n        });\r\n        // Start listening for the keystrokes coming from #element.\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Focuses the fist {@link #_focusables} in the actions.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * Creates a button view.\r\n     *\r\n     * @param label The button label.\r\n     * @param icon The button icon.\r\n     * @param eventName An event name that the `ButtonView#execute` event will be delegated to.\r\n     * @returns The button view instance.\r\n     */\r\n    _createButton(label, icon, eventName) {\r\n        const button = new ButtonView(this.locale);\r\n        button.set({\r\n            label,\r\n            icon,\r\n            tooltip: true\r\n        });\r\n        button.delegate('execute').to(this, eventName);\r\n        return button;\r\n    }\r\n    /**\r\n     * Creates a link href preview button.\r\n     *\r\n     * @returns The button view instance.\r\n     */\r\n    _createPreviewButton() {\r\n        const button = new ButtonView(this.locale);\r\n        const bind = this.bindTemplate;\r\n        const t = this.t;\r\n        button.set({\r\n            withText: true,\r\n            tooltip: t('Open link in new tab')\r\n        });\r\n        button.extendTemplate({\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-link-actions__preview'\r\n                ],\r\n                href: bind.to('href', href => href && ensureSafeUrl(href)),\r\n                target: '_blank',\r\n                rel: 'noopener noreferrer'\r\n            }\r\n        });\r\n        button.bind('label').to(this, 'href', href => {\r\n            return href || t('This link has no URL');\r\n        });\r\n        button.bind('isEnabled').to(this, 'href', href => !!href);\r\n        button.template.tag = 'a';\r\n        button.template.eventListeners = {};\r\n        return button;\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"m11.077 15 .991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/linkui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ClickObserver } from 'ckeditor5/src/engine';\r\nimport { ButtonView, ContextualBalloon, clickOutsideHandler, CssTransitionDisablerMixin } from 'ckeditor5/src/ui';\r\nimport { isWidget } from 'ckeditor5/src/widget';\r\nimport LinkFormView from './ui/linkformview';\r\nimport LinkActionsView from './ui/linkactionsview';\r\nimport { addLinkProtocolIfApplicable, isLinkElement, LINK_KEYSTROKE } from './utils';\r\nimport linkIcon from '../theme/icons/link.svg';\r\nconst VISUAL_SELECTION_MARKER_NAME = 'link-ui';\r\n/**\r\n * The link UI plugin. It introduces the `'link'` and `'unlink'` buttons and support for the <kbd>Ctrl+K</kbd> keystroke.\r\n *\r\n * It uses the\r\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon plugin}.\r\n */\r\nexport default class LinkUI extends Plugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * The actions view displayed inside of the balloon.\r\n         */\r\n        this.actionsView = null;\r\n        /**\r\n         * The form view displayed inside the balloon.\r\n         */\r\n        this.formView = null;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ContextualBalloon];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'LinkUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        editor.editing.view.addObserver(ClickObserver);\r\n        this._balloon = editor.plugins.get(ContextualBalloon);\r\n        // Create toolbar buttons.\r\n        this._createToolbarLinkButton();\r\n        this._enableBalloonActivators();\r\n        // Renders a fake visual selection marker on an expanded selection.\r\n        editor.conversion.for('editingDowncast').markerToHighlight({\r\n            model: VISUAL_SELECTION_MARKER_NAME,\r\n            view: {\r\n                classes: ['ck-fake-link-selection']\r\n            }\r\n        });\r\n        // Renders a fake visual selection marker on a collapsed selection.\r\n        editor.conversion.for('editingDowncast').markerToElement({\r\n            model: VISUAL_SELECTION_MARKER_NAME,\r\n            view: {\r\n                name: 'span',\r\n                classes: ['ck-fake-link-selection', 'ck-fake-link-selection_collapsed']\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        // Destroy created UI components as they are not automatically destroyed (see ckeditor5#1341).\r\n        if (this.formView) {\r\n            this.formView.destroy();\r\n        }\r\n        if (this.actionsView) {\r\n            this.actionsView.destroy();\r\n        }\r\n    }\r\n    /**\r\n     * Creates views.\r\n     */\r\n    _createViews() {\r\n        this.actionsView = this._createActionsView();\r\n        this.formView = this._createFormView();\r\n        // Attach lifecycle actions to the the balloon.\r\n        this._enableUserBalloonInteractions();\r\n    }\r\n    /**\r\n     * Creates the {@link module:link/ui/linkactionsview~LinkActionsView} instance.\r\n     */\r\n    _createActionsView() {\r\n        const editor = this.editor;\r\n        const actionsView = new LinkActionsView(editor.locale);\r\n        const linkCommand = editor.commands.get('link');\r\n        const unlinkCommand = editor.commands.get('unlink');\r\n        actionsView.bind('href').to(linkCommand, 'value');\r\n        actionsView.editButtonView.bind('isEnabled').to(linkCommand);\r\n        actionsView.unlinkButtonView.bind('isEnabled').to(unlinkCommand);\r\n        // Execute unlink command after clicking on the \"Edit\" button.\r\n        this.listenTo(actionsView, 'edit', () => {\r\n            this._addFormView();\r\n        });\r\n        // Execute unlink command after clicking on the \"Unlink\" button.\r\n        this.listenTo(actionsView, 'unlink', () => {\r\n            editor.execute('unlink');\r\n            this._hideUI();\r\n        });\r\n        // Close the panel on esc key press when the **actions have focus**.\r\n        actionsView.keystrokes.set('Esc', (data, cancel) => {\r\n            this._hideUI();\r\n            cancel();\r\n        });\r\n        // Open the form view on Ctrl+K when the **actions have focus**..\r\n        actionsView.keystrokes.set(LINK_KEYSTROKE, (data, cancel) => {\r\n            this._addFormView();\r\n            cancel();\r\n        });\r\n        return actionsView;\r\n    }\r\n    /**\r\n     * Creates the {@link module:link/ui/linkformview~LinkFormView} instance.\r\n     */\r\n    _createFormView() {\r\n        const editor = this.editor;\r\n        const linkCommand = editor.commands.get('link');\r\n        const defaultProtocol = editor.config.get('link.defaultProtocol');\r\n        const formView = new (CssTransitionDisablerMixin(LinkFormView))(editor.locale, linkCommand);\r\n        formView.urlInputView.fieldView.bind('value').to(linkCommand, 'value');\r\n        // Form elements should be read-only when corresponding commands are disabled.\r\n        formView.urlInputView.bind('isEnabled').to(linkCommand, 'isEnabled');\r\n        formView.saveButtonView.bind('isEnabled').to(linkCommand);\r\n        // Execute link command after clicking the \"Save\" button.\r\n        this.listenTo(formView, 'submit', () => {\r\n            const { value } = formView.urlInputView.fieldView.element;\r\n            const parsedUrl = addLinkProtocolIfApplicable(value, defaultProtocol);\r\n            editor.execute('link', parsedUrl, formView.getDecoratorSwitchesState());\r\n            this._closeFormView();\r\n        });\r\n        // Hide the panel after clicking the \"Cancel\" button.\r\n        this.listenTo(formView, 'cancel', () => {\r\n            this._closeFormView();\r\n        });\r\n        // Close the panel on esc key press when the **form has focus**.\r\n        formView.keystrokes.set('Esc', (data, cancel) => {\r\n            this._closeFormView();\r\n            cancel();\r\n        });\r\n        return formView;\r\n    }\r\n    /**\r\n     * Creates a toolbar Link button. Clicking this button will show\r\n     * a {@link #_balloon} attached to the selection.\r\n     */\r\n    _createToolbarLinkButton() {\r\n        const editor = this.editor;\r\n        const linkCommand = editor.commands.get('link');\r\n        const t = editor.t;\r\n        editor.ui.componentFactory.add('link', locale => {\r\n            const button = new ButtonView(locale);\r\n            button.isEnabled = true;\r\n            button.label = t('Link');\r\n            button.icon = linkIcon;\r\n            button.keystroke = LINK_KEYSTROKE;\r\n            button.tooltip = true;\r\n            button.isToggleable = true;\r\n            // Bind button to the command.\r\n            button.bind('isEnabled').to(linkCommand, 'isEnabled');\r\n            button.bind('isOn').to(linkCommand, 'value', value => !!value);\r\n            // Show the panel on button click.\r\n            this.listenTo(button, 'execute', () => this._showUI(true));\r\n            return button;\r\n        });\r\n    }\r\n    /**\r\n     * Attaches actions that control whether the balloon panel containing the\r\n     * {@link #formView} should be displayed.\r\n     */\r\n    _enableBalloonActivators() {\r\n        const editor = this.editor;\r\n        const viewDocument = editor.editing.view.document;\r\n        // Handle click on view document and show panel when selection is placed inside the link element.\r\n        // Keep panel open until selection will be inside the same link element.\r\n        this.listenTo(viewDocument, 'click', () => {\r\n            const parentLink = this._getSelectedLinkElement();\r\n            if (parentLink) {\r\n                // Then show panel but keep focus inside editor editable.\r\n                this._showUI();\r\n            }\r\n        });\r\n        // Handle the `Ctrl+K` keystroke and show the panel.\r\n        editor.keystrokes.set(LINK_KEYSTROKE, (keyEvtData, cancel) => {\r\n            // Prevent focusing the search bar in FF, Chrome and Edge. See https://github.com/ckeditor/ckeditor5/issues/4811.\r\n            cancel();\r\n            if (editor.commands.get('link').isEnabled) {\r\n                this._showUI(true);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Attaches actions that control whether the balloon panel containing the\r\n     * {@link #formView} is visible or not.\r\n     */\r\n    _enableUserBalloonInteractions() {\r\n        // Focus the form if the balloon is visible and the Tab key has been pressed.\r\n        this.editor.keystrokes.set('Tab', (data, cancel) => {\r\n            if (this._areActionsVisible && !this.actionsView.focusTracker.isFocused) {\r\n                this.actionsView.focus();\r\n                cancel();\r\n            }\r\n        }, {\r\n            // Use the high priority because the link UI navigation is more important\r\n            // than other feature's actions, e.g. list indentation.\r\n            // https://github.com/ckeditor/ckeditor5-link/issues/146\r\n            priority: 'high'\r\n        });\r\n        // Close the panel on the Esc key press when the editable has focus and the balloon is visible.\r\n        this.editor.keystrokes.set('Esc', (data, cancel) => {\r\n            if (this._isUIVisible) {\r\n                this._hideUI();\r\n                cancel();\r\n            }\r\n        });\r\n        // Close on click outside of balloon panel element.\r\n        clickOutsideHandler({\r\n            emitter: this.formView,\r\n            activator: () => this._isUIInPanel,\r\n            contextElements: () => [this._balloon.view.element],\r\n            callback: () => this._hideUI()\r\n        });\r\n    }\r\n    /**\r\n     * Adds the {@link #actionsView} to the {@link #_balloon}.\r\n     *\r\n     * @internal\r\n     */\r\n    _addActionsView() {\r\n        if (!this.actionsView) {\r\n            this._createViews();\r\n        }\r\n        if (this._areActionsInPanel) {\r\n            return;\r\n        }\r\n        this._balloon.add({\r\n            view: this.actionsView,\r\n            position: this._getBalloonPositionData()\r\n        });\r\n    }\r\n    /**\r\n     * Adds the {@link #formView} to the {@link #_balloon}.\r\n     */\r\n    _addFormView() {\r\n        if (!this.formView) {\r\n            this._createViews();\r\n        }\r\n        if (this._isFormInPanel) {\r\n            return;\r\n        }\r\n        const editor = this.editor;\r\n        const linkCommand = editor.commands.get('link');\r\n        this.formView.disableCssTransitions();\r\n        this._balloon.add({\r\n            view: this.formView,\r\n            position: this._getBalloonPositionData()\r\n        });\r\n        // Select input when form view is currently visible.\r\n        if (this._balloon.visibleView === this.formView) {\r\n            this.formView.urlInputView.fieldView.select();\r\n        }\r\n        this.formView.enableCssTransitions();\r\n        // Make sure that each time the panel shows up, the URL field remains in sync with the value of\r\n        // the command. If the user typed in the input, then canceled the balloon (`urlInputView.fieldView#value` stays\r\n        // unaltered) and re-opened it without changing the value of the link command (e.g. because they\r\n        // clicked the same link), they would see the old value instead of the actual value of the command.\r\n        // https://github.com/ckeditor/ckeditor5-link/issues/78\r\n        // https://github.com/ckeditor/ckeditor5-link/issues/123\r\n        this.formView.urlInputView.fieldView.element.value = linkCommand.value || '';\r\n    }\r\n    /**\r\n     * Closes the form view. Decides whether the balloon should be hidden completely or if the action view should be shown. This is\r\n     * decided upon the link command value (which has a value if the document selection is in the link).\r\n     *\r\n     * Additionally, if any {@link module:link/linkconfig~LinkConfig#decorators} are defined in the editor configuration, the state of\r\n     * switch buttons responsible for manual decorator handling is restored.\r\n     */\r\n    _closeFormView() {\r\n        const linkCommand = this.editor.commands.get('link');\r\n        // Restore manual decorator states to represent the current model state. This case is important to reset the switch buttons\r\n        // when the user cancels the editing form.\r\n        linkCommand.restoreManualDecoratorStates();\r\n        if (linkCommand.value !== undefined) {\r\n            this._removeFormView();\r\n        }\r\n        else {\r\n            this._hideUI();\r\n        }\r\n    }\r\n    /**\r\n     * Removes the {@link #formView} from the {@link #_balloon}.\r\n     */\r\n    _removeFormView() {\r\n        if (this._isFormInPanel) {\r\n            // Blur the input element before removing it from DOM to prevent issues in some browsers.\r\n            // See https://github.com/ckeditor/ckeditor5/issues/1501.\r\n            this.formView.saveButtonView.focus();\r\n            this._balloon.remove(this.formView);\r\n            // Because the form has an input which has focus, the focus must be brought back\r\n            // to the editor. Otherwise, it would be lost.\r\n            this.editor.editing.view.focus();\r\n            this._hideFakeVisualSelection();\r\n        }\r\n    }\r\n    /**\r\n     * Shows the correct UI type. It is either {@link #formView} or {@link #actionsView}.\r\n     *\r\n     * @internal\r\n     */\r\n    _showUI(forceVisible = false) {\r\n        if (!this.formView) {\r\n            this._createViews();\r\n        }\r\n        // When there's no link under the selection, go straight to the editing UI.\r\n        if (!this._getSelectedLinkElement()) {\r\n            // Show visual selection on a text without a link when the contextual balloon is displayed.\r\n            // See https://github.com/ckeditor/ckeditor5/issues/4721.\r\n            this._showFakeVisualSelection();\r\n            this._addActionsView();\r\n            // Be sure panel with link is visible.\r\n            if (forceVisible) {\r\n                this._balloon.showStack('main');\r\n            }\r\n            this._addFormView();\r\n        }\r\n        // If there's a link under the selection...\r\n        else {\r\n            // Go to the editing UI if actions are already visible.\r\n            if (this._areActionsVisible) {\r\n                this._addFormView();\r\n            }\r\n            // Otherwise display just the actions UI.\r\n            else {\r\n                this._addActionsView();\r\n            }\r\n            // Be sure panel with link is visible.\r\n            if (forceVisible) {\r\n                this._balloon.showStack('main');\r\n            }\r\n        }\r\n        // Begin responding to ui#update once the UI is added.\r\n        this._startUpdatingUI();\r\n    }\r\n    /**\r\n     * Removes the {@link #formView} from the {@link #_balloon}.\r\n     *\r\n     * See {@link #_addFormView}, {@link #_addActionsView}.\r\n     */\r\n    _hideUI() {\r\n        if (!this._isUIInPanel) {\r\n            return;\r\n        }\r\n        const editor = this.editor;\r\n        this.stopListening(editor.ui, 'update');\r\n        this.stopListening(this._balloon, 'change:visibleView');\r\n        // Make sure the focus always gets back to the editable _before_ removing the focused form view.\r\n        // Doing otherwise causes issues in some browsers. See https://github.com/ckeditor/ckeditor5-link/issues/193.\r\n        editor.editing.view.focus();\r\n        // Remove form first because it's on top of the stack.\r\n        this._removeFormView();\r\n        // Then remove the actions view because it's beneath the form.\r\n        this._balloon.remove(this.actionsView);\r\n        this._hideFakeVisualSelection();\r\n    }\r\n    /**\r\n     * Makes the UI react to the {@link module:ui/editorui/editorui~EditorUI#event:update} event to\r\n     * reposition itself when the editor UI should be refreshed.\r\n     *\r\n     * See: {@link #_hideUI} to learn when the UI stops reacting to the `update` event.\r\n     */\r\n    _startUpdatingUI() {\r\n        const editor = this.editor;\r\n        const viewDocument = editor.editing.view.document;\r\n        let prevSelectedLink = this._getSelectedLinkElement();\r\n        let prevSelectionParent = getSelectionParent();\r\n        const update = () => {\r\n            const selectedLink = this._getSelectedLinkElement();\r\n            const selectionParent = getSelectionParent();\r\n            // Hide the panel if:\r\n            //\r\n            // * the selection went out of the EXISTING link element. E.g. user moved the caret out\r\n            //   of the link,\r\n            // * the selection went to a different parent when creating a NEW link. E.g. someone\r\n            //   else modified the document.\r\n            // * the selection has expanded (e.g. displaying link actions then pressing SHIFT+Right arrow).\r\n            //\r\n            // Note: #_getSelectedLinkElement will return a link for a non-collapsed selection only\r\n            // when fully selected.\r\n            if ((prevSelectedLink && !selectedLink) ||\r\n                (!prevSelectedLink && selectionParent !== prevSelectionParent)) {\r\n                this._hideUI();\r\n            }\r\n            // Update the position of the panel when:\r\n            //  * link panel is in the visible stack\r\n            //  * the selection remains in the original link element,\r\n            //  * there was no link element in the first place, i.e. creating a new link\r\n            else if (this._isUIVisible) {\r\n                // If still in a link element, simply update the position of the balloon.\r\n                // If there was no link (e.g. inserting one), the balloon must be moved\r\n                // to the new position in the editing view (a new native DOM range).\r\n                this._balloon.updatePosition(this._getBalloonPositionData());\r\n            }\r\n            prevSelectedLink = selectedLink;\r\n            prevSelectionParent = selectionParent;\r\n        };\r\n        function getSelectionParent() {\r\n            return viewDocument.selection.focus.getAncestors()\r\n                .reverse()\r\n                .find((node) => node.is('element'));\r\n        }\r\n        this.listenTo(editor.ui, 'update', update);\r\n        this.listenTo(this._balloon, 'change:visibleView', update);\r\n    }\r\n    /**\r\n     * Returns `true` when {@link #formView} is in the {@link #_balloon}.\r\n     */\r\n    get _isFormInPanel() {\r\n        return !!this.formView && this._balloon.hasView(this.formView);\r\n    }\r\n    /**\r\n     * Returns `true` when {@link #actionsView} is in the {@link #_balloon}.\r\n     */\r\n    get _areActionsInPanel() {\r\n        return !!this.actionsView && this._balloon.hasView(this.actionsView);\r\n    }\r\n    /**\r\n     * Returns `true` when {@link #actionsView} is in the {@link #_balloon} and it is\r\n     * currently visible.\r\n     */\r\n    get _areActionsVisible() {\r\n        return !!this.actionsView && this._balloon.visibleView === this.actionsView;\r\n    }\r\n    /**\r\n     * Returns `true` when {@link #actionsView} or {@link #formView} is in the {@link #_balloon}.\r\n     */\r\n    get _isUIInPanel() {\r\n        return this._isFormInPanel || this._areActionsInPanel;\r\n    }\r\n    /**\r\n     * Returns `true` when {@link #actionsView} or {@link #formView} is in the {@link #_balloon} and it is\r\n     * currently visible.\r\n     */\r\n    get _isUIVisible() {\r\n        const visibleView = this._balloon.visibleView;\r\n        return !!this.formView && visibleView == this.formView || this._areActionsVisible;\r\n    }\r\n    /**\r\n     * Returns positioning options for the {@link #_balloon}. They control the way the balloon is attached\r\n     * to the target element or selection.\r\n     *\r\n     * If the selection is collapsed and inside a link element, the panel will be attached to the\r\n     * entire link element. Otherwise, it will be attached to the selection.\r\n     */\r\n    _getBalloonPositionData() {\r\n        const view = this.editor.editing.view;\r\n        const model = this.editor.model;\r\n        const viewDocument = view.document;\r\n        let target;\r\n        if (model.markers.has(VISUAL_SELECTION_MARKER_NAME)) {\r\n            // There are cases when we highlight selection using a marker (#7705, #4721).\r\n            const markerViewElements = Array.from(this.editor.editing.mapper.markerNameToElements(VISUAL_SELECTION_MARKER_NAME));\r\n            const newRange = view.createRange(view.createPositionBefore(markerViewElements[0]), view.createPositionAfter(markerViewElements[markerViewElements.length - 1]));\r\n            target = view.domConverter.viewRangeToDom(newRange);\r\n        }\r\n        else {\r\n            // Make sure the target is calculated on demand at the last moment because a cached DOM range\r\n            // (which is very fragile) can desynchronize with the state of the editing view if there was\r\n            // any rendering done in the meantime. This can happen, for instance, when an inline widget\r\n            // gets unlinked.\r\n            target = () => {\r\n                const targetLink = this._getSelectedLinkElement();\r\n                return targetLink ?\r\n                    // When selection is inside link element, then attach panel to this element.\r\n                    view.domConverter.mapViewToDom(targetLink) :\r\n                    // Otherwise attach panel to the selection.\r\n                    view.domConverter.viewRangeToDom(viewDocument.selection.getFirstRange());\r\n            };\r\n        }\r\n        return { target };\r\n    }\r\n    /**\r\n     * Returns the link {@link module:engine/view/attributeelement~AttributeElement} under\r\n     * the {@link module:engine/view/document~Document editing view's} selection or `null`\r\n     * if there is none.\r\n     *\r\n     * **Note**: For a non–collapsed selection, the link element is returned when **fully**\r\n     * selected and the **only** element within the selection boundaries, or when\r\n     * a linked widget is selected.\r\n     */\r\n    _getSelectedLinkElement() {\r\n        const view = this.editor.editing.view;\r\n        const selection = view.document.selection;\r\n        const selectedElement = selection.getSelectedElement();\r\n        // The selection is collapsed or some widget is selected (especially inline widget).\r\n        if (selection.isCollapsed || selectedElement && isWidget(selectedElement)) {\r\n            return findLinkElementAncestor(selection.getFirstPosition());\r\n        }\r\n        else {\r\n            // The range for fully selected link is usually anchored in adjacent text nodes.\r\n            // Trim it to get closer to the actual link element.\r\n            const range = selection.getFirstRange().getTrimmed();\r\n            const startLink = findLinkElementAncestor(range.start);\r\n            const endLink = findLinkElementAncestor(range.end);\r\n            if (!startLink || startLink != endLink) {\r\n                return null;\r\n            }\r\n            // Check if the link element is fully selected.\r\n            if (view.createRangeIn(startLink).getTrimmed().isEqual(range)) {\r\n                return startLink;\r\n            }\r\n            else {\r\n                return null;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Displays a fake visual selection when the contextual balloon is displayed.\r\n     *\r\n     * This adds a 'link-ui' marker into the document that is rendered as a highlight on selected text fragment.\r\n     */\r\n    _showFakeVisualSelection() {\r\n        const model = this.editor.model;\r\n        model.change(writer => {\r\n            const range = model.document.selection.getFirstRange();\r\n            if (model.markers.has(VISUAL_SELECTION_MARKER_NAME)) {\r\n                writer.updateMarker(VISUAL_SELECTION_MARKER_NAME, { range });\r\n            }\r\n            else {\r\n                if (range.start.isAtEnd) {\r\n                    const startPosition = range.start.getLastMatchingPosition(({ item }) => !model.schema.isContent(item), { boundaries: range });\r\n                    writer.addMarker(VISUAL_SELECTION_MARKER_NAME, {\r\n                        usingOperation: false,\r\n                        affectsData: false,\r\n                        range: writer.createRange(startPosition, range.end)\r\n                    });\r\n                }\r\n                else {\r\n                    writer.addMarker(VISUAL_SELECTION_MARKER_NAME, {\r\n                        usingOperation: false,\r\n                        affectsData: false,\r\n                        range\r\n                    });\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Hides the fake visual selection created in {@link #_showFakeVisualSelection}.\r\n     */\r\n    _hideFakeVisualSelection() {\r\n        const model = this.editor.model;\r\n        if (model.markers.has(VISUAL_SELECTION_MARKER_NAME)) {\r\n            model.change(writer => {\r\n                writer.removeMarker(VISUAL_SELECTION_MARKER_NAME);\r\n            });\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns a link element if there's one among the ancestors of the provided `Position`.\r\n *\r\n * @param View position to analyze.\r\n * @returns Link element at the position or null.\r\n */\r\nfunction findLinkElementAncestor(position) {\r\n    return position.getAncestors().find((ancestor) => isLinkElement(ancestor)) || null;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/autolink\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Delete, TextWatcher, getLastTextLine } from 'ckeditor5/src/typing';\r\nimport { addLinkProtocolIfApplicable, linkHasProtocol } from './utils';\r\nconst MIN_LINK_LENGTH_WITH_SPACE_AT_END = 4; // Ie: \"t.co \" (length 5).\r\n// This was a tweak from https://gist.github.com/dperini/729294.\r\nconst URL_REG_EXP = new RegExp(\r\n// Group 1: Line start or after a space.\r\n'(^|\\\\s)' +\r\n    // Group 2: Detected URL (or e-mail).\r\n    '(' +\r\n    // Protocol identifier or short syntax \"//\"\r\n    // a. Full form http://user@foo.bar.baz:8080/foo/bar.html#baz?foo=bar\r\n    '(' +\r\n    '(?:(?:(?:https?|ftp):)?\\\\/\\\\/)' +\r\n    // BasicAuth using user:pass (optional)\r\n    '(?:\\\\S+(?::\\\\S*)?@)?' +\r\n    '(?:' +\r\n    // IP address dotted notation octets\r\n    // excludes loopback network 0.0.0.0\r\n    // excludes reserved space >= 224.0.0.0\r\n    // excludes network & broadcast addresses\r\n    // (first & last IP address of each class)\r\n    '(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])' +\r\n    '(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}' +\r\n    '(?:\\\\.(?:[1-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))' +\r\n    '|' +\r\n    '(' +\r\n    // Do not allow `www.foo` - see https://github.com/ckeditor/ckeditor5/issues/8050.\r\n    '((?!www\\\\.)|(www\\\\.))' +\r\n    // Host & domain names.\r\n    '(?![-_])(?:[-_a-z0-9\\\\u00a1-\\\\uffff]{1,63}\\\\.)+' +\r\n    // TLD identifier name.\r\n    '(?:[a-z\\\\u00a1-\\\\uffff]{2,63})' +\r\n    ')' +\r\n    ')' +\r\n    // port number (optional)\r\n    '(?::\\\\d{2,5})?' +\r\n    // resource path (optional)\r\n    '(?:[/?#]\\\\S*)?' +\r\n    ')' +\r\n    '|' +\r\n    // b. Short form (either www.example.com or example@example.com)\r\n    '(' +\r\n    '(www.|(\\\\S+@))' +\r\n    // Host & domain names.\r\n    '((?![-_])(?:[-_a-z0-9\\\\u00a1-\\\\uffff]{1,63}\\\\.))+' +\r\n    // TLD identifier name.\r\n    '(?:[a-z\\\\u00a1-\\\\uffff]{2,63})' +\r\n    ')' +\r\n    ')$', 'i');\r\nconst URL_GROUP_IN_MATCH = 2;\r\n/**\r\n * The autolink plugin.\r\n */\r\nexport default class AutoLink extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Delete];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'AutoLink';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const selection = editor.model.document.selection;\r\n        selection.on('change:range', () => {\r\n            // Disable plugin when selection is inside a code block.\r\n            this.isEnabled = !selection.anchor.parent.is('element', 'codeBlock');\r\n        });\r\n        this._enableTypingHandling();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        this._enableEnterHandling();\r\n        this._enableShiftEnterHandling();\r\n    }\r\n    /**\r\n     * Enables autolinking on typing.\r\n     */\r\n    _enableTypingHandling() {\r\n        const editor = this.editor;\r\n        const watcher = new TextWatcher(editor.model, text => {\r\n            // 1. Detect <kbd>Space</kbd> after a text with a potential link.\r\n            if (!isSingleSpaceAtTheEnd(text)) {\r\n                return;\r\n            }\r\n            // 2. Check text before last typed <kbd>Space</kbd>.\r\n            const url = getUrlAtTextEnd(text.substr(0, text.length - 1));\r\n            if (url) {\r\n                return { url };\r\n            }\r\n        });\r\n        watcher.on('matched:data', (evt, data) => {\r\n            const { batch, range, url } = data;\r\n            if (!batch.isTyping) {\r\n                return;\r\n            }\r\n            const linkEnd = range.end.getShiftedBy(-1); // Executed after a space character.\r\n            const linkStart = linkEnd.getShiftedBy(-url.length);\r\n            const linkRange = editor.model.createRange(linkStart, linkEnd);\r\n            this._applyAutoLink(url, linkRange);\r\n        });\r\n        watcher.bind('isEnabled').to(this);\r\n    }\r\n    /**\r\n     * Enables autolinking on the <kbd>Enter</kbd> key.\r\n     */\r\n    _enableEnterHandling() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const enterCommand = editor.commands.get('enter');\r\n        if (!enterCommand) {\r\n            return;\r\n        }\r\n        enterCommand.on('execute', () => {\r\n            const position = model.document.selection.getFirstPosition();\r\n            if (!position.parent.previousSibling) {\r\n                return;\r\n            }\r\n            const rangeToCheck = model.createRangeIn(position.parent.previousSibling);\r\n            this._checkAndApplyAutoLinkOnRange(rangeToCheck);\r\n        });\r\n    }\r\n    /**\r\n     * Enables autolinking on the <kbd>Shift</kbd>+<kbd>Enter</kbd> keyboard shortcut.\r\n     */\r\n    _enableShiftEnterHandling() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const shiftEnterCommand = editor.commands.get('shiftEnter');\r\n        if (!shiftEnterCommand) {\r\n            return;\r\n        }\r\n        shiftEnterCommand.on('execute', () => {\r\n            const position = model.document.selection.getFirstPosition();\r\n            const rangeToCheck = model.createRange(model.createPositionAt(position.parent, 0), position.getShiftedBy(-1));\r\n            this._checkAndApplyAutoLinkOnRange(rangeToCheck);\r\n        });\r\n    }\r\n    /**\r\n     * Checks if the passed range contains a linkable text.\r\n     */\r\n    _checkAndApplyAutoLinkOnRange(rangeToCheck) {\r\n        const model = this.editor.model;\r\n        const { text, range } = getLastTextLine(rangeToCheck, model);\r\n        const url = getUrlAtTextEnd(text);\r\n        if (url) {\r\n            const linkRange = model.createRange(range.end.getShiftedBy(-url.length), range.end);\r\n            this._applyAutoLink(url, linkRange);\r\n        }\r\n    }\r\n    /**\r\n     * Applies a link on a given range if the link should be applied.\r\n     *\r\n     * @param url The URL to link.\r\n     * @param range The text range to apply the link attribute to.\r\n     */\r\n    _applyAutoLink(url, range) {\r\n        const model = this.editor.model;\r\n        const defaultProtocol = this.editor.config.get('link.defaultProtocol');\r\n        const fullUrl = addLinkProtocolIfApplicable(url, defaultProtocol);\r\n        if (!this.isEnabled || !isLinkAllowedOnRange(range, model) || !linkHasProtocol(fullUrl) || linkIsAlreadySet(range)) {\r\n            return;\r\n        }\r\n        this._persistAutoLink(fullUrl, range);\r\n    }\r\n    /**\r\n     * Enqueues autolink changes in the model.\r\n     *\r\n     * @param url The URL to link.\r\n     * @param range The text range to apply the link attribute to.\r\n     */\r\n    _persistAutoLink(url, range) {\r\n        const model = this.editor.model;\r\n        const deletePlugin = this.editor.plugins.get('Delete');\r\n        // Enqueue change to make undo step.\r\n        model.enqueueChange(writer => {\r\n            writer.setAttribute('linkHref', url, range);\r\n            model.enqueueChange(() => {\r\n                deletePlugin.requestUndoOnBackspace();\r\n            });\r\n        });\r\n    }\r\n}\r\n// Check if text should be evaluated by the plugin in order to reduce number of RegExp checks on whole text.\r\nfunction isSingleSpaceAtTheEnd(text) {\r\n    return text.length > MIN_LINK_LENGTH_WITH_SPACE_AT_END && text[text.length - 1] === ' ' && text[text.length - 2] !== ' ';\r\n}\r\nfunction getUrlAtTextEnd(text) {\r\n    const match = URL_REG_EXP.exec(text);\r\n    return match ? match[URL_GROUP_IN_MATCH] : null;\r\n}\r\nfunction isLinkAllowedOnRange(range, model) {\r\n    return model.schema.checkAttributeInSelection(model.createSelection(range), 'linkHref');\r\n}\r\nfunction linkIsAlreadySet(range) {\r\n    const item = range.start.nodeAfter;\r\n    return !!item && item.hasAttribute('linkHref');\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/linkimageediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Matcher } from 'ckeditor5/src/engine';\r\nimport { toMap } from 'ckeditor5/src/utils';\r\nimport LinkEditing from './linkediting';\r\n/**\r\n * The link image engine feature.\r\n *\r\n * It accepts the `linkHref=\"url\"` attribute in the model for the {@link module:image/image~Image `<imageBlock>`} element\r\n * which allows linking images.\r\n */\r\nexport default class LinkImageEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return ['ImageEditing', 'ImageUtils', LinkEditing];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'LinkImageEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        if (editor.plugins.has('ImageBlockEditing')) {\r\n            schema.extend('imageBlock', { allowAttributes: ['linkHref'] });\r\n        }\r\n        editor.conversion.for('upcast').add(upcastLink(editor));\r\n        editor.conversion.for('downcast').add(downcastImageLink(editor));\r\n        // Definitions for decorators are provided by the `link` command and the `LinkEditing` plugin.\r\n        this._enableAutomaticDecorators();\r\n        this._enableManualDecorators();\r\n    }\r\n    /**\r\n     * Processes {@link module:link/linkconfig~LinkDecoratorAutomaticDefinition automatic decorators} definitions and\r\n     * attaches proper converters that will work when linking an image.`\r\n     */\r\n    _enableAutomaticDecorators() {\r\n        const editor = this.editor;\r\n        const command = editor.commands.get('link');\r\n        const automaticDecorators = command.automaticDecorators;\r\n        if (automaticDecorators.length) {\r\n            editor.conversion.for('downcast').add(automaticDecorators.getDispatcherForLinkedImage());\r\n        }\r\n    }\r\n    /**\r\n     * Processes transformed {@link module:link/utils/manualdecorator~ManualDecorator} instances and attaches proper converters\r\n     * that will work when linking an image.\r\n     */\r\n    _enableManualDecorators() {\r\n        const editor = this.editor;\r\n        const command = editor.commands.get('link');\r\n        for (const decorator of command.manualDecorators) {\r\n            if (editor.plugins.has('ImageBlockEditing')) {\r\n                editor.model.schema.extend('imageBlock', { allowAttributes: decorator.id });\r\n            }\r\n            if (editor.plugins.has('ImageInlineEditing')) {\r\n                editor.model.schema.extend('imageInline', { allowAttributes: decorator.id });\r\n            }\r\n            editor.conversion.for('downcast').add(downcastImageLinkManualDecorator(decorator));\r\n            editor.conversion.for('upcast').add(upcastImageLinkManualDecorator(editor, decorator));\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns a converter for linked block images that consumes the \"href\" attribute\r\n * if a link contains an image.\r\n *\r\n * @param editor The editor instance.\r\n */\r\nfunction upcastLink(editor) {\r\n    const isImageInlinePluginLoaded = editor.plugins.has('ImageInlineEditing');\r\n    const imageUtils = editor.plugins.get('ImageUtils');\r\n    return dispatcher => {\r\n        dispatcher.on('element:a', (evt, data, conversionApi) => {\r\n            const viewLink = data.viewItem;\r\n            const imageInLink = imageUtils.findViewImgElement(viewLink);\r\n            if (!imageInLink) {\r\n                return;\r\n            }\r\n            const blockImageView = imageInLink.findAncestor(element => imageUtils.isBlockImageView(element));\r\n            // There are four possible cases to consider here\r\n            //\r\n            // 1. A \"root > ... > figure.image > a > img\" structure.\r\n            // 2. A \"root > ... > figure.image > a > picture > img\" structure.\r\n            // 3. A \"root > ... > block > a > img\" structure.\r\n            // 4. A \"root > ... > block > a > picture > img\" structure.\r\n            //\r\n            // but the last 2 cases should only be considered by this converter when the inline image plugin\r\n            // is NOT loaded in the editor (because otherwise, that would be a plain, linked inline image).\r\n            if (isImageInlinePluginLoaded && !blockImageView) {\r\n                return;\r\n            }\r\n            // There's an image inside an <a> element - we consume it so it won't be picked up by the Link plugin.\r\n            const consumableAttributes = { attributes: ['href'] };\r\n            // Consume the `href` attribute so the default one will not convert it to $text attribute.\r\n            if (!conversionApi.consumable.consume(viewLink, consumableAttributes)) {\r\n                // Might be consumed by something else - i.e. other converter with priority=highest - a standard check.\r\n                return;\r\n            }\r\n            const linkHref = viewLink.getAttribute('href');\r\n            // Missing the 'href' attribute.\r\n            if (!linkHref) {\r\n                return;\r\n            }\r\n            // A full definition of the image feature.\r\n            // figure > a > img: parent of the view link element is an image element (figure).\r\n            let modelElement = data.modelCursor.parent;\r\n            if (!modelElement.is('element', 'imageBlock')) {\r\n                // a > img: parent of the view link is not the image (figure) element. We need to convert it manually.\r\n                const conversionResult = conversionApi.convertItem(imageInLink, data.modelCursor);\r\n                // Set image range as conversion result.\r\n                data.modelRange = conversionResult.modelRange;\r\n                // Continue conversion where image conversion ends.\r\n                data.modelCursor = conversionResult.modelCursor;\r\n                modelElement = data.modelCursor.nodeBefore;\r\n            }\r\n            if (modelElement && modelElement.is('element', 'imageBlock')) {\r\n                // Set the linkHref attribute from link element on model image element.\r\n                conversionApi.writer.setAttribute('linkHref', linkHref, modelElement);\r\n            }\r\n        }, { priority: 'high' });\r\n        // Using the same priority that `upcastImageLinkManualDecorator()` converter guarantees\r\n        // that manual decorators will decorate the proper element.\r\n    };\r\n}\r\n/**\r\n * Creates a converter that adds `<a>` to linked block image view elements.\r\n */\r\nfunction downcastImageLink(editor) {\r\n    const imageUtils = editor.plugins.get('ImageUtils');\r\n    return dispatcher => {\r\n        dispatcher.on('attribute:linkHref:imageBlock', (evt, data, conversionApi) => {\r\n            if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n                return;\r\n            }\r\n            // The image will be already converted - so it will be present in the view.\r\n            const viewFigure = conversionApi.mapper.toViewElement(data.item);\r\n            const writer = conversionApi.writer;\r\n            // But we need to check whether the link element exists.\r\n            const linkInImage = Array.from(viewFigure.getChildren())\r\n                .find((child) => child.is('element', 'a'));\r\n            const viewImage = imageUtils.findViewImgElement(viewFigure);\r\n            // <picture>...<img/></picture> or <img/>\r\n            const viewImgOrPicture = viewImage.parent.is('element', 'picture') ? viewImage.parent : viewImage;\r\n            // If so, update the attribute if it's defined or remove the entire link if the attribute is empty.\r\n            if (linkInImage) {\r\n                if (data.attributeNewValue) {\r\n                    writer.setAttribute('href', data.attributeNewValue, linkInImage);\r\n                }\r\n                else {\r\n                    writer.move(writer.createRangeOn(viewImgOrPicture), writer.createPositionAt(viewFigure, 0));\r\n                    writer.remove(linkInImage);\r\n                }\r\n            }\r\n            else {\r\n                // But if it does not exist. Let's wrap already converted image by newly created link element.\r\n                // 1. Create an empty link element.\r\n                const linkElement = writer.createContainerElement('a', { href: data.attributeNewValue });\r\n                // 2. Insert link inside the associated image.\r\n                writer.insert(writer.createPositionAt(viewFigure, 0), linkElement);\r\n                // 3. Move the image to the link.\r\n                writer.move(writer.createRangeOn(viewImgOrPicture), writer.createPositionAt(linkElement, 0));\r\n            }\r\n        }, { priority: 'high' });\r\n    };\r\n}\r\n/**\r\n * Returns a converter that decorates the `<a>` element when the image is the link label.\r\n */\r\nfunction downcastImageLinkManualDecorator(decorator) {\r\n    return dispatcher => {\r\n        dispatcher.on(`attribute:${decorator.id}:imageBlock`, (evt, data, conversionApi) => {\r\n            const viewFigure = conversionApi.mapper.toViewElement(data.item);\r\n            const linkInImage = Array.from(viewFigure.getChildren())\r\n                .find((child) => child.is('element', 'a'));\r\n            // The <a> element was removed by the time this converter is executed.\r\n            // It may happen when the base `linkHref` and decorator attributes are removed\r\n            // at the same time (see #8401).\r\n            if (!linkInImage) {\r\n                return;\r\n            }\r\n            for (const [key, val] of toMap(decorator.attributes)) {\r\n                conversionApi.writer.setAttribute(key, val, linkInImage);\r\n            }\r\n            if (decorator.classes) {\r\n                conversionApi.writer.addClass(decorator.classes, linkInImage);\r\n            }\r\n            for (const key in decorator.styles) {\r\n                conversionApi.writer.setStyle(key, decorator.styles[key], linkInImage);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Returns a converter that checks whether manual decorators should be applied to the link.\r\n */\r\nfunction upcastImageLinkManualDecorator(editor, decorator) {\r\n    const isImageInlinePluginLoaded = editor.plugins.has('ImageInlineEditing');\r\n    const imageUtils = editor.plugins.get('ImageUtils');\r\n    return dispatcher => {\r\n        dispatcher.on('element:a', (evt, data, conversionApi) => {\r\n            const viewLink = data.viewItem;\r\n            const imageInLink = imageUtils.findViewImgElement(viewLink);\r\n            // We need to check whether an image is inside a link because the converter handles\r\n            // only manual decorators for linked images. See #7975.\r\n            if (!imageInLink) {\r\n                return;\r\n            }\r\n            const blockImageView = imageInLink.findAncestor(element => imageUtils.isBlockImageView(element));\r\n            if (isImageInlinePluginLoaded && !blockImageView) {\r\n                return;\r\n            }\r\n            const matcher = new Matcher(decorator._createPattern());\r\n            const result = matcher.match(viewLink);\r\n            // The link element does not have required attributes or/and proper values.\r\n            if (!result) {\r\n                return;\r\n            }\r\n            // Check whether we can consume those attributes.\r\n            if (!conversionApi.consumable.consume(viewLink, result.match)) {\r\n                return;\r\n            }\r\n            // At this stage we can assume that we have the `<imageBlock>` element.\r\n            // `nodeBefore` comes after conversion: `<a><img></a>`.\r\n            // `parent` comes with full image definition: `<figure><a><img></a></figure>.\r\n            // See the body of the `upcastLink()` function.\r\n            const modelElement = data.modelCursor.nodeBefore || data.modelCursor.parent;\r\n            conversionApi.writer.setAttribute(decorator.id, true, modelElement);\r\n        }, { priority: 'high' });\r\n        // Using the same priority that `upcastLink()` converter guarantees that the linked image was properly converted.\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/linkimageui\r\n */\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport LinkUI from './linkui';\r\nimport LinkEditing from './linkediting';\r\nimport { LINK_KEYSTROKE } from './utils';\r\nimport linkIcon from '../theme/icons/link.svg';\r\n/**\r\n * The link image UI plugin.\r\n *\r\n * This plugin provides the `'linkImage'` button that can be displayed in the {@link module:image/imagetoolbar~ImageToolbar}.\r\n * It can be used to wrap images in links.\r\n */\r\nexport default class LinkImageUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [LinkEditing, LinkUI, 'ImageBlockEditing'];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'LinkImageUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const viewDocument = editor.editing.view.document;\r\n        this.listenTo(viewDocument, 'click', (evt, data) => {\r\n            if (this._isSelectedLinkedImage(editor.model.document.selection)) {\r\n                // Prevent browser navigation when clicking a linked image.\r\n                data.preventDefault();\r\n                // Block the `LinkUI` plugin when an image was clicked.\r\n                // In such a case, we'd like to display the image toolbar.\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        this._createToolbarLinkImageButton();\r\n    }\r\n    /**\r\n     * Creates a `LinkImageUI` button view.\r\n     *\r\n     * Clicking this button shows a {@link module:link/linkui~LinkUI#_balloon} attached to the selection.\r\n     * When an image is already linked, the view shows {@link module:link/linkui~LinkUI#actionsView} or\r\n     * {@link module:link/linkui~LinkUI#formView} if it is not.\r\n     */\r\n    _createToolbarLinkImageButton() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        editor.ui.componentFactory.add('linkImage', locale => {\r\n            const button = new ButtonView(locale);\r\n            const plugin = editor.plugins.get('LinkUI');\r\n            const linkCommand = editor.commands.get('link');\r\n            button.set({\r\n                isEnabled: true,\r\n                label: t('Link image'),\r\n                icon: linkIcon,\r\n                keystroke: LINK_KEYSTROKE,\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            // Bind button to the command.\r\n            button.bind('isEnabled').to(linkCommand, 'isEnabled');\r\n            button.bind('isOn').to(linkCommand, 'value', value => !!value);\r\n            // Show the actionsView or formView (both from LinkUI) on button click depending on whether the image is linked already.\r\n            this.listenTo(button, 'execute', () => {\r\n                if (this._isSelectedLinkedImage(editor.model.document.selection)) {\r\n                    plugin._addActionsView();\r\n                }\r\n                else {\r\n                    plugin._showUI(true);\r\n                }\r\n            });\r\n            return button;\r\n        });\r\n    }\r\n    /**\r\n     * Returns true if a linked image (either block or inline) is the only selected element\r\n     * in the model document.\r\n     */\r\n    _isSelectedLinkedImage(selection) {\r\n        const selectedModelElement = selection.getSelectedElement();\r\n        const imageUtils = this.editor.plugins.get('ImageUtils');\r\n        return imageUtils.isImage(selectedModelElement) && selectedModelElement.hasAttribute('linkHref');\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./linkimage.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module link/linkimage\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport LinkImageEditing from './linkimageediting';\r\nimport LinkImageUI from './linkimageui';\r\nimport '../theme/linkimage.css';\r\n/**\r\n * The `LinkImage` plugin.\r\n *\r\n * This is a \"glue\" plugin that loads the {@link module:link/linkimageediting~LinkImageEditing link image editing feature}\r\n * and {@link module:link/linkimageui~LinkImageUI link image UI feature}.\r\n */\r\nexport default class LinkImage extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [LinkImageEditing, LinkImageUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'LinkImage';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlist/utils/listwalker\r\n */\r\nimport { first, toArray } from 'ckeditor5/src/utils';\r\nimport { isListItemBlock } from './model';\r\n/**\r\n * Document list blocks iterator.\r\n */\r\nexport default class ListWalker {\r\n    /**\r\n     * Creates a document list iterator.\r\n     *\r\n     * @param startElement The start list item block element.\r\n     * @param options.direction The iterating direction.\r\n     * @param options.includeSelf Whether start block should be included in the result (if it's matching other criteria).\r\n     * @param options.sameAttributes Additional attributes that must be the same for each block.\r\n     * @param options.sameIndent Whether blocks with the same indent level as the start block should be included\r\n     * in the result.\r\n     * @param options.lowerIndent Whether blocks with a lower indent level than the start block should be included\r\n     * in the result.\r\n     * @param options.higherIndent Whether blocks with a higher indent level than the start block should be included\r\n     * in the result.\r\n     */\r\n    constructor(startElement, options) {\r\n        this._startElement = startElement;\r\n        this._referenceIndent = startElement.getAttribute('listIndent');\r\n        this._isForward = options.direction == 'forward';\r\n        this._includeSelf = !!options.includeSelf;\r\n        this._sameAttributes = toArray(options.sameAttributes || []);\r\n        this._sameIndent = !!options.sameIndent;\r\n        this._lowerIndent = !!options.lowerIndent;\r\n        this._higherIndent = !!options.higherIndent;\r\n    }\r\n    /**\r\n     * Performs only first step of iteration and returns the result.\r\n     *\r\n     * @param startElement The start list item block element.\r\n     * @param options.direction The iterating direction.\r\n     * @param options.includeSelf Whether start block should be included in the result (if it's matching other criteria).\r\n     * @param options.sameAttributes Additional attributes that must be the same for each block.\r\n     * @param options.sameIndent Whether blocks with the same indent level as the start block should be included\r\n     * in the result.\r\n     * @param options.lowerIndent Whether blocks with a lower indent level than the start block should be included\r\n     * in the result.\r\n     * @param options.higherIndent Whether blocks with a higher indent level than the start block should be included\r\n     * in the result.\r\n     */\r\n    static first(startElement, options) {\r\n        const walker = new this(startElement, options);\r\n        const iterator = walker[Symbol.iterator]();\r\n        return first(iterator);\r\n    }\r\n    /**\r\n     * Iterable interface.\r\n     */\r\n    *[Symbol.iterator]() {\r\n        const nestedItems = [];\r\n        for (const { node } of iterateSiblingListBlocks(this._getStartNode(), this._isForward ? 'forward' : 'backward')) {\r\n            const indent = node.getAttribute('listIndent');\r\n            // Leaving a nested list.\r\n            if (indent < this._referenceIndent) {\r\n                // Abort searching blocks.\r\n                if (!this._lowerIndent) {\r\n                    break;\r\n                }\r\n                // While searching for lower indents, update the reference indent to find another parent in the next step.\r\n                this._referenceIndent = indent;\r\n            }\r\n            // Entering a nested list.\r\n            else if (indent > this._referenceIndent) {\r\n                // Ignore nested blocks.\r\n                if (!this._higherIndent) {\r\n                    continue;\r\n                }\r\n                // Collect nested blocks to verify if they are really nested, or it's a different item.\r\n                if (!this._isForward) {\r\n                    nestedItems.push(node);\r\n                    continue;\r\n                }\r\n            }\r\n            // Same indent level block.\r\n            else {\r\n                // Ignore same indent block.\r\n                if (!this._sameIndent) {\r\n                    // While looking for nested blocks, stop iterating while encountering first same indent block.\r\n                    if (this._higherIndent) {\r\n                        // No more nested blocks so yield nested items.\r\n                        if (nestedItems.length) {\r\n                            yield* nestedItems;\r\n                            nestedItems.length = 0;\r\n                        }\r\n                        break;\r\n                    }\r\n                    continue;\r\n                }\r\n                // Abort if item has any additionally specified attribute different.\r\n                if (this._sameAttributes.some(attr => node.getAttribute(attr) !== this._startElement.getAttribute(attr))) {\r\n                    break;\r\n                }\r\n            }\r\n            // There is another block for the same list item so the nested items were in the same list item.\r\n            if (nestedItems.length) {\r\n                yield* nestedItems;\r\n                nestedItems.length = 0;\r\n            }\r\n            yield node;\r\n        }\r\n    }\r\n    /**\r\n     * Returns the model element to start iterating.\r\n     */\r\n    _getStartNode() {\r\n        if (this._includeSelf) {\r\n            return this._startElement;\r\n        }\r\n        return this._isForward ?\r\n            this._startElement.nextSibling :\r\n            this._startElement.previousSibling;\r\n    }\r\n}\r\n/**\r\n * Iterates sibling list blocks starting from the given node.\r\n *\r\n * @internal\r\n * @param node The model node.\r\n * @param direction Iteration direction.\r\n * @returns The object with `node` and `previous` {@link module:engine/model/element~Element blocks}.\r\n */\r\nexport function* iterateSiblingListBlocks(node, direction = 'forward') {\r\n    const isForward = direction == 'forward';\r\n    let previous = null;\r\n    while (isListItemBlock(node)) {\r\n        yield { node, previous };\r\n        previous = node;\r\n        node = isForward ? node.nextSibling : node.previousSibling;\r\n    }\r\n}\r\n/**\r\n * The iterable protocol over the list elements.\r\n *\r\n * @internal\r\n */\r\nexport class ListBlocksIterable {\r\n    /**\r\n     * @param listHead The head element of a list.\r\n     */\r\n    constructor(listHead) {\r\n        this._listHead = listHead;\r\n    }\r\n    /**\r\n     * List blocks iterator.\r\n     *\r\n     * Iterates over all blocks of a list.\r\n     */\r\n    [Symbol.iterator]() {\r\n        return iterateSiblingListBlocks(this._listHead, 'forward');\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { uid, toArray } from 'ckeditor5/src/utils';\r\nimport ListWalker, { iterateSiblingListBlocks } from './listwalker';\r\n/**\r\n * The list item ID generator.\r\n *\r\n * @internal\r\n */\r\nexport class ListItemUid {\r\n    /**\r\n     * Returns the next ID.\r\n     *\r\n     * @internal\r\n     */\r\n    /* istanbul ignore next: static function definition -- @preserve */\r\n    static next() {\r\n        return uid();\r\n    }\r\n}\r\n/**\r\n * Returns true if the given model node is a list item block.\r\n *\r\n * @internal\r\n */\r\nexport function isListItemBlock(node) {\r\n    return !!node && node.is('element') && node.hasAttribute('listItemId');\r\n}\r\n/**\r\n * Returns an array with all elements that represents the same list item.\r\n *\r\n * It means that values for `listIndent`, and `listItemId` for all items are equal.\r\n *\r\n * @internal\r\n * @param listItem Starting list item element.\r\n * @param options.higherIndent Whether blocks with a higher indent level than the start block should be included\r\n * in the result.\r\n */\r\nexport function getAllListItemBlocks(listItem, options = {}) {\r\n    return [\r\n        ...getListItemBlocks(listItem, { ...options, direction: 'backward' }),\r\n        ...getListItemBlocks(listItem, { ...options, direction: 'forward' })\r\n    ];\r\n}\r\n/**\r\n * Returns an array with elements that represents the same list item in the specified direction.\r\n *\r\n * It means that values for `listIndent` and `listItemId` for all items are equal.\r\n *\r\n * **Note**: For backward search the provided item is not included, but for forward search it is included in the result.\r\n *\r\n * @internal\r\n * @param listItem Starting list item element.\r\n * @param options.direction Walking direction.\r\n * @param options.higherIndent Whether blocks with a higher indent level than the start block should be included in the result.\r\n */\r\nexport function getListItemBlocks(listItem, options = {}) {\r\n    const isForward = options.direction == 'forward';\r\n    const items = Array.from(new ListWalker(listItem, {\r\n        ...options,\r\n        includeSelf: isForward,\r\n        sameIndent: true,\r\n        sameAttributes: 'listItemId'\r\n    }));\r\n    return isForward ? items : items.reverse();\r\n}\r\n/**\r\n * Returns a list items nested inside the given list item.\r\n *\r\n * @internal\r\n */\r\nexport function getNestedListBlocks(listItem) {\r\n    return Array.from(new ListWalker(listItem, {\r\n        direction: 'forward',\r\n        higherIndent: true\r\n    }));\r\n}\r\n/**\r\n * Returns array of all blocks/items of the same list as given block (same indent, same type and properties).\r\n *\r\n * @internal\r\n * @param listItem Starting list item element.\r\n */\r\nexport function getListItems(listItem) {\r\n    const backwardBlocks = new ListWalker(listItem, {\r\n        sameIndent: true,\r\n        sameAttributes: 'listType'\r\n    });\r\n    const forwardBlocks = new ListWalker(listItem, {\r\n        sameIndent: true,\r\n        sameAttributes: 'listType',\r\n        includeSelf: true,\r\n        direction: 'forward'\r\n    });\r\n    return [\r\n        ...Array.from(backwardBlocks).reverse(),\r\n        ...forwardBlocks\r\n    ];\r\n}\r\n/**\r\n * Check if the given block is the first in the list item.\r\n *\r\n * @internal\r\n * @param listBlock The list block element.\r\n */\r\nexport function isFirstBlockOfListItem(listBlock) {\r\n    const previousSibling = ListWalker.first(listBlock, {\r\n        sameIndent: true,\r\n        sameAttributes: 'listItemId'\r\n    });\r\n    if (!previousSibling) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Check if the given block is the last in the list item.\r\n *\r\n * @internal\r\n */\r\nexport function isLastBlockOfListItem(listBlock) {\r\n    const nextSibling = ListWalker.first(listBlock, {\r\n        direction: 'forward',\r\n        sameIndent: true,\r\n        sameAttributes: 'listItemId'\r\n    });\r\n    if (!nextSibling) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Expands the given list of selected blocks to include the leading and tailing blocks of partially selected list items.\r\n *\r\n * @internal\r\n * @param blocks The list of selected blocks.\r\n * @param options.withNested Whether should include nested list items.\r\n */\r\nexport function expandListBlocksToCompleteItems(blocks, options = {}) {\r\n    blocks = toArray(blocks);\r\n    const higherIndent = options.withNested !== false;\r\n    const allBlocks = new Set();\r\n    for (const block of blocks) {\r\n        for (const itemBlock of getAllListItemBlocks(block, { higherIndent })) {\r\n            allBlocks.add(itemBlock);\r\n        }\r\n    }\r\n    return sortBlocks(allBlocks);\r\n}\r\n/**\r\n * Expands the given list of selected blocks to include all the items of the lists they're in.\r\n *\r\n * @internal\r\n * @param blocks The list of selected blocks.\r\n */\r\nexport function expandListBlocksToCompleteList(blocks) {\r\n    blocks = toArray(blocks);\r\n    const allBlocks = new Set();\r\n    for (const block of blocks) {\r\n        for (const itemBlock of getListItems(block)) {\r\n            allBlocks.add(itemBlock);\r\n        }\r\n    }\r\n    return sortBlocks(allBlocks);\r\n}\r\n/**\r\n * Splits the list item just before the provided list block.\r\n *\r\n * @internal\r\n * @param listBlock The list block element.\r\n * @param writer The model writer.\r\n * @returns The array of updated blocks.\r\n */\r\nexport function splitListItemBefore(listBlock, writer) {\r\n    const blocks = getListItemBlocks(listBlock, { direction: 'forward' });\r\n    const id = ListItemUid.next();\r\n    for (const block of blocks) {\r\n        writer.setAttribute('listItemId', id, block);\r\n    }\r\n    return blocks;\r\n}\r\n/**\r\n * Merges the list item with the parent list item.\r\n *\r\n * @internal\r\n * @param listBlock The list block element.\r\n * @param parentBlock The list block element to merge with.\r\n * @param writer The model writer.\r\n * @returns The array of updated blocks.\r\n */\r\nexport function mergeListItemBefore(listBlock, parentBlock, writer) {\r\n    const attributes = {};\r\n    for (const [key, value] of parentBlock.getAttributes()) {\r\n        if (key.startsWith('list')) {\r\n            attributes[key] = value;\r\n        }\r\n    }\r\n    const blocks = getListItemBlocks(listBlock, { direction: 'forward' });\r\n    for (const block of blocks) {\r\n        writer.setAttributes(attributes, block);\r\n    }\r\n    return blocks;\r\n}\r\n/**\r\n * Increases indentation of given list blocks.\r\n *\r\n * @internal\r\n * @param blocks The block or iterable of blocks.\r\n * @param writer The model writer.\r\n * @param options.expand Whether should expand the list of blocks to include complete list items.\r\n * @param options.indentBy The number of levels the indentation should change (could be negative).\r\n */\r\nexport function indentBlocks(blocks, writer, { expand, indentBy = 1 } = {}) {\r\n    blocks = toArray(blocks);\r\n    // Expand the selected blocks to contain the whole list items.\r\n    const allBlocks = expand ? expandListBlocksToCompleteItems(blocks) : blocks;\r\n    for (const block of allBlocks) {\r\n        const blockIndent = block.getAttribute('listIndent') + indentBy;\r\n        if (blockIndent < 0) {\r\n            removeListAttributes(block, writer);\r\n        }\r\n        else {\r\n            writer.setAttribute('listIndent', blockIndent, block);\r\n        }\r\n    }\r\n    return allBlocks;\r\n}\r\n/**\r\n * Decreases indentation of given list of blocks. If the indentation of some blocks matches the indentation\r\n * of surrounding blocks, they get merged together.\r\n *\r\n * @internal\r\n * @param blocks The block or iterable of blocks.\r\n * @param writer The model writer.\r\n */\r\nexport function outdentBlocksWithMerge(blocks, writer) {\r\n    blocks = toArray(blocks);\r\n    // Expand the selected blocks to contain the whole list items.\r\n    const allBlocks = expandListBlocksToCompleteItems(blocks);\r\n    const visited = new Set();\r\n    const referenceIndent = Math.min(...allBlocks.map(block => block.getAttribute('listIndent')));\r\n    const parentBlocks = new Map();\r\n    // Collect parent blocks before the list structure gets altered.\r\n    for (const block of allBlocks) {\r\n        parentBlocks.set(block, ListWalker.first(block, { lowerIndent: true }));\r\n    }\r\n    for (const block of allBlocks) {\r\n        if (visited.has(block)) {\r\n            continue;\r\n        }\r\n        visited.add(block);\r\n        const blockIndent = block.getAttribute('listIndent') - 1;\r\n        if (blockIndent < 0) {\r\n            removeListAttributes(block, writer);\r\n            continue;\r\n        }\r\n        // Merge with parent list item while outdenting and indent matches reference indent.\r\n        if (block.getAttribute('listIndent') == referenceIndent) {\r\n            const mergedBlocks = mergeListItemIfNotLast(block, parentBlocks.get(block), writer);\r\n            // All list item blocks are updated while merging so add those to visited set.\r\n            for (const mergedBlock of mergedBlocks) {\r\n                visited.add(mergedBlock);\r\n            }\r\n            // The indent level was updated while merging so continue to next block.\r\n            if (mergedBlocks.length) {\r\n                continue;\r\n            }\r\n        }\r\n        writer.setAttribute('listIndent', blockIndent, block);\r\n    }\r\n    return sortBlocks(visited);\r\n}\r\n/**\r\n * Removes all list attributes from the given blocks.\r\n *\r\n * @internal\r\n * @param blocks The block or iterable of blocks.\r\n * @param writer The model writer.\r\n * @returns Array of altered blocks.\r\n */\r\nexport function removeListAttributes(blocks, writer) {\r\n    blocks = toArray(blocks);\r\n    for (const block of blocks) {\r\n        for (const attributeKey of block.getAttributeKeys()) {\r\n            if (attributeKey.startsWith('list')) {\r\n                writer.removeAttribute(attributeKey, block);\r\n            }\r\n        }\r\n    }\r\n    return blocks;\r\n}\r\n/**\r\n * Checks whether the given blocks are related to a single list item.\r\n *\r\n * @internal\r\n * @param blocks The list block elements.\r\n */\r\nexport function isSingleListItem(blocks) {\r\n    if (!blocks.length) {\r\n        return false;\r\n    }\r\n    const firstItemId = blocks[0].getAttribute('listItemId');\r\n    if (!firstItemId) {\r\n        return false;\r\n    }\r\n    return !blocks.some(item => item.getAttribute('listItemId') != firstItemId);\r\n}\r\n/**\r\n * Modifies the indents of list blocks following the given list block so the indentation is valid after\r\n * the given block is no longer a list item.\r\n *\r\n * @internal\r\n * @param lastBlock The last list block that has become a non-list element.\r\n * @param writer The model writer.\r\n * @returns Array of altered blocks.\r\n */\r\nexport function outdentFollowingItems(lastBlock, writer) {\r\n    const changedBlocks = [];\r\n    // Start from the model item that is just after the last turned-off item.\r\n    let currentIndent = Number.POSITIVE_INFINITY;\r\n    // Correct indent of all items after the last turned off item.\r\n    // Rules that should be followed:\r\n    // 1. All direct sub-items of turned-off item should become indent 0, because the first item after it\r\n    //    will be the first item of a new list. Other items are at the same level, so should have same 0 index.\r\n    // 2. All items with indent lower than indent of turned-off item should become indent 0, because they\r\n    //    should not end up as a child of any of list items that they were not children of before.\r\n    // 3. All other items should have their indent changed relatively to it's parent.\r\n    //\r\n    // For example:\r\n    // 1  * --------\r\n    // 2     * --------\r\n    // 3        * --------\t\t\t<-- this is turned off.\r\n    // 4           * --------\t\t<-- this has to become indent = 0, because it will be first item on a new list.\r\n    // 5              * --------\t<-- this should be still be a child of item above, so indent = 1.\r\n    // 6        * --------\t\t\t<-- this has to become indent = 0, because it should not be a child of any of items above.\r\n    // 7           * --------\t\t<-- this should be still be a child of item above, so indent = 1.\r\n    // 8     * --------\t\t\t\t<-- this has to become indent = 0.\r\n    // 9        * --------\t\t\t<-- this should still be a child of item above, so indent = 1.\r\n    // 10          * --------\t\t<-- this should still be a child of item above, so indent = 2.\r\n    // 11          * --------\t\t<-- this should still be at the same level as item above, so indent = 2.\r\n    // 12 * --------\t\t\t\t<-- this and all below are left unchanged.\r\n    // 13    * --------\r\n    // 14       * --------\r\n    //\r\n    // After turning off 3 the list becomes:\r\n    //\r\n    // 1  * --------\r\n    // 2     * --------\r\n    //\r\n    // 3  --------\r\n    //\r\n    // 4  * --------\r\n    // 5     * --------\r\n    // 6  * --------\r\n    // 7     * --------\r\n    // 8  * --------\r\n    // 9     * --------\r\n    // 10       * --------\r\n    // 11       * --------\r\n    // 12 * --------\r\n    // 13    * --------\r\n    // 14       * --------\r\n    //\r\n    // Thanks to this algorithm no lists are mismatched and no items get unexpected children/parent, while\r\n    // those parent-child connection which are possible to maintain are still maintained. It's worth noting\r\n    // that this is the same effect that we would be get by multiple use of outdent command. However doing\r\n    // it like this is much more efficient because it's less operation (less memory usage, easier OT) and\r\n    // less conversion (faster).\r\n    for (const { node } of iterateSiblingListBlocks(lastBlock.nextSibling, 'forward')) {\r\n        // Check each next list item, as long as its indent is higher than 0.\r\n        const indent = node.getAttribute('listIndent');\r\n        // If the indent is 0 we are not going to change anything anyway.\r\n        if (indent == 0) {\r\n            break;\r\n        }\r\n        // We check if that's item indent is lower than current relative indent.\r\n        if (indent < currentIndent) {\r\n            // If it is, current relative indent becomes that indent.\r\n            currentIndent = indent;\r\n        }\r\n        // Fix indent relatively to current relative indent.\r\n        // Note, that if we just changed the current relative indent, the newIndent will be equal to 0.\r\n        const newIndent = indent - currentIndent;\r\n        writer.setAttribute('listIndent', newIndent, node);\r\n        changedBlocks.push(node);\r\n    }\r\n    return changedBlocks;\r\n}\r\n/**\r\n * Returns the array of given blocks sorted by model indexes (document order).\r\n *\r\n * @internal\r\n */\r\nexport function sortBlocks(blocks) {\r\n    return Array.from(blocks)\r\n        .filter(block => block.root.rootName !== '$graveyard')\r\n        .sort((a, b) => a.index - b.index);\r\n}\r\n/**\r\n * Returns a selected block object. If a selected object is inline or when there is no selected\r\n * object, `null` is returned.\r\n *\r\n * @internal\r\n * @param model The instance of editor model.\r\n * @returns Selected block object or `null`.\r\n */\r\nexport function getSelectedBlockObject(model) {\r\n    const selectedElement = model.document.selection.getSelectedElement();\r\n    if (!selectedElement) {\r\n        return null;\r\n    }\r\n    if (model.schema.isObject(selectedElement) && model.schema.isBlock(selectedElement)) {\r\n        return selectedElement;\r\n    }\r\n    return null;\r\n}\r\n// Merges a given block to the given parent block if parent is a list item and there is no more blocks in the same item.\r\nfunction mergeListItemIfNotLast(block, parentBlock, writer) {\r\n    const parentItemBlocks = getListItemBlocks(parentBlock, { direction: 'forward' });\r\n    // Merge with parent only if outdented item wasn't the last one in its parent.\r\n    // Merge:\r\n    // * a\t\t\t->\t\t* a\r\n    //   * [b]\t\t->\t\t  b\r\n    //   c\t\t\t->\t\t  c\r\n    // Don't merge:\r\n    // * a\t\t\t->\t\t* a\r\n    //   * [b]\t\t-> \t\t* b\r\n    // * c\t\t\t->\t\t* c\r\n    if (parentItemBlocks.pop().index > block.index) {\r\n        return mergeListItemBefore(block, parentBlock, writer);\r\n    }\r\n    return [];\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlist/documentlistindentcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { expandListBlocksToCompleteItems, indentBlocks, isFirstBlockOfListItem, isListItemBlock, isSingleListItem, outdentBlocksWithMerge, sortBlocks, splitListItemBefore } from './utils/model';\r\nimport ListWalker from './utils/listwalker';\r\n/**\r\n * The document list indent command. It is used by the {@link module:list/documentlist~DocumentList list feature}.\r\n */\r\nexport default class DocumentListIndentCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param indentDirection The direction of indent. If it is equal to `backward`, the command\r\n     * will outdent a list item.\r\n     */\r\n    constructor(editor, indentDirection) {\r\n        super(editor);\r\n        this._direction = indentDirection;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Indents or outdents (depending on the {@link #constructor}'s `indentDirection` parameter) selected list items.\r\n     *\r\n     * @fires execute\r\n     * @fires afterExecute\r\n     */\r\n    execute() {\r\n        const model = this.editor.model;\r\n        const blocks = getSelectedListBlocks(model.document.selection);\r\n        model.change(writer => {\r\n            const changedBlocks = [];\r\n            // Handle selection contained in the single list item and starting in the following blocks.\r\n            if (isSingleListItem(blocks) && !isFirstBlockOfListItem(blocks[0])) {\r\n                // Allow increasing indent of following list item blocks.\r\n                if (this._direction == 'forward') {\r\n                    changedBlocks.push(...indentBlocks(blocks, writer));\r\n                }\r\n                // For indent make sure that indented blocks have a new ID.\r\n                // For outdent just split blocks from the list item (give them a new IDs).\r\n                changedBlocks.push(...splitListItemBefore(blocks[0], writer));\r\n            }\r\n            // More than a single list item is selected, or the first block of list item is selected.\r\n            else {\r\n                // Now just update the attributes of blocks.\r\n                if (this._direction == 'forward') {\r\n                    changedBlocks.push(...indentBlocks(blocks, writer, { expand: true }));\r\n                }\r\n                else {\r\n                    changedBlocks.push(...outdentBlocksWithMerge(blocks, writer));\r\n                }\r\n            }\r\n            // Align the list item type to match the previous list item (from the same list).\r\n            for (const block of changedBlocks) {\r\n                // This block become a plain block (for example a paragraph).\r\n                if (!block.hasAttribute('listType')) {\r\n                    continue;\r\n                }\r\n                const previousItemBlock = ListWalker.first(block, { sameIndent: true });\r\n                if (previousItemBlock) {\r\n                    writer.setAttribute('listType', previousItemBlock.getAttribute('listType'), block);\r\n                }\r\n            }\r\n            this._fireAfterExecute(changedBlocks);\r\n        });\r\n    }\r\n    /**\r\n     * Fires the `afterExecute` event.\r\n     *\r\n     * @param changedBlocks The changed list elements.\r\n     */\r\n    _fireAfterExecute(changedBlocks) {\r\n        this.fire('afterExecute', sortBlocks(new Set(changedBlocks)));\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        // Check whether any of position's ancestor is a list item.\r\n        let blocks = getSelectedListBlocks(this.editor.model.document.selection);\r\n        let firstBlock = blocks[0];\r\n        // If selection is not in a list item, the command is disabled.\r\n        if (!firstBlock) {\r\n            return false;\r\n        }\r\n        // If we are outdenting it is enough to be in list item. Every list item can always be outdented.\r\n        if (this._direction == 'backward') {\r\n            return true;\r\n        }\r\n        // A single block of a list item is selected, so it could be indented as a sublist.\r\n        if (isSingleListItem(blocks) && !isFirstBlockOfListItem(blocks[0])) {\r\n            return true;\r\n        }\r\n        blocks = expandListBlocksToCompleteItems(blocks);\r\n        firstBlock = blocks[0];\r\n        // Check if there is any list item before selected items that could become a parent of selected items.\r\n        const siblingItem = ListWalker.first(firstBlock, { sameIndent: true });\r\n        if (!siblingItem) {\r\n            return false;\r\n        }\r\n        if (siblingItem.getAttribute('listType') == firstBlock.getAttribute('listType')) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\n/**\r\n * Returns an array of selected blocks truncated to the first non list block element.\r\n */\r\nfunction getSelectedListBlocks(selection) {\r\n    const blocks = Array.from(selection.getSelectedBlocks());\r\n    const firstNonListBlockIndex = blocks.findIndex(block => !isListItemBlock(block));\r\n    if (firstNonListBlockIndex != -1) {\r\n        blocks.length = firstNonListBlockIndex;\r\n    }\r\n    return blocks;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { splitListItemBefore, expandListBlocksToCompleteItems, getListItemBlocks, getListItems, removeListAttributes, outdentFollowingItems, ListItemUid, sortBlocks, getSelectedBlockObject, isListItemBlock } from './utils/model';\r\n/**\r\n * The list command. It is used by the {@link module:list/documentlist~DocumentList document list feature}.\r\n */\r\nexport default class DocumentListCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param type List type that will be handled by this command.\r\n     */\r\n    constructor(editor, type) {\r\n        super(editor);\r\n        this.type = type;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.value = this._getValue();\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Executes the list command.\r\n     *\r\n     * @fires execute\r\n     * @fires afterExecute\r\n     * @param options Command options.\r\n     * @param options.forceValue If set, it will force the command behavior. If `true`, the command will try to convert the\r\n     * selected items and potentially the neighbor elements to the proper list items. If set to `false` it will convert selected elements\r\n     * to paragraphs. If not set, the command will toggle selected elements to list items or paragraphs, depending on the selection.\r\n     */\r\n    execute(options = {}) {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        const selectedBlockObject = getSelectedBlockObject(model);\r\n        const blocks = Array.from(document.selection.getSelectedBlocks())\r\n            .filter(block => model.schema.checkAttribute(block, 'listType'));\r\n        // Whether we are turning off some items.\r\n        const turnOff = options.forceValue !== undefined ? !options.forceValue : this.value;\r\n        model.change(writer => {\r\n            if (turnOff) {\r\n                const lastBlock = blocks[blocks.length - 1];\r\n                // Split the first block from the list item.\r\n                const itemBlocks = getListItemBlocks(lastBlock, { direction: 'forward' });\r\n                const changedBlocks = [];\r\n                if (itemBlocks.length > 1) {\r\n                    changedBlocks.push(...splitListItemBefore(itemBlocks[1], writer));\r\n                }\r\n                // Convert list blocks to plain blocks.\r\n                changedBlocks.push(...removeListAttributes(blocks, writer));\r\n                // Outdent items following the selected list item.\r\n                changedBlocks.push(...outdentFollowingItems(lastBlock, writer));\r\n                this._fireAfterExecute(changedBlocks);\r\n            }\r\n            // Turning on the list items for a collapsed selection inside a list item.\r\n            else if ((selectedBlockObject || document.selection.isCollapsed) && isListItemBlock(blocks[0])) {\r\n                const changedBlocks = getListItems(selectedBlockObject || blocks[0]);\r\n                for (const block of changedBlocks) {\r\n                    writer.setAttribute('listType', this.type, block);\r\n                }\r\n                this._fireAfterExecute(changedBlocks);\r\n            }\r\n            // Turning on the list items for a non-collapsed selection.\r\n            else {\r\n                const changedBlocks = [];\r\n                for (const block of blocks) {\r\n                    // Promote the given block to the list item.\r\n                    if (!block.hasAttribute('listType')) {\r\n                        writer.setAttributes({\r\n                            listIndent: 0,\r\n                            listItemId: ListItemUid.next(),\r\n                            listType: this.type\r\n                        }, block);\r\n                        changedBlocks.push(block);\r\n                    }\r\n                    // Change the type of list item.\r\n                    else {\r\n                        for (const node of expandListBlocksToCompleteItems(block, { withNested: false })) {\r\n                            if (node.getAttribute('listType') != this.type) {\r\n                                writer.setAttribute('listType', this.type, node);\r\n                                changedBlocks.push(node);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                this._fireAfterExecute(changedBlocks);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Fires the `afterExecute` event.\r\n     *\r\n     * @param changedBlocks The changed list elements.\r\n     */\r\n    _fireAfterExecute(changedBlocks) {\r\n        this.fire('afterExecute', sortBlocks(new Set(changedBlocks)));\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     *\r\n     * @returns The current value.\r\n     */\r\n    _getValue() {\r\n        const selection = this.editor.model.document.selection;\r\n        const blocks = Array.from(selection.getSelectedBlocks());\r\n        if (!blocks.length) {\r\n            return false;\r\n        }\r\n        for (const block of blocks) {\r\n            if (block.getAttribute('listType') != this.type) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        const selection = this.editor.model.document.selection;\r\n        const schema = this.editor.model.schema;\r\n        const blocks = Array.from(selection.getSelectedBlocks());\r\n        if (!blocks.length) {\r\n            return false;\r\n        }\r\n        // If command value is true it means that we are in list item, so the command should be enabled.\r\n        if (this.value) {\r\n            return true;\r\n        }\r\n        for (const block of blocks) {\r\n            if (schema.checkAttribute(block, 'listType')) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlist/documentlistmergecommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { getNestedListBlocks, indentBlocks, sortBlocks, isFirstBlockOfListItem, mergeListItemBefore, isSingleListItem, getSelectedBlockObject, isListItemBlock } from './utils/model';\r\nimport ListWalker from './utils/listwalker';\r\n/**\r\n * The document list merge command. It is used by the {@link module:list/documentlist~DocumentList list feature}.\r\n */\r\nexport default class DocumentListMergeCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param direction Whether list item should be merged before or after the selected block.\r\n     */\r\n    constructor(editor, direction) {\r\n        super(editor);\r\n        this._direction = direction;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Merges list blocks together (depending on the {@link #constructor}'s `direction` parameter).\r\n     *\r\n     * @fires execute\r\n     * @fires afterExecute\r\n     * @param options Command options.\r\n     * @param options.shouldMergeOnBlocksContentLevel When set `true`, merging will be performed together\r\n     * with {@link module:engine/model/model~Model#deleteContent} to get rid of the inline content in the selection or take advantage\r\n     * of the heuristics in `deleteContent()` that helps convert lists into paragraphs in certain cases.\r\n     */\r\n    execute({ shouldMergeOnBlocksContentLevel = false } = {}) {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const changedBlocks = [];\r\n        model.change(writer => {\r\n            const { firstElement, lastElement } = this._getMergeSubjectElements(selection, shouldMergeOnBlocksContentLevel);\r\n            const firstIndent = firstElement.getAttribute('listIndent') || 0;\r\n            const lastIndent = lastElement.getAttribute('listIndent');\r\n            const lastElementId = lastElement.getAttribute('listItemId');\r\n            if (firstIndent != lastIndent) {\r\n                const nestedLastElementBlocks = getNestedListBlocks(lastElement);\r\n                changedBlocks.push(...indentBlocks([lastElement, ...nestedLastElementBlocks], writer, {\r\n                    indentBy: firstIndent - lastIndent,\r\n                    // If outdenting, the entire sub-tree that follows must be included.\r\n                    expand: firstIndent < lastIndent\r\n                }));\r\n            }\r\n            if (shouldMergeOnBlocksContentLevel) {\r\n                let sel = selection;\r\n                if (selection.isCollapsed) {\r\n                    sel = writer.createSelection(writer.createRange(writer.createPositionAt(firstElement, 'end'), writer.createPositionAt(lastElement, 0)));\r\n                }\r\n                // Delete selected content. Replace entire content only for non-collapsed selection.\r\n                model.deleteContent(sel, { doNotResetEntireContent: selection.isCollapsed });\r\n                // Get the last \"touched\" element after deleteContent call (can't use the lastElement because\r\n                // it could get merged into the firstElement while deleting content).\r\n                const lastElementAfterDelete = sel.getLastPosition().parent;\r\n                // Check if the element after it was in the same list item and adjust it if needed.\r\n                const nextSibling = lastElementAfterDelete.nextSibling;\r\n                changedBlocks.push(lastElementAfterDelete);\r\n                if (nextSibling && nextSibling !== lastElement && nextSibling.getAttribute('listItemId') == lastElementId) {\r\n                    changedBlocks.push(...mergeListItemBefore(nextSibling, lastElementAfterDelete, writer));\r\n                }\r\n            }\r\n            else {\r\n                changedBlocks.push(...mergeListItemBefore(lastElement, firstElement, writer));\r\n            }\r\n            this._fireAfterExecute(changedBlocks);\r\n        });\r\n    }\r\n    /**\r\n     * Fires the `afterExecute` event.\r\n     *\r\n     * @param changedBlocks The changed list elements.\r\n     */\r\n    _fireAfterExecute(changedBlocks) {\r\n        this.fire('afterExecute', sortBlocks(new Set(changedBlocks)));\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const selectedBlockObject = getSelectedBlockObject(model);\r\n        if (selection.isCollapsed || selectedBlockObject) {\r\n            const positionParent = selectedBlockObject || selection.getFirstPosition().parent;\r\n            if (!isListItemBlock(positionParent)) {\r\n                return false;\r\n            }\r\n            const siblingNode = this._direction == 'backward' ?\r\n                positionParent.previousSibling :\r\n                positionParent.nextSibling;\r\n            if (!siblingNode) {\r\n                return false;\r\n            }\r\n            if (isSingleListItem([positionParent, siblingNode])) {\r\n                return false;\r\n            }\r\n        }\r\n        else {\r\n            const lastPosition = selection.getLastPosition();\r\n            const firstPosition = selection.getFirstPosition();\r\n            // If deleting within a single block of a list item, there's no need to merge anything.\r\n            // The default delete should be executed instead.\r\n            if (lastPosition.parent === firstPosition.parent) {\r\n                return false;\r\n            }\r\n            if (!isListItemBlock(lastPosition.parent)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Returns the boundary elements the merge should be executed for. These are not necessarily selection's first\r\n     * and last position parents but sometimes sibling or even further blocks depending on the context.\r\n     *\r\n     * @param selection The selection the merge is executed for.\r\n     * @param shouldMergeOnBlocksContentLevel When `true`, merge is performed together with\r\n     * {@link module:engine/model/model~Model#deleteContent} to remove the inline content within the selection.\r\n     */\r\n    _getMergeSubjectElements(selection, shouldMergeOnBlocksContentLevel) {\r\n        const model = this.editor.model;\r\n        const selectedBlockObject = getSelectedBlockObject(model);\r\n        let firstElement, lastElement;\r\n        if (selection.isCollapsed || selectedBlockObject) {\r\n            const positionParent = selectedBlockObject || selection.getFirstPosition().parent;\r\n            const isFirstBlock = isFirstBlockOfListItem(positionParent);\r\n            if (this._direction == 'backward') {\r\n                lastElement = positionParent;\r\n                if (isFirstBlock && !shouldMergeOnBlocksContentLevel) {\r\n                    // For the \"c\" as an anchorElement:\r\n                    //  * a\r\n                    //    * b\r\n                    //  * [c]  <-- this block should be merged with \"a\"\r\n                    // It should find \"a\" element to merge with:\r\n                    //  * a\r\n                    //    * b\r\n                    //    c\r\n                    firstElement = ListWalker.first(positionParent, { sameIndent: true, lowerIndent: true });\r\n                }\r\n                else {\r\n                    firstElement = positionParent.previousSibling;\r\n                }\r\n            }\r\n            else {\r\n                // In case of the forward merge there is no case as above, just merge with next sibling.\r\n                firstElement = positionParent;\r\n                lastElement = positionParent.nextSibling;\r\n            }\r\n        }\r\n        else {\r\n            firstElement = selection.getFirstPosition().parent;\r\n            lastElement = selection.getLastPosition().parent;\r\n        }\r\n        return {\r\n            firstElement: firstElement,\r\n            lastElement: lastElement\r\n        };\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { isFirstBlockOfListItem, isListItemBlock, sortBlocks, splitListItemBefore } from './utils/model';\r\n/**\r\n * The document list split command that splits the list item at the selection.\r\n *\r\n * It is used by the {@link module:list/documentlist~DocumentList document list feature}.\r\n */\r\nexport default class DocumentListSplitCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param direction Whether list item should be split before or after the selected block.\r\n     */\r\n    constructor(editor, direction) {\r\n        super(editor);\r\n        this._direction = direction;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Splits the list item at the selection.\r\n     *\r\n     * @fires execute\r\n     * @fires afterExecute\r\n     */\r\n    execute() {\r\n        const editor = this.editor;\r\n        editor.model.change(writer => {\r\n            const changedBlocks = splitListItemBefore(this._getStartBlock(), writer);\r\n            this._fireAfterExecute(changedBlocks);\r\n        });\r\n    }\r\n    /**\r\n     * Fires the `afterExecute` event.\r\n     *\r\n     * @param changedBlocks The changed list elements.\r\n     */\r\n    _fireAfterExecute(changedBlocks) {\r\n        this.fire('afterExecute', sortBlocks(new Set(changedBlocks)));\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        const selection = this.editor.model.document.selection;\r\n        const block = this._getStartBlock();\r\n        return selection.isCollapsed &&\r\n            isListItemBlock(block) &&\r\n            !isFirstBlockOfListItem(block);\r\n    }\r\n    /**\r\n     * Returns the model element that is the main focus of the command (according to the current selection and command direction).\r\n     */\r\n    _getStartBlock() {\r\n        const doc = this.editor.model.document;\r\n        const positionParent = doc.selection.getFirstPosition().parent;\r\n        return (this._direction == 'before' ? positionParent : positionParent.nextSibling);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { expandListBlocksToCompleteItems, expandListBlocksToCompleteList, isFirstBlockOfListItem, isListItemBlock } from './utils/model';\r\n/**\r\n * A set of helpers related to document lists.\r\n */\r\nexport default class DocumentListUtils extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DocumentListUtils';\r\n    }\r\n    /**\r\n     * Expands the given list of selected blocks to include all the items of the lists they're in.\r\n     *\r\n     * @param blocks The list of selected blocks.\r\n     */\r\n    expandListBlocksToCompleteList(blocks) {\r\n        return expandListBlocksToCompleteList(blocks);\r\n    }\r\n    /**\r\n     * Check if the given block is the first in the list item.\r\n     *\r\n     * @param listBlock The list block element.\r\n     */\r\n    isFirstBlockOfListItem(listBlock) {\r\n        return isFirstBlockOfListItem(listBlock);\r\n    }\r\n    /**\r\n     * Returns true if the given model node is a list item block.\r\n     *\r\n     * @param node A model node.\r\n     */\r\n    isListItemBlock(node) {\r\n        return isListItemBlock(node);\r\n    }\r\n    /**\r\n     * Expands the given list of selected blocks to include the leading and tailing blocks of partially selected list items.\r\n     *\r\n     * @param blocks The list of selected blocks.\r\n     * @param options.withNested Whether should include nested list items.\r\n     */\r\n    expandListBlocksToCompleteItems(blocks, options = {}) {\r\n        return expandListBlocksToCompleteItems(blocks, options);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Checks if view element is a list type (ul or ol).\r\n *\r\n * @internal\r\n */\r\nexport function isListView(viewElement) {\r\n    return viewElement.is('element', 'ol') || viewElement.is('element', 'ul');\r\n}\r\n/**\r\n * Checks if view element is a list item (li).\r\n *\r\n * @internal\r\n */\r\nexport function isListItemView(viewElement) {\r\n    return viewElement.is('element', 'li');\r\n}\r\n/**\r\n * Calculates the indent value for a list item. Handles HTML compliant and non-compliant lists.\r\n *\r\n * Also, fixes non HTML compliant lists indents:\r\n *\r\n * ```\r\n * before:                                     fixed list:\r\n * OL                                          OL\r\n * |-> LI (parent LIs: 0)                      |-> LI     (indent: 0)\r\n *     |-> OL                                  |-> OL\r\n *         |-> OL                                  |\r\n *         |   |-> OL                              |\r\n *         |       |-> OL                          |\r\n *         |           |-> LI (parent LIs: 1)      |-> LI (indent: 1)\r\n *         |-> LI (parent LIs: 1)                  |-> LI (indent: 1)\r\n *\r\n * before:                                     fixed list:\r\n * OL                                          OL\r\n * |-> OL                                      |\r\n *     |-> OL                                  |\r\n *          |-> OL                             |\r\n *              |-> LI (parent LIs: 0)         |-> LI        (indent: 0)\r\n *\r\n * before:                                     fixed list:\r\n * OL                                          OL\r\n * |-> LI (parent LIs: 0)                      |-> LI         (indent: 0)\r\n * |-> OL                                          |-> OL\r\n *     |-> LI (parent LIs: 0)                          |-> LI (indent: 1)\r\n * ```\r\n *\r\n * @internal\r\n */\r\nexport function getIndent(listItem) {\r\n    let indent = 0;\r\n    let parent = listItem.parent;\r\n    while (parent) {\r\n        // Each LI in the tree will result in an increased indent for HTML compliant lists.\r\n        if (isListItemView(parent)) {\r\n            indent++;\r\n        }\r\n        else {\r\n            // If however the list is nested in other list we should check previous sibling of any of the list elements...\r\n            const previousSibling = parent.previousSibling;\r\n            // ...because the we might need increase its indent:\r\n            //\t\tbefore:                           fixed list:\r\n            //\t\tOL                                OL\r\n            //\t\t|-> LI (parent LIs: 0)            |-> LI         (indent: 0)\r\n            //\t\t|-> OL                                |-> OL\r\n            //\t\t    |-> LI (parent LIs: 0)                |-> LI (indent: 1)\r\n            if (previousSibling && isListItemView(previousSibling)) {\r\n                indent++;\r\n            }\r\n        }\r\n        parent = parent.parent;\r\n    }\r\n    return indent;\r\n}\r\n/**\r\n * Creates a list attribute element (ol or ul).\r\n *\r\n * @internal\r\n */\r\nexport function createListElement(writer, indent, type, id = getViewElementIdForListType(type, indent)) {\r\n    // Negative priorities so that restricted editing attribute won't wrap lists.\r\n    return writer.createAttributeElement(getViewElementNameForListType(type), null, {\r\n        priority: 2 * indent / 100 - 100,\r\n        id\r\n    });\r\n}\r\n/**\r\n * Creates a list item attribute element (li).\r\n *\r\n * @internal\r\n */\r\nexport function createListItemElement(writer, indent, id) {\r\n    // Negative priorities so that restricted editing attribute won't wrap list items.\r\n    return writer.createAttributeElement('li', null, {\r\n        priority: (2 * indent + 1) / 100 - 100,\r\n        id\r\n    });\r\n}\r\n/**\r\n * Returns a view element name for the given list type.\r\n *\r\n * @internal\r\n */\r\nexport function getViewElementNameForListType(type) {\r\n    return type == 'numbered' ? 'ol' : 'ul';\r\n}\r\n/**\r\n * Returns a view element ID for the given list type and indent.\r\n *\r\n * @internal\r\n */\r\nexport function getViewElementIdForListType(type, indent) {\r\n    return `list-${type}-${indent}`;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { iterateSiblingListBlocks } from './listwalker';\r\nimport { getListItemBlocks, isListItemBlock, ListItemUid } from './model';\r\n/**\r\n * Based on the provided positions looks for the list head and stores it in the provided map.\r\n *\r\n * @internal\r\n * @param position The search starting position.\r\n * @param itemToListHead The map from list item element to the list head element.\r\n */\r\nexport function findAndAddListHeadToMap(position, itemToListHead) {\r\n    const previousNode = position.nodeBefore;\r\n    if (!isListItemBlock(previousNode)) {\r\n        const item = position.nodeAfter;\r\n        if (isListItemBlock(item)) {\r\n            itemToListHead.set(item, item);\r\n        }\r\n    }\r\n    else {\r\n        let listHead = previousNode;\r\n        // Previously, the loop below was defined like this:\r\n        //\r\n        // \t\tfor ( { node: listHead } of iterateSiblingListBlocks( listHead, 'backward' ) )\r\n        //\r\n        // Unfortunately, such a destructuring is incorrectly transpiled by Babel and the loop never ends.\r\n        // See: https://github.com/ckeditor/ckeditor5-react/issues/345.\r\n        for (const { node } of iterateSiblingListBlocks(listHead, 'backward')) {\r\n            listHead = node;\r\n            if (itemToListHead.has(listHead)) {\r\n                return;\r\n            }\r\n        }\r\n        itemToListHead.set(previousNode, listHead);\r\n    }\r\n}\r\n/**\r\n * Scans the list starting from the given list head element and fixes items' indentation.\r\n *\r\n * @internal\r\n * @param listNodes The iterable of list nodes.\r\n * @param writer The model writer.\r\n * @returns Whether the model was modified.\r\n */\r\nexport function fixListIndents(listNodes, writer) {\r\n    let maxIndent = 0; // Guards local sublist max indents that need fixing.\r\n    let prevIndent = -1; // Previous item indent.\r\n    let fixBy = null;\r\n    let applied = false;\r\n    for (const { node } of listNodes) {\r\n        const itemIndent = node.getAttribute('listIndent');\r\n        if (itemIndent > maxIndent) {\r\n            let newIndent;\r\n            if (fixBy === null) {\r\n                fixBy = itemIndent - maxIndent;\r\n                newIndent = maxIndent;\r\n            }\r\n            else {\r\n                if (fixBy > itemIndent) {\r\n                    fixBy = itemIndent;\r\n                }\r\n                newIndent = itemIndent - fixBy;\r\n            }\r\n            if (newIndent > prevIndent + 1) {\r\n                newIndent = prevIndent + 1;\r\n            }\r\n            writer.setAttribute('listIndent', newIndent, node);\r\n            applied = true;\r\n            prevIndent = newIndent;\r\n        }\r\n        else {\r\n            fixBy = null;\r\n            maxIndent = itemIndent + 1;\r\n            prevIndent = itemIndent;\r\n        }\r\n    }\r\n    return applied;\r\n}\r\n/**\r\n * Scans the list starting from the given list head element and fixes items' types.\r\n *\r\n * @internal\r\n * @param listNodes The iterable of list nodes.\r\n * @param seenIds The set of already known IDs.\r\n * @param writer The model writer.\r\n * @returns Whether the model was modified.\r\n */\r\nexport function fixListItemIds(listNodes, seenIds, writer) {\r\n    const visited = new Set();\r\n    let applied = false;\r\n    for (const { node } of listNodes) {\r\n        if (visited.has(node)) {\r\n            continue;\r\n        }\r\n        let listType = node.getAttribute('listType');\r\n        let listItemId = node.getAttribute('listItemId');\r\n        // Use a new ID if this one was spot earlier (even in other list).\r\n        if (seenIds.has(listItemId)) {\r\n            listItemId = ListItemUid.next();\r\n        }\r\n        seenIds.add(listItemId);\r\n        for (const block of getListItemBlocks(node, { direction: 'forward' })) {\r\n            visited.add(block);\r\n            // Use a new ID if a block of a bigger list item has different type.\r\n            if (block.getAttribute('listType') != listType) {\r\n                listItemId = ListItemUid.next();\r\n                listType = block.getAttribute('listType');\r\n            }\r\n            if (block.getAttribute('listItemId') != listItemId) {\r\n                writer.setAttribute('listItemId', listItemId, block);\r\n                applied = true;\r\n            }\r\n        }\r\n    }\r\n    return applied;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlist/converters\r\n */\r\nimport { UpcastWriter } from 'ckeditor5/src/engine';\r\nimport { getAllListItemBlocks, getListItemBlocks, isListItemBlock, ListItemUid } from './utils/model';\r\nimport { createListElement, createListItemElement, getIndent, isListView, isListItemView } from './utils/view';\r\nimport ListWalker, { iterateSiblingListBlocks } from './utils/listwalker';\r\nimport { findAndAddListHeadToMap } from './utils/postfixers';\r\n/**\r\n * Returns the upcast converter for list items. It's supposed to work after the block converters (content inside list items) are converted.\r\n *\r\n * @internal\r\n */\r\nexport function listItemUpcastConverter() {\r\n    return (evt, data, conversionApi) => {\r\n        const { writer, schema } = conversionApi;\r\n        if (!data.modelRange) {\r\n            return;\r\n        }\r\n        const items = Array.from(data.modelRange.getItems({ shallow: true }))\r\n            .filter((item) => schema.checkAttribute(item, 'listItemId'));\r\n        if (!items.length) {\r\n            return;\r\n        }\r\n        const attributes = {\r\n            listItemId: ListItemUid.next(),\r\n            listIndent: getIndent(data.viewItem),\r\n            listType: data.viewItem.parent && data.viewItem.parent.is('element', 'ol') ? 'numbered' : 'bulleted'\r\n        };\r\n        for (const item of items) {\r\n            // Set list attributes only on same level items, those nested deeper are already handled by the recursive conversion.\r\n            if (!isListItemBlock(item)) {\r\n                writer.setAttributes(attributes, item);\r\n            }\r\n        }\r\n        if (items.length > 1) {\r\n            // Make sure that list item that contain only nested list will preserve paragraph for itself:\r\n            //\t<ul>\r\n            //\t\t<li>\r\n            //\t\t\t<p></p>  <-- this one must be kept\r\n            //\t\t\t<ul>\r\n            //\t\t\t\t<li></li>\r\n            //\t\t\t</ul>\r\n            //\t\t</li>\r\n            //\t</ul>\r\n            if (items[1].getAttribute('listItemId') != attributes.listItemId) {\r\n                conversionApi.keepEmptyElement(items[0]);\r\n            }\r\n        }\r\n    };\r\n}\r\n/**\r\n * Returns the upcast converter for the `<ul>` and `<ol>` view elements that cleans the input view of garbage.\r\n * This is mostly to clean whitespaces from between the `<li>` view elements inside the view list element. However,\r\n * incorrect data can also be cleared if the view was incorrect.\r\n *\r\n * @internal\r\n */\r\nexport function listUpcastCleanList() {\r\n    return (evt, data, conversionApi) => {\r\n        if (!conversionApi.consumable.test(data.viewItem, { name: true })) {\r\n            return;\r\n        }\r\n        const viewWriter = new UpcastWriter(data.viewItem.document);\r\n        for (const child of Array.from(data.viewItem.getChildren())) {\r\n            if (!isListItemView(child) && !isListView(child)) {\r\n                viewWriter.remove(child);\r\n            }\r\n        }\r\n    };\r\n}\r\n/**\r\n * Returns a model document change:data event listener that triggers conversion of related items if needed.\r\n *\r\n * @internal\r\n * @param model The editor model.\r\n * @param editing The editing controller.\r\n * @param attributeNames The list of all model list attributes (including registered strategies).\r\n * @param documentListEditing The document list editing plugin.\r\n */\r\nexport function reconvertItemsOnDataChange(model, editing, attributeNames, documentListEditing) {\r\n    return () => {\r\n        const changes = model.document.differ.getChanges();\r\n        const itemsToRefresh = [];\r\n        const itemToListHead = new Map();\r\n        const changedItems = new Set();\r\n        for (const entry of changes) {\r\n            if (entry.type == 'insert' && entry.name != '$text') {\r\n                findAndAddListHeadToMap(entry.position, itemToListHead);\r\n                // Insert of a non-list item.\r\n                if (!entry.attributes.has('listItemId')) {\r\n                    findAndAddListHeadToMap(entry.position.getShiftedBy(entry.length), itemToListHead);\r\n                }\r\n                else {\r\n                    changedItems.add(entry.position.nodeAfter);\r\n                }\r\n            }\r\n            // Removed list item.\r\n            else if (entry.type == 'remove' && entry.attributes.has('listItemId')) {\r\n                findAndAddListHeadToMap(entry.position, itemToListHead);\r\n            }\r\n            // Changed list attribute.\r\n            else if (entry.type == 'attribute') {\r\n                const item = entry.range.start.nodeAfter;\r\n                if (attributeNames.includes(entry.attributeKey)) {\r\n                    findAndAddListHeadToMap(entry.range.start, itemToListHead);\r\n                    if (entry.attributeNewValue === null) {\r\n                        findAndAddListHeadToMap(entry.range.start.getShiftedBy(1), itemToListHead);\r\n                        // Check if paragraph should be converted from bogus to plain paragraph.\r\n                        if (doesItemParagraphRequiresRefresh(item)) {\r\n                            itemsToRefresh.push(item);\r\n                        }\r\n                    }\r\n                    else {\r\n                        changedItems.add(item);\r\n                    }\r\n                }\r\n                else if (isListItemBlock(item)) {\r\n                    // Some other attribute was changed on the list item,\r\n                    // check if paragraph does not need to be converted to bogus or back.\r\n                    if (doesItemParagraphRequiresRefresh(item)) {\r\n                        itemsToRefresh.push(item);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (const listHead of itemToListHead.values()) {\r\n            itemsToRefresh.push(...collectListItemsToRefresh(listHead, changedItems));\r\n        }\r\n        for (const item of new Set(itemsToRefresh)) {\r\n            editing.reconvertItem(item);\r\n        }\r\n    };\r\n    function collectListItemsToRefresh(listHead, changedItems) {\r\n        const itemsToRefresh = [];\r\n        const visited = new Set();\r\n        const stack = [];\r\n        for (const { node, previous } of iterateSiblingListBlocks(listHead, 'forward')) {\r\n            if (visited.has(node)) {\r\n                continue;\r\n            }\r\n            const itemIndent = node.getAttribute('listIndent');\r\n            // Current node is at the lower indent so trim the stack.\r\n            if (previous && itemIndent < previous.getAttribute('listIndent')) {\r\n                stack.length = itemIndent + 1;\r\n            }\r\n            // Update the stack for the current indent level.\r\n            stack[itemIndent] = Object.fromEntries(Array.from(node.getAttributes())\r\n                .filter(([key]) => attributeNames.includes(key)));\r\n            // Find all blocks of the current node.\r\n            const blocks = getListItemBlocks(node, { direction: 'forward' });\r\n            for (const block of blocks) {\r\n                visited.add(block);\r\n                // Check if bogus vs plain paragraph needs refresh.\r\n                if (doesItemParagraphRequiresRefresh(block, blocks)) {\r\n                    itemsToRefresh.push(block);\r\n                }\r\n                // Check if wrapping with UL, OL, LIs needs refresh.\r\n                else if (doesItemWrappingRequiresRefresh(block, stack, changedItems)) {\r\n                    itemsToRefresh.push(block);\r\n                }\r\n            }\r\n        }\r\n        return itemsToRefresh;\r\n    }\r\n    function doesItemParagraphRequiresRefresh(item, blocks) {\r\n        if (!item.is('element', 'paragraph')) {\r\n            return false;\r\n        }\r\n        const viewElement = editing.mapper.toViewElement(item);\r\n        if (!viewElement) {\r\n            return false;\r\n        }\r\n        const useBogus = shouldUseBogusParagraph(item, attributeNames, blocks);\r\n        if (useBogus && viewElement.is('element', 'p')) {\r\n            return true;\r\n        }\r\n        else if (!useBogus && viewElement.is('element', 'span')) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    function doesItemWrappingRequiresRefresh(item, stack, changedItems) {\r\n        // Items directly affected by some \"change\" don't need a refresh, they will be converted by their own changes.\r\n        if (changedItems.has(item)) {\r\n            return false;\r\n        }\r\n        const viewElement = editing.mapper.toViewElement(item);\r\n        let indent = stack.length - 1;\r\n        // Traverse down the stack to the root to verify if all ULs, OLs, and LIs are as expected.\r\n        for (let element = viewElement.parent; !element.is('editableElement'); element = element.parent) {\r\n            const isListItemElement = isListItemView(element);\r\n            const isListElement = isListView(element);\r\n            if (!isListElement && !isListItemElement) {\r\n                continue;\r\n            }\r\n            const eventName = `checkAttributes:${isListItemElement ? 'item' : 'list'}`;\r\n            const needsRefresh = documentListEditing.fire(eventName, {\r\n                viewElement: element,\r\n                modelAttributes: stack[indent]\r\n            });\r\n            if (needsRefresh) {\r\n                break;\r\n            }\r\n            if (isListElement) {\r\n                indent--;\r\n                // Don't need to iterate further if we already know that the item is wrapped appropriately.\r\n                if (indent < 0) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\n/**\r\n * Returns the list item downcast converter.\r\n *\r\n * @internal\r\n * @param attributeNames A list of attribute names that should be converted if they are set.\r\n * @param strategies The strategies.\r\n * @param model The model.\r\n */\r\nexport function listItemDowncastConverter(attributeNames, strategies, model) {\r\n    const consumer = createAttributesConsumer(attributeNames);\r\n    return (evt, data, conversionApi) => {\r\n        const { writer, mapper, consumable } = conversionApi;\r\n        const listItem = data.item;\r\n        if (!attributeNames.includes(data.attributeKey)) {\r\n            return;\r\n        }\r\n        // Test if attributes on the converted items are not consumed.\r\n        if (!consumer(listItem, consumable)) {\r\n            return;\r\n        }\r\n        // Use positions mapping instead of mapper.toViewElement( listItem ) to find outermost view element.\r\n        // This is for cases when mapping is using inner view element like in the code blocks (pre > code).\r\n        const viewElement = findMappedViewElement(listItem, mapper, model);\r\n        // Unwrap element from current list wrappers.\r\n        unwrapListItemBlock(viewElement, writer);\r\n        // Then wrap them with the new list wrappers.\r\n        wrapListItemBlock(listItem, writer.createRangeOn(viewElement), strategies, writer);\r\n    };\r\n}\r\n/**\r\n * Returns the bogus paragraph view element creator. A bogus paragraph is used if a list item contains only a single block or nested list.\r\n *\r\n * @internal\r\n * @param attributeNames The list of all model list attributes (including registered strategies).\r\n */\r\nexport function bogusParagraphCreator(attributeNames, { dataPipeline } = {}) {\r\n    return (modelElement, { writer }) => {\r\n        // Convert only if a bogus paragraph should be used.\r\n        if (!shouldUseBogusParagraph(modelElement, attributeNames)) {\r\n            return null;\r\n        }\r\n        if (!dataPipeline) {\r\n            return writer.createContainerElement('span', { class: 'ck-list-bogus-paragraph' });\r\n        }\r\n        // Using `<p>` in case there are some markers on it and transparentRendering will render it anyway.\r\n        const viewElement = writer.createContainerElement('p');\r\n        writer.setCustomProperty('dataPipeline:transparentRendering', true, viewElement);\r\n        return viewElement;\r\n    };\r\n}\r\n/**\r\n * Helper for mapping mode to view elements. It's using positions mapping instead of mapper.toViewElement( element )\r\n * to find outermost view element. This is for cases when mapping is using inner view element like in the code blocks (pre > code).\r\n *\r\n * @internal\r\n * @param element The model element.\r\n * @param mapper The mapper instance.\r\n * @param model The model.\r\n */\r\nexport function findMappedViewElement(element, mapper, model) {\r\n    const modelRange = model.createRangeOn(element);\r\n    const viewRange = mapper.toViewRange(modelRange).getTrimmed();\r\n    return viewRange.getContainedElement();\r\n}\r\n// Unwraps all ol, ul, and li attribute elements that are wrapping the provided view element.\r\nfunction unwrapListItemBlock(viewElement, viewWriter) {\r\n    let attributeElement = viewElement.parent;\r\n    while (attributeElement.is('attributeElement') && ['ul', 'ol', 'li'].includes(attributeElement.name)) {\r\n        const parentElement = attributeElement.parent;\r\n        viewWriter.unwrap(viewWriter.createRangeOn(viewElement), attributeElement);\r\n        attributeElement = parentElement;\r\n    }\r\n}\r\n// Wraps the given list item with appropriate attribute elements for ul, ol, and li.\r\nfunction wrapListItemBlock(listItem, viewRange, strategies, writer) {\r\n    if (!listItem.hasAttribute('listIndent')) {\r\n        return;\r\n    }\r\n    const listItemIndent = listItem.getAttribute('listIndent');\r\n    let currentListItem = listItem;\r\n    for (let indent = listItemIndent; indent >= 0; indent--) {\r\n        const listItemViewElement = createListItemElement(writer, indent, currentListItem.getAttribute('listItemId'));\r\n        const listViewElement = createListElement(writer, indent, currentListItem.getAttribute('listType'));\r\n        for (const strategy of strategies) {\r\n            if (currentListItem.hasAttribute(strategy.attributeName)) {\r\n                strategy.setAttributeOnDowncast(writer, currentListItem.getAttribute(strategy.attributeName), strategy.scope == 'list' ? listViewElement : listItemViewElement);\r\n            }\r\n        }\r\n        viewRange = writer.wrap(viewRange, listItemViewElement);\r\n        viewRange = writer.wrap(viewRange, listViewElement);\r\n        if (indent == 0) {\r\n            break;\r\n        }\r\n        currentListItem = ListWalker.first(currentListItem, { lowerIndent: true });\r\n        // There is no list item with lower indent, this means this is a document fragment containing\r\n        // only a part of nested list (like copy to clipboard) so we don't need to try to wrap it further.\r\n        if (!currentListItem) {\r\n            break;\r\n        }\r\n    }\r\n}\r\n// Returns the function that is responsible for consuming attributes that are set on the model node.\r\nfunction createAttributesConsumer(attributeNames) {\r\n    return (node, consumable) => {\r\n        const events = [];\r\n        // Collect all set attributes that are triggering conversion.\r\n        for (const attributeName of attributeNames) {\r\n            if (node.hasAttribute(attributeName)) {\r\n                events.push(`attribute:${attributeName}`);\r\n            }\r\n        }\r\n        if (!events.every(event => consumable.test(node, event) !== false)) {\r\n            return false;\r\n        }\r\n        events.forEach(event => consumable.consume(node, event));\r\n        return true;\r\n    };\r\n}\r\n// Whether the given item should be rendered as a bogus paragraph.\r\nfunction shouldUseBogusParagraph(item, attributeNames, blocks = getAllListItemBlocks(item)) {\r\n    if (!isListItemBlock(item)) {\r\n        return false;\r\n    }\r\n    for (const attributeKey of item.getAttributeKeys()) {\r\n        // Ignore selection attributes stored on block elements.\r\n        if (attributeKey.startsWith('selection:')) {\r\n            continue;\r\n        }\r\n        // Don't use bogus paragraph if there are attributes from other features.\r\n        if (!attributeNames.includes(attributeKey)) {\r\n            return false;\r\n        }\r\n    }\r\n    return blocks.length < 2;\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./documentlist.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./list.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlist/documentlistediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Delete } from 'ckeditor5/src/typing';\r\nimport { Enter } from 'ckeditor5/src/enter';\r\nimport { CKEditorError } from 'ckeditor5/src/utils';\r\nimport DocumentListIndentCommand from './documentlistindentcommand';\r\nimport DocumentListCommand from './documentlistcommand';\r\nimport DocumentListMergeCommand from './documentlistmergecommand';\r\nimport DocumentListSplitCommand from './documentlistsplitcommand';\r\nimport DocumentListUtils from './documentlistutils';\r\nimport { bogusParagraphCreator, listItemDowncastConverter, listItemUpcastConverter, listUpcastCleanList, reconvertItemsOnDataChange } from './converters';\r\nimport { findAndAddListHeadToMap, fixListIndents, fixListItemIds } from './utils/postfixers';\r\nimport { getAllListItemBlocks, isFirstBlockOfListItem, isLastBlockOfListItem, isSingleListItem, getSelectedBlockObject, isListItemBlock, removeListAttributes } from './utils/model';\r\nimport { getViewElementIdForListType, getViewElementNameForListType } from './utils/view';\r\nimport ListWalker, { iterateSiblingListBlocks, ListBlocksIterable } from './utils/listwalker';\r\nimport '../../theme/documentlist.css';\r\nimport '../../theme/list.css';\r\n/**\r\n * A list of base list model attributes.\r\n */\r\nconst LIST_BASE_ATTRIBUTES = ['listType', 'listIndent', 'listItemId'];\r\n/**\r\n * The editing part of the document-list feature. It handles creating, editing and removing lists and list items.\r\n */\r\nexport default class DocumentListEditing extends Plugin {\r\n    constructor() {\r\n        super(...arguments);\r\n        /**\r\n         * The list of registered downcast strategies.\r\n         */\r\n        this._downcastStrategies = [];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DocumentListEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Enter, Delete, DocumentListUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        if (editor.plugins.has('ListEditing')) {\r\n            /**\r\n             * The `DocumentList` feature can not be loaded together with the `List` plugin.\r\n             *\r\n             * @error document-list-feature-conflict\r\n             * @param conflictPlugin Name of the plugin.\r\n             */\r\n            throw new CKEditorError('document-list-feature-conflict', this, { conflictPlugin: 'ListEditing' });\r\n        }\r\n        model.schema.extend('$container', { allowAttributes: LIST_BASE_ATTRIBUTES });\r\n        model.schema.extend('$block', { allowAttributes: LIST_BASE_ATTRIBUTES });\r\n        model.schema.extend('$blockObject', { allowAttributes: LIST_BASE_ATTRIBUTES });\r\n        for (const attribute of LIST_BASE_ATTRIBUTES) {\r\n            model.schema.setAttributeProperties(attribute, {\r\n                copyOnReplace: true\r\n            });\r\n        }\r\n        // Register commands.\r\n        editor.commands.add('numberedList', new DocumentListCommand(editor, 'numbered'));\r\n        editor.commands.add('bulletedList', new DocumentListCommand(editor, 'bulleted'));\r\n        editor.commands.add('indentList', new DocumentListIndentCommand(editor, 'forward'));\r\n        editor.commands.add('outdentList', new DocumentListIndentCommand(editor, 'backward'));\r\n        editor.commands.add('mergeListItemBackward', new DocumentListMergeCommand(editor, 'backward'));\r\n        editor.commands.add('mergeListItemForward', new DocumentListMergeCommand(editor, 'forward'));\r\n        editor.commands.add('splitListItemBefore', new DocumentListSplitCommand(editor, 'before'));\r\n        editor.commands.add('splitListItemAfter', new DocumentListSplitCommand(editor, 'after'));\r\n        this._setupDeleteIntegration();\r\n        this._setupEnterIntegration();\r\n        this._setupTabIntegration();\r\n        this._setupClipboardIntegration();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const editor = this.editor;\r\n        const commands = editor.commands;\r\n        const indent = commands.get('indent');\r\n        const outdent = commands.get('outdent');\r\n        if (indent) {\r\n            // Priority is high due to integration with `IndentBlock` plugin. We want to indent list first and if it's not possible\r\n            // user can indent content with `IndentBlock` plugin.\r\n            indent.registerChildCommand(commands.get('indentList'), { priority: 'high' });\r\n        }\r\n        if (outdent) {\r\n            // Priority is lowest due to integration with `IndentBlock` and `IndentCode` plugins.\r\n            // First we want to allow user to outdent all indendations from other features then he can oudent list item.\r\n            outdent.registerChildCommand(commands.get('outdentList'), { priority: 'lowest' });\r\n        }\r\n        // Register conversion and model post-fixer after other plugins had a chance to register their attribute strategies.\r\n        this._setupModelPostFixing();\r\n        this._setupConversion();\r\n    }\r\n    /**\r\n     * Registers a downcast strategy.\r\n     *\r\n     * **Note**: Strategies must be registered in the `Plugin#init()` phase so that it can be applied\r\n     * in the `DocumentListEditing#afterInit()`.\r\n     *\r\n     * @param strategy The downcast strategy to register.\r\n     */\r\n    registerDowncastStrategy(strategy) {\r\n        this._downcastStrategies.push(strategy);\r\n    }\r\n    /**\r\n     * Returns list of model attribute names that should affect downcast conversion.\r\n     */\r\n    _getListAttributeNames() {\r\n        return [\r\n            ...LIST_BASE_ATTRIBUTES,\r\n            ...this._downcastStrategies.map(strategy => strategy.attributeName)\r\n        ];\r\n    }\r\n    /**\r\n     * Attaches the listener to the {@link module:engine/view/document~Document#event:delete} event and handles backspace/delete\r\n     * keys in and around document lists.\r\n     */\r\n    _setupDeleteIntegration() {\r\n        const editor = this.editor;\r\n        const mergeBackwardCommand = editor.commands.get('mergeListItemBackward');\r\n        const mergeForwardCommand = editor.commands.get('mergeListItemForward');\r\n        this.listenTo(editor.editing.view.document, 'delete', (evt, data) => {\r\n            const selection = editor.model.document.selection;\r\n            // Let the Widget plugin take care of block widgets while deleting (https://github.com/ckeditor/ckeditor5/issues/11346).\r\n            if (getSelectedBlockObject(editor.model)) {\r\n                return;\r\n            }\r\n            editor.model.change(() => {\r\n                const firstPosition = selection.getFirstPosition();\r\n                if (selection.isCollapsed && data.direction == 'backward') {\r\n                    if (!firstPosition.isAtStart) {\r\n                        return;\r\n                    }\r\n                    const positionParent = firstPosition.parent;\r\n                    if (!isListItemBlock(positionParent)) {\r\n                        return;\r\n                    }\r\n                    const previousBlock = ListWalker.first(positionParent, {\r\n                        sameAttributes: 'listType',\r\n                        sameIndent: true\r\n                    });\r\n                    // Outdent the first block of a first list item.\r\n                    if (!previousBlock && positionParent.getAttribute('listIndent') === 0) {\r\n                        if (!isLastBlockOfListItem(positionParent)) {\r\n                            editor.execute('splitListItemAfter');\r\n                        }\r\n                        editor.execute('outdentList');\r\n                    }\r\n                    // Merge block with previous one (on the block level or on the content level).\r\n                    else {\r\n                        if (!mergeBackwardCommand.isEnabled) {\r\n                            return;\r\n                        }\r\n                        mergeBackwardCommand.execute({\r\n                            shouldMergeOnBlocksContentLevel: shouldMergeOnBlocksContentLevel(editor.model, 'backward')\r\n                        });\r\n                    }\r\n                    data.preventDefault();\r\n                    evt.stop();\r\n                }\r\n                // Non-collapsed selection or forward delete.\r\n                else {\r\n                    // Collapsed selection should trigger forward merging only if at the end of a block.\r\n                    if (selection.isCollapsed && !selection.getLastPosition().isAtEnd) {\r\n                        return;\r\n                    }\r\n                    if (!mergeForwardCommand.isEnabled) {\r\n                        return;\r\n                    }\r\n                    mergeForwardCommand.execute({\r\n                        shouldMergeOnBlocksContentLevel: shouldMergeOnBlocksContentLevel(editor.model, 'forward')\r\n                    });\r\n                    data.preventDefault();\r\n                    evt.stop();\r\n                }\r\n            });\r\n        }, { context: 'li' });\r\n    }\r\n    /**\r\n     * Attaches a listener to the {@link module:engine/view/document~Document#event:enter} event and handles enter key press\r\n     * in document lists.\r\n     */\r\n    _setupEnterIntegration() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const commands = editor.commands;\r\n        const enterCommand = commands.get('enter');\r\n        // Overwrite the default Enter key behavior: outdent or split the list in certain cases.\r\n        this.listenTo(editor.editing.view.document, 'enter', (evt, data) => {\r\n            const doc = model.document;\r\n            const positionParent = doc.selection.getFirstPosition().parent;\r\n            if (doc.selection.isCollapsed &&\r\n                isListItemBlock(positionParent) &&\r\n                positionParent.isEmpty &&\r\n                !data.isSoft) {\r\n                const isFirstBlock = isFirstBlockOfListItem(positionParent);\r\n                const isLastBlock = isLastBlockOfListItem(positionParent);\r\n                // * a      →      * a\r\n                // * []     →      []\r\n                if (isFirstBlock && isLastBlock) {\r\n                    editor.execute('outdentList');\r\n                    data.preventDefault();\r\n                    evt.stop();\r\n                }\r\n                // * []     →      * []\r\n                //   a      →      * a\r\n                else if (isFirstBlock && !isLastBlock) {\r\n                    editor.execute('splitListItemAfter');\r\n                    data.preventDefault();\r\n                    evt.stop();\r\n                }\r\n                // * a      →      * a\r\n                //   []     →      * []\r\n                else if (isLastBlock) {\r\n                    editor.execute('splitListItemBefore');\r\n                    data.preventDefault();\r\n                    evt.stop();\r\n                }\r\n            }\r\n        }, { context: 'li' });\r\n        // In some cases, after the default block splitting, we want to modify the new block to become a new list item\r\n        // instead of an additional block in the same list item.\r\n        this.listenTo(enterCommand, 'afterExecute', () => {\r\n            const splitCommand = commands.get('splitListItemBefore');\r\n            // The command has not refreshed because the change block related to EnterCommand#execute() is not over yet.\r\n            // Let's keep it up to date and take advantage of DocumentListSplitCommand#isEnabled.\r\n            splitCommand.refresh();\r\n            if (!splitCommand.isEnabled) {\r\n                return;\r\n            }\r\n            const doc = editor.model.document;\r\n            const positionParent = doc.selection.getLastPosition().parent;\r\n            const listItemBlocks = getAllListItemBlocks(positionParent);\r\n            // Keep in mind this split happens after the default enter handler was executed. For instance:\r\n            //\r\n            // │       Initial state       │    After default enter    │   Here in #afterExecute   │\r\n            // ├───────────────────────────┼───────────────────────────┼───────────────────────────┤\r\n            // │          * a[]            │           * a             │           * a             │\r\n            // │                           │             []            │           * []            │\r\n            if (listItemBlocks.length === 2) {\r\n                splitCommand.execute();\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Attaches a listener to the {@link module:engine/view/document~Document#event:tab} event and handles tab key and tab+shift keys\r\n     * presses in document lists.\r\n     */\r\n    _setupTabIntegration() {\r\n        const editor = this.editor;\r\n        this.listenTo(editor.editing.view.document, 'tab', (evt, data) => {\r\n            const commandName = data.shiftKey ? 'outdentList' : 'indentList';\r\n            const command = this.editor.commands.get(commandName);\r\n            if (command.isEnabled) {\r\n                editor.execute(commandName);\r\n                data.stopPropagation();\r\n                data.preventDefault();\r\n                evt.stop();\r\n            }\r\n        }, { context: 'li' });\r\n    }\r\n    /**\r\n     * Registers the conversion helpers for the document-list feature.\r\n     */\r\n    _setupConversion() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const attributeNames = this._getListAttributeNames();\r\n        editor.conversion.for('upcast')\r\n            .elementToElement({ view: 'li', model: 'paragraph' })\r\n            .add(dispatcher => {\r\n            dispatcher.on('element:li', listItemUpcastConverter());\r\n            dispatcher.on('element:ul', listUpcastCleanList(), { priority: 'high' });\r\n            dispatcher.on('element:ol', listUpcastCleanList(), { priority: 'high' });\r\n        });\r\n        editor.conversion.for('editingDowncast')\r\n            .elementToElement({\r\n            model: 'paragraph',\r\n            view: bogusParagraphCreator(attributeNames),\r\n            converterPriority: 'high'\r\n        });\r\n        editor.conversion.for('dataDowncast')\r\n            .elementToElement({\r\n            model: 'paragraph',\r\n            view: bogusParagraphCreator(attributeNames, { dataPipeline: true }),\r\n            converterPriority: 'high'\r\n        });\r\n        editor.conversion.for('downcast')\r\n            .add(dispatcher => {\r\n            dispatcher.on('attribute', listItemDowncastConverter(attributeNames, this._downcastStrategies, model));\r\n        });\r\n        this.listenTo(model.document, 'change:data', reconvertItemsOnDataChange(model, editor.editing, attributeNames, this), { priority: 'high' });\r\n        // For LI verify if an ID of the attribute element is correct.\r\n        this.on('checkAttributes:item', (evt, { viewElement, modelAttributes }) => {\r\n            if (viewElement.id != modelAttributes.listItemId) {\r\n                evt.return = true;\r\n                evt.stop();\r\n            }\r\n        });\r\n        // For UL and OL check if the name and ID of element is correct.\r\n        this.on('checkAttributes:list', (evt, { viewElement, modelAttributes }) => {\r\n            if (viewElement.name != getViewElementNameForListType(modelAttributes.listType) ||\r\n                viewElement.id != getViewElementIdForListType(modelAttributes.listType, modelAttributes.listIndent)) {\r\n                evt.return = true;\r\n                evt.stop();\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Registers model post-fixers.\r\n     */\r\n    _setupModelPostFixing() {\r\n        const model = this.editor.model;\r\n        const attributeNames = this._getListAttributeNames();\r\n        // Register list fixing.\r\n        // First the low level handler.\r\n        model.document.registerPostFixer(writer => modelChangePostFixer(model, writer, attributeNames, this));\r\n        // Then the callbacks for the specific lists.\r\n        // The indentation fixing must be the first one...\r\n        this.on('postFixer', (evt, { listNodes, writer }) => {\r\n            evt.return = fixListIndents(listNodes, writer) || evt.return;\r\n        }, { priority: 'high' });\r\n        // ...then the item ids... and after that other fixers that rely on the correct indentation and ids.\r\n        this.on('postFixer', (evt, { listNodes, writer, seenIds }) => {\r\n            evt.return = fixListItemIds(listNodes, seenIds, writer) || evt.return;\r\n        }, { priority: 'high' });\r\n    }\r\n    /**\r\n     * Integrates the feature with the clipboard via {@link module:engine/model/model~Model#insertContent} and\r\n     * {@link module:engine/model/model~Model#getSelectedContent}.\r\n     */\r\n    _setupClipboardIntegration() {\r\n        const model = this.editor.model;\r\n        this.listenTo(model, 'insertContent', createModelIndentPasteFixer(model), { priority: 'high' });\r\n        // To enhance the UX, the editor should not copy list attributes to the clipboard if the selection\r\n        // started and ended in the same list item.\r\n        //\r\n        // If the selection was enclosed in a single list item, there is a good chance the user did not want it\r\n        // copied as a list item but plain blocks.\r\n        //\r\n        // This avoids pasting orphaned list items instead of paragraphs, for instance, straight into the root.\r\n        //\r\n        //\t                       ┌─────────────────────┬───────────────────┐\r\n        //\t                       │ Selection           │ Clipboard content │\r\n        //\t                       ├─────────────────────┼───────────────────┤\r\n        //\t                       │ [* <Widget />]      │ <Widget />        │\r\n        //\t                       ├─────────────────────┼───────────────────┤\r\n        //\t                       │ [* Foo]             │ Foo               │\r\n        //\t                       ├─────────────────────┼───────────────────┤\r\n        //\t                       │ * Foo [bar] baz     │ bar               │\r\n        //\t                       ├─────────────────────┼───────────────────┤\r\n        //\t                       │ * Fo[o              │ o                 │\r\n        //\t                       │   ba]r              │ ba                │\r\n        //\t                       ├─────────────────────┼───────────────────┤\r\n        //\t                       │ * Fo[o              │ * o               │\r\n        //\t                       │ * ba]r              │ * ba              │\r\n        //\t                       ├─────────────────────┼───────────────────┤\r\n        //\t                       │ [* Foo              │ * Foo             │\r\n        //\t                       │  * bar]             │ * bar             │\r\n        //\t                       └─────────────────────┴───────────────────┘\r\n        //\r\n        // See https://github.com/ckeditor/ckeditor5/issues/11608.\r\n        this.listenTo(model, 'getSelectedContent', (evt, [selection]) => {\r\n            const isSingleListItemSelected = isSingleListItem(Array.from(selection.getSelectedBlocks()));\r\n            if (isSingleListItemSelected) {\r\n                model.change(writer => removeListAttributes(Array.from(evt.return.getChildren()), writer));\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Post-fixer that reacts to changes on document and fixes incorrect model states (invalid `listItemId` and `listIndent` values).\r\n *\r\n * In the example below, there is a correct list structure.\r\n * Then the middle element is removed so the list structure will become incorrect:\r\n *\r\n * ```xml\r\n * <paragraph listType=\"bulleted\" listItemId=\"a\" listIndent=0>Item 1</paragraph>\r\n * <paragraph listType=\"bulleted\" listItemId=\"b\" listIndent=1>Item 2</paragraph>   <--- this is removed.\r\n * <paragraph listType=\"bulleted\" listItemId=\"c\" listIndent=2>Item 3</paragraph>\r\n * ```\r\n *\r\n * The list structure after the middle element is removed:\r\n *\r\n * ```xml\r\n * <paragraph listType=\"bulleted\" listItemId=\"a\" listIndent=0>Item 1</paragraph>\r\n * <paragraph listType=\"bulleted\" listItemId=\"c\" listIndent=2>Item 3</paragraph>\r\n * ```\r\n *\r\n * Should become:\r\n *\r\n * ```xml\r\n * <paragraph listType=\"bulleted\" listItemId=\"a\" listIndent=0>Item 1</paragraph>\r\n * <paragraph listType=\"bulleted\" listItemId=\"c\" listIndent=1>Item 3</paragraph>   <--- note that indent got post-fixed.\r\n * ```\r\n *\r\n * @param model The data model.\r\n * @param writer The writer to do changes with.\r\n * @param attributeNames The list of all model list attributes (including registered strategies).\r\n * @param documentListEditing The document list editing plugin.\r\n * @returns `true` if any change has been applied, `false` otherwise.\r\n */\r\nfunction modelChangePostFixer(model, writer, attributeNames, documentListEditing) {\r\n    const changes = model.document.differ.getChanges();\r\n    const itemToListHead = new Map();\r\n    let applied = false;\r\n    for (const entry of changes) {\r\n        if (entry.type == 'insert' && entry.name != '$text') {\r\n            const item = entry.position.nodeAfter;\r\n            // Remove attributes in case of renamed element.\r\n            if (!model.schema.checkAttribute(item, 'listItemId')) {\r\n                for (const attributeName of Array.from(item.getAttributeKeys())) {\r\n                    if (attributeNames.includes(attributeName)) {\r\n                        writer.removeAttribute(attributeName, item);\r\n                        applied = true;\r\n                    }\r\n                }\r\n            }\r\n            findAndAddListHeadToMap(entry.position, itemToListHead);\r\n            // Insert of a non-list item - check if there is a list after it.\r\n            if (!entry.attributes.has('listItemId')) {\r\n                findAndAddListHeadToMap(entry.position.getShiftedBy(entry.length), itemToListHead);\r\n            }\r\n            // Check if there is no nested list.\r\n            for (const { item: innerItem, previousPosition } of model.createRangeIn(item)) {\r\n                if (isListItemBlock(innerItem)) {\r\n                    findAndAddListHeadToMap(previousPosition, itemToListHead);\r\n                }\r\n            }\r\n        }\r\n        // Removed list item or block adjacent to a list.\r\n        else if (entry.type == 'remove') {\r\n            findAndAddListHeadToMap(entry.position, itemToListHead);\r\n        }\r\n        // Changed list item indent or type.\r\n        else if (entry.type == 'attribute' && attributeNames.includes(entry.attributeKey)) {\r\n            findAndAddListHeadToMap(entry.range.start, itemToListHead);\r\n            if (entry.attributeNewValue === null) {\r\n                findAndAddListHeadToMap(entry.range.start.getShiftedBy(1), itemToListHead);\r\n            }\r\n        }\r\n    }\r\n    // Make sure that IDs are not shared by split list.\r\n    const seenIds = new Set();\r\n    for (const listHead of itemToListHead.values()) {\r\n        applied = documentListEditing.fire('postFixer', {\r\n            listNodes: new ListBlocksIterable(listHead),\r\n            listHead,\r\n            writer,\r\n            seenIds\r\n        }) || applied;\r\n    }\r\n    return applied;\r\n}\r\n/**\r\n * A fixer for pasted content that includes list items.\r\n *\r\n * It fixes indentation of pasted list items so the pasted items match correctly to the context they are pasted into.\r\n *\r\n * Example:\r\n *\r\n * ```xml\r\n * <paragraph listType=\"bulleted\" listItemId=\"a\" listIndent=0>A</paragraph>\r\n * <paragraph listType=\"bulleted\" listItemId=\"b\" listIndent=1>B^</paragraph>\r\n * // At ^ paste:  <paragraph listType=\"bulleted\" listItemId=\"x\" listIndent=4>X</paragraph>\r\n * //              <paragraph listType=\"bulleted\" listItemId=\"y\" listIndent=5>Y</paragraph>\r\n * <paragraph listType=\"bulleted\" listItemId=\"c\" listIndent=2>C</paragraph>\r\n * ```\r\n *\r\n * Should become:\r\n *\r\n * ```xml\r\n * <paragraph listType=\"bulleted\" listItemId=\"a\" listIndent=0>A</paragraph>\r\n * <paragraph listType=\"bulleted\" listItemId=\"b\" listIndent=1>BX</paragraph>\r\n * <paragraph listType=\"bulleted\" listItemId=\"y\" listIndent=2>Y/paragraph>\r\n * <paragraph listType=\"bulleted\" listItemId=\"c\" listIndent=2>C</paragraph>\r\n * ```\r\n */\r\nfunction createModelIndentPasteFixer(model) {\r\n    return (evt, [content, selectable]) => {\r\n        // Check whether inserted content starts from a `listItem`. If it does not, it means that there are some other\r\n        // elements before it and there is no need to fix indents, because even if we insert that content into a list,\r\n        // that list will be broken.\r\n        // Note: we also need to handle singular elements because inserting item with indent 0 into 0,1,[],2\r\n        // would create incorrect model.\r\n        const item = content.is('documentFragment') ? content.getChild(0) : content;\r\n        if (!isListItemBlock(item)) {\r\n            return;\r\n        }\r\n        let selection;\r\n        if (!selectable) {\r\n            selection = model.document.selection;\r\n        }\r\n        else {\r\n            selection = model.createSelection(selectable);\r\n        }\r\n        // Get a reference list item. Inserted list items will be fixed according to that item.\r\n        const pos = selection.getFirstPosition();\r\n        let refItem = null;\r\n        if (isListItemBlock(pos.parent)) {\r\n            refItem = pos.parent;\r\n        }\r\n        else if (isListItemBlock(pos.nodeBefore)) {\r\n            refItem = pos.nodeBefore;\r\n        }\r\n        // If there is `refItem` it means that we do insert list items into an existing list.\r\n        if (!refItem) {\r\n            return;\r\n        }\r\n        // First list item in `data` has indent equal to 0 (it is a first list item). It should have indent equal\r\n        // to the indent of reference item. We have to fix the first item and all of it's children and following siblings.\r\n        // Indent of all those items has to be adjusted to reference item.\r\n        const indentChange = refItem.getAttribute('listIndent') - item.getAttribute('listIndent');\r\n        // Fix only if there is anything to fix.\r\n        if (indentChange <= 0) {\r\n            return;\r\n        }\r\n        model.change(writer => {\r\n            // Adjust indent of all \"first\" list items in inserted data.\r\n            for (const { node } of iterateSiblingListBlocks(item, 'forward')) {\r\n                writer.setAttribute('listIndent', node.getAttribute('listIndent') + indentChange, node);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Decides whether the merge should be accompanied by the model's `deleteContent()`, for instance, to get rid of the inline\r\n * content in the selection or take advantage of the heuristics in `deleteContent()` that helps convert lists into paragraphs\r\n * in certain cases.\r\n */\r\nfunction shouldMergeOnBlocksContentLevel(model, direction) {\r\n    const selection = model.document.selection;\r\n    if (!selection.isCollapsed) {\r\n        return !getSelectedBlockObject(model);\r\n    }\r\n    if (direction === 'forward') {\r\n        return true;\r\n    }\r\n    const firstPosition = selection.getFirstPosition();\r\n    const positionParent = firstPosition.parent;\r\n    const previousSibling = positionParent.previousSibling;\r\n    if (model.schema.isObject(previousSibling)) {\r\n        return false;\r\n    }\r\n    if (previousSibling.isEmpty) {\r\n        return true;\r\n    }\r\n    return isSingleListItem([positionParent, previousSibling]);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { TreeWalker, getFillerOffset } from 'ckeditor5/src/engine';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\n/**\r\n * Creates a list item {@link module:engine/view/containerelement~ContainerElement}.\r\n *\r\n * @param writer The writer instance.\r\n */\r\nexport function createViewListItemElement(writer) {\r\n    const viewItem = writer.createContainerElement('li');\r\n    viewItem.getFillerOffset = getListItemFillerOffset;\r\n    return viewItem;\r\n}\r\n/**\r\n * Helper function that creates a `<ul><li></li></ul>` or (`<ol>`) structure out of the given `modelItem` model `listItem` element.\r\n * Then, it binds the created view list item (`<li>`) with the model `listItem` element.\r\n * The function then returns the created view list item (`<li>`).\r\n *\r\n * @param modelItem Model list item.\r\n * @param conversionApi Conversion interface.\r\n * @returns View list element.\r\n */\r\nexport function generateLiInUl(modelItem, conversionApi) {\r\n    const mapper = conversionApi.mapper;\r\n    const viewWriter = conversionApi.writer;\r\n    const listType = modelItem.getAttribute('listType') == 'numbered' ? 'ol' : 'ul';\r\n    const viewItem = createViewListItemElement(viewWriter);\r\n    const viewList = viewWriter.createContainerElement(listType, null);\r\n    viewWriter.insert(viewWriter.createPositionAt(viewList, 0), viewItem);\r\n    mapper.bindElements(modelItem, viewItem);\r\n    return viewItem;\r\n}\r\n/**\r\n * Helper function that inserts a view list at a correct place and merges it with its siblings.\r\n * It takes a model list item element (`modelItem`) and a corresponding view list item element (`injectedItem`). The view list item\r\n * should be in a view list element (`<ul>` or `<ol>`) and should be its only child.\r\n * See comments below to better understand the algorithm.\r\n *\r\n * @param modelItem Model list item.\r\n * @param injectedItem\r\n * @param conversionApi Conversion interface.\r\n * @param model The model instance.\r\n */\r\nexport function injectViewList(modelItem, injectedItem, conversionApi, model) {\r\n    const injectedList = injectedItem.parent;\r\n    const mapper = conversionApi.mapper;\r\n    const viewWriter = conversionApi.writer;\r\n    // The position where the view list will be inserted.\r\n    let insertPosition = mapper.toViewPosition(model.createPositionBefore(modelItem));\r\n    // 1. Find the previous list item that has the same or smaller indent. Basically we are looking for the first model item\r\n    // that is a \"parent\" or \"sibling\" of the injected model item.\r\n    // If there is no such list item, it means that the injected list item is the first item in \"its list\".\r\n    const refItem = getSiblingListItem(modelItem.previousSibling, {\r\n        sameIndent: true,\r\n        smallerIndent: true,\r\n        listIndent: modelItem.getAttribute('listIndent')\r\n    });\r\n    const prevItem = modelItem.previousSibling;\r\n    if (refItem && refItem.getAttribute('listIndent') == modelItem.getAttribute('listIndent')) {\r\n        // There is a list item with the same indent - we found the same-level sibling.\r\n        // Break the list after it. The inserted view item will be added in the broken space.\r\n        const viewItem = mapper.toViewElement(refItem);\r\n        insertPosition = viewWriter.breakContainer(viewWriter.createPositionAfter(viewItem));\r\n    }\r\n    else {\r\n        // There is no list item with the same indent. Check the previous model item.\r\n        if (prevItem && prevItem.name == 'listItem') {\r\n            // If it is a list item, it has to have a lower indent.\r\n            // It means that the inserted item should be added to it as its nested item.\r\n            insertPosition = mapper.toViewPosition(model.createPositionAt(prevItem, 'end'));\r\n            // There could be some not mapped elements (eg. span in to-do list) but we need to insert\r\n            // a nested list directly inside the li element.\r\n            const mappedViewAncestor = mapper.findMappedViewAncestor(insertPosition);\r\n            const nestedList = findNestedList(mappedViewAncestor);\r\n            // If there already is some nested list, then use it's position.\r\n            if (nestedList) {\r\n                insertPosition = viewWriter.createPositionBefore(nestedList);\r\n            }\r\n            else {\r\n                // Else just put new list on the end of list item content.\r\n                insertPosition = viewWriter.createPositionAt(mappedViewAncestor, 'end');\r\n            }\r\n        }\r\n        else {\r\n            // The previous item is not a list item (or does not exist at all).\r\n            // Just map the position and insert the view item at the mapped position.\r\n            insertPosition = mapper.toViewPosition(model.createPositionBefore(modelItem));\r\n        }\r\n    }\r\n    insertPosition = positionAfterUiElements(insertPosition);\r\n    // Insert the view item.\r\n    viewWriter.insert(insertPosition, injectedList);\r\n    // 2. Handle possible children of the injected model item.\r\n    if (prevItem && prevItem.name == 'listItem') {\r\n        const prevView = mapper.toViewElement(prevItem);\r\n        const walkerBoundaries = viewWriter.createRange(viewWriter.createPositionAt(prevView, 0), insertPosition);\r\n        const walker = walkerBoundaries.getWalker({ ignoreElementEnd: true });\r\n        for (const value of walker) {\r\n            if (value.item.is('element', 'li')) {\r\n                const breakPosition = viewWriter.breakContainer(viewWriter.createPositionBefore(value.item));\r\n                const viewList = value.item.parent;\r\n                const targetPosition = viewWriter.createPositionAt(injectedItem, 'end');\r\n                mergeViewLists(viewWriter, targetPosition.nodeBefore, targetPosition.nodeAfter);\r\n                viewWriter.move(viewWriter.createRangeOn(viewList), targetPosition);\r\n                // This is bad, but those lists will be removed soon anyway.\r\n                walker._position = breakPosition;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        const nextViewList = injectedList.nextSibling;\r\n        if (nextViewList && (nextViewList.is('element', 'ul') || nextViewList.is('element', 'ol'))) {\r\n            let lastSubChild = null;\r\n            for (const child of nextViewList.getChildren()) {\r\n                const modelChild = mapper.toModelElement(child);\r\n                if (modelChild &&\r\n                    modelChild.getAttribute('listIndent') > modelItem.getAttribute('listIndent')) {\r\n                    lastSubChild = child;\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n            if (lastSubChild) {\r\n                viewWriter.breakContainer(viewWriter.createPositionAfter(lastSubChild));\r\n                viewWriter.move(viewWriter.createRangeOn(lastSubChild.parent), viewWriter.createPositionAt(injectedItem, 'end'));\r\n            }\r\n        }\r\n    }\r\n    // Merge the inserted view list with its possible neighbor lists.\r\n    mergeViewLists(viewWriter, injectedList, injectedList.nextSibling);\r\n    mergeViewLists(viewWriter, injectedList.previousSibling, injectedList);\r\n}\r\nexport function mergeViewLists(viewWriter, firstList, secondList) {\r\n    // Check if two lists are going to be merged.\r\n    if (!firstList || !secondList || (firstList.name != 'ul' && firstList.name != 'ol')) {\r\n        return null;\r\n    }\r\n    // Both parameters are list elements, so compare types now.\r\n    if (firstList.name != secondList.name || firstList.getAttribute('class') !== secondList.getAttribute('class')) {\r\n        return null;\r\n    }\r\n    return viewWriter.mergeContainers(viewWriter.createPositionAfter(firstList));\r\n}\r\n/**\r\n * Helper function that for a given `view.Position`, returns a `view.Position` that is after all `view.UIElement`s that\r\n * are after the given position.\r\n *\r\n * For example:\r\n * `<container:p>foo^<ui:span></ui:span><ui:span></ui:span>bar</container:p>`\r\n * For position ^, the position before \"bar\" will be returned.\r\n *\r\n */\r\nexport function positionAfterUiElements(viewPosition) {\r\n    return viewPosition.getLastMatchingPosition(value => value.item.is('uiElement'));\r\n}\r\n/**\r\n * Helper function that searches for a previous list item sibling of a given model item that meets the given criteria\r\n * passed by the options object.\r\n *\r\n * @param options Search criteria.\r\n * @param options.sameIndent Whether the sought sibling should have the same indentation.\r\n * @param options.smallerIndent Whether the sought sibling should have a smaller indentation.\r\n * @param options.listIndent The reference indentation.\r\n * @param options.direction Walking direction.\r\n */\r\nexport function getSiblingListItem(modelItem, options) {\r\n    const sameIndent = !!options.sameIndent;\r\n    const smallerIndent = !!options.smallerIndent;\r\n    const indent = options.listIndent;\r\n    let item = modelItem;\r\n    while (item && item.name == 'listItem') {\r\n        const itemIndent = item.getAttribute('listIndent');\r\n        if ((sameIndent && indent == itemIndent) || (smallerIndent && indent > itemIndent)) {\r\n            return item;\r\n        }\r\n        if (options.direction === 'forward') {\r\n            item = item.nextSibling;\r\n        }\r\n        else {\r\n            item = item.previousSibling;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Helper method for creating a UI button and linking it with an appropriate command.\r\n *\r\n * @internal\r\n * @param editor The editor instance to which the UI component will be added.\r\n * @param commandName The name of the command.\r\n * @param label The button label.\r\n * @param icon The source of the icon.\r\n */\r\nexport function createUIComponent(editor, commandName, label, icon) {\r\n    editor.ui.componentFactory.add(commandName, locale => {\r\n        const command = editor.commands.get(commandName);\r\n        const buttonView = new ButtonView(locale);\r\n        buttonView.set({\r\n            label,\r\n            icon,\r\n            tooltip: true,\r\n            isToggleable: true\r\n        });\r\n        // Bind button model to command.\r\n        buttonView.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n        // Execute command.\r\n        buttonView.on('execute', () => {\r\n            editor.execute(commandName);\r\n            editor.editing.view.focus();\r\n        });\r\n        return buttonView;\r\n    });\r\n}\r\n/**\r\n * Returns a first list view element that is direct child of the given view element.\r\n */\r\nexport function findNestedList(viewElement) {\r\n    for (const node of viewElement.getChildren()) {\r\n        if (node.name == 'ul' || node.name == 'ol') {\r\n            return node;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns an array with all `listItem` elements that represent the same list.\r\n *\r\n * It means that values of `listIndent`, `listType`, `listStyle`, `listReversed` and `listStart` for all items are equal.\r\n *\r\n * Additionally, if the `position` is inside a list item, that list item will be returned as well.\r\n *\r\n * @param position Starting position.\r\n * @param direction Walking direction.\r\n */\r\nexport function getSiblingNodes(position, direction) {\r\n    const items = [];\r\n    const listItem = position.parent;\r\n    const walkerOptions = {\r\n        ignoreElementEnd: false,\r\n        startPosition: position,\r\n        shallow: true,\r\n        direction\r\n    };\r\n    const limitIndent = listItem.getAttribute('listIndent');\r\n    const nodes = [...new TreeWalker(walkerOptions)]\r\n        .filter(value => value.item.is('element'))\r\n        .map(value => value.item);\r\n    for (const element of nodes) {\r\n        // If found something else than `listItem`, we're out of the list scope.\r\n        if (!element.is('element', 'listItem')) {\r\n            break;\r\n        }\r\n        // If current parsed item has lower indent that element that the element that was a starting point,\r\n        // it means we left a nested list. Abort searching items.\r\n        //\r\n        // ■ List item 1.       [listIndent=0]\r\n        //     ○ List item 2.[] [listIndent=1], limitIndent = 1,\r\n        //     ○ List item 3.   [listIndent=1]\r\n        // ■ List item 4.       [listIndent=0]\r\n        //\r\n        // Abort searching when leave nested list.\r\n        if (element.getAttribute('listIndent') < limitIndent) {\r\n            break;\r\n        }\r\n        // ■ List item 1.[]     [listIndent=0] limitIndent = 0,\r\n        //     ○ List item 2.   [listIndent=1]\r\n        //     ○ List item 3.   [listIndent=1]\r\n        // ■ List item 4.       [listIndent=0]\r\n        //\r\n        // Ignore nested lists.\r\n        if (element.getAttribute('listIndent') > limitIndent) {\r\n            continue;\r\n        }\r\n        // ■ List item 1.[]  [listType=bulleted]\r\n        // 1. List item 2.   [listType=numbered]\r\n        // 2.List item 3.    [listType=numbered]\r\n        //\r\n        // Abort searching when found a different kind of a list.\r\n        if (element.getAttribute('listType') !== listItem.getAttribute('listType')) {\r\n            break;\r\n        }\r\n        // ■ List item 1.[]  [listType=bulleted]\r\n        // ■ List item 2.    [listType=bulleted]\r\n        // ○ List item 3.    [listType=bulleted]\r\n        // ○ List item 4.    [listType=bulleted]\r\n        //\r\n        // Abort searching when found a different list style,\r\n        if (element.getAttribute('listStyle') !== listItem.getAttribute('listStyle')) {\r\n            break;\r\n        }\r\n        // ... different direction\r\n        if (element.getAttribute('listReversed') !== listItem.getAttribute('listReversed')) {\r\n            break;\r\n        }\r\n        // ... and different start index\r\n        if (element.getAttribute('listStart') !== listItem.getAttribute('listStart')) {\r\n            break;\r\n        }\r\n        if (direction === 'backward') {\r\n            items.unshift(element);\r\n        }\r\n        else {\r\n            items.push(element);\r\n        }\r\n    }\r\n    return items;\r\n}\r\n/**\r\n * Returns an array with all `listItem` elements in the model selection.\r\n *\r\n * It returns all the items even if only a part of the list is selected, including items that belong to nested lists.\r\n * If no list is selected, it returns an empty array.\r\n * The order of the elements is not specified.\r\n *\r\n * @internal\r\n */\r\nexport function getSelectedListItems(model) {\r\n    const document = model.document;\r\n    // For all selected blocks find all list items that are being selected\r\n    // and update the `listStyle` attribute in those lists.\r\n    let listItems = [...document.selection.getSelectedBlocks()]\r\n        .filter(element => element.is('element', 'listItem'))\r\n        .map(element => {\r\n        const position = model.change(writer => writer.createPositionAt(element, 0));\r\n        return [\r\n            ...getSiblingNodes(position, 'backward'),\r\n            ...getSiblingNodes(position, 'forward')\r\n        ];\r\n    })\r\n        .flat();\r\n    // Since `getSelectedBlocks()` can return items that belong to the same list, and\r\n    // `getSiblingNodes()` returns the entire list, we need to remove duplicated items.\r\n    listItems = [...new Set(listItems)];\r\n    return listItems;\r\n}\r\nconst BULLETED_LIST_STYLE_TYPES = ['disc', 'circle', 'square'];\r\n// There's a lot of them (https://www.w3.org/TR/css-counter-styles-3/#typedef-counter-style).\r\n// Let's support only those that can be selected by ListPropertiesUI.\r\nconst NUMBERED_LIST_STYLE_TYPES = [\r\n    'decimal',\r\n    'decimal-leading-zero',\r\n    'lower-roman',\r\n    'upper-roman',\r\n    'lower-latin',\r\n    'upper-latin'\r\n];\r\n/**\r\n * Checks whether the given list-style-type is supported by numbered or bulleted list.\r\n */\r\nexport function getListTypeFromListStyleType(listStyleType) {\r\n    if (BULLETED_LIST_STYLE_TYPES.includes(listStyleType)) {\r\n        return 'bulleted';\r\n    }\r\n    if (NUMBERED_LIST_STYLE_TYPES.includes(listStyleType)) {\r\n        return 'numbered';\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Implementation of getFillerOffset for view list item element.\r\n *\r\n * @returns Block filler offset or `null` if block filler is not needed.\r\n */\r\nfunction getListItemFillerOffset() {\r\n    const hasOnlyLists = !this.isEmpty && (this.getChild(0).name == 'ul' || this.getChild(0).name == 'ol');\r\n    if (this.isEmpty || hasOnlyLists) {\r\n        return 0;\r\n    }\r\n    return getFillerOffset.call(this);\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/list/listui\r\n */\r\nimport { createUIComponent } from './utils';\r\nimport numberedListIcon from '../../theme/icons/numberedlist.svg';\r\nimport bulletedListIcon from '../../theme/icons/bulletedlist.svg';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\n/**\r\n * The list UI feature. It introduces the `'numberedList'` and `'bulletedList'` buttons that\r\n * allow to convert paragraphs to and from list items and indent or outdent them.\r\n */\r\nexport default class ListUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ListUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const t = this.editor.t;\r\n        // Create two buttons and link them with numberedList and bulletedList commands.\r\n        createUIComponent(this.editor, 'numberedList', t('Numbered List'), numberedListIcon);\r\n        createUIComponent(this.editor, 'bulletedList', t('Bulleted List'), bulletedListIcon);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlist\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport DocumentListEditing from './documentlist/documentlistediting';\r\nimport ListUI from './list/listui';\r\n/**\r\n * The document list feature.\r\n *\r\n * This is a \"glue\" plugin that loads the {@link module:list/documentlist/documentlistediting~DocumentListEditing document list\r\n * editing feature} and {@link module:list/list/listui~ListUI list UI feature}.\r\n */\r\nexport default class DocumentList extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DocumentListEditing, ListUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DocumentList';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlistproperties/documentliststartcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\nimport { expandListBlocksToCompleteList, isListItemBlock } from '../documentlist/utils/model';\r\n/**\r\n * The list start index command. It changes the `listStart` attribute of the selected list items,\r\n * letting the user to choose the starting point of an ordered list.\r\n * It is used by the {@link module:list/documentlistproperties~DocumentListProperties list properties feature}.\r\n */\r\nexport default class DocumentListStartCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const value = this._getValue();\r\n        this.value = value;\r\n        this.isEnabled = value != null;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options.startIndex The list start index.\r\n     */\r\n    execute({ startIndex = 1 } = {}) {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        let blocks = Array.from(document.selection.getSelectedBlocks())\r\n            .filter(block => isListItemBlock(block) && block.getAttribute('listType') == 'numbered');\r\n        blocks = expandListBlocksToCompleteList(blocks);\r\n        model.change(writer => {\r\n            for (const block of blocks) {\r\n                writer.setAttribute('listStart', startIndex >= 0 ? startIndex : 1, block);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     *\r\n     * @returns The current value.\r\n     */\r\n    _getValue() {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        const block = first(document.selection.getSelectedBlocks());\r\n        if (block && isListItemBlock(block) && block.getAttribute('listType') == 'numbered') {\r\n            return block.getAttribute('listStart');\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n* @module list/documentlistproperties/utils/style\r\n*/\r\nconst LIST_STYLE_TO_LIST_TYPE = {};\r\nconst LIST_STYLE_TO_TYPE_ATTRIBUTE = {};\r\nconst TYPE_ATTRIBUTE_TO_LIST_STYLE = {};\r\nconst LIST_STYLE_TYPES = [\r\n    { listStyle: 'disc', typeAttribute: 'disc', listType: 'bulleted' },\r\n    { listStyle: 'circle', typeAttribute: 'circle', listType: 'bulleted' },\r\n    { listStyle: 'square', typeAttribute: 'square', listType: 'bulleted' },\r\n    { listStyle: 'decimal', typeAttribute: '1', listType: 'numbered' },\r\n    { listStyle: 'decimal-leading-zero', typeAttribute: null, listType: 'numbered' },\r\n    { listStyle: 'lower-roman', typeAttribute: 'i', listType: 'numbered' },\r\n    { listStyle: 'upper-roman', typeAttribute: 'I', listType: 'numbered' },\r\n    { listStyle: 'lower-alpha', typeAttribute: 'a', listType: 'numbered' },\r\n    { listStyle: 'upper-alpha', typeAttribute: 'A', listType: 'numbered' },\r\n    { listStyle: 'lower-latin', typeAttribute: 'a', listType: 'numbered' },\r\n    { listStyle: 'upper-latin', typeAttribute: 'A', listType: 'numbered' }\r\n];\r\nfor (const { listStyle, typeAttribute, listType } of LIST_STYLE_TYPES) {\r\n    LIST_STYLE_TO_LIST_TYPE[listStyle] = listType;\r\n    LIST_STYLE_TO_TYPE_ATTRIBUTE[listStyle] = typeAttribute;\r\n    if (typeAttribute) {\r\n        TYPE_ATTRIBUTE_TO_LIST_STYLE[typeAttribute] = listStyle;\r\n    }\r\n}\r\n/**\r\n * Gets all the style types supported by given list type.\r\n */\r\nexport function getAllSupportedStyleTypes() {\r\n    return LIST_STYLE_TYPES.map(x => x.listStyle);\r\n}\r\n/**\r\n * Checks whether the given list-style-type is supported by numbered or bulleted list.\r\n */\r\nexport function getListTypeFromListStyleType(listStyleType) {\r\n    return LIST_STYLE_TO_LIST_TYPE[listStyleType] || null;\r\n}\r\n/**\r\n * Converts `type` attribute of `<ul>` or `<ol>` elements to `list-style-type` equivalent.\r\n */\r\nexport function getListStyleTypeFromTypeAttribute(value) {\r\n    return TYPE_ATTRIBUTE_TO_LIST_STYLE[value] || null;\r\n}\r\n/**\r\n * Converts `list-style-type` style to `type` attribute of `<ul>` or `<ol>` elements.\r\n */\r\nexport function getTypeAttributeFromListStyleType(value) {\r\n    return LIST_STYLE_TO_TYPE_ATTRIBUTE[value] || null;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlistproperties/documentliststylecommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\nimport { expandListBlocksToCompleteList, isListItemBlock } from '../documentlist/utils/model';\r\nimport { getListTypeFromListStyleType } from './utils/style';\r\n/**\r\n * The list style command. It changes `listStyle` attribute of the selected list items,\r\n * letting the user choose styles for the list item markers.\r\n * It is used by the {@link module:list/documentlistproperties~DocumentListProperties list properties feature}.\r\n */\r\nexport default class DocumentListStyleCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param defaultType The list type that will be used by default if the value was not specified during\r\n     * the command execution.\r\n     * @param supportedTypes The list of supported style types by this command.\r\n     */\r\n    constructor(editor, defaultType, supportedTypes) {\r\n        super(editor);\r\n        this.defaultType = defaultType;\r\n        this._supportedTypes = supportedTypes;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.value = this._getValue();\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options.type The type of the list style, e.g. `'disc'` or `'square'`. If `null` is specified, the default\r\n     * style will be applied.\r\n     */\r\n    execute(options = {}) {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        model.change(writer => {\r\n            this._tryToConvertItemsToList(options);\r\n            let blocks = Array.from(document.selection.getSelectedBlocks())\r\n                .filter(block => block.hasAttribute('listType'));\r\n            if (!blocks.length) {\r\n                return;\r\n            }\r\n            blocks = expandListBlocksToCompleteList(blocks);\r\n            for (const block of blocks) {\r\n                writer.setAttribute('listStyle', options.type || this.defaultType, block);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks if the given style type is supported by this plugin.\r\n     */\r\n    isStyleTypeSupported(value) {\r\n        if (!this._supportedTypes) {\r\n            return true;\r\n        }\r\n        return this._supportedTypes.includes(value);\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     *\r\n     * @returns The current value.\r\n     */\r\n    _getValue() {\r\n        const listItem = first(this.editor.model.document.selection.getSelectedBlocks());\r\n        if (isListItemBlock(listItem)) {\r\n            return listItem.getAttribute('listStyle');\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        const editor = this.editor;\r\n        const numberedList = editor.commands.get('numberedList');\r\n        const bulletedList = editor.commands.get('bulletedList');\r\n        return numberedList.isEnabled || bulletedList.isEnabled;\r\n    }\r\n    /**\r\n     * Check if the provided list style is valid. Also change the selection to a list if it's not set yet.\r\n     *\r\n     * @param options.type The type of the list style. If `null` is specified, the function does nothing.\r\n    */\r\n    _tryToConvertItemsToList(options) {\r\n        if (!options.type) {\r\n            return;\r\n        }\r\n        const listType = getListTypeFromListStyleType(options.type);\r\n        if (!listType) {\r\n            return;\r\n        }\r\n        const editor = this.editor;\r\n        const commandName = `${listType}List`;\r\n        const command = editor.commands.get(commandName);\r\n        if (!command.value) {\r\n            editor.execute(commandName);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlistproperties/documentlistreversedcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\nimport { expandListBlocksToCompleteList, isListItemBlock } from '../documentlist/utils/model';\r\n/**\r\n * The list reversed command. It changes the `listReversed` attribute of the selected list items,\r\n * letting the user to choose the order of an ordered list.\r\n * It is used by the {@link module:list/documentlistproperties~DocumentListProperties list properties feature}.\r\n */\r\nexport default class DocumentListReversedCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const value = this._getValue();\r\n        this.value = value;\r\n        this.isEnabled = value != null;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options.reversed Whether the list should be reversed.\r\n     */\r\n    execute(options = {}) {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        let blocks = Array.from(document.selection.getSelectedBlocks())\r\n            .filter(block => isListItemBlock(block) && block.getAttribute('listType') == 'numbered');\r\n        blocks = expandListBlocksToCompleteList(blocks);\r\n        model.change(writer => {\r\n            for (const block of blocks) {\r\n                writer.setAttribute('listReversed', !!options.reversed, block);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     */\r\n    _getValue() {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        const block = first(document.selection.getSelectedBlocks());\r\n        if (isListItemBlock(block) && block.getAttribute('listType') == 'numbered') {\r\n            return block.getAttribute('listReversed');\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Returns a converter that consumes the `style`, `reversed`, and `start` attributes.\r\n * In `style`, it searches for the `list-style-type` definition.\r\n * If not found, the `\"default\"` value will be used.\r\n *\r\n * @internal\r\n * @param strategy\r\n */\r\nexport function listPropertiesUpcastConverter(strategy) {\r\n    return (evt, data, conversionApi) => {\r\n        const { writer, schema, consumable } = conversionApi;\r\n        // If there is no view consumable to consume, set the default attribute value to be able to reconvert nested lists on parent change.\r\n        // So abort converting if attribute was directly consumed.\r\n        if (consumable.test(data.viewItem, strategy.viewConsumables) === false) {\r\n            return;\r\n        }\r\n        if (!data.modelRange) {\r\n            Object.assign(data, conversionApi.convertChildren(data.viewItem, data.modelCursor));\r\n        }\r\n        let applied = false;\r\n        for (const item of data.modelRange.getItems({ shallow: true })) {\r\n            if (!schema.checkAttribute(item, strategy.attributeName)) {\r\n                continue;\r\n            }\r\n            if (!strategy.appliesToListItem(item)) {\r\n                continue;\r\n            }\r\n            // Set list attributes only on same level items, those nested deeper are already handled by the recursive conversion.\r\n            if (item.hasAttribute(strategy.attributeName)) {\r\n                continue;\r\n            }\r\n            writer.setAttribute(strategy.attributeName, strategy.getAttributeOnUpcast(data.viewItem), item);\r\n            applied = true;\r\n        }\r\n        if (applied) {\r\n            consumable.consume(data.viewItem, strategy.viewConsumables);\r\n        }\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlistproperties/documentlistpropertiesutils\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { getAllSupportedStyleTypes, getListStyleTypeFromTypeAttribute, getListTypeFromListStyleType, getTypeAttributeFromListStyleType } from './utils/style';\r\n/**\r\n * A set of helpers related to document lists.\r\n */\r\nexport default class DocumentListPropertiesUtils extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DocumentListPropertiesUtils';\r\n    }\r\n    /**\r\n     * Gets all the style types supported by given list type.\r\n     */\r\n    getAllSupportedStyleTypes() {\r\n        return getAllSupportedStyleTypes();\r\n    }\r\n    /**\r\n     * Checks whether the given list-style-type is supported by numbered or bulleted list.\r\n     */\r\n    getListTypeFromListStyleType(listStyleType) {\r\n        return getListTypeFromListStyleType(listStyleType);\r\n    }\r\n    /**\r\n     * Converts `type` attribute of `<ul>` or `<ol>` elements to `list-style-type` equivalent.\r\n     */\r\n    getListStyleTypeFromTypeAttribute(value) {\r\n        return getListStyleTypeFromTypeAttribute(value);\r\n    }\r\n    /**\r\n     * Converts `list-style-type` style to `type` attribute of `<ul>` or `<ol>` elements.\r\n     */\r\n    getTypeAttributeFromListStyleType(value) {\r\n        return getTypeAttributeFromListStyleType(value);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlistproperties/documentlistpropertiesediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport DocumentListEditing from '../documentlist/documentlistediting';\r\nimport DocumentListStartCommand from './documentliststartcommand';\r\nimport DocumentListStyleCommand from './documentliststylecommand';\r\nimport DocumentListReversedCommand from './documentlistreversedcommand';\r\nimport { listPropertiesUpcastConverter } from './converters';\r\nimport { getAllSupportedStyleTypes, getListTypeFromListStyleType, getListStyleTypeFromTypeAttribute, getTypeAttributeFromListStyleType } from './utils/style';\r\nimport DocumentListPropertiesUtils from './documentlistpropertiesutils';\r\nconst DEFAULT_LIST_TYPE = 'default';\r\n/**\r\n * The document list properties engine feature.\r\n *\r\n * It registers the `'listStyle'`, `'listReversed'` and `'listStart'` commands if they are enabled in the configuration.\r\n * Read more in {@link module:list/listconfig~ListPropertiesConfig}.\r\n */\r\nexport default class DocumentListPropertiesEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DocumentListEditing, DocumentListPropertiesUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DocumentListPropertiesEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define('list', {\r\n            properties: {\r\n                styles: true,\r\n                startIndex: false,\r\n                reversed: false\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const documentListEditing = editor.plugins.get(DocumentListEditing);\r\n        const enabledProperties = editor.config.get('list.properties');\r\n        const strategies = createAttributeStrategies(enabledProperties);\r\n        for (const strategy of strategies) {\r\n            strategy.addCommand(editor);\r\n            model.schema.extend('$container', { allowAttributes: strategy.attributeName });\r\n            model.schema.extend('$block', { allowAttributes: strategy.attributeName });\r\n            model.schema.extend('$blockObject', { allowAttributes: strategy.attributeName });\r\n            // Register downcast strategy.\r\n            documentListEditing.registerDowncastStrategy({\r\n                scope: 'list',\r\n                attributeName: strategy.attributeName,\r\n                setAttributeOnDowncast(writer, attributeValue, viewElement) {\r\n                    strategy.setAttributeOnDowncast(writer, attributeValue, viewElement);\r\n                }\r\n            });\r\n        }\r\n        // Set up conversion.\r\n        editor.conversion.for('upcast').add(dispatcher => {\r\n            for (const strategy of strategies) {\r\n                dispatcher.on('element:ol', listPropertiesUpcastConverter(strategy));\r\n                dispatcher.on('element:ul', listPropertiesUpcastConverter(strategy));\r\n            }\r\n        });\r\n        // Verify if the list view element (ul or ol) requires refreshing.\r\n        documentListEditing.on('checkAttributes:list', (evt, { viewElement, modelAttributes }) => {\r\n            for (const strategy of strategies) {\r\n                if (strategy.getAttributeOnUpcast(viewElement) != modelAttributes[strategy.attributeName]) {\r\n                    evt.return = true;\r\n                    evt.stop();\r\n                }\r\n            }\r\n        });\r\n        // Reset list properties after indenting list items.\r\n        this.listenTo(editor.commands.get('indentList'), 'afterExecute', (evt, changedBlocks) => {\r\n            model.change(writer => {\r\n                for (const node of changedBlocks) {\r\n                    for (const strategy of strategies) {\r\n                        if (strategy.appliesToListItem(node)) {\r\n                            // Just reset the attribute.\r\n                            // If there is a previous indented list that this node should be merged into,\r\n                            // the postfixer will unify all the attributes of both sub-lists.\r\n                            writer.setAttribute(strategy.attributeName, strategy.defaultValue, node);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        });\r\n        // Add or remove list properties attributes depending on the list type.\r\n        documentListEditing.on('postFixer', (evt, { listNodes, writer }) => {\r\n            for (const { node } of listNodes) {\r\n                for (const strategy of strategies) {\r\n                    // Check if attribute is valid.\r\n                    if (strategy.hasValidAttribute(node)) {\r\n                        continue;\r\n                    }\r\n                    // Add missing default property attributes...\r\n                    if (strategy.appliesToListItem(node)) {\r\n                        writer.setAttribute(strategy.attributeName, strategy.defaultValue, node);\r\n                    }\r\n                    // ...or remove invalid property attributes.\r\n                    else {\r\n                        writer.removeAttribute(strategy.attributeName, node);\r\n                    }\r\n                    evt.return = true;\r\n                }\r\n            }\r\n        });\r\n        // Make sure that all items in a single list (items at the same level & listType) have the same properties.\r\n        documentListEditing.on('postFixer', (evt, { listNodes, writer }) => {\r\n            const previousNodesByIndent = []; // Last seen nodes of lower indented lists.\r\n            for (const { node, previous } of listNodes) {\r\n                // For the first list block there is nothing to compare with.\r\n                if (!previous) {\r\n                    continue;\r\n                }\r\n                const nodeIndent = node.getAttribute('listIndent');\r\n                const previousNodeIndent = previous.getAttribute('listIndent');\r\n                let previousNodeInList = null; // It's like `previous` but has the same indent as current node.\r\n                // Let's find previous node for the same indent.\r\n                // We're going to need that when we get back to previous indent.\r\n                if (nodeIndent > previousNodeIndent) {\r\n                    previousNodesByIndent[previousNodeIndent] = previous;\r\n                }\r\n                // Restore the one for given indent.\r\n                else if (nodeIndent < previousNodeIndent) {\r\n                    previousNodeInList = previousNodesByIndent[nodeIndent];\r\n                    previousNodesByIndent.length = nodeIndent;\r\n                }\r\n                // Same indent.\r\n                else {\r\n                    previousNodeInList = previous;\r\n                }\r\n                // This is a first item of a nested list.\r\n                if (!previousNodeInList) {\r\n                    continue;\r\n                }\r\n                // This is a first block of a list of a different type.\r\n                if (previousNodeInList.getAttribute('listType') != node.getAttribute('listType')) {\r\n                    continue;\r\n                }\r\n                // Copy properties from the previous one.\r\n                for (const strategy of strategies) {\r\n                    const { attributeName } = strategy;\r\n                    if (!strategy.appliesToListItem(node)) {\r\n                        continue;\r\n                    }\r\n                    const value = previousNodeInList.getAttribute(attributeName);\r\n                    if (node.getAttribute(attributeName) != value) {\r\n                        writer.setAttribute(attributeName, value, node);\r\n                        evt.return = true;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n/**\r\n * Creates an array of strategies for dealing with enabled listItem attributes.\r\n */\r\nfunction createAttributeStrategies(enabledProperties) {\r\n    const strategies = [];\r\n    if (enabledProperties.styles) {\r\n        const useAttribute = typeof enabledProperties.styles == 'object' && enabledProperties.styles.useAttribute;\r\n        strategies.push({\r\n            attributeName: 'listStyle',\r\n            defaultValue: DEFAULT_LIST_TYPE,\r\n            viewConsumables: { styles: 'list-style-type' },\r\n            addCommand(editor) {\r\n                let supportedTypes = getAllSupportedStyleTypes();\r\n                if (useAttribute) {\r\n                    supportedTypes = supportedTypes.filter(styleType => !!getTypeAttributeFromListStyleType(styleType));\r\n                }\r\n                editor.commands.add('listStyle', new DocumentListStyleCommand(editor, DEFAULT_LIST_TYPE, supportedTypes));\r\n            },\r\n            appliesToListItem() {\r\n                return true;\r\n            },\r\n            hasValidAttribute(item) {\r\n                if (!item.hasAttribute('listStyle')) {\r\n                    return false;\r\n                }\r\n                const value = item.getAttribute('listStyle');\r\n                if (value == DEFAULT_LIST_TYPE) {\r\n                    return true;\r\n                }\r\n                return getListTypeFromListStyleType(value) == item.getAttribute('listType');\r\n            },\r\n            setAttributeOnDowncast(writer, listStyle, element) {\r\n                if (listStyle && listStyle !== DEFAULT_LIST_TYPE) {\r\n                    if (useAttribute) {\r\n                        const value = getTypeAttributeFromListStyleType(listStyle);\r\n                        if (value) {\r\n                            writer.setAttribute('type', value, element);\r\n                            return;\r\n                        }\r\n                    }\r\n                    else {\r\n                        writer.setStyle('list-style-type', listStyle, element);\r\n                        return;\r\n                    }\r\n                }\r\n                writer.removeStyle('list-style-type', element);\r\n                writer.removeAttribute('type', element);\r\n            },\r\n            getAttributeOnUpcast(listParent) {\r\n                const style = listParent.getStyle('list-style-type');\r\n                if (style) {\r\n                    return style;\r\n                }\r\n                const attribute = listParent.getAttribute('type');\r\n                if (attribute) {\r\n                    return getListStyleTypeFromTypeAttribute(attribute);\r\n                }\r\n                return DEFAULT_LIST_TYPE;\r\n            }\r\n        });\r\n    }\r\n    if (enabledProperties.reversed) {\r\n        strategies.push({\r\n            attributeName: 'listReversed',\r\n            defaultValue: false,\r\n            viewConsumables: { attributes: 'reversed' },\r\n            addCommand(editor) {\r\n                editor.commands.add('listReversed', new DocumentListReversedCommand(editor));\r\n            },\r\n            appliesToListItem(item) {\r\n                return item.getAttribute('listType') == 'numbered';\r\n            },\r\n            hasValidAttribute(item) {\r\n                return this.appliesToListItem(item) == item.hasAttribute('listReversed');\r\n            },\r\n            setAttributeOnDowncast(writer, listReversed, element) {\r\n                if (listReversed) {\r\n                    writer.setAttribute('reversed', 'reversed', element);\r\n                }\r\n                else {\r\n                    writer.removeAttribute('reversed', element);\r\n                }\r\n            },\r\n            getAttributeOnUpcast(listParent) {\r\n                return listParent.hasAttribute('reversed');\r\n            }\r\n        });\r\n    }\r\n    if (enabledProperties.startIndex) {\r\n        strategies.push({\r\n            attributeName: 'listStart',\r\n            defaultValue: 1,\r\n            viewConsumables: { attributes: 'start' },\r\n            addCommand(editor) {\r\n                editor.commands.add('listStart', new DocumentListStartCommand(editor));\r\n            },\r\n            appliesToListItem(item) {\r\n                return item.getAttribute('listType') == 'numbered';\r\n            },\r\n            hasValidAttribute(item) {\r\n                return this.appliesToListItem(item) == item.hasAttribute('listStart');\r\n            },\r\n            setAttributeOnDowncast(writer, listStart, element) {\r\n                if (listStart == 0 || listStart > 1) {\r\n                    writer.setAttribute('start', listStart, element);\r\n                }\r\n                else {\r\n                    writer.removeAttribute('start', element);\r\n                }\r\n            },\r\n            getAttributeOnUpcast(listParent) {\r\n                const startAttributeValue = listParent.getAttribute('start');\r\n                return startAttributeValue >= 0 ? startAttributeValue : 1;\r\n            }\r\n        });\r\n    }\r\n    return strategies;\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 10 10\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./collapsible.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { View, ButtonView } from 'ckeditor5/src/ui';\r\n// eslint-disable-next-line ckeditor5-rules/ckeditor-imports\r\nimport dropdownArrowIcon from '@ckeditor/ckeditor5-ui/theme/icons/dropdown-arrow.svg';\r\nimport '../../../theme/collapsible.css';\r\n/**\r\n * A collapsible UI component. Consists of a labeled button and a container which can be collapsed\r\n * by clicking the button. The collapsible container can be a host to other UI views.\r\n *\r\n * @internal\r\n */\r\nexport default class CollapsibleView extends View {\r\n    /**\r\n     * Creates an instance of the collapsible view.\r\n     *\r\n     * @param locale The {@link module:core/editor/editor~Editor#locale} instance.\r\n     * @param childViews An optional array of initial child views to be inserted into the collapsible.\r\n     */\r\n    constructor(locale, childViews) {\r\n        super(locale);\r\n        const bind = this.bindTemplate;\r\n        this.set('isCollapsed', false);\r\n        this.set('label', '');\r\n        this.buttonView = this._createButtonView();\r\n        this.children = this.createCollection();\r\n        this.set('_collapsibleAriaLabelUid', undefined);\r\n        if (childViews) {\r\n            this.children.addMany(childViews);\r\n        }\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-collapsible',\r\n                    bind.if('isCollapsed', 'ck-collapsible_collapsed')\r\n                ]\r\n            },\r\n            children: [\r\n                this.buttonView,\r\n                {\r\n                    tag: 'div',\r\n                    attributes: {\r\n                        class: [\r\n                            'ck',\r\n                            'ck-collapsible__children'\r\n                        ],\r\n                        role: 'region',\r\n                        hidden: bind.if('isCollapsed', 'hidden'),\r\n                        'aria-labelledby': bind.to('_collapsibleAriaLabelUid')\r\n                    },\r\n                    children: this.children\r\n                }\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        this._collapsibleAriaLabelUid = this.buttonView.labelView.element.id;\r\n    }\r\n    /**\r\n     * Creates the main {@link #buttonView} of the collapsible.\r\n     */\r\n    _createButtonView() {\r\n        const buttonView = new ButtonView(this.locale);\r\n        const bind = buttonView.bindTemplate;\r\n        buttonView.set({\r\n            withText: true,\r\n            icon: dropdownArrowIcon\r\n        });\r\n        buttonView.extendTemplate({\r\n            attributes: {\r\n                'aria-expanded': bind.to('isOn', value => String(value))\r\n            }\r\n        });\r\n        buttonView.bind('label').to(this);\r\n        buttonView.bind('isOn').to(this, 'isCollapsed', isCollapsed => !isCollapsed);\r\n        buttonView.on('execute', () => {\r\n            this.isCollapsed = !this.isCollapsed;\r\n        });\r\n        return buttonView;\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./listproperties.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/listproperties/ui/listpropertiesview\r\n */\r\nimport { View, ViewCollection, FocusCycler, SwitchButtonView, LabeledFieldView, createLabeledInputNumber, addKeyboardHandlingForGrid } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler, global } from 'ckeditor5/src/utils';\r\nimport CollapsibleView from './collapsibleview';\r\nimport '../../../theme/listproperties.css';\r\n/**\r\n * The list properties view to be displayed in the list dropdown.\r\n *\r\n * Contains a grid of available list styles and, for numbered list, also the list start index and reversed fields.\r\n *\r\n * @internal\r\n */\r\nexport default class ListPropertiesView extends View {\r\n    /**\r\n     * Creates an instance of the list properties view.\r\n     *\r\n     * @param locale The {@link module:core/editor/editor~Editor#locale} instance.\r\n     * @param options Options of the view.\r\n     * @param options.enabledProperties An object containing the configuration of enabled list property names.\r\n     * Allows conditional rendering the sub-components of the properties view.\r\n     * @param options.styleButtonViews A list of style buttons to be rendered\r\n     * inside the styles grid. The grid will not be rendered when `enabledProperties` does not include the `'styles'` key.\r\n     * @param options.styleGridAriaLabel An assistive technologies label set on the grid of styles (if the grid is rendered).\r\n     */\r\n    constructor(locale, { enabledProperties, styleButtonViews, styleGridAriaLabel }) {\r\n        super(locale);\r\n        /**\r\n         * A view that renders the grid of list styles.\r\n         */\r\n        this.stylesView = null;\r\n        /**\r\n         * A collapsible view that hosts additional list property fields ({@link #startIndexFieldView} and\r\n         * {@link #reversedSwitchButtonView}) to visually separate them from the {@link #stylesView grid of styles}.\r\n         *\r\n         * **Note**: Only present when:\r\n         * * the view represents **numbered** list properties,\r\n         * * and the {@link #stylesView} is rendered,\r\n         * * and either {@link #startIndexFieldView} or {@link #reversedSwitchButtonView} is rendered.\r\n         *\r\n         * @readonly\r\n         */\r\n        this.additionalPropertiesCollapsibleView = null;\r\n        /**\r\n         * A labeled number field allowing the user to set the start index of the list.\r\n         *\r\n         * **Note**: Only present when the view represents **numbered** list properties.\r\n         *\r\n         * @readonly\r\n         */\r\n        this.startIndexFieldView = null;\r\n        /**\r\n         * A switch button allowing the user to make the edited list reversed.\r\n         *\r\n         * **Note**: Only present when the view represents **numbered** list properties.\r\n         *\r\n         * @readonly\r\n         */\r\n        this.reversedSwitchButtonView = null;\r\n        /**\r\n         * Tracks information about the DOM focus in the view.\r\n         */\r\n        this.focusTracker = new FocusTracker();\r\n        /**\r\n         * An instance of the {@link module:utils/keystrokehandler~KeystrokeHandler}.\r\n         */\r\n        this.keystrokes = new KeystrokeHandler();\r\n        /**\r\n         * A collection of views that can be focused in the properties view.\r\n         */\r\n        this.focusables = new ViewCollection();\r\n        const elementCssClasses = [\r\n            'ck',\r\n            'ck-list-properties'\r\n        ];\r\n        this.children = this.createCollection();\r\n        this.focusCycler = new FocusCycler({\r\n            focusables: this.focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate #children backwards using the <kbd>Shift</kbd> + <kbd>Tab</kbd> keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate #children forwards using the <kbd>Tab</kbd> key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        // The rendering of the styles grid is conditional. When there is no styles grid, the view will render without collapsible\r\n        // for numbered list properties, hence simplifying the layout.\r\n        if (enabledProperties.styles) {\r\n            this.stylesView = this._createStylesView(styleButtonViews, styleGridAriaLabel);\r\n            this.children.add(this.stylesView);\r\n        }\r\n        else {\r\n            elementCssClasses.push('ck-list-properties_without-styles');\r\n        }\r\n        // The rendering of the numbered list property views is also conditional. It only makes sense for the numbered list\r\n        // dropdown. The unordered list does not have such properties.\r\n        if (enabledProperties.startIndex || enabledProperties.reversed) {\r\n            this._addNumberedListPropertyViews(enabledProperties);\r\n            elementCssClasses.push('ck-list-properties_with-numbered-properties');\r\n        }\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: elementCssClasses\r\n            },\r\n            children: this.children\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        if (this.stylesView) {\r\n            this.focusables.add(this.stylesView);\r\n            this.focusTracker.add(this.stylesView.element);\r\n            // Register the collapsible toggle button to the focus system.\r\n            if (this.startIndexFieldView || this.reversedSwitchButtonView) {\r\n                this.focusables.add(this.children.last.buttonView);\r\n                this.focusTracker.add(this.children.last.buttonView.element);\r\n            }\r\n            for (const item of this.stylesView.children) {\r\n                this.stylesView.focusTracker.add(item.element);\r\n            }\r\n            addKeyboardHandlingForGrid({\r\n                keystrokeHandler: this.stylesView.keystrokes,\r\n                focusTracker: this.stylesView.focusTracker,\r\n                gridItems: this.stylesView.children,\r\n                // Note: The styles view has a different number of columns depending on whether the other properties\r\n                // are enabled in the dropdown or not (https://github.com/ckeditor/ckeditor5/issues/12340)\r\n                numberOfColumns: () => global.window\r\n                    .getComputedStyle(this.stylesView.element)\r\n                    .getPropertyValue('grid-template-columns')\r\n                    .split(' ')\r\n                    .length,\r\n                uiLanguageDirection: this.locale && this.locale.uiLanguageDirection\r\n            });\r\n        }\r\n        if (this.startIndexFieldView) {\r\n            this.focusables.add(this.startIndexFieldView);\r\n            this.focusTracker.add(this.startIndexFieldView.element);\r\n            const stopPropagation = (data) => data.stopPropagation();\r\n            // Since the form is in the dropdown panel which is a child of the toolbar, the toolbar's\r\n            // keystroke handler would take over the key management in the input. We need to prevent\r\n            // this ASAP. Otherwise, the basic caret movement using the arrow keys will be impossible.\r\n            this.keystrokes.set('arrowright', stopPropagation);\r\n            this.keystrokes.set('arrowleft', stopPropagation);\r\n            this.keystrokes.set('arrowup', stopPropagation);\r\n            this.keystrokes.set('arrowdown', stopPropagation);\r\n        }\r\n        if (this.reversedSwitchButtonView) {\r\n            this.focusables.add(this.reversedSwitchButtonView);\r\n            this.focusTracker.add(this.reversedSwitchButtonView.element);\r\n        }\r\n        // Start listening for the keystrokes coming from #element.\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    focus() {\r\n        this.focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    focusLast() {\r\n        this.focusCycler.focusLast();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Creates the list styles grid.\r\n     *\r\n     * @param styleButtons Buttons to be placed in the grid.\r\n     * @param styleGridAriaLabel The assistive technology label of the grid.\r\n     */\r\n    _createStylesView(styleButtons, styleGridAriaLabel) {\r\n        const stylesView = new View(this.locale);\r\n        stylesView.children = stylesView.createCollection();\r\n        stylesView.children.addMany(styleButtons);\r\n        stylesView.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                'aria-label': styleGridAriaLabel,\r\n                class: [\r\n                    'ck',\r\n                    'ck-list-styles-list'\r\n                ]\r\n            },\r\n            children: stylesView.children\r\n        });\r\n        stylesView.children.delegate('execute').to(this);\r\n        stylesView.focus = function () {\r\n            this.children.first.focus();\r\n        };\r\n        stylesView.focusTracker = new FocusTracker();\r\n        stylesView.keystrokes = new KeystrokeHandler();\r\n        stylesView.render();\r\n        stylesView.keystrokes.listenTo(stylesView.element);\r\n        return stylesView;\r\n    }\r\n    /**\r\n     * Renders {@link #startIndexFieldView} and/or {@link #reversedSwitchButtonView} depending on the configuration of the properties view.\r\n     *\r\n     * @param enabledProperties An object containing the configuration of enabled list property names\r\n     * (see {@link #constructor}).\r\n     */\r\n    _addNumberedListPropertyViews(enabledProperties) {\r\n        const t = this.locale.t;\r\n        const numberedPropertyViews = [];\r\n        if (enabledProperties.startIndex) {\r\n            this.startIndexFieldView = this._createStartIndexField();\r\n            numberedPropertyViews.push(this.startIndexFieldView);\r\n        }\r\n        if (enabledProperties.reversed) {\r\n            this.reversedSwitchButtonView = this._createReversedSwitchButton();\r\n            numberedPropertyViews.push(this.reversedSwitchButtonView);\r\n        }\r\n        // When there are some style buttons, pack the numbered list properties into a collapsible to separate them.\r\n        if (enabledProperties.styles) {\r\n            this.additionalPropertiesCollapsibleView = new CollapsibleView(this.locale, numberedPropertyViews);\r\n            this.additionalPropertiesCollapsibleView.set({\r\n                label: t('List properties'),\r\n                isCollapsed: true\r\n            });\r\n            // Don't enable the collapsible view unless either start index or reversed field is enabled (e.g. when no list is selected).\r\n            this.additionalPropertiesCollapsibleView.buttonView.bind('isEnabled').toMany(numberedPropertyViews, 'isEnabled', (...areEnabled) => areEnabled.some(isEnabled => isEnabled));\r\n            // Automatically collapse the additional properties collapsible when either start index or reversed field gets disabled.\r\n            this.additionalPropertiesCollapsibleView.buttonView.on('change:isEnabled', (evt, data, isEnabled) => {\r\n                if (!isEnabled) {\r\n                    this.additionalPropertiesCollapsibleView.isCollapsed = true;\r\n                }\r\n            });\r\n            this.children.add(this.additionalPropertiesCollapsibleView);\r\n        }\r\n        else {\r\n            this.children.addMany(numberedPropertyViews);\r\n        }\r\n    }\r\n    /**\r\n     * Creates the list start index labeled field.\r\n     */\r\n    _createStartIndexField() {\r\n        const t = this.locale.t;\r\n        const startIndexFieldView = new LabeledFieldView(this.locale, createLabeledInputNumber);\r\n        startIndexFieldView.set({\r\n            label: t('Start at'),\r\n            class: 'ck-numbered-list-properties__start-index'\r\n        });\r\n        startIndexFieldView.fieldView.set({\r\n            min: 0,\r\n            step: 1,\r\n            value: 1,\r\n            inputMode: 'numeric'\r\n        });\r\n        startIndexFieldView.fieldView.on('input', () => {\r\n            const inputElement = startIndexFieldView.fieldView.element;\r\n            const startIndex = inputElement.valueAsNumber;\r\n            if (Number.isNaN(startIndex)) {\r\n                return;\r\n            }\r\n            if (!inputElement.checkValidity()) {\r\n                startIndexFieldView.errorText = t('Start index must be greater than 0.');\r\n            }\r\n            else {\r\n                this.fire('listStart', { startIndex });\r\n            }\r\n        });\r\n        return startIndexFieldView;\r\n    }\r\n    /**\r\n     * Creates the reversed list switch button.\r\n     */\r\n    _createReversedSwitchButton() {\r\n        const t = this.locale.t;\r\n        const reversedButtonView = new SwitchButtonView(this.locale);\r\n        reversedButtonView.set({\r\n            withText: true,\r\n            label: t('Reversed order'),\r\n            class: 'ck-numbered-list-properties__reversed-order'\r\n        });\r\n        reversedButtonView.delegate('execute').to(this, 'listReversed');\r\n        return reversedButtonView;\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./liststyles.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/listproperties/listpropertiesui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView, SplitButtonView, createDropdown, focusChildOnDropdownOpen } from 'ckeditor5/src/ui';\r\nimport ListPropertiesView from './ui/listpropertiesview';\r\nimport bulletedListIcon from '../../theme/icons/bulletedlist.svg';\r\nimport numberedListIcon from '../../theme/icons/numberedlist.svg';\r\nimport listStyleDiscIcon from '../../theme/icons/liststyledisc.svg';\r\nimport listStyleCircleIcon from '../../theme/icons/liststylecircle.svg';\r\nimport listStyleSquareIcon from '../../theme/icons/liststylesquare.svg';\r\nimport listStyleDecimalIcon from '../../theme/icons/liststyledecimal.svg';\r\nimport listStyleDecimalWithLeadingZeroIcon from '../../theme/icons/liststyledecimalleadingzero.svg';\r\nimport listStyleLowerRomanIcon from '../../theme/icons/liststylelowerroman.svg';\r\nimport listStyleUpperRomanIcon from '../../theme/icons/liststyleupperroman.svg';\r\nimport listStyleLowerLatinIcon from '../../theme/icons/liststylelowerlatin.svg';\r\nimport listStyleUpperLatinIcon from '../../theme/icons/liststyleupperlatin.svg';\r\nimport '../../theme/liststyles.css';\r\n/**\r\n * The list properties UI plugin. It introduces the extended `'bulletedList'` and `'numberedList'` toolbar\r\n * buttons that allow users to control such aspects of list as the marker, start index or order.\r\n *\r\n * **Note**: Buttons introduced by this plugin override implementations from the {@link module:list/list/listui~ListUI}\r\n * (because they share the same names).\r\n */\r\nexport default class ListPropertiesUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ListPropertiesUI';\r\n    }\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.locale.t;\r\n        const enabledProperties = editor.config.get('list.properties');\r\n        // Note: When this plugin does not register the \"bulletedList\" dropdown due to properties configuration,\r\n        // a simple button will be still registered under the same name by ListUI as a fallback. This should happen\r\n        // in most editor configuration because the List plugin automatically requires ListUI.\r\n        if (enabledProperties.styles) {\r\n            editor.ui.componentFactory.add('bulletedList', getDropdownViewCreator({\r\n                editor,\r\n                parentCommandName: 'bulletedList',\r\n                buttonLabel: t('Bulleted List'),\r\n                buttonIcon: bulletedListIcon,\r\n                styleGridAriaLabel: t('Bulleted list styles toolbar'),\r\n                styleDefinitions: [\r\n                    {\r\n                        label: t('Toggle the disc list style'),\r\n                        tooltip: t('Disc'),\r\n                        type: 'disc',\r\n                        icon: listStyleDiscIcon\r\n                    },\r\n                    {\r\n                        label: t('Toggle the circle list style'),\r\n                        tooltip: t('Circle'),\r\n                        type: 'circle',\r\n                        icon: listStyleCircleIcon\r\n                    },\r\n                    {\r\n                        label: t('Toggle the square list style'),\r\n                        tooltip: t('Square'),\r\n                        type: 'square',\r\n                        icon: listStyleSquareIcon\r\n                    }\r\n                ]\r\n            }));\r\n        }\r\n        // Note: When this plugin does not register the \"numberedList\" dropdown due to properties configuration,\r\n        // a simple button will be still registered under the same name by ListUI as a fallback. This should happen\r\n        // in most editor configuration because the List plugin automatically requires ListUI.\r\n        if (enabledProperties.styles || enabledProperties.startIndex || enabledProperties.reversed) {\r\n            editor.ui.componentFactory.add('numberedList', getDropdownViewCreator({\r\n                editor,\r\n                parentCommandName: 'numberedList',\r\n                buttonLabel: t('Numbered List'),\r\n                buttonIcon: numberedListIcon,\r\n                styleGridAriaLabel: t('Numbered list styles toolbar'),\r\n                styleDefinitions: [\r\n                    {\r\n                        label: t('Toggle the decimal list style'),\r\n                        tooltip: t('Decimal'),\r\n                        type: 'decimal',\r\n                        icon: listStyleDecimalIcon\r\n                    },\r\n                    {\r\n                        label: t('Toggle the decimal with leading zero list style'),\r\n                        tooltip: t('Decimal with leading zero'),\r\n                        type: 'decimal-leading-zero',\r\n                        icon: listStyleDecimalWithLeadingZeroIcon\r\n                    },\r\n                    {\r\n                        label: t('Toggle the lower–roman list style'),\r\n                        tooltip: t('Lower–roman'),\r\n                        type: 'lower-roman',\r\n                        icon: listStyleLowerRomanIcon\r\n                    },\r\n                    {\r\n                        label: t('Toggle the upper–roman list style'),\r\n                        tooltip: t('Upper-roman'),\r\n                        type: 'upper-roman',\r\n                        icon: listStyleUpperRomanIcon\r\n                    },\r\n                    {\r\n                        label: t('Toggle the lower–latin list style'),\r\n                        tooltip: t('Lower-latin'),\r\n                        type: 'lower-latin',\r\n                        icon: listStyleLowerLatinIcon\r\n                    },\r\n                    {\r\n                        label: t('Toggle the upper–latin list style'),\r\n                        tooltip: t('Upper-latin'),\r\n                        type: 'upper-latin',\r\n                        icon: listStyleUpperLatinIcon\r\n                    }\r\n                ]\r\n            }));\r\n        }\r\n    }\r\n}\r\n/**\r\n * A helper that returns a function that creates a split button with a toolbar in the dropdown,\r\n * which in turn contains buttons allowing users to change list styles in the context of the current selection.\r\n *\r\n * @param options.editor\r\n * @param options.parentCommandName The name of the higher-order editor command associated with\r\n * the set of particular list styles (e.g. \"bulletedList\" for \"disc\", \"circle\", and \"square\" styles).\r\n * @param options.buttonLabel Label of the main part of the split button.\r\n * @param options.buttonIcon The SVG string of an icon for the main part of the split button.\r\n * @param options.styleGridAriaLabel The ARIA label for the styles grid in the split button dropdown.\r\n * @param options.styleDefinitions Definitions of the style buttons.\r\n * @returns A function that can be passed straight into {@link module:ui/componentfactory~ComponentFactory#add}.\r\n */\r\nfunction getDropdownViewCreator({ editor, parentCommandName, buttonLabel, buttonIcon, styleGridAriaLabel, styleDefinitions }) {\r\n    const parentCommand = editor.commands.get(parentCommandName);\r\n    return (locale) => {\r\n        const dropdownView = createDropdown(locale, SplitButtonView);\r\n        const mainButtonView = dropdownView.buttonView;\r\n        dropdownView.bind('isEnabled').to(parentCommand);\r\n        dropdownView.class = 'ck-list-styles-dropdown';\r\n        // Main button was clicked.\r\n        mainButtonView.on('execute', () => {\r\n            editor.execute(parentCommandName);\r\n            editor.editing.view.focus();\r\n        });\r\n        mainButtonView.set({\r\n            label: buttonLabel,\r\n            icon: buttonIcon,\r\n            tooltip: true,\r\n            isToggleable: true\r\n        });\r\n        mainButtonView.bind('isOn').to(parentCommand, 'value', value => !!value);\r\n        dropdownView.once('change:isOpen', () => {\r\n            const listPropertiesView = createListPropertiesView({\r\n                editor,\r\n                dropdownView,\r\n                parentCommandName,\r\n                styleGridAriaLabel,\r\n                styleDefinitions\r\n            });\r\n            dropdownView.panelView.children.add(listPropertiesView);\r\n        });\r\n        // Focus the editable after executing the command.\r\n        // Overrides a default behaviour where the focus is moved to the dropdown button (#12125).\r\n        dropdownView.on('execute', () => {\r\n            editor.editing.view.focus();\r\n        });\r\n        return dropdownView;\r\n    };\r\n}\r\n/**\r\n * A helper that returns a function (factory) that creates individual buttons used by users to change styles\r\n * of lists.\r\n *\r\n * @param options.editor\r\n * @param options.listStyleCommand The instance of the `ListStylesCommand` class.\r\n * @param options.parentCommandName The name of the higher-order command associated with a\r\n * particular list style (e.g. \"bulletedList\" is associated with \"square\" and \"numberedList\" is associated with \"roman\").\r\n * @returns A function that can be passed straight into {@link module:ui/componentfactory~ComponentFactory#add}.\r\n */\r\nfunction getStyleButtonCreator({ editor, listStyleCommand, parentCommandName }) {\r\n    const locale = editor.locale;\r\n    const parentCommand = editor.commands.get(parentCommandName);\r\n    return ({ label, type, icon, tooltip }) => {\r\n        const button = new ButtonView(locale);\r\n        button.set({ label, icon, tooltip });\r\n        listStyleCommand.on('change:value', () => {\r\n            button.isOn = listStyleCommand.value === type;\r\n        });\r\n        button.on('execute', () => {\r\n            // If the content the selection is anchored to is a list, let's change its style.\r\n            if (parentCommand.value) {\r\n                // If the current list style is not set in the model or the style is different than the\r\n                // one to be applied, simply apply the new style.\r\n                if (listStyleCommand.value !== type) {\r\n                    editor.execute('listStyle', { type });\r\n                }\r\n                // If the style was the same, remove it (the button works as an off toggle).\r\n                else {\r\n                    editor.execute('listStyle', { type: listStyleCommand.defaultType });\r\n                }\r\n            }\r\n            // Otherwise, leave the creation of the styled list to the `ListStyleCommand`.\r\n            else {\r\n                editor.model.change(() => {\r\n                    editor.execute('listStyle', { type });\r\n                });\r\n            }\r\n        });\r\n        return button;\r\n    };\r\n}\r\n/**\r\n * A helper that creates the properties view for the individual style dropdown.\r\n *\r\n * @param options.editor Editor instance.\r\n * @param options.dropdownView Styles dropdown view that hosts the properties view.\r\n * @param options.parentCommandName The name of the higher-order editor command associated with\r\n * the set of particular list styles (e.g. \"bulletedList\" for \"disc\", \"circle\", and \"square\" styles).\r\n * @param options.styleDefinitions Definitions of the style buttons.\r\n * @param options.styleGridAriaLabel An assistive technologies label set on the grid of styles (if the grid is rendered).\r\n */\r\nfunction createListPropertiesView({ editor, dropdownView, parentCommandName, styleDefinitions, styleGridAriaLabel }) {\r\n    const locale = editor.locale;\r\n    const enabledProperties = editor.config.get('list.properties');\r\n    let styleButtonViews = null;\r\n    if (parentCommandName != 'numberedList') {\r\n        enabledProperties.startIndex = false;\r\n        enabledProperties.reversed = false;\r\n    }\r\n    if (enabledProperties.styles) {\r\n        const listStyleCommand = editor.commands.get('listStyle');\r\n        const styleButtonCreator = getStyleButtonCreator({\r\n            editor,\r\n            parentCommandName,\r\n            listStyleCommand\r\n        });\r\n        // The command can be ListStyleCommand or DocumentListStyleCommand.\r\n        const isStyleTypeSupported = typeof listStyleCommand.isStyleTypeSupported == 'function' ?\r\n            (styleDefinition) => listStyleCommand.isStyleTypeSupported(styleDefinition.type) :\r\n            () => true;\r\n        styleButtonViews = styleDefinitions.filter(isStyleTypeSupported).map(styleButtonCreator);\r\n    }\r\n    const listPropertiesView = new ListPropertiesView(locale, {\r\n        styleGridAriaLabel,\r\n        enabledProperties,\r\n        styleButtonViews\r\n    });\r\n    if (enabledProperties.styles) {\r\n        // Accessibility: focus the first active style when opening the dropdown.\r\n        focusChildOnDropdownOpen(dropdownView, () => {\r\n            return listPropertiesView.stylesView.children.find((child) => child.isOn);\r\n        });\r\n    }\r\n    if (enabledProperties.startIndex) {\r\n        const listStartCommand = editor.commands.get('listStart');\r\n        listPropertiesView.startIndexFieldView.bind('isEnabled').to(listStartCommand);\r\n        listPropertiesView.startIndexFieldView.fieldView.bind('value').to(listStartCommand);\r\n        listPropertiesView.on('listStart', (evt, data) => editor.execute('listStart', data));\r\n    }\r\n    if (enabledProperties.reversed) {\r\n        const listReversedCommand = editor.commands.get('listReversed');\r\n        listPropertiesView.reversedSwitchButtonView.bind('isEnabled').to(listReversedCommand);\r\n        listPropertiesView.reversedSwitchButtonView.bind('isOn').to(listReversedCommand, 'value', value => !!value);\r\n        listPropertiesView.on('listReversed', () => {\r\n            const isReversed = listReversedCommand.value;\r\n            editor.execute('listReversed', { reversed: !isReversed });\r\n        });\r\n    }\r\n    // Make sure applying styles closes the dropdown.\r\n    listPropertiesView.delegate('execute').to(dropdownView);\r\n    return listPropertiesView;\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 44 44\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z\\\" fill-opacity=\\\".163\\\"/><path d=\\\"m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/documentlistproperties\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport DocumentListPropertiesEditing from './documentlistproperties/documentlistpropertiesediting';\r\nimport ListPropertiesUI from './listproperties/listpropertiesui';\r\n/**\r\n * The document list properties feature.\r\n *\r\n * This is a \"glue\" plugin that loads the\r\n * {@link module:list/documentlistproperties/documentlistpropertiesediting~DocumentListPropertiesEditing document list properties\r\n * editing feature} and the {@link module:list/listproperties/listpropertiesui~ListPropertiesUI list properties UI feature}.\r\n */\r\nexport default class DocumentListProperties extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [DocumentListPropertiesEditing, ListPropertiesUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DocumentListProperties';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * The list indent command. It is used by the {@link module:list/list~List list feature}.\r\n */\r\nexport default class IndentCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param indentDirection The direction of indent. If it is equal to `backward`, the command will outdent a list item.\r\n     */\r\n    constructor(editor, indentDirection) {\r\n        super(editor);\r\n        this._indentBy = indentDirection == 'forward' ? 1 : -1;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Indents or outdents (depending on the {@link #constructor}'s `indentDirection` parameter) selected list items.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const model = this.editor.model;\r\n        const doc = model.document;\r\n        let itemsToChange = Array.from(doc.selection.getSelectedBlocks());\r\n        model.change(writer => {\r\n            const lastItem = itemsToChange[itemsToChange.length - 1];\r\n            // Indenting a list item should also indent all the items that are already sub-items of indented item.\r\n            let next = lastItem.nextSibling;\r\n            // Check all items after last indented item, as long as their indent is bigger than indent of that item.\r\n            while (next && next.name == 'listItem' &&\r\n                next.getAttribute('listIndent') > lastItem.getAttribute('listIndent')) {\r\n                itemsToChange.push(next);\r\n                next = next.nextSibling;\r\n            }\r\n            // We need to be sure to keep model in correct state after each small change, because converters\r\n            // bases on that state and assumes that model is correct.\r\n            // Because of that, if the command outdents items, we will outdent them starting from the last item, as\r\n            // it is safer.\r\n            if (this._indentBy < 0) {\r\n                itemsToChange = itemsToChange.reverse();\r\n            }\r\n            for (const item of itemsToChange) {\r\n                const indent = item.getAttribute('listIndent') + this._indentBy;\r\n                // If indent is lower than 0, it means that the item got outdented when it was not indented.\r\n                // This means that we need to convert that list item to paragraph.\r\n                if (indent < 0) {\r\n                    // To keep the model as correct as possible, first rename listItem, then remove attributes,\r\n                    // as listItem without attributes is very incorrect and will cause problems in converters.\r\n                    // No need to remove attributes, will be removed by post fixer.\r\n                    writer.rename(item, 'paragraph');\r\n                }\r\n                // If indent is >= 0, change the attribute value.\r\n                else {\r\n                    writer.setAttribute('listIndent', indent, item);\r\n                }\r\n            }\r\n            // It allows to execute an action after executing the `~IndentCommand#execute` method, for example adjusting\r\n            // attributes of changed list items.\r\n            this.fire('_executeCleanup', itemsToChange);\r\n        });\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        // Check whether any of position's ancestor is a list item.\r\n        const listItem = first(this.editor.model.document.selection.getSelectedBlocks());\r\n        // If selection is not in a list item, the command is disabled.\r\n        if (!listItem || !listItem.is('element', 'listItem')) {\r\n            return false;\r\n        }\r\n        if (this._indentBy > 0) {\r\n            // Cannot indent first item in it's list. Check if before `listItem` is a list item that is in same list.\r\n            // To be in the same list, the item has to have same attributes and cannot be \"split\" by an item with lower indent.\r\n            const indent = listItem.getAttribute('listIndent');\r\n            const type = listItem.getAttribute('listType');\r\n            let prev = listItem.previousSibling;\r\n            while (prev && prev.is('element', 'listItem') && prev.getAttribute('listIndent') >= indent) {\r\n                if (prev.getAttribute('listIndent') == indent) {\r\n                    // The item is on the same level.\r\n                    // If it has same type, it means that we found a preceding sibling from the same list.\r\n                    // If it does not have same type, it means that `listItem` is on different list (this can happen only\r\n                    // on top level lists, though).\r\n                    return prev.getAttribute('listType') == type;\r\n                }\r\n                prev = prev.previousSibling;\r\n            }\r\n            // Could not find similar list item, this means that `listItem` is first in its list.\r\n            return false;\r\n        }\r\n        // If we are outdenting it is enough to be in list item. Every list item can always be outdented.\r\n        return true;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * The list command. It is used by the {@link module:list/list~List list feature}.\r\n */\r\nexport default class ListCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param type List type that will be handled by this command.\r\n     */\r\n    constructor(editor, type) {\r\n        super(editor);\r\n        this.type = type;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.value = this._getValue();\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Executes the list command.\r\n     *\r\n     * @fires execute\r\n     * @param options Command options.\r\n     * @param options.forceValue If set, it will force the command behavior. If `true`, the command will try to convert the\r\n     * selected items and potentially the neighbor elements to the proper list items. If set to `false`, it will convert selected elements\r\n     * to paragraphs. If not set, the command will toggle selected elements to list items or paragraphs, depending on the selection.\r\n     */\r\n    execute(options = {}) {\r\n        const model = this.editor.model;\r\n        const document = model.document;\r\n        const blocks = Array.from(document.selection.getSelectedBlocks())\r\n            .filter(block => checkCanBecomeListItem(block, model.schema));\r\n        // Whether we are turning off some items.\r\n        const turnOff = options.forceValue !== undefined ? !options.forceValue : this.value;\r\n        // If we are turning off items, we are going to rename them to paragraphs.\r\n        model.change(writer => {\r\n            // If part of a list got turned off, we need to handle (outdent) all of sub-items of the last turned-off item.\r\n            // To be sure that model is all the time in a good state, we first fix items below turned-off item.\r\n            if (turnOff) {\r\n                // Start from the model item that is just after the last turned-off item.\r\n                let next = blocks[blocks.length - 1].nextSibling;\r\n                let currentIndent = Number.POSITIVE_INFINITY;\r\n                let changes = [];\r\n                // Correct indent of all items after the last turned off item.\r\n                // Rules that should be followed:\r\n                // 1. All direct sub-items of turned-off item should become indent 0, because the first item after it\r\n                //    will be the first item of a new list. Other items are at the same level, so should have same 0 index.\r\n                // 2. All items with indent lower than indent of turned-off item should become indent 0, because they\r\n                //    should not end up as a child of any of list items that they were not children of before.\r\n                // 3. All other items should have their indent changed relatively to it's parent.\r\n                //\r\n                // For example:\r\n                // 1  * --------\r\n                // 2     * --------\r\n                // 3        * --------\t\t\t<-- this is turned off.\r\n                // 4           * --------\t\t<-- this has to become indent = 0, because it will be first item on a new list.\r\n                // 5              * --------\t<-- this should be still be a child of item above, so indent = 1.\r\n                // 6        * --------\t\t\t<-- this has to become indent = 0, because it should not be a child of any of items above.\r\n                // 7           * --------\t\t<-- this should be still be a child of item above, so indent = 1.\r\n                // 8     * --------\t\t\t\t<-- this has to become indent = 0.\r\n                // 9        * --------\t\t\t<-- this should still be a child of item above, so indent = 1.\r\n                // 10          * --------\t\t<-- this should still be a child of item above, so indent = 2.\r\n                // 11          * --------\t\t<-- this should still be at the same level as item above, so indent = 2.\r\n                // 12 * --------\t\t\t\t<-- this and all below are left unchanged.\r\n                // 13    * --------\r\n                // 14       * --------\r\n                //\r\n                // After turning off 3 the list becomes:\r\n                //\r\n                // 1  * --------\r\n                // 2     * --------\r\n                //\r\n                // 3  --------\r\n                //\r\n                // 4  * --------\r\n                // 5     * --------\r\n                // 6  * --------\r\n                // 7     * --------\r\n                // 8  * --------\r\n                // 9     * --------\r\n                // 10       * --------\r\n                // 11       * --------\r\n                // 12 * --------\r\n                // 13    * --------\r\n                // 14       * --------\r\n                //\r\n                // Thanks to this algorithm no lists are mismatched and no items get unexpected children/parent, while\r\n                // those parent-child connection which are possible to maintain are still maintained. It's worth noting\r\n                // that this is the same effect that we would be get by multiple use of outdent command. However doing\r\n                // it like this is much more efficient because it's less operation (less memory usage, easier OT) and\r\n                // less conversion (faster).\r\n                while (next && next.name == 'listItem' && next.getAttribute('listIndent') !== 0) {\r\n                    // Check each next list item, as long as its indent is bigger than 0.\r\n                    // If the indent is 0 we are not going to change anything anyway.\r\n                    const indent = next.getAttribute('listIndent');\r\n                    // We check if that's item indent is lower as current relative indent.\r\n                    if (indent < currentIndent) {\r\n                        // If it is, current relative indent becomes that indent.\r\n                        currentIndent = indent;\r\n                    }\r\n                    // Fix indent relatively to current relative indent.\r\n                    // Note, that if we just changed the current relative indent, the newIndent will be equal to 0.\r\n                    const newIndent = indent - currentIndent;\r\n                    // Save the entry in changes array. We do not apply it at the moment, because we will need to\r\n                    // reverse the changes so the last item is changed first.\r\n                    // This is to keep model in correct state all the time.\r\n                    changes.push({ element: next, listIndent: newIndent });\r\n                    // Find next item.\r\n                    next = next.nextSibling;\r\n                }\r\n                changes = changes.reverse();\r\n                for (const item of changes) {\r\n                    writer.setAttribute('listIndent', item.listIndent, item.element);\r\n                }\r\n            }\r\n            // If we are turning on, we might change some items that are already `listItem`s but with different type.\r\n            // Changing one nested list item to other type should also trigger changing all its siblings so the\r\n            // whole nested list is of the same type.\r\n            // Example (assume changing to numbered list):\r\n            // * ------\t\t\t\t<-- do not fix, top level item\r\n            //   * ------\t\t\t<-- fix, because latter list item of this item's list is changed\r\n            //      * ------\t\t<-- do not fix, item is not affected (different list)\r\n            //   * ------\t\t\t<-- fix, because latter list item of this item's list is changed\r\n            //      * ------\t\t<-- fix, because latter list item of this item's list is changed\r\n            //      * ---[--\t\t<-- already in selection\r\n            //   * ------\t\t\t<-- already in selection\r\n            //   * ------\t\t\t<-- already in selection\r\n            // * ------\t\t\t\t<-- already in selection, but does not cause other list items to change because is top-level\r\n            //   * ---]--\t\t\t<-- already in selection\r\n            //   * ------\t\t\t<-- fix, because preceding list item of this item's list is changed\r\n            //      * ------\t\t<-- do not fix, item is not affected (different list)\r\n            // * ------\t\t\t\t<-- do not fix, top level item\r\n            if (!turnOff) {\r\n                // Find lowest indent among selected items. This will be indicator what is the indent of\r\n                // top-most list affected by the command.\r\n                let lowestIndent = Number.POSITIVE_INFINITY;\r\n                for (const item of blocks) {\r\n                    if (item.is('element', 'listItem') && item.getAttribute('listIndent') < lowestIndent) {\r\n                        lowestIndent = item.getAttribute('listIndent');\r\n                    }\r\n                }\r\n                // Do not execute the fix for top-level lists.\r\n                lowestIndent = lowestIndent === 0 ? 1 : lowestIndent;\r\n                // Fix types of list items that are \"before\" the selected blocks.\r\n                _fixType(blocks, true, lowestIndent);\r\n                // Fix types of list items that are \"after\" the selected blocks.\r\n                _fixType(blocks, false, lowestIndent);\r\n            }\r\n            // Phew! Now it will be easier :).\r\n            // For each block element that was in the selection, we will either: turn it to list item,\r\n            // turn it to paragraph, or change it's type. Or leave it as it is.\r\n            // Do it in reverse as there might be multiple blocks (same as with changing indents).\r\n            for (const element of blocks.reverse()) {\r\n                if (turnOff && element.name == 'listItem') {\r\n                    // We are turning off and the element is a `listItem` - it should be converted to `paragraph`.\r\n                    // List item specific attributes are removed by post fixer.\r\n                    writer.rename(element, 'paragraph');\r\n                }\r\n                else if (!turnOff && element.name != 'listItem') {\r\n                    // We are turning on and the element is not a `listItem` - it should be converted to `listItem`.\r\n                    // The order of operations is important to keep model in correct state.\r\n                    writer.setAttributes({ listType: this.type, listIndent: 0 }, element);\r\n                    writer.rename(element, 'listItem');\r\n                }\r\n                else if (!turnOff && element.name == 'listItem' && element.getAttribute('listType') != this.type) {\r\n                    // We are turning on and the element is a `listItem` but has different type - change it's type and\r\n                    // type of it's all siblings that have same indent.\r\n                    writer.setAttribute('listType', this.type, element);\r\n                }\r\n            }\r\n            /**\r\n             * Event fired by the {@link #execute} method.\r\n             *\r\n             * It allows to execute an action after executing the {@link ~ListCommand#execute} method, for example adjusting\r\n             * attributes of changed blocks.\r\n             *\r\n             * @protected\r\n             * @event _executeCleanup\r\n             */\r\n            this.fire('_executeCleanup', blocks);\r\n        });\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     *\r\n     * @returns The current value.\r\n     */\r\n    _getValue() {\r\n        // Check whether closest `listItem` ancestor of the position has a correct type.\r\n        const listItem = first(this.editor.model.document.selection.getSelectedBlocks());\r\n        return !!listItem && listItem.is('element', 'listItem') && listItem.getAttribute('listType') == this.type;\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        // If command value is true it means that we are in list item, so the command should be enabled.\r\n        if (this.value) {\r\n            return true;\r\n        }\r\n        const selection = this.editor.model.document.selection;\r\n        const schema = this.editor.model.schema;\r\n        const firstBlock = first(selection.getSelectedBlocks());\r\n        if (!firstBlock) {\r\n            return false;\r\n        }\r\n        // Otherwise, check if list item can be inserted at the position start.\r\n        return checkCanBecomeListItem(firstBlock, schema);\r\n    }\r\n}\r\n/**\r\n * Helper function used when one or more list item have their type changed. Fixes type of other list items\r\n * that are affected by the change (are in same lists) but are not directly in selection. The function got extracted\r\n * not to duplicated code, as same fix has to be performed before and after selection.\r\n *\r\n * @param blocks Blocks that are in selection.\r\n * @param isBackward Specified whether fix will be applied for blocks before first selected block (`true`)\r\n * or blocks after last selected block (`false`).\r\n * @param lowestIndent Lowest indent among selected blocks.\r\n */\r\nfunction _fixType(blocks, isBackward, lowestIndent) {\r\n    // We need to check previous sibling of first changed item and next siblings of last changed item.\r\n    const startingItem = isBackward ? blocks[0] : blocks[blocks.length - 1];\r\n    if (startingItem.is('element', 'listItem')) {\r\n        let item = startingItem[isBackward ? 'previousSibling' : 'nextSibling'];\r\n        // During processing items, keeps the lowest indent of already processed items.\r\n        // This saves us from changing too many items.\r\n        // Following example is for going forward as it is easier to read, however same applies to going backward.\r\n        // * ------\r\n        //   * ------\r\n        //     * --[---\r\n        //   * ------\t\t<-- `lowestIndent` should be 1\r\n        //     * --]---\t\t<-- `startingItem`, `currentIndent` = 2, `lowestIndent` == 1\r\n        //     * ------\t\t<-- should be fixed, `indent` == 2 == `currentIndent`\r\n        //   * ------\t\t<-- should be fixed, set `currentIndent` to 1, `indent` == 1 == `currentIndent`\r\n        //     * ------\t\t<-- should not be fixed, item is in different list, `indent` = 2, `indent` != `currentIndent`\r\n        //   * ------\t\t<-- should be fixed, `indent` == 1 == `currentIndent`\r\n        // * ------\t\t\t<-- break loop (`indent` < `lowestIndent`)\r\n        let currentIndent = startingItem.getAttribute('listIndent');\r\n        // Look back until a list item with indent lower than reference `lowestIndent`.\r\n        // That would be the parent of nested sublist which contains item having `lowestIndent`.\r\n        while (item && item.is('element', 'listItem') && item.getAttribute('listIndent') >= lowestIndent) {\r\n            if (currentIndent > item.getAttribute('listIndent')) {\r\n                currentIndent = item.getAttribute('listIndent');\r\n            }\r\n            // Found an item that is in the same nested sublist.\r\n            if (item.getAttribute('listIndent') == currentIndent) {\r\n                // Just add the item to selected blocks like it was selected by the user.\r\n                blocks[isBackward ? 'unshift' : 'push'](item);\r\n            }\r\n            item = item[isBackward ? 'previousSibling' : 'nextSibling'];\r\n        }\r\n    }\r\n}\r\n/**\r\n * Checks whether the given block can be replaced by a listItem.\r\n *\r\n * @param block A block to be tested.\r\n * @param schema The schema of the document.\r\n */\r\nfunction checkCanBecomeListItem(block, schema) {\r\n    return schema.checkChild(block.parent, 'listItem') && !schema.isObject(block);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { getListTypeFromListStyleType, getSelectedListItems, getSiblingNodes } from './utils';\r\n/**\r\n * A set of helpers related to document lists.\r\n */\r\nexport default class ListUtils extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ListUtils';\r\n    }\r\n    /**\r\n     * Checks whether the given list-style-type is supported by numbered or bulleted list.\r\n     */\r\n    getListTypeFromListStyleType(listStyleType) {\r\n        return getListTypeFromListStyleType(listStyleType);\r\n    }\r\n    /**\r\n     * Returns an array with all `listItem` elements in the model selection.\r\n     *\r\n     * It returns all the items even if only a part of the list is selected, including items that belong to nested lists.\r\n     * If no list is selected, it returns an empty array.\r\n     * The order of the elements is not specified.\r\n     */\r\n    getSelectedListItems(model) {\r\n        return getSelectedListItems(model);\r\n    }\r\n    /**\r\n     * Returns an array with all `listItem` elements that represent the same list.\r\n     *\r\n     * It means that values of `listIndent`, `listType`, `listStyle`, `listReversed` and `listStart` for all items are equal.\r\n     *\r\n     * Additionally, if the `position` is inside a list item, that list item will be returned as well.\r\n     *\r\n     * @param position Starting position.\r\n     * @param direction Walking direction.\r\n     */\r\n    getSiblingNodes(position, direction) {\r\n        return getSiblingNodes(position, direction);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/list/converters\r\n */\r\nimport { TreeWalker } from 'ckeditor5/src/engine';\r\nimport { generateLiInUl, injectViewList, mergeViewLists, getSiblingListItem, positionAfterUiElements } from './utils';\r\n/**\r\n * A model-to-view converter for the `listItem` model element insertion.\r\n *\r\n * It creates a `<ul><li></li><ul>` (or `<ol>`) view structure out of a `listItem` model element, inserts it at the correct\r\n * position, and merges the list with surrounding lists (if available).\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert\r\n * @param model Model instance.\r\n */\r\nexport function modelViewInsertion(model) {\r\n    return (evt, data, conversionApi) => {\r\n        const consumable = conversionApi.consumable;\r\n        if (!consumable.test(data.item, 'insert') ||\r\n            !consumable.test(data.item, 'attribute:listType') ||\r\n            !consumable.test(data.item, 'attribute:listIndent')) {\r\n            return;\r\n        }\r\n        consumable.consume(data.item, 'insert');\r\n        consumable.consume(data.item, 'attribute:listType');\r\n        consumable.consume(data.item, 'attribute:listIndent');\r\n        const modelItem = data.item;\r\n        const viewItem = generateLiInUl(modelItem, conversionApi);\r\n        injectViewList(modelItem, viewItem, conversionApi, model);\r\n    };\r\n}\r\n/**\r\n * A model-to-view converter for the `listItem` model element removal.\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:remove\r\n * @param model Model instance.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function modelViewRemove(model) {\r\n    return (evt, data, conversionApi) => {\r\n        const viewPosition = conversionApi.mapper.toViewPosition(data.position);\r\n        const viewStart = viewPosition.getLastMatchingPosition(value => !value.item.is('element', 'li'));\r\n        const viewItem = viewStart.nodeAfter;\r\n        const viewWriter = conversionApi.writer;\r\n        // 1. Break the container after and before the list item.\r\n        // This will create a view list with one view list item - the one to remove.\r\n        viewWriter.breakContainer(viewWriter.createPositionBefore(viewItem));\r\n        viewWriter.breakContainer(viewWriter.createPositionAfter(viewItem));\r\n        // 2. Remove the list with the item to remove.\r\n        const viewList = viewItem.parent;\r\n        const viewListPrev = viewList.previousSibling;\r\n        const removeRange = viewWriter.createRangeOn(viewList);\r\n        const removed = viewWriter.remove(removeRange);\r\n        // 3. Merge the whole created by breaking and removing the list.\r\n        if (viewListPrev && viewListPrev.nextSibling) {\r\n            mergeViewLists(viewWriter, viewListPrev, viewListPrev.nextSibling);\r\n        }\r\n        // 4. Bring back nested list that was in the removed <li>.\r\n        const modelItem = conversionApi.mapper.toModelElement(viewItem);\r\n        hoistNestedLists(modelItem.getAttribute('listIndent') + 1, data.position, removeRange.start, viewItem, conversionApi, model);\r\n        // 5. Unbind removed view item and all children.\r\n        for (const child of viewWriter.createRangeIn(removed).getItems()) {\r\n            conversionApi.mapper.unbindViewElement(child);\r\n        }\r\n        evt.stop();\r\n    };\r\n}\r\n/**\r\n * A model-to-view converter for the `type` attribute change on the `listItem` model element.\r\n *\r\n * This change means that the `<li>` element parent changes from `<ul>` to `<ol>` (or vice versa). This is accomplished\r\n * by breaking view elements and changing their name. The next {@link module:list/list/converters~modelViewMergeAfterChangeType}\r\n * converter will attempt to merge split nodes.\r\n *\r\n * Splitting this conversion into 2 steps makes it possible to add an additional conversion in the middle.\r\n * Check {@link module:list/todolist/todolistconverters~modelViewChangeType} to see an example of it.\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute\r\n */\r\nexport const modelViewChangeType = (evt, data, conversionApi) => {\r\n    if (!conversionApi.consumable.test(data.item, evt.name)) {\r\n        return;\r\n    }\r\n    const viewItem = conversionApi.mapper.toViewElement(data.item);\r\n    const viewWriter = conversionApi.writer;\r\n    // Break the container after and before the list item.\r\n    // This will create a view list with one view list item -- the one that changed type.\r\n    viewWriter.breakContainer(viewWriter.createPositionBefore(viewItem));\r\n    viewWriter.breakContainer(viewWriter.createPositionAfter(viewItem));\r\n    // Change name of the view list that holds the changed view item.\r\n    // We cannot just change name property, because that would not render properly.\r\n    const viewList = viewItem.parent;\r\n    const listName = data.attributeNewValue == 'numbered' ? 'ol' : 'ul';\r\n    viewWriter.rename(listName, viewList);\r\n};\r\n/**\r\n * A model-to-view converter that attempts to merge nodes split by {@link module:list/list/converters~modelViewChangeType}.\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute\r\n */\r\nexport const modelViewMergeAfterChangeType = (evt, data, conversionApi) => {\r\n    conversionApi.consumable.consume(data.item, evt.name);\r\n    const viewItem = conversionApi.mapper.toViewElement(data.item);\r\n    const viewList = viewItem.parent;\r\n    const viewWriter = conversionApi.writer;\r\n    // Merge the changed view list with other lists, if possible.\r\n    mergeViewLists(viewWriter, viewList, viewList.nextSibling);\r\n    mergeViewLists(viewWriter, viewList.previousSibling, viewList);\r\n};\r\n/**\r\n * A model-to-view converter for the `listIndent` attribute change on the `listItem` model element.\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute\r\n * @param model Model instance.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function modelViewChangeIndent(model) {\r\n    return (evt, data, conversionApi) => {\r\n        if (!conversionApi.consumable.consume(data.item, 'attribute:listIndent')) {\r\n            return;\r\n        }\r\n        const viewItem = conversionApi.mapper.toViewElement(data.item);\r\n        const viewWriter = conversionApi.writer;\r\n        // 1. Break the container after and before the list item.\r\n        // This will create a view list with one view list item -- the one that changed type.\r\n        viewWriter.breakContainer(viewWriter.createPositionBefore(viewItem));\r\n        viewWriter.breakContainer(viewWriter.createPositionAfter(viewItem));\r\n        // 2. Extract view list with changed view list item and merge \"hole\" possibly created by breaking and removing elements.\r\n        const viewList = viewItem.parent;\r\n        const viewListPrev = viewList.previousSibling;\r\n        const removeRange = viewWriter.createRangeOn(viewList);\r\n        viewWriter.remove(removeRange);\r\n        if (viewListPrev && viewListPrev.nextSibling) {\r\n            mergeViewLists(viewWriter, viewListPrev, viewListPrev.nextSibling);\r\n        }\r\n        // 3. Bring back nested list that was in the removed <li>.\r\n        hoistNestedLists(data.attributeOldValue + 1, data.range.start, removeRange.start, viewItem, conversionApi, model);\r\n        // 4. Inject view list like it is newly inserted.\r\n        injectViewList(data.item, viewItem, conversionApi, model);\r\n        // 5. Consume insertion of children inside the item. They are already handled by re-building the item in view.\r\n        for (const child of data.item.getChildren()) {\r\n            conversionApi.consumable.consume(child, 'insert');\r\n        }\r\n    };\r\n}\r\n/**\r\n * A special model-to-view converter introduced by the {@link module:list/list~List list feature}. This converter is fired for\r\n * insert change of every model item, and should be fired before the actual converter. The converter checks whether the inserted\r\n * model item is a non-`listItem` element. If it is, and it is inserted inside a view list, the converter breaks the\r\n * list so the model element is inserted to the view parent element corresponding to its model parent element.\r\n *\r\n * The converter prevents such situations:\r\n *\r\n * ```xml\r\n * // Model:                        // View:\r\n * <listItem>foo</listItem>         <ul>\r\n * <listItem>bar</listItem>             <li>foo</li>\r\n *                                      <li>bar</li>\r\n *                                  </ul>\r\n *\r\n * // After change:                 // Correct view guaranteed by this converter:\r\n * <listItem>foo</listItem>         <ul><li>foo</li></ul><p>xxx</p><ul><li>bar</li></ul>\r\n * <paragraph>xxx</paragraph>       // Instead of this wrong view state:\r\n * <listItem>bar</listItem>         <ul><li>foo</li><p>xxx</p><li>bar</li></ul>\r\n * ```\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert\r\n */\r\nexport const modelViewSplitOnInsert = (evt, data, conversionApi) => {\r\n    if (!conversionApi.consumable.test(data.item, evt.name)) {\r\n        return;\r\n    }\r\n    if (data.item.name != 'listItem') {\r\n        let viewPosition = conversionApi.mapper.toViewPosition(data.range.start);\r\n        const viewWriter = conversionApi.writer;\r\n        const lists = [];\r\n        // Break multiple ULs/OLs if there are.\r\n        //\r\n        // Imagine following list:\r\n        //\r\n        // 1 --------\r\n        //   1.1 --------\r\n        //     1.1.1 --------\r\n        //     1.1.2 --------\r\n        //     1.1.3 --------\r\n        //       1.1.3.1 --------\r\n        //   1.2 --------\r\n        //     1.2.1 --------\r\n        // 2 --------\r\n        //\r\n        // Insert paragraph after item 1.1.1:\r\n        //\r\n        // 1 --------\r\n        //   1.1 --------\r\n        //     1.1.1 --------\r\n        //\r\n        // Lorem ipsum.\r\n        //\r\n        //     1.1.2 --------\r\n        //     1.1.3 --------\r\n        //       1.1.3.1 --------\r\n        //   1.2 --------\r\n        //     1.2.1 --------\r\n        // 2 --------\r\n        //\r\n        // In this case 1.1.2 has to become beginning of a new list.\r\n        // We need to break list before 1.1.2 (obvious), then we need to break list also before 1.2.\r\n        // Then we need to move those broken pieces one after another and merge:\r\n        //\r\n        // 1 --------\r\n        //   1.1 --------\r\n        //     1.1.1 --------\r\n        //\r\n        // Lorem ipsum.\r\n        //\r\n        // 1.1.2 --------\r\n        //   1.1.3 --------\r\n        //     1.1.3.1 --------\r\n        // 1.2 --------\r\n        //   1.2.1 --------\r\n        // 2 --------\r\n        //\r\n        while (viewPosition.parent.name == 'ul' || viewPosition.parent.name == 'ol') {\r\n            viewPosition = viewWriter.breakContainer(viewPosition);\r\n            if (viewPosition.parent.name != 'li') {\r\n                break;\r\n            }\r\n            // Remove lists that are after inserted element.\r\n            // They will be brought back later, below the inserted element.\r\n            const removeStart = viewPosition;\r\n            const removeEnd = viewWriter.createPositionAt(viewPosition.parent, 'end');\r\n            // Don't remove if there is nothing to remove.\r\n            if (!removeStart.isEqual(removeEnd)) {\r\n                const removed = viewWriter.remove(viewWriter.createRange(removeStart, removeEnd));\r\n                lists.push(removed);\r\n            }\r\n            viewPosition = viewWriter.createPositionAfter(viewPosition.parent);\r\n        }\r\n        // Bring back removed lists.\r\n        if (lists.length > 0) {\r\n            for (let i = 0; i < lists.length; i++) {\r\n                const previousList = viewPosition.nodeBefore;\r\n                const insertedRange = viewWriter.insert(viewPosition, lists[i]);\r\n                viewPosition = insertedRange.end;\r\n                // Don't merge first list! We want a split in that place (this is why this converter is introduced).\r\n                if (i > 0) {\r\n                    const mergePos = mergeViewLists(viewWriter, previousList, previousList.nextSibling);\r\n                    // If `mergePos` is in `previousList` it means that the lists got merged.\r\n                    // In this case, we need to fix insert position.\r\n                    if (mergePos && mergePos.parent == previousList) {\r\n                        viewPosition.offset--;\r\n                    }\r\n                }\r\n            }\r\n            // Merge last inserted list with element after it.\r\n            mergeViewLists(viewWriter, viewPosition.nodeBefore, viewPosition.nodeAfter);\r\n        }\r\n    }\r\n};\r\n/**\r\n * A special model-to-view converter introduced by the {@link module:list/list~List list feature}. This converter takes care of\r\n * merging view lists after something is removed or moved from near them.\r\n *\r\n * Example:\r\n *\r\n * ```xml\r\n * // Model:                        // View:\r\n * <listItem>foo</listItem>         <ul><li>foo</li></ul>\r\n * <paragraph>xxx</paragraph>       <p>xxx</p>\r\n * <listItem>bar</listItem>         <ul><li>bar</li></ul>\r\n *\r\n * // After change:                 // Correct view guaranteed by this converter:\r\n * <listItem>foo</listItem>         <ul>\r\n * <listItem>bar</listItem>             <li>foo</li>\r\n *                                      <li>bar</li>\r\n *                                  </ul>\r\n * ```\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:remove\r\n */\r\nexport const modelViewMergeAfter = (evt, data, conversionApi) => {\r\n    const viewPosition = conversionApi.mapper.toViewPosition(data.position);\r\n    const viewItemPrev = viewPosition.nodeBefore;\r\n    const viewItemNext = viewPosition.nodeAfter;\r\n    // Merge lists if something (remove, move) was done from inside of list.\r\n    // Merging will be done only if both items are view lists of the same type.\r\n    // The check is done inside the helper function.\r\n    mergeViewLists(conversionApi.writer, viewItemPrev, viewItemNext);\r\n};\r\n/**\r\n * A view-to-model converter that converts the `<li>` view elements into the `listItem` model elements.\r\n *\r\n * To set correct values of the `listType` and `listIndent` attributes the converter:\r\n * * checks `<li>`'s parent,\r\n * * stores and increases the `conversionApi.store.indent` value when `<li>`'s sub-items are converted.\r\n *\r\n * @see module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\r\n */\r\nexport const viewModelConverter = (evt, data, conversionApi) => {\r\n    if (conversionApi.consumable.consume(data.viewItem, { name: true })) {\r\n        const writer = conversionApi.writer;\r\n        // 1. Create `listItem` model element.\r\n        const listItem = writer.createElement('listItem');\r\n        // 2. Handle `listItem` model element attributes.\r\n        const indent = getIndent(data.viewItem);\r\n        writer.setAttribute('listIndent', indent, listItem);\r\n        // Set 'bulleted' as default. If this item is pasted into a context,\r\n        const type = data.viewItem.parent && data.viewItem.parent.name == 'ol' ? 'numbered' : 'bulleted';\r\n        writer.setAttribute('listType', type, listItem);\r\n        if (!conversionApi.safeInsert(listItem, data.modelCursor)) {\r\n            return;\r\n        }\r\n        const nextPosition = viewToModelListItemChildrenConverter(listItem, data.viewItem.getChildren(), conversionApi);\r\n        // Result range starts before the first item and ends after the last.\r\n        data.modelRange = writer.createRange(data.modelCursor, nextPosition);\r\n        conversionApi.updateConversionResult(listItem, data);\r\n    }\r\n};\r\n/**\r\n * A view-to-model converter for the `<ul>` and `<ol>` view elements that cleans the input view of garbage.\r\n * This is mostly to clean whitespaces from between the `<li>` view elements inside the view list element, however, also\r\n * incorrect data can be cleared if the view was incorrect.\r\n *\r\n * @see module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\r\n */\r\nexport const cleanList = (evt, data, conversionApi) => {\r\n    if (conversionApi.consumable.test(data.viewItem, { name: true })) {\r\n        // Caching children because when we start removing them iterating fails.\r\n        const children = Array.from(data.viewItem.getChildren());\r\n        for (const child of children) {\r\n            const isWrongElement = !(child.is('element', 'li') || isList(child));\r\n            if (isWrongElement) {\r\n                child._remove();\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * A view-to-model converter for the `<li>` elements that cleans whitespace formatting from the input view.\r\n *\r\n * @see module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\r\n */\r\nexport const cleanListItem = (evt, data, conversionApi) => {\r\n    if (conversionApi.consumable.test(data.viewItem, { name: true })) {\r\n        if (data.viewItem.childCount === 0) {\r\n            return;\r\n        }\r\n        const children = [...data.viewItem.getChildren()];\r\n        let foundList = false;\r\n        for (const child of children) {\r\n            if (foundList && !isList(child)) {\r\n                child._remove();\r\n            }\r\n            if (isList(child)) {\r\n                // If this is a <ul> or <ol>, do not process it, just mark that we already visited list element.\r\n                foundList = true;\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * Returns a callback for model position to view position mapping for {@link module:engine/conversion/mapper~Mapper}. The callback fixes\r\n * positions between the `listItem` elements that would be incorrectly mapped because of how list items are represented in the model\r\n * and in the view.\r\n */\r\nexport function modelToViewPosition(view) {\r\n    return (evt, data) => {\r\n        if (data.isPhantom) {\r\n            return;\r\n        }\r\n        const modelItem = data.modelPosition.nodeBefore;\r\n        if (modelItem && modelItem.is('element', 'listItem')) {\r\n            const viewItem = data.mapper.toViewElement(modelItem);\r\n            const topmostViewList = viewItem.getAncestors().find(isList);\r\n            const walker = view.createPositionAt(viewItem, 0).getWalker();\r\n            for (const value of walker) {\r\n                if (value.type == 'elementStart' && value.item.is('element', 'li')) {\r\n                    data.viewPosition = value.previousPosition;\r\n                    break;\r\n                }\r\n                else if (value.type == 'elementEnd' && value.item == topmostViewList) {\r\n                    data.viewPosition = value.nextPosition;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    };\r\n}\r\n/**\r\n * The callback for view position to model position mapping for {@link module:engine/conversion/mapper~Mapper}. The callback fixes\r\n * positions between the `<li>` elements that would be incorrectly mapped because of how list items are represented in the model\r\n * and in the view.\r\n *\r\n * @see module:engine/conversion/mapper~Mapper#event:viewToModelPosition\r\n * @param model Model instance.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function viewToModelPosition(model) {\r\n    return (evt, data) => {\r\n        const viewPos = data.viewPosition;\r\n        const viewParent = viewPos.parent;\r\n        const mapper = data.mapper;\r\n        if (viewParent.name == 'ul' || viewParent.name == 'ol') {\r\n            // Position is directly in <ul> or <ol>.\r\n            if (!viewPos.isAtEnd) {\r\n                // If position is not at the end, it must be before <li>.\r\n                // Get that <li>, map it to `listItem` and set model position before that `listItem`.\r\n                const modelNode = mapper.toModelElement(viewPos.nodeAfter);\r\n                data.modelPosition = model.createPositionBefore(modelNode);\r\n            }\r\n            else {\r\n                // Position is at the end of <ul> or <ol>, so there is no <li> after it to be mapped.\r\n                // There is <li> before the position, but we cannot just map it to `listItem` and set model position after it,\r\n                // because that <li> may contain nested items.\r\n                // We will check \"model length\" of that <li>, in other words - how many `listItem`s are in that <li>.\r\n                const modelNode = mapper.toModelElement(viewPos.nodeBefore);\r\n                const modelLength = mapper.getModelLength(viewPos.nodeBefore);\r\n                // Then we get model position before mapped `listItem` and shift it accordingly.\r\n                data.modelPosition = model.createPositionBefore(modelNode).getShiftedBy(modelLength);\r\n            }\r\n            evt.stop();\r\n        }\r\n        else if (viewParent.name == 'li' &&\r\n            viewPos.nodeBefore &&\r\n            (viewPos.nodeBefore.name == 'ul' || viewPos.nodeBefore.name == 'ol')) {\r\n            // In most cases when view position is in <li> it is in text and this is a correct position.\r\n            // However, if position is after <ul> or <ol> we have to fix it -- because in model <ul>/<ol> are not in the `listItem`.\r\n            const modelNode = mapper.toModelElement(viewParent);\r\n            // Check all <ul>s and <ol>s that are in the <li> but before mapped position.\r\n            // Get model length of those elements and then add it to the offset of `listItem` mapped to the original <li>.\r\n            let modelLength = 1; // Starts from 1 because the original <li> has to be counted in too.\r\n            let viewList = viewPos.nodeBefore;\r\n            while (viewList && isList(viewList)) {\r\n                modelLength += mapper.getModelLength(viewList);\r\n                viewList = viewList.previousSibling;\r\n            }\r\n            data.modelPosition = model.createPositionBefore(modelNode).getShiftedBy(modelLength);\r\n            evt.stop();\r\n        }\r\n    };\r\n}\r\n/**\r\n * Post-fixer that reacts to changes on document and fixes incorrect model states.\r\n *\r\n * In the example below, there is a correct list structure.\r\n * Then the middle element is removed so the list structure will become incorrect:\r\n *\r\n * ```xml\r\n * <listItem listType=\"bulleted\" listIndent=0>Item 1</listItem>\r\n * <listItem listType=\"bulleted\" listIndent=1>Item 2</listItem>   <--- this is removed.\r\n * <listItem listType=\"bulleted\" listIndent=2>Item 3</listItem>\r\n * ```\r\n *\r\n * The list structure after the middle element is removed:\r\n *\r\n * ```xml\r\n * <listItem listType=\"bulleted\" listIndent=0>Item 1</listItem>\r\n * <listItem listType=\"bulleted\" listIndent=2>Item 3</listItem>\r\n * ```\r\n *\r\n * Should become:\r\n *\r\n * ```xml\r\n * <listItem listType=\"bulleted\" listIndent=0>Item 1</listItem>\r\n * <listItem listType=\"bulleted\" listIndent=1>Item 3</listItem>   <--- note that indent got post-fixed.\r\n * ```\r\n *\r\n * @param model The data model.\r\n * @param writer The writer to do changes with.\r\n * @returns `true` if any change has been applied, `false` otherwise.\r\n */\r\nexport function modelChangePostFixer(model, writer) {\r\n    const changes = model.document.differ.getChanges();\r\n    const itemToListHead = new Map();\r\n    let applied = false;\r\n    for (const entry of changes) {\r\n        if (entry.type == 'insert' && entry.name == 'listItem') {\r\n            _addListToFix(entry.position);\r\n        }\r\n        else if (entry.type == 'insert' && entry.name != 'listItem') {\r\n            if (entry.name != '$text') {\r\n                // In case of renamed element.\r\n                const item = entry.position.nodeAfter;\r\n                if (item.hasAttribute('listIndent')) {\r\n                    writer.removeAttribute('listIndent', item);\r\n                    applied = true;\r\n                }\r\n                if (item.hasAttribute('listType')) {\r\n                    writer.removeAttribute('listType', item);\r\n                    applied = true;\r\n                }\r\n                if (item.hasAttribute('listStyle')) {\r\n                    writer.removeAttribute('listStyle', item);\r\n                    applied = true;\r\n                }\r\n                if (item.hasAttribute('listReversed')) {\r\n                    writer.removeAttribute('listReversed', item);\r\n                    applied = true;\r\n                }\r\n                if (item.hasAttribute('listStart')) {\r\n                    writer.removeAttribute('listStart', item);\r\n                    applied = true;\r\n                }\r\n                for (const innerItem of Array.from(model.createRangeIn(item)).filter(e => e.item.is('element', 'listItem'))) {\r\n                    _addListToFix(innerItem.previousPosition);\r\n                }\r\n            }\r\n            const posAfter = entry.position.getShiftedBy(entry.length);\r\n            _addListToFix(posAfter);\r\n        }\r\n        else if (entry.type == 'remove' && entry.name == 'listItem') {\r\n            _addListToFix(entry.position);\r\n        }\r\n        else if (entry.type == 'attribute' && entry.attributeKey == 'listIndent') {\r\n            _addListToFix(entry.range.start);\r\n        }\r\n        else if (entry.type == 'attribute' && entry.attributeKey == 'listType') {\r\n            _addListToFix(entry.range.start);\r\n        }\r\n    }\r\n    for (const listHead of itemToListHead.values()) {\r\n        _fixListIndents(listHead);\r\n        _fixListTypes(listHead);\r\n    }\r\n    return applied;\r\n    function _addListToFix(position) {\r\n        const previousNode = position.nodeBefore;\r\n        if (!previousNode || !previousNode.is('element', 'listItem')) {\r\n            const item = position.nodeAfter;\r\n            if (item && item.is('element', 'listItem')) {\r\n                itemToListHead.set(item, item);\r\n            }\r\n        }\r\n        else {\r\n            let listHead = previousNode;\r\n            if (itemToListHead.has(listHead)) {\r\n                return;\r\n            }\r\n            for (\r\n            // Cache previousSibling and reuse for performance reasons. See #6581.\r\n            let previousSibling = listHead.previousSibling; previousSibling && previousSibling.is('element', 'listItem'); previousSibling = listHead.previousSibling) {\r\n                listHead = previousSibling;\r\n                if (itemToListHead.has(listHead)) {\r\n                    return;\r\n                }\r\n            }\r\n            itemToListHead.set(previousNode, listHead);\r\n        }\r\n    }\r\n    function _fixListIndents(item) {\r\n        let maxIndent = 0;\r\n        let fixBy = null;\r\n        while (item && item.is('element', 'listItem')) {\r\n            const itemIndent = item.getAttribute('listIndent');\r\n            if (itemIndent > maxIndent) {\r\n                let newIndent;\r\n                if (fixBy === null) {\r\n                    fixBy = itemIndent - maxIndent;\r\n                    newIndent = maxIndent;\r\n                }\r\n                else {\r\n                    if (fixBy > itemIndent) {\r\n                        fixBy = itemIndent;\r\n                    }\r\n                    newIndent = itemIndent - fixBy;\r\n                }\r\n                writer.setAttribute('listIndent', newIndent, item);\r\n                applied = true;\r\n            }\r\n            else {\r\n                fixBy = null;\r\n                maxIndent = item.getAttribute('listIndent') + 1;\r\n            }\r\n            item = item.nextSibling;\r\n        }\r\n    }\r\n    function _fixListTypes(item) {\r\n        let typesStack = [];\r\n        let prev = null;\r\n        while (item && item.is('element', 'listItem')) {\r\n            const itemIndent = item.getAttribute('listIndent');\r\n            if (prev && prev.getAttribute('listIndent') > itemIndent) {\r\n                typesStack = typesStack.slice(0, itemIndent + 1);\r\n            }\r\n            if (itemIndent != 0) {\r\n                if (typesStack[itemIndent]) {\r\n                    const type = typesStack[itemIndent];\r\n                    if (item.getAttribute('listType') != type) {\r\n                        writer.setAttribute('listType', type, item);\r\n                        applied = true;\r\n                    }\r\n                }\r\n                else {\r\n                    typesStack[itemIndent] = item.getAttribute('listType');\r\n                }\r\n            }\r\n            prev = item;\r\n            item = item.nextSibling;\r\n        }\r\n    }\r\n}\r\n/**\r\n * A fixer for pasted content that includes list items.\r\n *\r\n * It fixes indentation of pasted list items so the pasted items match correctly to the context they are pasted into.\r\n *\r\n * Example:\r\n *\r\n * ```xml\r\n * <listItem listType=\"bulleted\" listIndent=0>A</listItem>\r\n * <listItem listType=\"bulleted\" listIndent=1>B^</listItem>\r\n * // At ^ paste:  <listItem listType=\"bulleted\" listIndent=4>X</listItem>\r\n * //              <listItem listType=\"bulleted\" listIndent=5>Y</listItem>\r\n * <listItem listType=\"bulleted\" listIndent=2>C</listItem>\r\n * ```\r\n *\r\n * Should become:\r\n *\r\n * ```xml\r\n * <listItem listType=\"bulleted\" listIndent=0>A</listItem>\r\n * <listItem listType=\"bulleted\" listIndent=1>BX</listItem>\r\n * <listItem listType=\"bulleted\" listIndent=2>Y/listItem>\r\n * <listItem listType=\"bulleted\" listIndent=2>C</listItem>\r\n * ```\r\n */\r\nexport const modelIndentPasteFixer = function (evt, [content, selectable]) {\r\n    const model = this;\r\n    // Check whether inserted content starts from a `listItem`. If it does not, it means that there are some other\r\n    // elements before it and there is no need to fix indents, because even if we insert that content into a list,\r\n    // that list will be broken.\r\n    // Note: we also need to handle singular elements because inserting item with indent 0 into 0,1,[],2\r\n    // would create incorrect model.\r\n    let item = content.is('documentFragment') ? content.getChild(0) : content;\r\n    let selection;\r\n    if (!selectable) {\r\n        selection = model.document.selection;\r\n    }\r\n    else {\r\n        selection = model.createSelection(selectable);\r\n    }\r\n    if (item && item.is('element', 'listItem')) {\r\n        // Get a reference list item. Inserted list items will be fixed according to that item.\r\n        const pos = selection.getFirstPosition();\r\n        let refItem = null;\r\n        if (pos.parent.is('element', 'listItem')) {\r\n            refItem = pos.parent;\r\n        }\r\n        else if (pos.nodeBefore && pos.nodeBefore.is('element', 'listItem')) {\r\n            refItem = pos.nodeBefore;\r\n        }\r\n        // If there is `refItem` it means that we do insert list items into an existing list.\r\n        if (refItem) {\r\n            // First list item in `data` has indent equal to 0 (it is a first list item). It should have indent equal\r\n            // to the indent of reference item. We have to fix the first item and all of it's children and following siblings.\r\n            // Indent of all those items has to be adjusted to reference item.\r\n            const indentChange = refItem.getAttribute('listIndent');\r\n            // Fix only if there is anything to fix.\r\n            if (indentChange > 0) {\r\n                // Adjust indent of all \"first\" list items in inserted data.\r\n                while (item && item.is('element', 'listItem')) {\r\n                    item._setAttribute('listIndent', item.getAttribute('listIndent') + indentChange);\r\n                    item = item.nextSibling;\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\n/**\r\n * Helper function that converts children of a given `<li>` view element into corresponding model elements.\r\n * The function maintains proper order of elements if model `listItem` is split during the conversion\r\n * due to block children conversion.\r\n *\r\n * @param listItemModel List item model element to which converted children will be inserted.\r\n * @param viewChildren View elements which will be converted.\r\n * @param conversionApi Conversion interface to be used by the callback.\r\n * @returns Position on which next elements should be inserted after children conversion.\r\n */\r\nfunction viewToModelListItemChildrenConverter(listItemModel, viewChildren, conversionApi) {\r\n    const { writer, schema } = conversionApi;\r\n    // A position after the last inserted `listItem`.\r\n    let nextPosition = writer.createPositionAfter(listItemModel);\r\n    // Check all children of the converted `<li>`. At this point we assume there are no \"whitespace\" view text nodes\r\n    // in view list, between view list items. This should be handled by `<ul>` and `<ol>` converters.\r\n    for (const child of viewChildren) {\r\n        if (child.name == 'ul' || child.name == 'ol') {\r\n            // If the children is a list, we will insert its conversion result after currently handled `listItem`.\r\n            // Then, next insertion position will be set after all the new list items (and maybe other elements if\r\n            // something split list item).\r\n            //\r\n            // If this is a list, we expect that some `listItem`s and possibly other blocks will be inserted, however `.modelCursor`\r\n            // should be set after last `listItem` (or block). This is why it feels safe to use it as `nextPosition`\r\n            nextPosition = conversionApi.convertItem(child, nextPosition).modelCursor;\r\n        }\r\n        else {\r\n            // If this is not a list, try inserting content at the end of the currently handled `listItem`.\r\n            const result = conversionApi.convertItem(child, writer.createPositionAt(listItemModel, 'end'));\r\n            // It may end up that the current `listItem` becomes split (if that content cannot be inside `listItem`). For example:\r\n            //\r\n            // <li><p>Foo</p></li>\r\n            //\r\n            // will be converted to:\r\n            //\r\n            // <listItem></listItem><paragraph>Foo</paragraph><listItem></listItem>\r\n            //\r\n            const convertedChild = result.modelRange.start.nodeAfter;\r\n            const wasSplit = convertedChild && convertedChild.is('element') && !schema.checkChild(listItemModel, convertedChild.name);\r\n            if (wasSplit) {\r\n                // As `lastListItem` got split, we need to update it to the second part of the split `listItem` element.\r\n                //\r\n                // `modelCursor` should be set to a position where the conversion should continue. There are multiple possible scenarios\r\n                // that may happen. Usually, `modelCursor` (marked as `#` below) would point to the second list item after conversion:\r\n                //\r\n                //\t\t`<li><p>Foo</p></li>` -> `<listItem></listItem><paragraph>Foo</paragraph><listItem>#</listItem>`\r\n                //\r\n                // However, in some cases, like auto-paragraphing, the position is placed at the end of the block element:\r\n                //\r\n                //\t\t`<li><div>Foo</div></li>` -> `<listItem></listItem><paragraph>Foo#</paragraph><listItem></listItem>`\r\n                //\r\n                // or after an element if another element broken auto-paragraphed element:\r\n                //\r\n                //\t\t`<li><div><h2>Foo</h2></div></li>` -> `<listItem></listItem><heading1>Foo</heading1>#<listItem></listItem>`\r\n                //\r\n                // We need to check for such cases and use proper list item and position based on it.\r\n                //\r\n                if (result.modelCursor.parent.is('element', 'listItem')) {\r\n                    // (1).\r\n                    listItemModel = result.modelCursor.parent;\r\n                }\r\n                else {\r\n                    // (2), (3).\r\n                    listItemModel = findNextListItem(result.modelCursor);\r\n                }\r\n                nextPosition = writer.createPositionAfter(listItemModel);\r\n            }\r\n        }\r\n    }\r\n    return nextPosition;\r\n}\r\n/**\r\n * Helper function that seeks for a next list item starting from given `startPosition`.\r\n */\r\nfunction findNextListItem(startPosition) {\r\n    const treeWalker = new TreeWalker({ startPosition });\r\n    let value;\r\n    do {\r\n        value = treeWalker.next();\r\n    } while (!value.value.item.is('element', 'listItem'));\r\n    return value.value.item;\r\n}\r\n/**\r\n * Helper function that takes all children of given `viewRemovedItem` and moves them in a correct place, according\r\n * to other given parameters.\r\n */\r\nfunction hoistNestedLists(nextIndent, modelRemoveStartPosition, viewRemoveStartPosition, viewRemovedItem, conversionApi, model) {\r\n    // Find correct previous model list item element.\r\n    // The element has to have either same or smaller indent than given reference indent.\r\n    // This will be the model element which will get nested items (if it has smaller indent) or sibling items (if it has same indent).\r\n    // Keep in mind that such element might not be found, if removed item was the first item.\r\n    const prevModelItem = getSiblingListItem(modelRemoveStartPosition.nodeBefore, {\r\n        sameIndent: true,\r\n        smallerIndent: true,\r\n        listIndent: nextIndent\r\n    });\r\n    const mapper = conversionApi.mapper;\r\n    const viewWriter = conversionApi.writer;\r\n    // Indent of found element or `null` if the element has not been found.\r\n    const prevIndent = prevModelItem ? prevModelItem.getAttribute('listIndent') : null;\r\n    let insertPosition;\r\n    if (!prevModelItem) {\r\n        // If element has not been found, simply insert lists at the position where the removed item was:\r\n        //\r\n        // Lorem ipsum.\r\n        // 1 --------           <--- this is removed, no previous list item, put nested items in place of removed item.\r\n        //   1.1 --------       <--- this is reference indent.\r\n        //     1.1.1 --------\r\n        //     1.1.2 --------\r\n        //   1.2 --------\r\n        //\r\n        // Becomes:\r\n        //\r\n        // Lorem ipsum.\r\n        // 1.1 --------\r\n        //   1.1.1 --------\r\n        //   1.1.2 --------\r\n        // 1.2 --------\r\n        insertPosition = viewRemoveStartPosition;\r\n    }\r\n    else if (prevIndent == nextIndent) {\r\n        // If element has been found and has same indent as reference indent it means that nested items should\r\n        // become siblings of found element:\r\n        //\r\n        // 1 --------\r\n        //   1.1 --------\r\n        //   1.2 --------       <--- this is `prevModelItem`.\r\n        // 2 --------           <--- this is removed, previous list item has indent same as reference indent.\r\n        //   2.1 --------       <--- this is reference indent, this and 2.2 should become siblings of 1.2.\r\n        //   2.2 --------\r\n        //\r\n        // Becomes:\r\n        //\r\n        // 1 --------\r\n        //   1.1 --------\r\n        //   1.2 --------\r\n        //   2.1 --------\r\n        //   2.2 --------\r\n        const prevViewList = mapper.toViewElement(prevModelItem).parent;\r\n        insertPosition = viewWriter.createPositionAfter(prevViewList);\r\n    }\r\n    else {\r\n        // If element has been found and has smaller indent as reference indent it means that nested items\r\n        // should become nested items of found item:\r\n        //\r\n        // 1 --------           <--- this is `prevModelItem`.\r\n        //   1.1 --------       <--- this is removed, previous list item has indent smaller than reference indent.\r\n        //     1.1.1 --------   <--- this is reference indent, this and 1.1.1 should become nested items of 1.\r\n        //     1.1.2 --------\r\n        //   1.2 --------\r\n        //\r\n        // Becomes:\r\n        //\r\n        // 1 --------\r\n        //   1.1.1 --------\r\n        //   1.1.2 --------\r\n        //   1.2 --------\r\n        //\r\n        // Note: in this case 1.1.1 have indent 2 while 1 have indent 0. In model that should not be possible,\r\n        // because following item may have indent bigger only by one. But this is fixed by postfixer.\r\n        const modelPosition = model.createPositionAt(prevModelItem, 'end');\r\n        insertPosition = mapper.toViewPosition(modelPosition);\r\n    }\r\n    insertPosition = positionAfterUiElements(insertPosition);\r\n    // Handle multiple lists. This happens if list item has nested numbered and bulleted lists. Following lists\r\n    // are inserted after the first list (no need to recalculate insertion position for them).\r\n    for (const child of [...viewRemovedItem.getChildren()]) {\r\n        if (isList(child)) {\r\n            insertPosition = viewWriter.move(viewWriter.createRangeOn(child), insertPosition).end;\r\n            mergeViewLists(viewWriter, child, child.nextSibling);\r\n            mergeViewLists(viewWriter, child.previousSibling, child);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Checks if view element is a list type (ul or ol).\r\n */\r\nfunction isList(viewElement) {\r\n    return viewElement.is('element', 'ol') || viewElement.is('element', 'ul');\r\n}\r\n/**\r\n * Calculates the indent value for a list item. Handles HTML compliant and non-compliant lists.\r\n *\r\n * Also, fixes non HTML compliant lists indents:\r\n *\r\n * ```\r\n * before:                                     fixed list:\r\n * OL                                          OL\r\n * |-> LI (parent LIs: 0)                      |-> LI     (indent: 0)\r\n *     |-> OL                                  |-> OL\r\n *         |-> OL                                  |\r\n *         |   |-> OL                              |\r\n *         |       |-> OL                          |\r\n *         |           |-> LI (parent LIs: 1)      |-> LI (indent: 1)\r\n *         |-> LI (parent LIs: 1)                  |-> LI (indent: 1)\r\n *\r\n * before:                                     fixed list:\r\n * OL                                          OL\r\n * |-> OL                                      |\r\n *     |-> OL                                  |\r\n *          |-> OL                             |\r\n *              |-> LI (parent LIs: 0)         |-> LI        (indent: 0)\r\n *\r\n * before:                                     fixed list:\r\n * OL                                          OL\r\n * |-> LI (parent LIs: 0)                      |-> LI         (indent: 0)\r\n * |-> OL                                          |-> OL\r\n *     |-> LI (parent LIs: 0)                          |-> LI (indent: 1)\r\n * ```\r\n */\r\nfunction getIndent(listItem) {\r\n    let indent = 0;\r\n    let parent = listItem.parent;\r\n    while (parent) {\r\n        // Each LI in the tree will result in an increased indent for HTML compliant lists.\r\n        if (parent.is('element', 'li')) {\r\n            indent++;\r\n        }\r\n        else {\r\n            // If however the list is nested in other list we should check previous sibling of any of the list elements...\r\n            const previousSibling = parent.previousSibling;\r\n            // ...because the we might need increase its indent:\r\n            //\t\tbefore:                           fixed list:\r\n            //\t\tOL                                OL\r\n            //\t\t|-> LI (parent LIs: 0)            |-> LI         (indent: 0)\r\n            //\t\t|-> OL                                |-> OL\r\n            //\t\t    |-> LI (parent LIs: 0)                |-> LI (indent: 1)\r\n            if (previousSibling && previousSibling.is('element', 'li')) {\r\n                indent++;\r\n            }\r\n        }\r\n        parent = parent.parent;\r\n    }\r\n    return indent;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/list/listediting\r\n */\r\nimport ListCommand from './listcommand';\r\nimport IndentCommand from './indentcommand';\r\nimport ListUtils from './listutils';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Enter } from 'ckeditor5/src/enter';\r\nimport { Delete } from 'ckeditor5/src/typing';\r\nimport { cleanList, cleanListItem, modelViewInsertion, modelViewChangeType, modelViewMergeAfterChangeType, modelViewMergeAfter, modelViewRemove, modelViewSplitOnInsert, modelViewChangeIndent, modelChangePostFixer, modelIndentPasteFixer, viewModelConverter, modelToViewPosition, viewToModelPosition } from './converters';\r\nimport '../../theme/list.css';\r\n/**\r\n * The engine of the list feature. It handles creating, editing and removing lists and list items.\r\n *\r\n * It registers the `'numberedList'`, `'bulletedList'`, `'indentList'` and `'outdentList'` commands.\r\n */\r\nexport default class ListEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ListEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Enter, Delete, ListUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Schema.\r\n        // Note: in case `$block` will ever be allowed in `listItem`, keep in mind that this feature\r\n        // uses `Selection#getSelectedBlocks()` without any additional processing to obtain all selected list items.\r\n        // If there are blocks allowed inside list item, algorithms using `getSelectedBlocks()` will have to be modified.\r\n        editor.model.schema.register('listItem', {\r\n            inheritAllFrom: '$block',\r\n            allowAttributes: ['listType', 'listIndent']\r\n        });\r\n        // Converters.\r\n        const data = editor.data;\r\n        const editing = editor.editing;\r\n        editor.model.document.registerPostFixer(writer => modelChangePostFixer(editor.model, writer));\r\n        editing.mapper.registerViewToModelLength('li', getViewListItemLength);\r\n        data.mapper.registerViewToModelLength('li', getViewListItemLength);\r\n        editing.mapper.on('modelToViewPosition', modelToViewPosition(editing.view));\r\n        editing.mapper.on('viewToModelPosition', viewToModelPosition(editor.model));\r\n        data.mapper.on('modelToViewPosition', modelToViewPosition(editing.view));\r\n        editor.conversion.for('editingDowncast')\r\n            .add(dispatcher => {\r\n            dispatcher.on('insert', modelViewSplitOnInsert, { priority: 'high' });\r\n            dispatcher.on('insert:listItem', modelViewInsertion(editor.model));\r\n            dispatcher.on('attribute:listType:listItem', modelViewChangeType, { priority: 'high' });\r\n            dispatcher.on('attribute:listType:listItem', modelViewMergeAfterChangeType, { priority: 'low' });\r\n            dispatcher.on('attribute:listIndent:listItem', modelViewChangeIndent(editor.model));\r\n            dispatcher.on('remove:listItem', modelViewRemove(editor.model));\r\n            dispatcher.on('remove', modelViewMergeAfter, { priority: 'low' });\r\n        });\r\n        editor.conversion.for('dataDowncast')\r\n            .add(dispatcher => {\r\n            dispatcher.on('insert', modelViewSplitOnInsert, { priority: 'high' });\r\n            dispatcher.on('insert:listItem', modelViewInsertion(editor.model));\r\n        });\r\n        editor.conversion.for('upcast')\r\n            .add(dispatcher => {\r\n            dispatcher.on('element:ul', cleanList, { priority: 'high' });\r\n            dispatcher.on('element:ol', cleanList, { priority: 'high' });\r\n            dispatcher.on('element:li', cleanListItem, { priority: 'high' });\r\n            dispatcher.on('element:li', viewModelConverter);\r\n        });\r\n        // Fix indentation of pasted items.\r\n        editor.model.on('insertContent', modelIndentPasteFixer, { priority: 'high' });\r\n        // Register commands for numbered and bulleted list.\r\n        editor.commands.add('numberedList', new ListCommand(editor, 'numbered'));\r\n        editor.commands.add('bulletedList', new ListCommand(editor, 'bulleted'));\r\n        // Register commands for indenting.\r\n        editor.commands.add('indentList', new IndentCommand(editor, 'forward'));\r\n        editor.commands.add('outdentList', new IndentCommand(editor, 'backward'));\r\n        const viewDocument = editing.view.document;\r\n        // Overwrite default Enter key behavior.\r\n        // If Enter key is pressed with selection collapsed in empty list item, outdent it instead of breaking it.\r\n        this.listenTo(viewDocument, 'enter', (evt, data) => {\r\n            const doc = this.editor.model.document;\r\n            const positionParent = doc.selection.getLastPosition().parent;\r\n            if (doc.selection.isCollapsed && positionParent.name == 'listItem' && positionParent.isEmpty) {\r\n                this.editor.execute('outdentList');\r\n                data.preventDefault();\r\n                evt.stop();\r\n            }\r\n        }, { context: 'li' });\r\n        // Overwrite default Backspace key behavior.\r\n        // If Backspace key is pressed with selection collapsed on first position in first list item, outdent it. #83\r\n        this.listenTo(viewDocument, 'delete', (evt, data) => {\r\n            // Check conditions from those that require less computations like those immediately available.\r\n            if (data.direction !== 'backward') {\r\n                return;\r\n            }\r\n            const selection = this.editor.model.document.selection;\r\n            if (!selection.isCollapsed) {\r\n                return;\r\n            }\r\n            const firstPosition = selection.getFirstPosition();\r\n            if (!firstPosition.isAtStart) {\r\n                return;\r\n            }\r\n            const positionParent = firstPosition.parent;\r\n            if (positionParent.name !== 'listItem') {\r\n                return;\r\n            }\r\n            const previousIsAListItem = positionParent.previousSibling && positionParent.previousSibling.name === 'listItem';\r\n            if (previousIsAListItem) {\r\n                return;\r\n            }\r\n            this.editor.execute('outdentList');\r\n            data.preventDefault();\r\n            evt.stop();\r\n        }, { context: 'li' });\r\n        this.listenTo(editor.editing.view.document, 'tab', (evt, data) => {\r\n            const commandName = data.shiftKey ? 'outdentList' : 'indentList';\r\n            const command = this.editor.commands.get(commandName);\r\n            if (command.isEnabled) {\r\n                editor.execute(commandName);\r\n                data.stopPropagation();\r\n                data.preventDefault();\r\n                evt.stop();\r\n            }\r\n        }, { context: 'li' });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const commands = this.editor.commands;\r\n        const indent = commands.get('indent');\r\n        const outdent = commands.get('outdent');\r\n        if (indent) {\r\n            indent.registerChildCommand(commands.get('indentList'));\r\n        }\r\n        if (outdent) {\r\n            outdent.registerChildCommand(commands.get('outdentList'));\r\n        }\r\n    }\r\n}\r\nfunction getViewListItemLength(element) {\r\n    let length = 1;\r\n    for (const child of element.getChildren()) {\r\n        if (child.name == 'ul' || child.name == 'ol') {\r\n            for (const item of child.getChildren()) {\r\n                length += getViewListItemLength(item);\r\n            }\r\n        }\r\n    }\r\n    return length;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/list\r\n */\r\nimport ListEditing from './list/listediting';\r\nimport ListUI from './list/listui';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\n/**\r\n * The list feature.\r\n *\r\n * This is a \"glue\" plugin that loads the {@link module:list/list/listediting~ListEditing list editing feature}\r\n * and {@link module:list/list/listui~ListUI list UI feature}.\r\n */\r\nexport default class List extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ListEditing, ListUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'List';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/listproperties/liststylecommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { getListTypeFromListStyleType, getSelectedListItems } from '../list/utils';\r\n/**\r\n * The list style command. It changes the `listStyle` attribute of the selected list items.\r\n *\r\n * If the list type (numbered or bulleted) can be inferred from the passed style type,\r\n * the command tries to convert selected items to a list of that type.\r\n * It is used by the {@link module:list/listproperties~ListProperties list properties feature}.\r\n */\r\nexport default class ListStyleCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor The editor instance.\r\n     * @param defaultType The list type that will be used by default if the value was not specified during\r\n     * the command execution.\r\n     */\r\n    constructor(editor, defaultType) {\r\n        super(editor);\r\n        this.defaultType = defaultType;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        this.value = this._getValue();\r\n        this.isEnabled = this._checkEnabled();\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options.type The type of the list style, e.g. `'disc'` or `'square'`. If `null` is specified, the default\r\n     * style will be applied.\r\n     */\r\n    execute(options = {}) {\r\n        this._tryToConvertItemsToList(options);\r\n        const model = this.editor.model;\r\n        const listItems = getSelectedListItems(model);\r\n        if (!listItems.length) {\r\n            return;\r\n        }\r\n        model.change(writer => {\r\n            for (const item of listItems) {\r\n                writer.setAttribute('listStyle', options.type || this.defaultType, item);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     *\r\n     * @returns The current value.\r\n     */\r\n    _getValue() {\r\n        const listItem = this.editor.model.document.selection.getFirstPosition().parent;\r\n        if (listItem && listItem.is('element', 'listItem')) {\r\n            return listItem.getAttribute('listStyle');\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Checks whether the command can be enabled in the current context.\r\n     *\r\n     * @returns Whether the command should be enabled.\r\n     */\r\n    _checkEnabled() {\r\n        const editor = this.editor;\r\n        const numberedList = editor.commands.get('numberedList');\r\n        const bulletedList = editor.commands.get('bulletedList');\r\n        return numberedList.isEnabled || bulletedList.isEnabled;\r\n    }\r\n    /**\r\n     * Checks if the provided list style is valid. Also changes the selection to a list if it's not set yet.\r\n     *\r\n     * @param The type of the list style. If `null` is specified, the function does nothing.\r\n    */\r\n    _tryToConvertItemsToList(options) {\r\n        if (!options.type) {\r\n            return;\r\n        }\r\n        const listType = getListTypeFromListStyleType(options.type);\r\n        if (!listType) {\r\n            return;\r\n        }\r\n        const editor = this.editor;\r\n        const commandName = `${listType}List`;\r\n        const command = editor.commands.get(commandName);\r\n        if (!command.value) {\r\n            editor.execute(commandName);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/listproperties/listreversedcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { getSelectedListItems } from '../list/utils';\r\n/**\r\n * The reversed list command. It changes the `listReversed` attribute of the selected list items. As a result, the list order will be\r\n * reversed.\r\n * It is used by the {@link module:list/listproperties~ListProperties list properties feature}.\r\n */\r\nexport default class ListReversedCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const value = this._getValue();\r\n        this.value = value;\r\n        this.isEnabled = value != null;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options.reversed Whether the list should be reversed.\r\n     */\r\n    execute(options = {}) {\r\n        const model = this.editor.model;\r\n        const listItems = getSelectedListItems(model)\r\n            .filter(item => item.getAttribute('listType') == 'numbered');\r\n        model.change(writer => {\r\n            for (const item of listItems) {\r\n                writer.setAttribute('listReversed', !!options.reversed, item);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     *\r\n     * @returns The current value.\r\n     */\r\n    _getValue() {\r\n        const listItem = this.editor.model.document.selection.getFirstPosition().parent;\r\n        if (listItem && listItem.is('element', 'listItem') && listItem.getAttribute('listType') == 'numbered') {\r\n            return listItem.getAttribute('listReversed');\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/listproperties/liststartcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { getSelectedListItems } from '../list/utils';\r\n/**\r\n * The list start index command. It changes the `listStart` attribute of the selected list items.\r\n * It is used by the {@link module:list/listproperties~ListProperties list properties feature}.\r\n */\r\nexport default class ListStartCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const value = this._getValue();\r\n        this.value = value;\r\n        this.isEnabled = value != null;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     * @param options.startIndex The list start index.\r\n     */\r\n    execute({ startIndex = 1 } = {}) {\r\n        const model = this.editor.model;\r\n        const listItems = getSelectedListItems(model)\r\n            .filter(item => item.getAttribute('listType') == 'numbered');\r\n        model.change(writer => {\r\n            for (const item of listItems) {\r\n                writer.setAttribute('listStart', startIndex >= 0 ? startIndex : 1, item);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Checks the command's {@link #value}.\r\n     *\r\n     * @returns The current value.\r\n     */\r\n    _getValue() {\r\n        const listItem = this.editor.model.document.selection.getFirstPosition().parent;\r\n        if (listItem && listItem.is('element', 'listItem') && listItem.getAttribute('listType') == 'numbered') {\r\n            return listItem.getAttribute('listStart');\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/listproperties/listpropertiesediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ListEditing from '../list/listediting';\r\nimport ListStyleCommand from './liststylecommand';\r\nimport ListReversedCommand from './listreversedcommand';\r\nimport ListStartCommand from './liststartcommand';\r\nimport { getSiblingListItem, getSiblingNodes } from '../list/utils';\r\nconst DEFAULT_LIST_TYPE = 'default';\r\n/**\r\n * The engine of the list properties feature.\r\n *\r\n * It sets the value for the `listItem` attribute of the {@link module:list/list~List `<listItem>`} element that\r\n * allows modifying the list style type.\r\n *\r\n * It registers the `'listStyle'`, `'listReversed'` and `'listStart'` commands if they are enabled in the configuration.\r\n * Read more in {@link module:list/listconfig~ListPropertiesConfig}.\r\n */\r\nexport default class ListPropertiesEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ListEditing];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ListPropertiesEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define('list', {\r\n            properties: {\r\n                styles: true,\r\n                startIndex: false,\r\n                reversed: false\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const enabledProperties = editor.config.get('list.properties');\r\n        const strategies = createAttributeStrategies(enabledProperties);\r\n        // Extend schema.\r\n        model.schema.extend('listItem', {\r\n            allowAttributes: strategies.map(s => s.attributeName)\r\n        });\r\n        for (const strategy of strategies) {\r\n            strategy.addCommand(editor);\r\n        }\r\n        // Fix list attributes when modifying their nesting levels (the `listIndent` attribute).\r\n        this.listenTo(editor.commands.get('indentList'), '_executeCleanup', fixListAfterIndentListCommand(editor, strategies));\r\n        this.listenTo(editor.commands.get('outdentList'), '_executeCleanup', fixListAfterOutdentListCommand(editor, strategies));\r\n        this.listenTo(editor.commands.get('bulletedList'), '_executeCleanup', restoreDefaultListStyle(editor));\r\n        this.listenTo(editor.commands.get('numberedList'), '_executeCleanup', restoreDefaultListStyle(editor));\r\n        // Register a post-fixer that ensures that the attributes is specified in each `listItem` element.\r\n        model.document.registerPostFixer(fixListAttributesOnListItemElements(editor, strategies));\r\n        // Set up conversion.\r\n        editor.conversion.for('upcast').add(upcastListItemAttributes(strategies));\r\n        editor.conversion.for('downcast').add(downcastListItemAttributes(strategies));\r\n        // Handle merging two separated lists into the single one.\r\n        this._mergeListAttributesWhileMergingLists(strategies);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const editor = this.editor;\r\n        // Enable post-fixer that removes the attributes from to-do list items only if the \"TodoList\" plugin is on.\r\n        // We need to registry the hook here since the `TodoList` plugin can be added after the `ListPropertiesEditing`.\r\n        if (editor.commands.get('todoList')) {\r\n            editor.model.document.registerPostFixer(removeListItemAttributesFromTodoList(editor));\r\n        }\r\n    }\r\n    /**\r\n     * Starts listening to {@link module:engine/model/model~Model#deleteContent} and checks whether two lists will be merged into a single\r\n     * one after deleting the content.\r\n     *\r\n     * The purpose of this action is to adjust the `listStyle`, `listReversed` and `listStart` values\r\n     * for the list that was merged.\r\n     *\r\n     * Consider the following model's content:\r\n     *\r\n     * ```xml\r\n     * <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 1</listItem>\r\n     * <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 2</listItem>\r\n     * <paragraph>[A paragraph.]</paragraph>\r\n     * <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"circle\">UL List item 1</listItem>\r\n     * <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"circle\">UL List item 2</listItem>\r\n     * ```\r\n     *\r\n     * After removing the paragraph element, the second list will be merged into the first one.\r\n     * We want to inherit the `listStyle` attribute for the second list from the first one.\r\n     *\r\n     * ```xml\r\n     * <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 1</listItem>\r\n     * <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 2</listItem>\r\n     * <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 1</listItem>\r\n     * <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 2</listItem>\r\n     * ```\r\n     *\r\n     * See https://github.com/ckeditor/ckeditor5/issues/7879.\r\n     *\r\n     * @param attributeStrategies Strategies for the enabled attributes.\r\n     */\r\n    _mergeListAttributesWhileMergingLists(attributeStrategies) {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        // First the outer-most`listItem` in the first list reference.\r\n        // If found, the lists should be merged and this `listItem` provides the attributes\r\n        // and it is also a starting point when searching for items in the second list.\r\n        let firstMostOuterItem;\r\n        // Check whether the removed content is between two lists.\r\n        this.listenTo(model, 'deleteContent', (evt, [selection]) => {\r\n            const firstPosition = selection.getFirstPosition();\r\n            const lastPosition = selection.getLastPosition();\r\n            // Typing or removing content in a single item. Aborting.\r\n            if (firstPosition.parent === lastPosition.parent) {\r\n                return;\r\n            }\r\n            // An element before the content that will be removed is not a list.\r\n            if (!firstPosition.parent.is('element', 'listItem')) {\r\n                return;\r\n            }\r\n            const nextSibling = lastPosition.parent.nextSibling;\r\n            // An element after the content that will be removed is not a list.\r\n            if (!nextSibling || !nextSibling.is('element', 'listItem')) {\r\n                return;\r\n            }\r\n            // Find the outermost list item based on the `listIndent` attribute. We can't assume that `listIndent=0`\r\n            // because the selection can be hooked in nested lists.\r\n            //\r\n            // <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 1</listItem>\r\n            // <listItem listIndent=\"1\" listType=\"bulleted\" listStyle=\"square\">UL List [item 1.1</listItem>\r\n            // <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"circle\">[]UL List item 1.</listItem>\r\n            // <listItem listIndent=\"1\" listType=\"bulleted\" listStyle=\"circle\">UL List ]item 1.1</listItem>\r\n            //\r\n            // After deleting the content, we would like to inherit the \"square\" attribute for the last element:\r\n            //\r\n            // <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 1</listItem>\r\n            // <listItem listIndent=\"1\" listType=\"bulleted\" listStyle=\"square\">UL List []item 1.1</listItem>\r\n            const mostOuterItemList = getSiblingListItem(firstPosition.parent, {\r\n                sameIndent: true,\r\n                listIndent: nextSibling.getAttribute('listIndent')\r\n            });\r\n            // The outermost list item may not exist while removing elements between lists with different value\r\n            // of the `listIndent` attribute. In such a case we don't want to update anything. See: #8073.\r\n            if (!mostOuterItemList) {\r\n                return;\r\n            }\r\n            if (mostOuterItemList.getAttribute('listType') === nextSibling.getAttribute('listType')) {\r\n                firstMostOuterItem = mostOuterItemList;\r\n            }\r\n        }, { priority: 'high' });\r\n        // If so, update the `listStyle` attribute for the second list.\r\n        this.listenTo(model, 'deleteContent', () => {\r\n            if (!firstMostOuterItem) {\r\n                return;\r\n            }\r\n            model.change(writer => {\r\n                // Find the first most-outer item list in the merged list.\r\n                // A case when the first list item in the second list was merged into the last item in the first list.\r\n                //\r\n                // <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 1</listItem>\r\n                // <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"square\">UL List item 2</listItem>\r\n                // <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"circle\">[]UL List item 1</listItem>\r\n                // <listItem listIndent=\"0\" listType=\"bulleted\" listStyle=\"circle\">UL List item 2</listItem>\r\n                const secondListMostOuterItem = getSiblingListItem(firstMostOuterItem.nextSibling, {\r\n                    sameIndent: true,\r\n                    listIndent: firstMostOuterItem.getAttribute('listIndent'),\r\n                    direction: 'forward'\r\n                });\r\n                // If the selection ends in a non-list element, there are no <listItem>s that would require adjustments.\r\n                // See: #8642.\r\n                if (!secondListMostOuterItem) {\r\n                    firstMostOuterItem = null;\r\n                    return;\r\n                }\r\n                const items = [\r\n                    secondListMostOuterItem,\r\n                    ...getSiblingNodes(writer.createPositionAt(secondListMostOuterItem, 0), 'forward')\r\n                ];\r\n                for (const listItem of items) {\r\n                    for (const strategy of attributeStrategies) {\r\n                        if (strategy.appliesToListItem(listItem)) {\r\n                            const attributeName = strategy.attributeName;\r\n                            const value = firstMostOuterItem.getAttribute(attributeName);\r\n                            writer.setAttribute(attributeName, value, listItem);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            firstMostOuterItem = null;\r\n        }, { priority: 'low' });\r\n    }\r\n}\r\n/**\r\n * Creates an array of strategies for dealing with enabled listItem attributes.\r\n */\r\nfunction createAttributeStrategies(enabledProperties) {\r\n    const strategies = [];\r\n    if (enabledProperties.styles) {\r\n        strategies.push({\r\n            attributeName: 'listStyle',\r\n            defaultValue: DEFAULT_LIST_TYPE,\r\n            addCommand(editor) {\r\n                editor.commands.add('listStyle', new ListStyleCommand(editor, DEFAULT_LIST_TYPE));\r\n            },\r\n            appliesToListItem() {\r\n                return true;\r\n            },\r\n            setAttributeOnDowncast(writer, listStyle, element) {\r\n                if (listStyle && listStyle !== DEFAULT_LIST_TYPE) {\r\n                    writer.setStyle('list-style-type', listStyle, element);\r\n                }\r\n                else {\r\n                    writer.removeStyle('list-style-type', element);\r\n                }\r\n            },\r\n            getAttributeOnUpcast(listParent) {\r\n                return listParent.getStyle('list-style-type') || DEFAULT_LIST_TYPE;\r\n            }\r\n        });\r\n    }\r\n    if (enabledProperties.reversed) {\r\n        strategies.push({\r\n            attributeName: 'listReversed',\r\n            defaultValue: false,\r\n            addCommand(editor) {\r\n                editor.commands.add('listReversed', new ListReversedCommand(editor));\r\n            },\r\n            appliesToListItem(item) {\r\n                return item.getAttribute('listType') == 'numbered';\r\n            },\r\n            setAttributeOnDowncast(writer, listReversed, element) {\r\n                if (listReversed) {\r\n                    writer.setAttribute('reversed', 'reversed', element);\r\n                }\r\n                else {\r\n                    writer.removeAttribute('reversed', element);\r\n                }\r\n            },\r\n            getAttributeOnUpcast(listParent) {\r\n                return listParent.hasAttribute('reversed');\r\n            }\r\n        });\r\n    }\r\n    if (enabledProperties.startIndex) {\r\n        strategies.push({\r\n            attributeName: 'listStart',\r\n            defaultValue: 1,\r\n            addCommand(editor) {\r\n                editor.commands.add('listStart', new ListStartCommand(editor));\r\n            },\r\n            appliesToListItem(item) {\r\n                return item.getAttribute('listType') == 'numbered';\r\n            },\r\n            setAttributeOnDowncast(writer, listStart, element) {\r\n                if (listStart == 0 || listStart > 1) {\r\n                    writer.setAttribute('start', listStart, element);\r\n                }\r\n                else {\r\n                    writer.removeAttribute('start', element);\r\n                }\r\n            },\r\n            getAttributeOnUpcast(listParent) {\r\n                const startAttributeValue = listParent.getAttribute('start');\r\n                return startAttributeValue >= 0 ? startAttributeValue : 1;\r\n            }\r\n        });\r\n    }\r\n    return strategies;\r\n}\r\n/**\r\n * Returns a converter consumes the `style`, `reversed` and `start` attribute.\r\n * In `style` it searches for the `list-style-type` definition.\r\n * If not found, the `\"default\"` value will be used.\r\n */\r\nfunction upcastListItemAttributes(attributeStrategies) {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:li', (evt, data, conversionApi) => {\r\n            // https://github.com/ckeditor/ckeditor5/issues/13858\r\n            if (!data.modelRange) {\r\n                return;\r\n            }\r\n            const listParent = data.viewItem.parent;\r\n            const listItem = data.modelRange.start.nodeAfter || data.modelRange.end.nodeBefore;\r\n            for (const strategy of attributeStrategies) {\r\n                if (strategy.appliesToListItem(listItem)) {\r\n                    const listStyle = strategy.getAttributeOnUpcast(listParent);\r\n                    conversionApi.writer.setAttribute(strategy.attributeName, listStyle, listItem);\r\n                }\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * Returns a converter that adds `reversed`, `start` attributes and adds `list-style-type` definition as a value for the `style` attribute.\r\n * The `\"default\"` values are removed and not present in the view/data.\r\n */\r\nfunction downcastListItemAttributes(attributeStrategies) {\r\n    return (dispatcher) => {\r\n        for (const strategy of attributeStrategies) {\r\n            dispatcher.on(`attribute:${strategy.attributeName}:listItem`, (evt, data, conversionApi) => {\r\n                const viewWriter = conversionApi.writer;\r\n                const currentElement = data.item;\r\n                const previousElement = getSiblingListItem(currentElement.previousSibling, {\r\n                    sameIndent: true,\r\n                    listIndent: currentElement.getAttribute('listIndent'),\r\n                    direction: 'backward'\r\n                });\r\n                const viewItem = conversionApi.mapper.toViewElement(currentElement);\r\n                // A case when elements represent different lists. We need to separate their container.\r\n                if (!areRepresentingSameList(currentElement, previousElement)) {\r\n                    viewWriter.breakContainer(viewWriter.createPositionBefore(viewItem));\r\n                }\r\n                strategy.setAttributeOnDowncast(viewWriter, data.attributeNewValue, viewItem.parent);\r\n            }, { priority: 'low' });\r\n        }\r\n    };\r\n    /**\r\n     * Checks whether specified list items belong to the same list.\r\n     */\r\n    function areRepresentingSameList(listItem1, listItem2) {\r\n        return listItem2 &&\r\n            listItem1.getAttribute('listType') === listItem2.getAttribute('listType') &&\r\n            listItem1.getAttribute('listIndent') === listItem2.getAttribute('listIndent') &&\r\n            listItem1.getAttribute('listStyle') === listItem2.getAttribute('listStyle') &&\r\n            listItem1.getAttribute('listReversed') === listItem2.getAttribute('listReversed') &&\r\n            listItem1.getAttribute('listStart') === listItem2.getAttribute('listStart');\r\n    }\r\n}\r\n/**\r\n * When indenting list, nested list should clear its value for the attributes or inherit from nested lists.\r\n *\r\n * ■ List item 1.\r\n * ■ List item 2.[]\r\n * ■ List item 3.\r\n * editor.execute( 'indentList' );\r\n *\r\n * ■ List item 1.\r\n *     ○ List item 2.[]\r\n * ■ List item 3.\r\n */\r\nfunction fixListAfterIndentListCommand(editor, attributeStrategies) {\r\n    return (evt, changedItems) => {\r\n        const root = changedItems[0];\r\n        const rootIndent = root.getAttribute('listIndent');\r\n        const itemsToUpdate = changedItems.filter(item => item.getAttribute('listIndent') === rootIndent);\r\n        // A case where a few list items are indented must be checked separately\r\n        // since `getSiblingListItem()` returns the first changed element.\r\n        // ■ List item 1.\r\n        //     ○ [List item 2.\r\n        //     ○ List item 3.]\r\n        // ■ List item 4.\r\n        //\r\n        // List items: `2` and `3` should be adjusted.\r\n        let previousSibling = null;\r\n        if (root.previousSibling.getAttribute('listIndent') + 1 !== rootIndent) {\r\n            previousSibling = getSiblingListItem(root.previousSibling, {\r\n                sameIndent: true, direction: 'backward', listIndent: rootIndent\r\n            });\r\n        }\r\n        editor.model.change(writer => {\r\n            for (const item of itemsToUpdate) {\r\n                for (const strategy of attributeStrategies) {\r\n                    if (strategy.appliesToListItem(item)) {\r\n                        const valueToSet = previousSibling == null ?\r\n                            strategy.defaultValue :\r\n                            previousSibling.getAttribute(strategy.attributeName);\r\n                        writer.setAttribute(strategy.attributeName, valueToSet, item);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * When outdenting a list, a nested list should copy attribute values\r\n * from the previous sibling list item including the same value for the `listIndent` value.\r\n *\r\n * ■ List item 1.\r\n *     ○ List item 2.[]\r\n * ■ List item 3.\r\n *\r\n * editor.execute( 'outdentList' );\r\n *\r\n * ■ List item 1.\r\n * ■ List item 2.[]\r\n * ■ List item 3.\r\n */\r\nfunction fixListAfterOutdentListCommand(editor, attributeStrategies) {\r\n    return (evt, changedItems) => {\r\n        changedItems = changedItems.reverse().filter(item => item.is('element', 'listItem'));\r\n        if (!changedItems.length) {\r\n            return;\r\n        }\r\n        const indent = changedItems[0].getAttribute('listIndent');\r\n        const listType = changedItems[0].getAttribute('listType');\r\n        let listItem = changedItems[0].previousSibling;\r\n        // ■ List item 1.\r\n        //     ○ List item 2.\r\n        //     ○ List item 3.[]\r\n        // ■ List item 4.\r\n        //\r\n        // After outdenting a list, `List item 3` should inherit the `listStyle` attribute from `List item 1`.\r\n        //\r\n        // ■ List item 1.\r\n        //     ○ List item 2.\r\n        // ■ List item 3.[]\r\n        // ■ List item 4.\r\n        if (listItem.is('element', 'listItem')) {\r\n            while (listItem.getAttribute('listIndent') !== indent) {\r\n                listItem = listItem.previousSibling;\r\n            }\r\n        }\r\n        else {\r\n            listItem = null;\r\n        }\r\n        // Outdenting such a list should restore values based on `List item 4`.\r\n        // ■ List item 1.[]\r\n        //     ○ List item 2.\r\n        //     ○ List item 3.\r\n        // ■ List item 4.\r\n        if (!listItem) {\r\n            listItem = changedItems[changedItems.length - 1].nextSibling;\r\n        }\r\n        // And such a list should not modify anything.\r\n        // However, `listItem` can indicate a node below the list. Be sure that we have the `listItem` element.\r\n        // ■ List item 1.[]\r\n        //     ○ List item 2.\r\n        //     ○ List item 3.\r\n        // <paragraph>The later if check.</paragraph>\r\n        if (!listItem || !listItem.is('element', 'listItem')) {\r\n            return;\r\n        }\r\n        // Do not modify the list if found `listItem` represents other type of list than outdented list items.\r\n        if (listItem.getAttribute('listType') !== listType) {\r\n            return;\r\n        }\r\n        editor.model.change(writer => {\r\n            const itemsToUpdate = changedItems.filter(item => item.getAttribute('listIndent') === indent);\r\n            for (const item of itemsToUpdate) {\r\n                for (const strategy of attributeStrategies) {\r\n                    if (strategy.appliesToListItem(item)) {\r\n                        const attributeName = strategy.attributeName;\r\n                        const valueToSet = listItem.getAttribute(attributeName);\r\n                        writer.setAttribute(attributeName, valueToSet, item);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Each `listItem` element must have specified the `listStyle`, `listReversed` and `listStart` attributes\r\n * if they are enabled and supported by its `listType`.\r\n * This post-fixer checks whether inserted elements `listItem` elements should inherit the attribute values from\r\n * their sibling nodes or should use the default values.\r\n *\r\n * Paragraph[]\r\n * ■ List item 1. // [listStyle=\"square\", listType=\"bulleted\"]\r\n * ■ List item 2. // ...\r\n * ■ List item 3. // ...\r\n *\r\n * editor.execute( 'bulletedList' )\r\n *\r\n * ■ Paragraph[]  // [listStyle=\"square\", listType=\"bulleted\"]\r\n * ■ List item 1. // [listStyle=\"square\", listType=\"bulleted\"]\r\n * ■ List item 2.\r\n * ■ List item 3.\r\n *\r\n * It also covers a such change:\r\n *\r\n * [Paragraph 1\r\n * Paragraph 2]\r\n * ■ List item 1. // [listStyle=\"square\", listType=\"bulleted\"]\r\n * ■ List item 2. // ...\r\n * ■ List item 3. // ...\r\n *\r\n * editor.execute( 'numberedList' )\r\n *\r\n * 1. [Paragraph 1 // [listStyle=\"default\", listType=\"numbered\"]\r\n * 2. Paragraph 2] // [listStyle=\"default\", listType=\"numbered\"]\r\n * ■ List item 1.  // [listStyle=\"square\", listType=\"bulleted\"]\r\n * ■ List item 2.  // ...\r\n * ■ List item 3.  // ...\r\n */\r\nfunction fixListAttributesOnListItemElements(editor, attributeStrategies) {\r\n    return (writer) => {\r\n        let wasFixed = false;\r\n        const insertedListItems = getChangedListItems(editor.model.document.differ.getChanges())\r\n            .filter(item => {\r\n            // Don't touch todo lists. They are handled in another post-fixer.\r\n            return item.getAttribute('listType') !== 'todo';\r\n        });\r\n        if (!insertedListItems.length) {\r\n            return wasFixed;\r\n        }\r\n        // Check whether the last inserted element is next to the `listItem` element.\r\n        //\r\n        // ■ Paragraph[]  // <-- The inserted item.\r\n        // ■ List item 1.\r\n        let existingListItem = insertedListItems[insertedListItems.length - 1].nextSibling;\r\n        // If it doesn't, maybe the `listItem` was inserted at the end of the list.\r\n        //\r\n        // ■ List item 1.\r\n        // ■ Paragraph[]  // <-- The inserted item.\r\n        if (!existingListItem || !existingListItem.is('element', 'listItem')) {\r\n            existingListItem = insertedListItems[0].previousSibling;\r\n            if (existingListItem) {\r\n                const indent = insertedListItems[0].getAttribute('listIndent');\r\n                // But we need to find a `listItem` with the `listIndent=0` attribute.\r\n                // If doesn't, maybe the `listItem` was inserted at the end of the list.\r\n                //\r\n                // ■ List item 1.\r\n                //     ○ List item 2.\r\n                // ■ Paragraph[]  // <-- The inserted item.\r\n                while (existingListItem.is('element', 'listItem') && existingListItem.getAttribute('listIndent') !== indent) {\r\n                    existingListItem = existingListItem.previousSibling;\r\n                    // If the item does not exist, most probably there is no other content in the editor. See: #8072.\r\n                    if (!existingListItem) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        for (const strategy of attributeStrategies) {\r\n            const attributeName = strategy.attributeName;\r\n            for (const item of insertedListItems) {\r\n                if (!strategy.appliesToListItem(item)) {\r\n                    writer.removeAttribute(attributeName, item);\r\n                    continue;\r\n                }\r\n                if (!item.hasAttribute(attributeName)) {\r\n                    if (shouldInheritListType(existingListItem, item, strategy)) {\r\n                        writer.setAttribute(attributeName, existingListItem.getAttribute(attributeName), item);\r\n                    }\r\n                    else {\r\n                        writer.setAttribute(attributeName, strategy.defaultValue, item);\r\n                    }\r\n                    wasFixed = true;\r\n                }\r\n                else {\r\n                    // Adjust the `listStyle`, `listReversed` and `listStart`\r\n                    // attributes for inserted (pasted) items. See #8160.\r\n                    //\r\n                    // ■ List item 1. // [listStyle=\"square\", listType=\"bulleted\"]\r\n                    //     ○ List item 1.1. // [listStyle=\"circle\", listType=\"bulleted\"]\r\n                    //     ○ [] (selection is here)\r\n                    //\r\n                    // Then, pasting a list with different attributes (listStyle, listType):\r\n                    //\r\n                    // 1. First. // [listStyle=\"decimal\", listType=\"numbered\"]\r\n                    // 2. Second // [listStyle=\"decimal\", listType=\"numbered\"]\r\n                    //\r\n                    // The `listType` attribute will be corrected by the `ListEditing` converters.\r\n                    // We need to adjust the `listStyle` attribute. Expected structure:\r\n                    //\r\n                    // ■ List item 1. // [listStyle=\"square\", listType=\"bulleted\"]\r\n                    //     ○ List item 1.1. // [listStyle=\"circle\", listType=\"bulleted\"]\r\n                    //     ○ First. // [listStyle=\"circle\", listType=\"bulleted\"]\r\n                    //     ○ Second // [listStyle=\"circle\", listType=\"bulleted\"]\r\n                    const previousSibling = item.previousSibling;\r\n                    if (shouldInheritListTypeFromPreviousItem(previousSibling, item, strategy.attributeName)) {\r\n                        writer.setAttribute(attributeName, previousSibling.getAttribute(attributeName), item);\r\n                        wasFixed = true;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return wasFixed;\r\n    };\r\n}\r\n/**\r\n * Checks whether the `listStyle`, `listReversed` and `listStart` attributes\r\n * should be copied from the `baseItem` element.\r\n *\r\n * The attribute should be copied if the inserted element does not have defined it and\r\n * the value for the element is other than default in the base element.\r\n */\r\nfunction shouldInheritListType(baseItem, itemToChange, attributeStrategy) {\r\n    if (!baseItem) {\r\n        return false;\r\n    }\r\n    const baseListAttribute = baseItem.getAttribute(attributeStrategy.attributeName);\r\n    if (!baseListAttribute) {\r\n        return false;\r\n    }\r\n    if (baseListAttribute == attributeStrategy.defaultValue) {\r\n        return false;\r\n    }\r\n    if (baseItem.getAttribute('listType') !== itemToChange.getAttribute('listType')) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Checks whether the `listStyle`, `listReversed` and `listStart` attributes\r\n * should be copied from previous list item.\r\n *\r\n * The attribute should be copied if there's a mismatch of styles of the pasted list into a nested list.\r\n * Top-level lists are not normalized as we allow side-by-side list of different types.\r\n */\r\nfunction shouldInheritListTypeFromPreviousItem(previousItem, itemToChange, attributeName) {\r\n    if (!previousItem || !previousItem.is('element', 'listItem')) {\r\n        return false;\r\n    }\r\n    if (itemToChange.getAttribute('listType') !== previousItem.getAttribute('listType')) {\r\n        return false;\r\n    }\r\n    const previousItemIndent = previousItem.getAttribute('listIndent');\r\n    if (previousItemIndent < 1 || previousItemIndent !== itemToChange.getAttribute('listIndent')) {\r\n        return false;\r\n    }\r\n    const previousItemListAttribute = previousItem.getAttribute(attributeName);\r\n    if (!previousItemListAttribute || previousItemListAttribute === itemToChange.getAttribute(attributeName)) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/**\r\n * Removes the `listStyle`, `listReversed` and `listStart` attributes from \"todo\" list items.\r\n */\r\nfunction removeListItemAttributesFromTodoList(editor) {\r\n    return (writer) => {\r\n        const todoListItems = getChangedListItems(editor.model.document.differ.getChanges())\r\n            .filter(item => {\r\n            // Handle the todo lists only. The rest is handled in another post-fixer.\r\n            return item.getAttribute('listType') === 'todo' && (item.hasAttribute('listStyle') ||\r\n                item.hasAttribute('listReversed') ||\r\n                item.hasAttribute('listStart'));\r\n        });\r\n        if (!todoListItems.length) {\r\n            return false;\r\n        }\r\n        for (const item of todoListItems) {\r\n            writer.removeAttribute('listStyle', item);\r\n            writer.removeAttribute('listReversed', item);\r\n            writer.removeAttribute('listStart', item);\r\n        }\r\n        return true;\r\n    };\r\n}\r\n/**\r\n * Restores the `listStyle` attribute after changing the list type.\r\n */\r\nfunction restoreDefaultListStyle(editor) {\r\n    return (evt, changedItems) => {\r\n        changedItems = changedItems.filter(item => item.is('element', 'listItem'));\r\n        editor.model.change(writer => {\r\n            for (const item of changedItems) {\r\n                // Remove the attribute. Post-fixer will restore the proper value.\r\n                writer.removeAttribute('listStyle', item);\r\n            }\r\n        });\r\n    };\r\n}\r\n/**\r\n * Returns the `listItem` that was inserted or changed.\r\n *\r\n * @param changes The changes list returned by the differ.\r\n */\r\nfunction getChangedListItems(changes) {\r\n    const items = [];\r\n    for (const change of changes) {\r\n        const item = getItemFromChange(change);\r\n        if (item && item.is('element', 'listItem')) {\r\n            items.push(item);\r\n        }\r\n    }\r\n    return items;\r\n}\r\nfunction getItemFromChange(change) {\r\n    if (change.type === 'attribute') {\r\n        return change.range.start.nodeAfter;\r\n    }\r\n    if (change.type === 'insert') {\r\n        return change.position.nodeAfter;\r\n    }\r\n    return null;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/listproperties\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport ListPropertiesEditing from './listproperties/listpropertiesediting';\r\nimport ListPropertiesUI from './listproperties/listpropertiesui';\r\n/**\r\n * The list properties feature.\r\n *\r\n * This is a \"glue\" plugin that loads the {@link module:list/listproperties/listpropertiesediting~ListPropertiesEditing list properties\r\n * editing feature} and the {@link module:list/listproperties/listpropertiesui~ListPropertiesUI list properties UI feature}.\r\n */\r\nexport default class ListProperties extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ListPropertiesEditing, ListPropertiesUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'ListProperties';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/todolist/checktodolistcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nconst attributeKey = 'todoListChecked';\r\n/**\r\n * The check to-do command.\r\n *\r\n * The command is registered by the {@link module:list/todolist/todolistediting~TodoListEditing} as\r\n * the `checkTodoList` editor command and it is also available via aliased `todoListCheck` name.\r\n */\r\nexport default class CheckTodoListCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._selectedElements = [];\r\n        // Refresh command before executing to be sure all values are up to date.\r\n        // It is needed when selection has changed before command execution, in the same change block.\r\n        this.on('execute', () => {\r\n            this.refresh();\r\n        }, { priority: 'highest' });\r\n    }\r\n    /**\r\n     * Updates the command's {@link #value} and {@link #isEnabled} properties based on the current selection.\r\n     */\r\n    refresh() {\r\n        this._selectedElements = this._getSelectedItems();\r\n        this.value = this._selectedElements.every(element => !!element.getAttribute(attributeKey));\r\n        this.isEnabled = !!this._selectedElements.length;\r\n    }\r\n    /**\r\n     * Gets all to-do list items selected by the {@link module:engine/model/selection~Selection}.\r\n     */\r\n    _getSelectedItems() {\r\n        const model = this.editor.model;\r\n        const schema = model.schema;\r\n        const selectionRange = model.document.selection.getFirstRange();\r\n        const startElement = selectionRange.start.parent;\r\n        const elements = [];\r\n        if (schema.checkAttribute(startElement, attributeKey)) {\r\n            elements.push(startElement);\r\n        }\r\n        for (const item of selectionRange.getItems()) {\r\n            if (schema.checkAttribute(item, attributeKey) && !elements.includes(item)) {\r\n                elements.push(item);\r\n            }\r\n        }\r\n        return elements;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @param options.forceValue If set, it will force the command behavior. If `true`, the command will apply\r\n     * the attribute. Otherwise, the command will remove the attribute. If not set, the command will look for its current\r\n     * value to decide what it should do.\r\n     */\r\n    execute(options = {}) {\r\n        this.editor.model.change(writer => {\r\n            for (const element of this._selectedElements) {\r\n                const value = (options.forceValue === undefined) ? !this.value : options.forceValue;\r\n                if (value) {\r\n                    writer.setAttribute(attributeKey, true, element);\r\n                }\r\n                else {\r\n                    writer.removeAttribute(attributeKey, element);\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { createElement } from 'ckeditor5/src/utils';\r\nimport { generateLiInUl, injectViewList, positionAfterUiElements, findNestedList } from '../list/utils';\r\n/**\r\n * A model-to-view converter for the `listItem` model element insertion.\r\n *\r\n * It converts the `listItem` model element to an unordered list with a {@link module:engine/view/uielement~UIElement checkbox element}\r\n * at the beginning of each list item. It also merges the list with surrounding lists (if available).\r\n *\r\n * It is used by {@link module:engine/controller/editingcontroller~EditingController}.\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert\r\n * @param model Model instance.\r\n * @param onCheckboxChecked Callback function.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function modelViewInsertion(model, onCheckboxChecked) {\r\n    return (evt, data, conversionApi) => {\r\n        const consumable = conversionApi.consumable;\r\n        if (!consumable.test(data.item, 'insert') ||\r\n            !consumable.test(data.item, 'attribute:listType') ||\r\n            !consumable.test(data.item, 'attribute:listIndent')) {\r\n            return;\r\n        }\r\n        if (data.item.getAttribute('listType') != 'todo') {\r\n            return;\r\n        }\r\n        const modelItem = data.item;\r\n        consumable.consume(modelItem, 'insert');\r\n        consumable.consume(modelItem, 'attribute:listType');\r\n        consumable.consume(modelItem, 'attribute:listIndent');\r\n        consumable.consume(modelItem, 'attribute:todoListChecked');\r\n        const viewWriter = conversionApi.writer;\r\n        const viewItem = generateLiInUl(modelItem, conversionApi);\r\n        const isChecked = !!modelItem.getAttribute('todoListChecked');\r\n        const checkmarkElement = createCheckmarkElement(modelItem, viewWriter, isChecked, onCheckboxChecked);\r\n        const span = viewWriter.createContainerElement('span', {\r\n            class: 'todo-list__label__description'\r\n        });\r\n        viewWriter.addClass('todo-list', viewItem.parent);\r\n        viewWriter.insert(viewWriter.createPositionAt(viewItem, 0), checkmarkElement);\r\n        viewWriter.insert(viewWriter.createPositionAfter(checkmarkElement), span);\r\n        injectViewList(modelItem, viewItem, conversionApi, model);\r\n    };\r\n}\r\n/**\r\n * A model-to-view converter for the `listItem` model element insertion.\r\n *\r\n * It is used by {@link module:engine/controller/datacontroller~DataController}.\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:insert\r\n * @param model Model instance.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function dataModelViewInsertion(model) {\r\n    return (evt, data, conversionApi) => {\r\n        const consumable = conversionApi.consumable;\r\n        if (!consumable.test(data.item, 'insert') ||\r\n            !consumable.test(data.item, 'attribute:listType') ||\r\n            !consumable.test(data.item, 'attribute:listIndent')) {\r\n            return;\r\n        }\r\n        if (data.item.getAttribute('listType') != 'todo') {\r\n            return;\r\n        }\r\n        const modelItem = data.item;\r\n        consumable.consume(modelItem, 'insert');\r\n        consumable.consume(modelItem, 'attribute:listType');\r\n        consumable.consume(modelItem, 'attribute:listIndent');\r\n        consumable.consume(modelItem, 'attribute:todoListChecked');\r\n        const viewWriter = conversionApi.writer;\r\n        const viewItem = generateLiInUl(modelItem, conversionApi);\r\n        viewWriter.addClass('todo-list', viewItem.parent);\r\n        const label = viewWriter.createContainerElement('label', {\r\n            class: 'todo-list__label'\r\n        });\r\n        const checkbox = viewWriter.createEmptyElement('input', {\r\n            type: 'checkbox',\r\n            disabled: 'disabled'\r\n        });\r\n        const span = viewWriter.createContainerElement('span', {\r\n            class: 'todo-list__label__description'\r\n        });\r\n        if (modelItem.getAttribute('todoListChecked')) {\r\n            viewWriter.setAttribute('checked', 'checked', checkbox);\r\n        }\r\n        viewWriter.insert(viewWriter.createPositionAt(viewItem, 0), label);\r\n        viewWriter.insert(viewWriter.createPositionAt(label, 0), checkbox);\r\n        viewWriter.insert(viewWriter.createPositionAfter(checkbox), span);\r\n        injectViewList(modelItem, viewItem, conversionApi, model);\r\n    };\r\n}\r\n/**\r\n * A view-to-model converter for the checkbox element inside a view list item.\r\n *\r\n * It changes the `listType` of the model `listItem` to a `todo` value.\r\n * When a view checkbox element is marked as checked, an additional `todoListChecked=\"true\"` attribute is added to the model item.\r\n *\r\n * It is used by {@link module:engine/controller/datacontroller~DataController}.\r\n *\r\n * @see module:engine/conversion/upcastdispatcher~UpcastDispatcher#event:element\r\n */\r\nexport const dataViewModelCheckmarkInsertion = (evt, data, conversionApi) => {\r\n    const modelCursor = data.modelCursor;\r\n    const modelItem = modelCursor.parent;\r\n    const viewItem = data.viewItem;\r\n    if (viewItem.getAttribute('type') != 'checkbox' || modelItem.name != 'listItem' || !modelCursor.isAtStart) {\r\n        return;\r\n    }\r\n    if (!conversionApi.consumable.consume(viewItem, { name: true })) {\r\n        return;\r\n    }\r\n    const writer = conversionApi.writer;\r\n    writer.setAttribute('listType', 'todo', modelItem);\r\n    if (data.viewItem.hasAttribute('checked')) {\r\n        writer.setAttribute('todoListChecked', true, modelItem);\r\n    }\r\n    data.modelRange = writer.createRange(modelCursor);\r\n};\r\n/**\r\n * A model-to-view converter for the `listType` attribute change on the `listItem` model element.\r\n *\r\n * This change means that the `<li>` element parent changes to `<ul class=\"todo-list\">` and a\r\n * {@link module:engine/view/uielement~UIElement checkbox UI element} is added at the beginning\r\n * of the list item element (or vice versa).\r\n *\r\n * This converter is preceded by {@link module:list/list/converters~modelViewChangeType} and followed by\r\n * {@link module:list/list/converters~modelViewMergeAfterChangeType} to handle splitting and merging surrounding lists of the same type.\r\n *\r\n * It is used by {@link module:engine/controller/editingcontroller~EditingController}.\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute\r\n * @param onCheckedChange Callback fired after clicking the checkbox UI element.\r\n * @param view Editing view controller.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function modelViewChangeType(onCheckedChange, view) {\r\n    return (evt, data, conversionApi) => {\r\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n            return;\r\n        }\r\n        const viewItem = conversionApi.mapper.toViewElement(data.item);\r\n        const viewWriter = conversionApi.writer;\r\n        const labelElement = findLabel(viewItem, view);\r\n        if (data.attributeNewValue == 'todo') {\r\n            const isChecked = !!data.item.getAttribute('todoListChecked');\r\n            const checkmarkElement = createCheckmarkElement(data.item, viewWriter, isChecked, onCheckedChange);\r\n            const span = viewWriter.createContainerElement('span', {\r\n                class: 'todo-list__label__description'\r\n            });\r\n            const itemRange = viewWriter.createRangeIn(viewItem);\r\n            const nestedList = findNestedList(viewItem);\r\n            const descriptionStart = positionAfterUiElements(itemRange.start);\r\n            const descriptionEnd = nestedList ? viewWriter.createPositionBefore(nestedList) : itemRange.end;\r\n            const descriptionRange = viewWriter.createRange(descriptionStart, descriptionEnd);\r\n            viewWriter.addClass('todo-list', viewItem.parent);\r\n            viewWriter.move(descriptionRange, viewWriter.createPositionAt(span, 0));\r\n            viewWriter.insert(viewWriter.createPositionAt(viewItem, 0), checkmarkElement);\r\n            viewWriter.insert(viewWriter.createPositionAfter(checkmarkElement), span);\r\n        }\r\n        else if (data.attributeOldValue == 'todo') {\r\n            const descriptionSpan = findDescription(viewItem, view);\r\n            viewWriter.removeClass('todo-list', viewItem.parent);\r\n            viewWriter.remove(labelElement);\r\n            viewWriter.move(viewWriter.createRangeIn(descriptionSpan), viewWriter.createPositionBefore(descriptionSpan));\r\n            viewWriter.remove(descriptionSpan);\r\n        }\r\n    };\r\n}\r\n/**\r\n * A model-to-view converter for the `todoListChecked` attribute change on the `listItem` model element.\r\n *\r\n * It marks the {@link module:engine/view/uielement~UIElement checkbox UI element} as checked.\r\n *\r\n * It is used by {@link module:engine/controller/editingcontroller~EditingController}.\r\n *\r\n * @see module:engine/conversion/downcastdispatcher~DowncastDispatcher#event:attribute\r\n * @param onCheckedChange Callback fired after clicking the checkbox UI element.\r\n * @returns Returns a conversion callback.\r\n */\r\nexport function modelViewChangeChecked(onCheckedChange) {\r\n    return (evt, data, conversionApi) => {\r\n        // Do not convert `todoListChecked` attribute when to-do list item has changed to other list item.\r\n        // This attribute will be removed by the model post fixer.\r\n        if (data.item.getAttribute('listType') != 'todo') {\r\n            return;\r\n        }\r\n        if (!conversionApi.consumable.consume(data.item, 'attribute:todoListChecked')) {\r\n            return;\r\n        }\r\n        const { mapper, writer: viewWriter } = conversionApi;\r\n        const isChecked = !!data.item.getAttribute('todoListChecked');\r\n        const viewItem = mapper.toViewElement(data.item);\r\n        // Because of m -> v position mapper we can be sure checkbox is always at the beginning.\r\n        const oldCheckmarkElement = viewItem.getChild(0);\r\n        const newCheckmarkElement = createCheckmarkElement(data.item, viewWriter, isChecked, onCheckedChange);\r\n        viewWriter.insert(viewWriter.createPositionAfter(oldCheckmarkElement), newCheckmarkElement);\r\n        viewWriter.remove(oldCheckmarkElement);\r\n    };\r\n}\r\n/**\r\n * A model-to-view position at zero offset mapper.\r\n *\r\n * This helper ensures that position inside todo-list in the view is mapped after the checkbox.\r\n *\r\n * It only handles the position at the beginning of a list item as other positions are properly mapped be the default mapper.\r\n */\r\nexport function mapModelToViewPosition(view) {\r\n    return (evt, data) => {\r\n        const modelPosition = data.modelPosition;\r\n        const parent = modelPosition.parent;\r\n        if (!parent.is('element', 'listItem') || parent.getAttribute('listType') != 'todo') {\r\n            return;\r\n        }\r\n        const viewLi = data.mapper.toViewElement(parent);\r\n        const descSpan = findDescription(viewLi, view);\r\n        if (descSpan) {\r\n            data.viewPosition = data.mapper.findPositionIn(descSpan, modelPosition.offset);\r\n        }\r\n    };\r\n}\r\n/**\r\n * Creates a checkbox UI element.\r\n */\r\nfunction createCheckmarkElement(modelItem, viewWriter, isChecked, onChange) {\r\n    const uiElement = viewWriter.createUIElement('label', {\r\n        class: 'todo-list__label',\r\n        contenteditable: false\r\n    }, function (domDocument) {\r\n        const checkbox = createElement(document, 'input', { type: 'checkbox', tabindex: '-1' });\r\n        if (isChecked) {\r\n            checkbox.setAttribute('checked', 'checked');\r\n        }\r\n        checkbox.addEventListener('change', () => onChange(modelItem));\r\n        const domElement = this.toDomElement(domDocument);\r\n        domElement.appendChild(checkbox);\r\n        return domElement;\r\n    });\r\n    return uiElement;\r\n}\r\n// Helper method to find label element inside li.\r\nfunction findLabel(viewItem, view) {\r\n    const range = view.createRangeIn(viewItem);\r\n    for (const value of range) {\r\n        if (value.item.is('uiElement', 'label')) {\r\n            return value.item;\r\n        }\r\n    }\r\n}\r\nfunction findDescription(viewItem, view) {\r\n    const range = view.createRangeIn(viewItem);\r\n    for (const value of range) {\r\n        if (value.item.is('containerElement', 'span') && value.item.hasClass('todo-list__label__description')) {\r\n            return value.item;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { getCode, parseKeystroke, getLocalizedArrowKeyCodeDirection } from 'ckeditor5/src/utils';\r\nimport ListCommand from '../list/listcommand';\r\nimport ListEditing from '../list/listediting';\r\nimport CheckTodoListCommand from './checktodolistcommand';\r\nimport { dataModelViewInsertion, dataViewModelCheckmarkInsertion, mapModelToViewPosition, modelViewChangeChecked, modelViewChangeType, modelViewInsertion } from './todolistconverters';\r\nconst ITEM_TOGGLE_KEYSTROKE = parseKeystroke('Ctrl+Enter');\r\n/**\r\n * The engine of the to-do list feature. It handles creating, editing and removing to-do lists and their items.\r\n *\r\n * It registers the entire functionality of the {@link module:list/list/listediting~ListEditing list editing plugin} and extends\r\n * it with the commands:\r\n *\r\n * - `'todoList'`,\r\n * - `'checkTodoList'`,\r\n * - `'todoListCheck'` as an alias for `checkTodoList` command.\r\n */\r\nexport default class TodoListEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TodoListEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ListEditing];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const { editing, data, model } = editor;\r\n        // Extend schema.\r\n        model.schema.extend('listItem', {\r\n            allowAttributes: ['todoListChecked']\r\n        });\r\n        // Disallow todoListChecked attribute on other nodes than listItem with to-do listType.\r\n        model.schema.addAttributeCheck((context, attributeName) => {\r\n            const item = context.last;\r\n            if (attributeName == 'todoListChecked' && item.name == 'listItem' && item.getAttribute('listType') != 'todo') {\r\n                return false;\r\n            }\r\n        });\r\n        // Register `todoList` command.\r\n        editor.commands.add('todoList', new ListCommand(editor, 'todo'));\r\n        const checkTodoListCommand = new CheckTodoListCommand(editor);\r\n        // Register `checkTodoList` command and add `todoListCheck` command as an alias for backward compatibility.\r\n        editor.commands.add('checkTodoList', checkTodoListCommand);\r\n        editor.commands.add('todoListCheck', checkTodoListCommand);\r\n        // Define converters.\r\n        data.downcastDispatcher.on('insert:listItem', dataModelViewInsertion(model), { priority: 'high' });\r\n        data.upcastDispatcher.on('element:input', dataViewModelCheckmarkInsertion, { priority: 'high' });\r\n        editing.downcastDispatcher.on('insert:listItem', modelViewInsertion(model, listItem => this._handleCheckmarkChange(listItem)), { priority: 'high' });\r\n        editing.downcastDispatcher.on('attribute:listType:listItem', modelViewChangeType(listItem => this._handleCheckmarkChange(listItem), editing.view));\r\n        editing.downcastDispatcher.on('attribute:todoListChecked:listItem', modelViewChangeChecked(listItem => this._handleCheckmarkChange(listItem)));\r\n        editing.mapper.on('modelToViewPosition', mapModelToViewPosition(editing.view));\r\n        data.mapper.on('modelToViewPosition', mapModelToViewPosition(editing.view));\r\n        // Jump at the end of the previous node on left arrow key press, when selection is after the checkbox.\r\n        //\r\n        // <blockquote><p>Foo</p></blockquote>\r\n        // <ul><li><checkbox/>{}Bar</li></ul>\r\n        //\r\n        // press: `<-`\r\n        //\r\n        // <blockquote><p>Foo{}</p></blockquote>\r\n        // <ul><li><checkbox/>Bar</li></ul>\r\n        //\r\n        this.listenTo(editing.view.document, 'arrowKey', jumpOverCheckmarkOnSideArrowKeyPress(model, editor.locale), { context: 'li' });\r\n        // Toggle check state of selected to-do list items on keystroke.\r\n        this.listenTo(editing.view.document, 'keydown', (evt, data) => {\r\n            if (getCode(data) === ITEM_TOGGLE_KEYSTROKE) {\r\n                editor.execute('checkTodoList');\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        // Remove `todoListChecked` attribute when a host element is no longer a to-do list item.\r\n        const listItemsToFix = new Set();\r\n        this.listenTo(model, 'applyOperation', (evt, args) => {\r\n            const operation = args[0];\r\n            if (operation.type == 'rename' && operation.oldName == 'listItem') {\r\n                const item = operation.position.nodeAfter;\r\n                if (item.hasAttribute('todoListChecked')) {\r\n                    listItemsToFix.add(item);\r\n                }\r\n            }\r\n            else if (operation.type == 'changeAttribute' && operation.key == 'listType' && operation.oldValue === 'todo') {\r\n                for (const item of operation.range.getItems()) {\r\n                    if (item.hasAttribute('todoListChecked') && item.getAttribute('listType') !== 'todo') {\r\n                        listItemsToFix.add(item);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        model.document.registerPostFixer(writer => {\r\n            let hasChanged = false;\r\n            for (const listItem of listItemsToFix) {\r\n                writer.removeAttribute('todoListChecked', listItem);\r\n                hasChanged = true;\r\n            }\r\n            listItemsToFix.clear();\r\n            return hasChanged;\r\n        });\r\n    }\r\n    /**\r\n     * Handles the checkbox element change, moves the selection to the corresponding model item to make it possible\r\n     * to toggle the `todoListChecked` attribute using the command, and restores the selection position.\r\n     *\r\n     * Some say it's a hack :) Moving the selection only for executing the command on a certain node and restoring it after,\r\n     * is not a clear solution. We need to design an API for using commands beyond the selection range.\r\n     * See https://github.com/ckeditor/ckeditor5/issues/1954.\r\n     */\r\n    _handleCheckmarkChange(listItem) {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const previousSelectionRanges = Array.from(model.document.selection.getRanges());\r\n        model.change(writer => {\r\n            writer.setSelection(listItem, 'end');\r\n            editor.execute('checkTodoList');\r\n            writer.setSelection(previousSelectionRanges);\r\n        });\r\n    }\r\n}\r\n/**\r\n * Handles the left/right (LTR/RTL content) arrow key and moves the selection at the end of the previous block element\r\n * if the selection is just after the checkbox element. In other words, it jumps over the checkbox element when\r\n * moving the selection to the left/right (LTR/RTL).\r\n *\r\n * @returns Callback for 'keydown' events.\r\n */\r\nfunction jumpOverCheckmarkOnSideArrowKeyPress(model, locale) {\r\n    return (eventInfo, domEventData) => {\r\n        const direction = getLocalizedArrowKeyCodeDirection(domEventData.keyCode, locale.contentLanguageDirection);\r\n        if (direction != 'left') {\r\n            return;\r\n        }\r\n        const schema = model.schema;\r\n        const selection = model.document.selection;\r\n        if (!selection.isCollapsed) {\r\n            return;\r\n        }\r\n        const position = selection.getFirstPosition();\r\n        const parent = position.parent;\r\n        if (parent.name === 'listItem' && parent.getAttribute('listType') == 'todo' && position.isAtStart) {\r\n            const newRange = schema.getNearestSelectionRange(model.createPositionBefore(parent), 'backward');\r\n            if (newRange) {\r\n                model.change(writer => writer.setSelection(newRange));\r\n            }\r\n            domEventData.preventDefault();\r\n            domEventData.stopPropagation();\r\n            eventInfo.stop();\r\n        }\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/todolist/todolistui\r\n */\r\nimport { createUIComponent } from '../list/utils';\r\nimport todoListIcon from '../../theme/icons/todolist.svg';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\n/**\r\n * The to-do list UI feature. It introduces the `'todoList'` button that\r\n * allows to convert elements to and from to-do list items and to indent or outdent them.\r\n */\r\nexport default class TodoListUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TodoListUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const t = this.editor.t;\r\n        createUIComponent(this.editor, 'todoList', t('To-do List'), todoListIcon);\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"m2.315 14.705 2.224-2.24a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .949L2.865 16.07a.682.682 0 0 1-.112.089.647.647 0 0 1-.852-.051L.688 14.886a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.717.722zm5.185.045a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75zM2.329 5.745l2.21-2.226a.689.689 0 0 1 .963 0 .664.664 0 0 1 0 .95L2.865 7.125a.685.685 0 0 1-.496.196.644.644 0 0 1-.468-.187L.688 5.912a.635.635 0 0 1 0-.903.647.647 0 0 1 .91 0l.73.736zM7.5 5.75A.75.75 0 0 1 8.25 5h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./todolist.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module list/todolist\r\n */\r\nimport TodoListEditing from './todolist/todolistediting';\r\nimport TodoListUI from './todolist/todolistui';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport '../theme/todolist.css';\r\n/**\r\n * The to-do list feature.\r\n *\r\n * This is a \"glue\" plugin that loads the {@link module:list/todolist/todolistediting~TodoListEditing to-do list editing feature}\r\n * and the {@link module:list/todolist/todolistui~TodoListUI to-do list UI feature}.\r\n */\r\nexport default class TodoList extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TodoListEditing, TodoListUI];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TodoList';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Returns a function that converts the model \"url\" attribute to the view representation.\r\n *\r\n * Depending on the configuration, the view representation can be \"semantic\" (for the data pipeline):\r\n *\r\n * ```html\r\n * <figure class=\"media\">\r\n * \t<oembed url=\"foo\"></oembed>\r\n * </figure>\r\n * ```\r\n *\r\n * or \"non-semantic\" (for the editing view pipeline):\r\n *\r\n * ```html\r\n * <figure class=\"media\">\r\n * \t<div data-oembed-url=\"foo\">[ non-semantic media preview for \"foo\" ]</div>\r\n * </figure>\r\n * ```\r\n *\r\n * **Note:** Changing the model \"url\" attribute replaces the entire content of the\r\n * `<figure>` in the view.\r\n *\r\n * @param registry The registry providing\r\n * the media and their content.\r\n * @param options options object with following properties:\r\n * - elementName When set, overrides the default element name for semantic media embeds.\r\n * - renderMediaPreview When `true`, the converter will create the view in the non-semantic form.\r\n * - renderForEditingView When `true`, the converter will create a view specific for the\r\n * editing pipeline (e.g. including CSS classes, content placeholders).\r\n */\r\nexport function modelToViewUrlAttributeConverter(registry, options) {\r\n    const converter = (evt, data, conversionApi) => {\r\n        if (!conversionApi.consumable.consume(data.item, evt.name)) {\r\n            return;\r\n        }\r\n        const url = data.attributeNewValue;\r\n        const viewWriter = conversionApi.writer;\r\n        const figure = conversionApi.mapper.toViewElement(data.item);\r\n        const mediaContentElement = [...figure.getChildren()]\r\n            .find(child => child.getCustomProperty('media-content'));\r\n        // TODO: removing the wrapper and creating it from scratch is a hack. We can do better than that.\r\n        viewWriter.remove(mediaContentElement);\r\n        const mediaViewElement = registry.getMediaViewElement(viewWriter, url, options);\r\n        viewWriter.insert(viewWriter.createPositionAt(figure, 0), mediaViewElement);\r\n    };\r\n    return dispatcher => {\r\n        dispatcher.on('attribute:url:media', converter);\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { isWidget, toWidget } from 'ckeditor5/src/widget';\r\n/**\r\n * Converts a given {@link module:engine/view/element~Element} to a media embed widget:\r\n * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to recognize the media widget element.\r\n * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\r\n *\r\n * @param writer An instance of the view writer.\r\n * @param label The element's label.\r\n */\r\nexport function toMediaWidget(viewElement, writer, label) {\r\n    writer.setCustomProperty('media', true, viewElement);\r\n    return toWidget(viewElement, writer, { label });\r\n}\r\n/**\r\n * Returns a media widget editing view element if one is selected.\r\n */\r\nexport function getSelectedMediaViewWidget(selection) {\r\n    const viewElement = selection.getSelectedElement();\r\n    if (viewElement && isMediaWidget(viewElement)) {\r\n        return viewElement;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Checks if a given view element is a media widget.\r\n */\r\nexport function isMediaWidget(viewElement) {\r\n    return !!viewElement.getCustomProperty('media') && isWidget(viewElement);\r\n}\r\n/**\r\n * Creates a view element representing the media. Either a \"semantic\" one for the data pipeline:\r\n *\r\n * ```html\r\n * <figure class=\"media\">\r\n * \t<oembed url=\"foo\"></oembed>\r\n * </figure>\r\n * ```\r\n *\r\n * or a \"non-semantic\" (for the editing view pipeline):\r\n *\r\n * ```html\r\n * <figure class=\"media\">\r\n * \t<div data-oembed-url=\"foo\">[ non-semantic media preview for \"foo\" ]</div>\r\n * </figure>\r\n * ```\r\n */\r\nexport function createMediaFigureElement(writer, registry, url, options) {\r\n    return writer.createContainerElement('figure', { class: 'media' }, [\r\n        registry.getMediaViewElement(writer, url, options),\r\n        writer.createSlot()\r\n    ]);\r\n}\r\n/**\r\n * Returns a selected media element in the model, if any.\r\n */\r\nexport function getSelectedMediaModelWidget(selection) {\r\n    const selectedElement = selection.getSelectedElement();\r\n    if (selectedElement && selectedElement.is('element', 'media')) {\r\n        return selectedElement;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Creates a media element and inserts it into the model.\r\n *\r\n * **Note**: This method will use {@link module:engine/model/model~Model#insertContent `model.insertContent()`} logic of inserting content\r\n * if no `insertPosition` is passed.\r\n *\r\n * @param url An URL of an embeddable media.\r\n * @param findOptimalPosition If true it will try to find optimal position to insert media without breaking content\r\n * in which a selection is.\r\n */\r\nexport function insertMedia(model, url, selectable, findOptimalPosition) {\r\n    model.change(writer => {\r\n        const mediaElement = writer.createElement('media', { url });\r\n        model.insertObject(mediaElement, selectable, null, {\r\n            setSelection: 'on',\r\n            findOptimalPosition: findOptimalPosition ? 'auto' : undefined\r\n        });\r\n    });\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { findOptimalInsertionRange } from 'ckeditor5/src/widget';\r\nimport { getSelectedMediaModelWidget, insertMedia } from './utils';\r\n/**\r\n * The insert media command.\r\n *\r\n * The command is registered by the {@link module:media-embed/mediaembedediting~MediaEmbedEditing} as `'mediaEmbed'`.\r\n *\r\n * To insert media at the current selection, execute the command and specify the URL:\r\n *\r\n * ```ts\r\n * editor.execute( 'mediaEmbed', 'http://url.to.the/media' );\r\n * ```\r\n */\r\nexport default class MediaEmbedCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const selectedMedia = getSelectedMediaModelWidget(selection);\r\n        this.value = selectedMedia ? selectedMedia.getAttribute('url') : undefined;\r\n        this.isEnabled = isMediaSelected(selection) || isAllowedInParent(selection, model);\r\n    }\r\n    /**\r\n     * Executes the command, which either:\r\n     *\r\n     * * updates the URL of the selected media,\r\n     * * inserts the new media into the editor and puts the selection around it.\r\n     *\r\n     * @fires execute\r\n     * @param url The URL of the media.\r\n     */\r\n    execute(url) {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const selectedMedia = getSelectedMediaModelWidget(selection);\r\n        if (selectedMedia) {\r\n            model.change(writer => {\r\n                writer.setAttribute('url', url, selectedMedia);\r\n            });\r\n        }\r\n        else {\r\n            insertMedia(model, url, selection, true);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Checks if the media embed is allowed in the parent.\r\n */\r\nfunction isAllowedInParent(selection, model) {\r\n    const insertionRange = findOptimalInsertionRange(selection, model);\r\n    let parent = insertionRange.start.parent;\r\n    // The model.insertContent() will remove empty parent (unless it is a $root or a limit).\r\n    if (parent.isEmpty && !model.schema.isLimit(parent)) {\r\n        parent = parent.parent;\r\n    }\r\n    return model.schema.checkChild(parent, 'media');\r\n}\r\n/**\r\n * Checks if the media object is selected.\r\n */\r\nfunction isMediaSelected(selection) {\r\n    const element = selection.getSelectedElement();\r\n    return !!element && element.name === 'media';\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { IconView, Template } from 'ckeditor5/src/ui';\r\nimport { logWarning, toArray } from 'ckeditor5/src/utils';\r\nimport mediaPlaceholderIcon from '../theme/icons/media-placeholder.svg';\r\nconst mediaPlaceholderIconViewBox = '0 0 64 42';\r\n/**\r\n * A bridge between the raw media content provider definitions and the editor view content.\r\n *\r\n * It helps translating media URLs to corresponding {@link module:engine/view/element~Element view elements}.\r\n *\r\n * Mostly used by the {@link module:media-embed/mediaembedediting~MediaEmbedEditing} plugin.\r\n */\r\nexport default class MediaRegistry {\r\n    /**\r\n     * Creates an instance of the {@link module:media-embed/mediaregistry~MediaRegistry} class.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param config The configuration of the media embed feature.\r\n     */\r\n    constructor(locale, config) {\r\n        const providers = config.providers;\r\n        const extraProviders = config.extraProviders || [];\r\n        const removedProviders = new Set(config.removeProviders);\r\n        const providerDefinitions = providers\r\n            .concat(extraProviders)\r\n            .filter(provider => {\r\n            const name = provider.name;\r\n            if (!name) {\r\n                /**\r\n                 * One of the providers (or extra providers) specified in the media embed configuration\r\n                 * has no name and will not be used by the editor. In order to get this media\r\n                 * provider working, double check your editor configuration.\r\n                 *\r\n                 * @error media-embed-no-provider-name\r\n                 */\r\n                logWarning('media-embed-no-provider-name', { provider });\r\n                return false;\r\n            }\r\n            return !removedProviders.has(name);\r\n        });\r\n        this.locale = locale;\r\n        this.providerDefinitions = providerDefinitions;\r\n    }\r\n    /**\r\n     * Checks whether the passed URL is representing a certain media type allowed in the editor.\r\n     *\r\n     * @param url The URL to be checked\r\n     */\r\n    hasMedia(url) {\r\n        return !!this._getMedia(url);\r\n    }\r\n    /**\r\n     * For the given media URL string and options, it returns the {@link module:engine/view/element~Element view element}\r\n     * representing that media.\r\n     *\r\n     * **Note:** If no URL is specified, an empty view element is returned.\r\n     *\r\n     * @param writer The view writer used to produce a view element.\r\n     * @param url The URL to be translated into a view element.\r\n     */\r\n    getMediaViewElement(writer, url, options) {\r\n        return this._getMedia(url).getViewElement(writer, options);\r\n    }\r\n    /**\r\n     * Returns a `Media` instance for the given URL.\r\n     *\r\n     * @param url The URL of the media.\r\n     * @returns The `Media` instance or `null` when there is none.\r\n     */\r\n    _getMedia(url) {\r\n        if (!url) {\r\n            return new Media(this.locale);\r\n        }\r\n        url = url.trim();\r\n        for (const definition of this.providerDefinitions) {\r\n            const previewRenderer = definition.html;\r\n            const pattern = toArray(definition.url);\r\n            for (const subPattern of pattern) {\r\n                const match = this._getUrlMatches(url, subPattern);\r\n                if (match) {\r\n                    return new Media(this.locale, url, match, previewRenderer);\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Tries to match `url` to `pattern`.\r\n     *\r\n     * @param url The URL of the media.\r\n     * @param pattern The pattern that should accept the media URL.\r\n     */\r\n    _getUrlMatches(url, pattern) {\r\n        // 1. Try to match without stripping the protocol and \"www\" subdomain.\r\n        let match = url.match(pattern);\r\n        if (match) {\r\n            return match;\r\n        }\r\n        // 2. Try to match after stripping the protocol.\r\n        let rawUrl = url.replace(/^https?:\\/\\//, '');\r\n        match = rawUrl.match(pattern);\r\n        if (match) {\r\n            return match;\r\n        }\r\n        // 3. Try to match after stripping the \"www\" subdomain.\r\n        rawUrl = rawUrl.replace(/^www\\./, '');\r\n        match = rawUrl.match(pattern);\r\n        if (match) {\r\n            return match;\r\n        }\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * Represents media defined by the provider configuration.\r\n *\r\n * It can be rendered to the {@link module:engine/view/element~Element view element} and used in the editing or data pipeline.\r\n */\r\nclass Media {\r\n    constructor(locale, url, match, previewRenderer) {\r\n        this.url = this._getValidUrl(url);\r\n        this._locale = locale;\r\n        this._match = match;\r\n        this._previewRenderer = previewRenderer;\r\n    }\r\n    /**\r\n     * Returns the view element representation of the media.\r\n     *\r\n     * @param writer The view writer used to produce a view element.\r\n     */\r\n    getViewElement(writer, options) {\r\n        const attributes = {};\r\n        let viewElement;\r\n        if (options.renderForEditingView || (options.renderMediaPreview && this.url && this._previewRenderer)) {\r\n            if (this.url) {\r\n                attributes['data-oembed-url'] = this.url;\r\n            }\r\n            if (options.renderForEditingView) {\r\n                attributes.class = 'ck-media__wrapper';\r\n            }\r\n            const mediaHtml = this._getPreviewHtml(options);\r\n            viewElement = writer.createRawElement('div', attributes, (domElement, domConverter) => {\r\n                domConverter.setContentOf(domElement, mediaHtml);\r\n            });\r\n        }\r\n        else {\r\n            if (this.url) {\r\n                attributes.url = this.url;\r\n            }\r\n            viewElement = writer.createEmptyElement(options.elementName, attributes);\r\n        }\r\n        writer.setCustomProperty('media-content', true, viewElement);\r\n        return viewElement;\r\n    }\r\n    /**\r\n     * Returns the HTML string of the media content preview.\r\n     */\r\n    _getPreviewHtml(options) {\r\n        if (this._previewRenderer) {\r\n            return this._previewRenderer(this._match);\r\n        }\r\n        else {\r\n            // The placeholder only makes sense for editing view and media which have URLs.\r\n            // Placeholder is never displayed in data and URL-less media have no content.\r\n            if (this.url && options.renderForEditingView) {\r\n                return this._getPlaceholderHtml();\r\n            }\r\n            return '';\r\n        }\r\n    }\r\n    /**\r\n     * Returns the placeholder HTML when the media has no content preview.\r\n     */\r\n    _getPlaceholderHtml() {\r\n        const icon = new IconView();\r\n        const t = this._locale.t;\r\n        icon.content = mediaPlaceholderIcon;\r\n        icon.viewBox = mediaPlaceholderIconViewBox;\r\n        const placeholder = new Template({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: 'ck ck-reset_all ck-media__placeholder'\r\n            },\r\n            children: [\r\n                {\r\n                    tag: 'div',\r\n                    attributes: {\r\n                        class: 'ck-media__placeholder__icon'\r\n                    },\r\n                    children: [icon]\r\n                },\r\n                {\r\n                    tag: 'a',\r\n                    attributes: {\r\n                        class: 'ck-media__placeholder__url',\r\n                        target: '_blank',\r\n                        rel: 'noopener noreferrer',\r\n                        href: this.url,\r\n                        'data-cke-tooltip-text': t('Open media in new tab')\r\n                    },\r\n                    children: [\r\n                        {\r\n                            tag: 'span',\r\n                            attributes: {\r\n                                class: 'ck-media__placeholder__url__text'\r\n                            },\r\n                            children: [this.url]\r\n                        }\r\n                    ]\r\n                }\r\n            ]\r\n        }).render();\r\n        return placeholder.outerHTML;\r\n    }\r\n    /**\r\n     * Returns the full URL to the specified media.\r\n     *\r\n     * @param url The URL of the media.\r\n     */\r\n    _getValidUrl(url) {\r\n        if (!url) {\r\n            return null;\r\n        }\r\n        if (url.match(/^https?/)) {\r\n            return url;\r\n        }\r\n        return 'https://' + url;\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 64 42\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./mediaembedediting.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module media-embed/mediaembedediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\nimport { modelToViewUrlAttributeConverter } from './converters';\r\nimport MediaEmbedCommand from './mediaembedcommand';\r\nimport MediaRegistry from './mediaregistry';\r\nimport { toMediaWidget, createMediaFigureElement } from './utils';\r\nimport '../theme/mediaembedediting.css';\r\n/**\r\n * The media embed editing feature.\r\n */\r\nexport default class MediaEmbedEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'MediaEmbedEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        editor.config.define('mediaEmbed', {\r\n            elementName: 'oembed',\r\n            providers: [\r\n                {\r\n                    name: 'dailymotion',\r\n                    url: /^dailymotion\\.com\\/video\\/(\\w+)/,\r\n                    html: match => {\r\n                        const id = match[1];\r\n                        return ('<div style=\"position: relative; padding-bottom: 100%; height: 0; \">' +\r\n                            `<iframe src=\"https://www.dailymotion.com/embed/video/${id}\" ` +\r\n                            'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' +\r\n                            'frameborder=\"0\" width=\"480\" height=\"270\" allowfullscreen allow=\"autoplay\">' +\r\n                            '</iframe>' +\r\n                            '</div>');\r\n                    }\r\n                },\r\n                {\r\n                    name: 'spotify',\r\n                    url: [\r\n                        /^open\\.spotify\\.com\\/(artist\\/\\w+)/,\r\n                        /^open\\.spotify\\.com\\/(album\\/\\w+)/,\r\n                        /^open\\.spotify\\.com\\/(track\\/\\w+)/\r\n                    ],\r\n                    html: match => {\r\n                        const id = match[1];\r\n                        return ('<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;\">' +\r\n                            `<iframe src=\"https://open.spotify.com/embed/${id}\" ` +\r\n                            'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' +\r\n                            'frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\">' +\r\n                            '</iframe>' +\r\n                            '</div>');\r\n                    }\r\n                },\r\n                {\r\n                    name: 'youtube',\r\n                    url: [\r\n                        /^(?:m\\.)?youtube\\.com\\/watch\\?v=([\\w-]+)(?:&t=(\\d+))?/,\r\n                        /^(?:m\\.)?youtube\\.com\\/v\\/([\\w-]+)(?:\\?t=(\\d+))?/,\r\n                        /^youtube\\.com\\/embed\\/([\\w-]+)(?:\\?start=(\\d+))?/,\r\n                        /^youtu\\.be\\/([\\w-]+)(?:\\?t=(\\d+))?/\r\n                    ],\r\n                    html: match => {\r\n                        const id = match[1];\r\n                        const time = match[2];\r\n                        return ('<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' +\r\n                            `<iframe src=\"https://www.youtube.com/embed/${id}${time ? `?start=${time}` : ''}\" ` +\r\n                            'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' +\r\n                            'frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen>' +\r\n                            '</iframe>' +\r\n                            '</div>');\r\n                    }\r\n                },\r\n                {\r\n                    name: 'vimeo',\r\n                    url: [\r\n                        /^vimeo\\.com\\/(\\d+)/,\r\n                        /^vimeo\\.com\\/[^/]+\\/[^/]+\\/video\\/(\\d+)/,\r\n                        /^vimeo\\.com\\/album\\/[^/]+\\/video\\/(\\d+)/,\r\n                        /^vimeo\\.com\\/channels\\/[^/]+\\/(\\d+)/,\r\n                        /^vimeo\\.com\\/groups\\/[^/]+\\/videos\\/(\\d+)/,\r\n                        /^vimeo\\.com\\/ondemand\\/[^/]+\\/(\\d+)/,\r\n                        /^player\\.vimeo\\.com\\/video\\/(\\d+)/\r\n                    ],\r\n                    html: match => {\r\n                        const id = match[1];\r\n                        return ('<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' +\r\n                            `<iframe src=\"https://player.vimeo.com/video/${id}\" ` +\r\n                            'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' +\r\n                            'frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen>' +\r\n                            '</iframe>' +\r\n                            '</div>');\r\n                    }\r\n                },\r\n                {\r\n                    name: 'instagram',\r\n                    url: /^instagram\\.com\\/p\\/(\\w+)/\r\n                },\r\n                {\r\n                    name: 'twitter',\r\n                    url: /^twitter\\.com/\r\n                },\r\n                {\r\n                    name: 'googleMaps',\r\n                    url: [\r\n                        /^google\\.com\\/maps/,\r\n                        /^goo\\.gl\\/maps/,\r\n                        /^maps\\.google\\.com/,\r\n                        /^maps\\.app\\.goo\\.gl/\r\n                    ]\r\n                },\r\n                {\r\n                    name: 'flickr',\r\n                    url: /^flickr\\.com/\r\n                },\r\n                {\r\n                    name: 'facebook',\r\n                    url: /^facebook\\.com/\r\n                }\r\n            ]\r\n        });\r\n        this.registry = new MediaRegistry(editor.locale, editor.config.get('mediaEmbed'));\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const t = editor.t;\r\n        const conversion = editor.conversion;\r\n        const renderMediaPreview = editor.config.get('mediaEmbed.previewsInData');\r\n        const elementName = editor.config.get('mediaEmbed.elementName');\r\n        const registry = this.registry;\r\n        editor.commands.add('mediaEmbed', new MediaEmbedCommand(editor));\r\n        // Configure the schema.\r\n        schema.register('media', {\r\n            inheritAllFrom: '$blockObject',\r\n            allowAttributes: ['url']\r\n        });\r\n        // Model -> Data\r\n        conversion.for('dataDowncast').elementToStructure({\r\n            model: 'media',\r\n            view: (modelElement, { writer }) => {\r\n                const url = modelElement.getAttribute('url');\r\n                return createMediaFigureElement(writer, registry, url, {\r\n                    elementName,\r\n                    renderMediaPreview: !!url && renderMediaPreview\r\n                });\r\n            }\r\n        });\r\n        // Model -> Data (url -> data-oembed-url)\r\n        conversion.for('dataDowncast').add(modelToViewUrlAttributeConverter(registry, {\r\n            elementName,\r\n            renderMediaPreview\r\n        }));\r\n        // Model -> View (element)\r\n        conversion.for('editingDowncast').elementToStructure({\r\n            model: 'media',\r\n            view: (modelElement, { writer }) => {\r\n                const url = modelElement.getAttribute('url');\r\n                const figure = createMediaFigureElement(writer, registry, url, {\r\n                    elementName,\r\n                    renderForEditingView: true\r\n                });\r\n                return toMediaWidget(figure, writer, t('media widget'));\r\n            }\r\n        });\r\n        // Model -> View (url -> data-oembed-url)\r\n        conversion.for('editingDowncast').add(modelToViewUrlAttributeConverter(registry, {\r\n            elementName,\r\n            renderForEditingView: true\r\n        }));\r\n        // View -> Model (data-oembed-url -> url)\r\n        conversion.for('upcast')\r\n            // Upcast semantic media.\r\n            .elementToElement({\r\n            view: element => ['oembed', elementName].includes(element.name) && element.getAttribute('url') ?\r\n                { name: true } :\r\n                null,\r\n            model: (viewMedia, { writer }) => {\r\n                const url = viewMedia.getAttribute('url');\r\n                if (registry.hasMedia(url)) {\r\n                    return writer.createElement('media', { url });\r\n                }\r\n                return null;\r\n            }\r\n        })\r\n            // Upcast non-semantic media.\r\n            .elementToElement({\r\n            view: {\r\n                name: 'div',\r\n                attributes: {\r\n                    'data-oembed-url': true\r\n                }\r\n            },\r\n            model: (viewMedia, { writer }) => {\r\n                const url = viewMedia.getAttribute('data-oembed-url');\r\n                if (registry.hasMedia(url)) {\r\n                    return writer.createElement('media', { url });\r\n                }\r\n                return null;\r\n            }\r\n        })\r\n            // Consume `<figure class=\"media\">` elements, that were left after upcast.\r\n            .add(dispatcher => {\r\n            const converter = (evt, data, conversionApi) => {\r\n                if (!conversionApi.consumable.consume(data.viewItem, { name: true, classes: 'media' })) {\r\n                    return;\r\n                }\r\n                const { modelRange, modelCursor } = conversionApi.convertChildren(data.viewItem, data.modelCursor);\r\n                data.modelRange = modelRange;\r\n                data.modelCursor = modelCursor;\r\n                const modelElement = first(modelRange.getItems());\r\n                if (!modelElement) {\r\n                    // Revert consumed figure so other features can convert it.\r\n                    conversionApi.consumable.revert(data.viewItem, { name: true, classes: 'media' });\r\n                }\r\n            };\r\n            dispatcher.on('element:figure', converter);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module media-embed/automediaembed\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { LiveRange, LivePosition } from 'ckeditor5/src/engine';\r\nimport { Clipboard } from 'ckeditor5/src/clipboard';\r\nimport { Delete } from 'ckeditor5/src/typing';\r\nimport { Undo } from 'ckeditor5/src/undo';\r\nimport { global } from 'ckeditor5/src/utils';\r\nimport MediaEmbedEditing from './mediaembedediting';\r\nimport { insertMedia } from './utils';\r\nconst URL_REGEXP = /^(?:http(s)?:\\/\\/)?[\\w-]+\\.[\\w-.~:/?#[\\]@!$&'()*+,;=%]+$/;\r\n/**\r\n * The auto-media embed plugin. It recognizes media links in the pasted content and embeds\r\n * them shortly after they are injected into the document.\r\n */\r\nexport default class AutoMediaEmbed extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [Clipboard, Delete, Undo];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'AutoMediaEmbed';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._timeoutId = null;\r\n        this._positionToInsert = null;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const modelDocument = editor.model.document;\r\n        // We need to listen on `Clipboard#inputTransformation` because we need to save positions of selection.\r\n        // After pasting, the content between those positions will be checked for a URL that could be transformed\r\n        // into media.\r\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\r\n        this.listenTo(clipboardPipeline, 'inputTransformation', () => {\r\n            const firstRange = modelDocument.selection.getFirstRange();\r\n            const leftLivePosition = LivePosition.fromPosition(firstRange.start);\r\n            leftLivePosition.stickiness = 'toPrevious';\r\n            const rightLivePosition = LivePosition.fromPosition(firstRange.end);\r\n            rightLivePosition.stickiness = 'toNext';\r\n            modelDocument.once('change:data', () => {\r\n                this._embedMediaBetweenPositions(leftLivePosition, rightLivePosition);\r\n                leftLivePosition.detach();\r\n                rightLivePosition.detach();\r\n            }, { priority: 'high' });\r\n        });\r\n        const undoCommand = editor.commands.get('undo');\r\n        undoCommand.on('execute', () => {\r\n            if (this._timeoutId) {\r\n                global.window.clearTimeout(this._timeoutId);\r\n                this._positionToInsert.detach();\r\n                this._timeoutId = null;\r\n                this._positionToInsert = null;\r\n            }\r\n        }, { priority: 'high' });\r\n    }\r\n    /**\r\n     * Analyzes the part of the document between provided positions in search for a URL representing media.\r\n     * When the URL is found, it is automatically converted into media.\r\n     *\r\n     * @param leftPosition Left position of the selection.\r\n     * @param rightPosition Right position of the selection.\r\n     */\r\n    _embedMediaBetweenPositions(leftPosition, rightPosition) {\r\n        const editor = this.editor;\r\n        const mediaRegistry = editor.plugins.get(MediaEmbedEditing).registry;\r\n        // TODO: Use marker instead of LiveRange & LivePositions.\r\n        const urlRange = new LiveRange(leftPosition, rightPosition);\r\n        const walker = urlRange.getWalker({ ignoreElementEnd: true });\r\n        let url = '';\r\n        for (const node of walker) {\r\n            if (node.item.is('$textProxy')) {\r\n                url += node.item.data;\r\n            }\r\n        }\r\n        url = url.trim();\r\n        // If the URL does not match to universal URL regexp, let's skip that.\r\n        if (!url.match(URL_REGEXP)) {\r\n            urlRange.detach();\r\n            return;\r\n        }\r\n        // If the URL represents a media, let's use it.\r\n        if (!mediaRegistry.hasMedia(url)) {\r\n            urlRange.detach();\r\n            return;\r\n        }\r\n        const mediaEmbedCommand = editor.commands.get('mediaEmbed');\r\n        // Do not anything if media element cannot be inserted at the current position (#47).\r\n        if (!mediaEmbedCommand.isEnabled) {\r\n            urlRange.detach();\r\n            return;\r\n        }\r\n        // Position won't be available in the `setTimeout` function so let's clone it.\r\n        this._positionToInsert = LivePosition.fromPosition(leftPosition);\r\n        // This action mustn't be executed if undo was called between pasting and auto-embedding.\r\n        this._timeoutId = global.window.setTimeout(() => {\r\n            editor.model.change(writer => {\r\n                this._timeoutId = null;\r\n                writer.remove(urlRange);\r\n                urlRange.detach();\r\n                let insertionPosition = null;\r\n                // Check if position where the media element should be inserted is still valid.\r\n                // Otherwise leave it as undefined to use document.selection - default behavior of model.insertContent().\r\n                if (this._positionToInsert.root.rootName !== '$graveyard') {\r\n                    insertionPosition = this._positionToInsert;\r\n                }\r\n                insertMedia(editor.model, url, insertionPosition, false);\r\n                this._positionToInsert.detach();\r\n                this._positionToInsert = null;\r\n            });\r\n            editor.plugins.get(Delete).requestUndoOnBackspace();\r\n        }, 100);\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./mediaform.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module media-embed/ui/mediaformview\r\n */\r\nimport { ButtonView, FocusCycler, LabeledFieldView, View, ViewCollection, createLabeledInputText, submitHandler } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport { icons } from 'ckeditor5/src/core';\r\n// See: #8833.\r\n// eslint-disable-next-line ckeditor5-rules/ckeditor-imports\r\nimport '@ckeditor/ckeditor5-ui/theme/components/responsive-form/responsiveform.css';\r\nimport '../../theme/mediaform.css';\r\n/**\r\n * The media form view controller class.\r\n *\r\n * See {@link module:media-embed/ui/mediaformview~MediaFormView}.\r\n */\r\nexport default class MediaFormView extends View {\r\n    /**\r\n     * @param validators Form validators used by {@link #isValid}.\r\n     * @param locale The localization services instance.\r\n     */\r\n    constructor(validators, locale) {\r\n        super(locale);\r\n        const t = locale.t;\r\n        this.focusTracker = new FocusTracker();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this.set('mediaURLInputValue', '');\r\n        this.urlInputView = this._createUrlInput();\r\n        this.saveButtonView = this._createButton(t('Save'), icons.check, 'ck-button-save');\r\n        this.saveButtonView.type = 'submit';\r\n        this.saveButtonView.bind('isEnabled').to(this, 'mediaURLInputValue', value => !!value);\r\n        this.cancelButtonView = this._createButton(t('Cancel'), icons.cancel, 'ck-button-cancel', 'cancel');\r\n        this._focusables = new ViewCollection();\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate form fields backwards using the <kbd>Shift</kbd> + <kbd>Tab</kbd> keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate form fields forwards using the <kbd>Tab</kbd> key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        this._validators = validators;\r\n        this.setTemplate({\r\n            tag: 'form',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-media-form',\r\n                    'ck-responsive-form'\r\n                ],\r\n                tabindex: '-1'\r\n            },\r\n            children: [\r\n                this.urlInputView,\r\n                this.saveButtonView,\r\n                this.cancelButtonView\r\n            ]\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        submitHandler({\r\n            view: this\r\n        });\r\n        const childViews = [\r\n            this.urlInputView,\r\n            this.saveButtonView,\r\n            this.cancelButtonView\r\n        ];\r\n        childViews.forEach(v => {\r\n            // Register the view as focusable.\r\n            this._focusables.add(v);\r\n            // Register the view in the focus tracker.\r\n            this.focusTracker.add(v.element);\r\n        });\r\n        // Start listening for the keystrokes coming from #element.\r\n        this.keystrokes.listenTo(this.element);\r\n        const stopPropagation = (data) => data.stopPropagation();\r\n        // Since the form is in the dropdown panel which is a child of the toolbar, the toolbar's\r\n        // keystroke handler would take over the key management in the URL input. We need to prevent\r\n        // this ASAP. Otherwise, the basic caret movement using the arrow keys will be impossible.\r\n        this.keystrokes.set('arrowright', stopPropagation);\r\n        this.keystrokes.set('arrowleft', stopPropagation);\r\n        this.keystrokes.set('arrowup', stopPropagation);\r\n        this.keystrokes.set('arrowdown', stopPropagation);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Focuses the fist {@link #_focusables} in the form.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * The native DOM `value` of the {@link #urlInputView} element.\r\n     *\r\n     * **Note**: Do not confuse it with the {@link module:ui/inputtext/inputtextview~InputTextView#value}\r\n     * which works one way only and may not represent the actual state of the component in the DOM.\r\n     */\r\n    get url() {\r\n        return this.urlInputView.fieldView.element.value.trim();\r\n    }\r\n    set url(url) {\r\n        this.urlInputView.fieldView.element.value = url.trim();\r\n    }\r\n    /**\r\n     * Validates the form and returns `false` when some fields are invalid.\r\n     */\r\n    isValid() {\r\n        this.resetFormStatus();\r\n        for (const validator of this._validators) {\r\n            const errorText = validator(this);\r\n            // One error per field is enough.\r\n            if (errorText) {\r\n                // Apply updated error.\r\n                this.urlInputView.errorText = errorText;\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Cleans up the supplementary error and information text of the {@link #urlInputView}\r\n     * bringing them back to the state when the form has been displayed for the first time.\r\n     *\r\n     * See {@link #isValid}.\r\n     */\r\n    resetFormStatus() {\r\n        this.urlInputView.errorText = null;\r\n        this.urlInputView.infoText = this._urlInputViewInfoDefault;\r\n    }\r\n    /**\r\n     * Creates a labeled input view.\r\n     *\r\n     * @returns Labeled input view instance.\r\n     */\r\n    _createUrlInput() {\r\n        const t = this.locale.t;\r\n        const labeledInput = new LabeledFieldView(this.locale, createLabeledInputText);\r\n        const inputField = labeledInput.fieldView;\r\n        this._urlInputViewInfoDefault = t('Paste the media URL in the input.');\r\n        this._urlInputViewInfoTip = t('Tip: Paste the URL into the content to embed faster.');\r\n        labeledInput.label = t('Media URL');\r\n        labeledInput.infoText = this._urlInputViewInfoDefault;\r\n        inputField.on('input', () => {\r\n            // Display the tip text only when there is some value. Otherwise fall back to the default info text.\r\n            labeledInput.infoText = inputField.element.value ? this._urlInputViewInfoTip : this._urlInputViewInfoDefault;\r\n            this.mediaURLInputValue = inputField.element.value.trim();\r\n        });\r\n        return labeledInput;\r\n    }\r\n    /**\r\n     * Creates a button view.\r\n     *\r\n     * @param label The button label.\r\n     * @param icon The button icon.\r\n     * @param className The additional button CSS class name.\r\n     * @param eventName An event name that the `ButtonView#execute` event will be delegated to.\r\n     * @returns The button view instance.\r\n     */\r\n    _createButton(label, icon, className, eventName) {\r\n        const button = new ButtonView(this.locale);\r\n        button.set({\r\n            label,\r\n            icon,\r\n            tooltip: true\r\n        });\r\n        button.extendTemplate({\r\n            attributes: {\r\n                class: className\r\n            }\r\n        });\r\n        if (eventName) {\r\n            button.delegate('execute').to(this, eventName);\r\n        }\r\n        return button;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module media-embed/mediaembedui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { createDropdown, CssTransitionDisablerMixin } from 'ckeditor5/src/ui';\r\nimport MediaFormView from './ui/mediaformview';\r\nimport MediaEmbedEditing from './mediaembedediting';\r\nimport mediaIcon from '../theme/icons/media.svg';\r\n/**\r\n * The media embed UI plugin.\r\n */\r\nexport default class MediaEmbedUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [MediaEmbedEditing];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'MediaEmbedUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const command = editor.commands.get('mediaEmbed');\r\n        editor.ui.componentFactory.add('mediaEmbed', locale => {\r\n            const dropdown = createDropdown(locale);\r\n            this._setUpDropdown(dropdown, command);\r\n            return dropdown;\r\n        });\r\n    }\r\n    _setUpDropdown(dropdown, command) {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const button = dropdown.buttonView;\r\n        const registry = editor.plugins.get(MediaEmbedEditing).registry;\r\n        dropdown.once('change:isOpen', () => {\r\n            const form = new (CssTransitionDisablerMixin(MediaFormView))(getFormValidators(editor.t, registry), editor.locale);\r\n            dropdown.panelView.children.add(form);\r\n            // Note: Use the low priority to make sure the following listener starts working after the\r\n            // default action of the drop-down is executed (i.e. the panel showed up). Otherwise, the\r\n            // invisible form/input cannot be focused/selected.\r\n            button.on('open', () => {\r\n                form.disableCssTransitions();\r\n                // Make sure that each time the panel shows up, the URL field remains in sync with the value of\r\n                // the command. If the user typed in the input, then canceled (`urlInputView#fieldView#value` stays\r\n                // unaltered) and re-opened it without changing the value of the media command (e.g. because they\r\n                // didn't change the selection), they would see the old value instead of the actual value of the\r\n                // command.\r\n                form.url = command.value || '';\r\n                form.urlInputView.fieldView.select();\r\n                form.enableCssTransitions();\r\n            }, { priority: 'low' });\r\n            dropdown.on('submit', () => {\r\n                if (form.isValid()) {\r\n                    editor.execute('mediaEmbed', form.url);\r\n                    editor.editing.view.focus();\r\n                }\r\n            });\r\n            dropdown.on('change:isOpen', () => form.resetFormStatus());\r\n            dropdown.on('cancel', () => {\r\n                editor.editing.view.focus();\r\n            });\r\n            form.delegate('submit', 'cancel').to(dropdown);\r\n            form.urlInputView.fieldView.bind('value').to(command, 'value');\r\n            // Form elements should be read-only when corresponding commands are disabled.\r\n            form.urlInputView.bind('isEnabled').to(command, 'isEnabled');\r\n        });\r\n        dropdown.bind('isEnabled').to(command);\r\n        button.set({\r\n            label: t('Insert media'),\r\n            icon: mediaIcon,\r\n            tooltip: true\r\n        });\r\n    }\r\n}\r\nfunction getFormValidators(t, registry) {\r\n    return [\r\n        form => {\r\n            if (!form.url.length) {\r\n                return t('The URL must not be empty.');\r\n            }\r\n        },\r\n        form => {\r\n            if (!registry.hasMedia(form.url)) {\r\n                return t('This media URL is not supported.');\r\n            }\r\n        }\r\n    ];\r\n}\r\n","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20 20\\\"><path d=\\\"M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 0 1 .593-.351l5.133 2.824a.4.4 0 0 1 0 .7l-5.133 2.824a.4.4 0 0 1-.593-.35V7.176v.001z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./mediaembed.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module media-embed/mediaembed\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Widget } from 'ckeditor5/src/widget';\r\nimport MediaEmbedEditing from './mediaembedediting';\r\nimport AutoMediaEmbed from './automediaembed';\r\nimport MediaEmbedUI from './mediaembedui';\r\nimport '../theme/mediaembed.css';\r\n/**\r\n * The media embed plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/media-embed Media Embed feature documentation}.\r\n *\r\n * This is a \"glue\" plugin which loads the following plugins:\r\n *\r\n * * The {@link module:media-embed/mediaembedediting~MediaEmbedEditing media embed editing feature},\r\n * * The {@link module:media-embed/mediaembedui~MediaEmbedUI media embed UI feature} and\r\n * * The {@link module:media-embed/automediaembed~AutoMediaEmbed auto-media embed feature}.\r\n */\r\nexport default class MediaEmbed extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [MediaEmbedEditing, MediaEmbedUI, AutoMediaEmbed, Widget];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'MediaEmbed';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module media-embed/mediaembedtoolbar\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { WidgetToolbarRepository } from 'ckeditor5/src/widget';\r\nimport { getSelectedMediaViewWidget } from './utils';\r\nimport './mediaembedconfig';\r\n/**\r\n * The media embed toolbar plugin. It creates a toolbar for media embed that shows up when the media element is selected.\r\n *\r\n * Instances of toolbar components (e.g. buttons) are created based on the\r\n * {@link module:media-embed/mediaembedconfig~MediaEmbedConfig#toolbar `media.toolbar` configuration option}.\r\n */\r\nexport default class MediaEmbedToolbar extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [WidgetToolbarRepository];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'MediaEmbedToolbar';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const widgetToolbarRepository = editor.plugins.get(WidgetToolbarRepository);\r\n        widgetToolbarRepository.register('mediaEmbed', {\r\n            ariaLabel: t('Media toolbar'),\r\n            items: editor.config.get('mediaEmbed.toolbar') || [],\r\n            getRelatedElement: getSelectedMediaViewWidget\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module page-break/pagebreakcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { findOptimalInsertionRange } from 'ckeditor5/src/widget';\r\n/**\r\n * The page break command.\r\n *\r\n * The command is registered by {@link module:page-break/pagebreakediting~PageBreakEditing} as `'pageBreak'`.\r\n *\r\n * To insert a page break at the current selection, execute the command:\r\n *\r\n *\t\teditor.execute( 'pageBreak' );\r\n */\r\nexport default class PageBreakCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const schema = model.schema;\r\n        const selection = model.document.selection;\r\n        this.isEnabled = isPageBreakAllowedInParent(selection, schema, model);\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const model = this.editor.model;\r\n        model.change(writer => {\r\n            const pageBreakElement = writer.createElement('pageBreak');\r\n            model.insertObject(pageBreakElement, null, null, {\r\n                setSelection: 'after'\r\n            });\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks if a page break is allowed by the schema in the optimal insertion parent.\r\n */\r\nfunction isPageBreakAllowedInParent(selection, schema, model) {\r\n    const parent = getInsertPageBreakParent(selection, model);\r\n    return schema.checkChild(parent, 'pageBreak');\r\n}\r\n/**\r\n * Returns a node that will be used to insert a page break with `model.insertContent` to check if the page break can be placed there.\r\n */\r\nfunction getInsertPageBreakParent(selection, model) {\r\n    const insertionRange = findOptimalInsertionRange(selection, model);\r\n    const parent = insertionRange.start.parent;\r\n    if (parent.isEmpty && !parent.is('element', '$root')) {\r\n        return parent.parent;\r\n    }\r\n    return parent;\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./pagebreak.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module page-break/pagebreakediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { toWidget } from 'ckeditor5/src/widget';\r\nimport PageBreakCommand from './pagebreakcommand';\r\nimport '../theme/pagebreak.css';\r\n/**\r\n * The page break editing feature.\r\n */\r\nexport default class PageBreakEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'PageBreakEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const t = editor.t;\r\n        const conversion = editor.conversion;\r\n        schema.register('pageBreak', {\r\n            inheritAllFrom: '$blockObject'\r\n        });\r\n        conversion.for('dataDowncast').elementToStructure({\r\n            model: 'pageBreak',\r\n            view: (modelElement, { writer }) => {\r\n                const divElement = writer.createContainerElement('div', {\r\n                    class: 'page-break',\r\n                    // If user has no `.ck-content` styles, it should always break a page during print.\r\n                    style: 'page-break-after: always'\r\n                }, \r\n                // For a rationale of using span inside a div see:\r\n                // https://github.com/ckeditor/ckeditor5-page-break/pull/1#discussion_r328934062.\r\n                writer.createContainerElement('span', {\r\n                    style: 'display: none'\r\n                }));\r\n                return divElement;\r\n            }\r\n        });\r\n        conversion.for('editingDowncast').elementToStructure({\r\n            model: 'pageBreak',\r\n            view: (modelElement, { writer }) => {\r\n                const label = t('Page break');\r\n                const viewWrapper = writer.createContainerElement('div');\r\n                const viewLabelElement = writer.createRawElement('span', { class: 'page-break__label' }, function (domElement) {\r\n                    domElement.innerText = t('Page break');\r\n                });\r\n                writer.addClass('page-break', viewWrapper);\r\n                writer.insert(writer.createPositionAt(viewWrapper, 0), viewLabelElement);\r\n                return toPageBreakWidget(viewWrapper, writer, label);\r\n            }\r\n        });\r\n        conversion.for('upcast')\r\n            .elementToElement({\r\n            view: element => {\r\n                // For upcast conversion it's enough if we check for element style and verify if it's empty\r\n                // or contains only hidden span element.\r\n                const hasPageBreakBefore = element.getStyle('page-break-before') == 'always';\r\n                const hasPageBreakAfter = element.getStyle('page-break-after') == 'always';\r\n                if (!hasPageBreakBefore && !hasPageBreakAfter) {\r\n                    return null;\r\n                }\r\n                // The \"page break\" div accepts only single child or no child at all.\r\n                if (element.childCount == 1) {\r\n                    const viewSpan = element.getChild(0);\r\n                    // The child must be the \"span\" element that is not displayed.\r\n                    if (!viewSpan.is('element', 'span') || viewSpan.getStyle('display') != 'none') {\r\n                        return null;\r\n                    }\r\n                }\r\n                else if (element.childCount > 1) {\r\n                    return null;\r\n                }\r\n                return { name: true };\r\n            },\r\n            model: 'pageBreak',\r\n            // This conversion must be checked before <br> conversion because some editors use\r\n            // <br style=\"page-break-before:always\"> as a page break marker.\r\n            converterPriority: 'high'\r\n        });\r\n        editor.commands.add('pageBreak', new PageBreakCommand(editor));\r\n    }\r\n}\r\n/**\r\n * Converts a given {@link module:engine/view/element~Element} to a page break widget:\r\n * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to\r\n *   recognize the page break widget element.\r\n * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\r\n */\r\nfunction toPageBreakWidget(viewElement, writer, label) {\r\n    writer.setCustomProperty('pageBreak', true, viewElement);\r\n    return toWidget(viewElement, writer, { label });\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module page-break/pagebreakui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport pageBreakIcon from '../theme/icons/pagebreak.svg';\r\n/**\r\n * The page break UI plugin.\r\n */\r\nexport default class PageBreakUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'PageBreakUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        // Add pageBreak button to feature components.\r\n        editor.ui.componentFactory.add('pageBreak', locale => {\r\n            const command = editor.commands.get('pageBreak');\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                label: t('Page break'),\r\n                icon: pageBreakIcon,\r\n                tooltip: true\r\n            });\r\n            view.bind('isEnabled').to(command, 'isEnabled');\r\n            // Execute command.\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute('pageBreak');\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M3.598.687h1.5v5h-1.5zm14.5 0h1.5v5h-1.5z\\\"/><path d=\\\"M19.598 4.187v1.5h-16v-1.5zm-16 14.569h1.5v-5h-1.5zm14.5 0h1.5v-5h-1.5z\\\"/><path d=\\\"M19.598 15.256v-1.5h-16v1.5zM5.081 9h6v2h-6zm8 0h6v2h-6zm-9.483 1L0 12.5v-5z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module page-break/pagebreak\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Widget } from 'ckeditor5/src/widget';\r\nimport PageBreakEditing from './pagebreakediting';\r\nimport PageBreakUI from './pagebreakui';\r\n/**\r\n * The page break feature.\r\n *\r\n * It provides the possibility to insert a page break into the rich-text editor.\r\n *\r\n * For a detailed overview, check the {@glink features/page-break Page break feature} documentation.\r\n */\r\nexport default class PageBreak extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [PageBreakEditing, PageBreakUI, Widget];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'PageBreak';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/filters/list\r\n */\r\nimport { Matcher, UpcastWriter } from 'ckeditor5/src/engine';\r\n/**\r\n * Transforms Word specific list-like elements to the semantic HTML lists.\r\n *\r\n * Lists in Word are represented by block elements with special attributes like:\r\n *\r\n * ```xml\r\n * <p class=MsoListParagraphCxSpFirst style='mso-list:l1 level1 lfo1'>...</p> // Paragraph based list.\r\n * <h1 style='mso-list:l0 level1 lfo1'>...</h1> // Heading 1 based list.\r\n * ```\r\n *\r\n * @param documentFragment The view structure to be transformed.\r\n * @param stylesString Styles from which list-like elements styling will be extracted.\r\n */\r\nexport function transformListItemLikeElementsIntoLists(documentFragment, stylesString) {\r\n    if (!documentFragment.childCount) {\r\n        return;\r\n    }\r\n    const writer = new UpcastWriter(documentFragment.document);\r\n    const itemLikeElements = findAllItemLikeElements(documentFragment, writer);\r\n    if (!itemLikeElements.length) {\r\n        return;\r\n    }\r\n    let currentList = null;\r\n    let currentIndentation = 1;\r\n    itemLikeElements.forEach((itemLikeElement, i) => {\r\n        const isDifferentList = isNewListNeeded(itemLikeElements[i - 1], itemLikeElement);\r\n        const previousItemLikeElement = isDifferentList ? null : itemLikeElements[i - 1];\r\n        const indentationDifference = getIndentationDifference(previousItemLikeElement, itemLikeElement);\r\n        if (isDifferentList) {\r\n            currentList = null;\r\n            currentIndentation = 1;\r\n        }\r\n        if (!currentList || indentationDifference !== 0) {\r\n            const listStyle = detectListStyle(itemLikeElement, stylesString);\r\n            if (!currentList) {\r\n                currentList = insertNewEmptyList(listStyle, itemLikeElement.element, writer);\r\n            }\r\n            else if (itemLikeElement.indent > currentIndentation) {\r\n                const lastListItem = currentList.getChild(currentList.childCount - 1);\r\n                const lastListItemChild = lastListItem.getChild(lastListItem.childCount - 1);\r\n                currentList = insertNewEmptyList(listStyle, lastListItemChild, writer);\r\n                currentIndentation += 1;\r\n            }\r\n            else if (itemLikeElement.indent < currentIndentation) {\r\n                const differentIndentation = currentIndentation - itemLikeElement.indent;\r\n                currentList = findParentListAtLevel(currentList, differentIndentation);\r\n                currentIndentation = itemLikeElement.indent;\r\n            }\r\n            if (itemLikeElement.indent <= currentIndentation) {\r\n                if (!currentList.is('element', listStyle.type)) {\r\n                    currentList = writer.rename(listStyle.type, currentList);\r\n                }\r\n            }\r\n        }\r\n        const listItem = transformElementIntoListItem(itemLikeElement.element, writer);\r\n        writer.appendChild(listItem, currentList);\r\n    });\r\n}\r\n/**\r\n * Removes paragraph wrapping content inside a list item.\r\n */\r\nexport function unwrapParagraphInListItem(documentFragment, writer) {\r\n    for (const value of writer.createRangeIn(documentFragment)) {\r\n        const element = value.item;\r\n        if (element.is('element', 'li')) {\r\n            // Google Docs allows for single paragraph inside LI.\r\n            const firstChild = element.getChild(0);\r\n            if (firstChild && firstChild.is('element', 'p')) {\r\n                writer.unwrapElement(firstChild);\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Finds all list-like elements in a given document fragment.\r\n *\r\n * @param documentFragment Document fragment in which to look for list-like nodes.\r\n * @returns Array of found list-like items. Each item is an object containing:\r\n */\r\nfunction findAllItemLikeElements(documentFragment, writer) {\r\n    const range = writer.createRangeIn(documentFragment);\r\n    // Matcher for finding list-like elements.\r\n    const itemLikeElementsMatcher = new Matcher({\r\n        name: /^p|h\\d+$/,\r\n        styles: {\r\n            'mso-list': /.*/\r\n        }\r\n    });\r\n    const itemLikeElements = [];\r\n    for (const value of range) {\r\n        if (value.type === 'elementStart' && itemLikeElementsMatcher.match(value.item)) {\r\n            const itemData = getListItemData(value.item);\r\n            itemLikeElements.push({\r\n                element: value.item,\r\n                id: itemData.id,\r\n                order: itemData.order,\r\n                indent: itemData.indent\r\n            });\r\n        }\r\n    }\r\n    return itemLikeElements;\r\n}\r\n/**\r\n * Extracts list item style from the provided CSS.\r\n *\r\n * List item style is extracted from the CSS stylesheet. Each list with its specific style attribute\r\n * value (`mso-list:l1 level1 lfo1`) has its dedicated properties in a CSS stylesheet defined with a selector like:\r\n *\r\n * ```css\r\n * @list l1:level1 { ... }\r\n * ```\r\n *\r\n * It contains `mso-level-number-format` property which defines list numbering/bullet style. If this property\r\n * is not defined it means default `decimal` numbering.\r\n *\r\n * Here CSS string representation is used as `mso-level-number-format` property is an invalid CSS property\r\n * and will be removed during CSS parsing.\r\n *\r\n * @param listLikeItem List-like item for which list style will be searched for. Usually\r\n * a result of `findAllItemLikeElements()` function.\r\n * @param stylesString CSS stylesheet.\r\n * @returns An object with properties:\r\n *\r\n * * type - List type, could be `ul` or `ol`.\r\n * * startIndex - List start index, valid only for ordered lists.\r\n * * style - List style, for example: `decimal`, `lower-roman`, etc. It is extracted\r\n *     directly from Word stylesheet and adjusted to represent proper values for the CSS `list-style-type` property.\r\n *     If it cannot be adjusted, the `null` value is returned.\r\n */\r\nfunction detectListStyle(listLikeItem, stylesString) {\r\n    const listStyleRegexp = new RegExp(`@list l${listLikeItem.id}:level${listLikeItem.indent}\\\\s*({[^}]*)`, 'gi');\r\n    const listStyleTypeRegex = /mso-level-number-format:([^;]{0,100});/gi;\r\n    const listStartIndexRegex = /mso-level-start-at:\\s{0,100}([0-9]{0,10})\\s{0,100};/gi;\r\n    const listStyleMatch = listStyleRegexp.exec(stylesString);\r\n    let listStyleType = 'decimal'; // Decimal is default one.\r\n    let type = 'ol'; // <ol> is default list.\r\n    let startIndex = null;\r\n    if (listStyleMatch && listStyleMatch[1]) {\r\n        const listStyleTypeMatch = listStyleTypeRegex.exec(listStyleMatch[1]);\r\n        if (listStyleTypeMatch && listStyleTypeMatch[1]) {\r\n            listStyleType = listStyleTypeMatch[1].trim();\r\n            type = listStyleType !== 'bullet' && listStyleType !== 'image' ? 'ol' : 'ul';\r\n        }\r\n        // Styles for the numbered lists are always defined in the Word CSS stylesheet.\r\n        // Unordered lists MAY contain a value for the Word CSS definition `mso-level-text` but sometimes\r\n        // this tag is missing. And because of that, we cannot depend on that. We need to predict the list style value\r\n        // based on the list style marker element.\r\n        if (listStyleType === 'bullet') {\r\n            const bulletedStyle = findBulletedListStyle(listLikeItem.element);\r\n            if (bulletedStyle) {\r\n                listStyleType = bulletedStyle;\r\n            }\r\n        }\r\n        else {\r\n            const listStartIndexMatch = listStartIndexRegex.exec(listStyleMatch[1]);\r\n            if (listStartIndexMatch && listStartIndexMatch[1]) {\r\n                startIndex = parseInt(listStartIndexMatch[1]);\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        type,\r\n        startIndex,\r\n        style: mapListStyleDefinition(listStyleType)\r\n    };\r\n}\r\n/**\r\n * Tries to extract the `list-style-type` value based on the marker element for bulleted list.\r\n */\r\nfunction findBulletedListStyle(element) {\r\n    const listMarkerElement = findListMarkerNode(element);\r\n    if (!listMarkerElement) {\r\n        return null;\r\n    }\r\n    const listMarker = listMarkerElement._data;\r\n    if (listMarker === 'o') {\r\n        return 'circle';\r\n    }\r\n    else if (listMarker === '·') {\r\n        return 'disc';\r\n    }\r\n    // Word returns '§' instead of '■' for the square list style.\r\n    else if (listMarker === '§') {\r\n        return 'square';\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Tries to find a text node that represents the marker element (list-style-type).\r\n */\r\nfunction findListMarkerNode(element) {\r\n    // If the first child is a text node, it is the data for the element.\r\n    // The list-style marker is not present here.\r\n    if (element.getChild(0).is('$text')) {\r\n        return null;\r\n    }\r\n    for (const childNode of element.getChildren()) {\r\n        // The list-style marker will be inside the `<span>` element. Let's ignore all non-span elements.\r\n        // It may happen that the `<a>` element is added as the first child. Most probably, it's an anchor element.\r\n        if (!childNode.is('element', 'span')) {\r\n            continue;\r\n        }\r\n        const textNodeOrElement = childNode.getChild(0);\r\n        if (!textNodeOrElement) {\r\n            continue;\r\n        }\r\n        // If already found the marker element, use it.\r\n        if (textNodeOrElement.is('$text')) {\r\n            return textNodeOrElement;\r\n        }\r\n        return textNodeOrElement.getChild(0);\r\n    }\r\n    /* istanbul ignore next -- @preserve */\r\n    return null;\r\n}\r\n/**\r\n * Parses the `list-style-type` value extracted directly from the Word CSS stylesheet and returns proper CSS definition.\r\n */\r\nfunction mapListStyleDefinition(value) {\r\n    if (value.startsWith('arabic-leading-zero')) {\r\n        return 'decimal-leading-zero';\r\n    }\r\n    switch (value) {\r\n        case 'alpha-upper':\r\n            return 'upper-alpha';\r\n        case 'alpha-lower':\r\n            return 'lower-alpha';\r\n        case 'roman-upper':\r\n            return 'upper-roman';\r\n        case 'roman-lower':\r\n            return 'lower-roman';\r\n        case 'circle':\r\n        case 'disc':\r\n        case 'square':\r\n            return value;\r\n        default:\r\n            return null;\r\n    }\r\n}\r\n/**\r\n * Creates an empty list of a given type and inserts it after a specified element.\r\n *\r\n * @param listStyle List style object which determines the type of newly created list.\r\n * Usually a result of `detectListStyle()` function.\r\n * @param element Element after which list is inserted.\r\n * @returns Newly created list element.\r\n */\r\nfunction insertNewEmptyList(listStyle, element, writer) {\r\n    const parent = element.parent;\r\n    const list = writer.createElement(listStyle.type);\r\n    const position = parent.getChildIndex(element) + 1;\r\n    writer.insertChild(position, list, parent);\r\n    // We do not support modifying the marker for a particular list item.\r\n    // Set the value for the `list-style-type` property directly to the list container.\r\n    if (listStyle.style) {\r\n        writer.setStyle('list-style-type', listStyle.style, list);\r\n    }\r\n    if (listStyle.startIndex && listStyle.startIndex > 1) {\r\n        writer.setAttribute('start', listStyle.startIndex, list);\r\n    }\r\n    return list;\r\n}\r\n/**\r\n * Transforms a given element into a semantic list item. As the function operates on a provided\r\n * {module:engine/src/view/element~Element element} it will modify the view structure to which this element belongs.\r\n *\r\n * @param element Element which will be transformed into a list item.\r\n * @returns New element to which the given one was transformed. It is\r\n * inserted in place of the old element (the reference to the old element is lost due to renaming).\r\n */\r\nfunction transformElementIntoListItem(element, writer) {\r\n    removeBulletElement(element, writer);\r\n    writer.removeStyle('text-indent', element); // #12361\r\n    return writer.rename('li', element);\r\n}\r\n/**\r\n * Extracts list item information from Word specific list-like element style:\r\n *\r\n * ```\r\n * `style=\"mso-list:l1 level1 lfo1\"`\r\n * ```\r\n *\r\n * where:\r\n *\r\n * ```\r\n * * `l1` is a list id (however it does not mean this is a continuous list - see #43),\r\n * * `level1` is a list item indentation level,\r\n * * `lfo1` is a list insertion order in a document.\r\n * ```\r\n *\r\n * @param element Element from which style data is extracted.\r\n */\r\nfunction getListItemData(element) {\r\n    const data = {};\r\n    const listStyle = element.getStyle('mso-list');\r\n    if (listStyle) {\r\n        const idMatch = listStyle.match(/(^|\\s{1,100})l(\\d+)/i);\r\n        const orderMatch = listStyle.match(/\\s{0,100}lfo(\\d+)/i);\r\n        const indentMatch = listStyle.match(/\\s{0,100}level(\\d+)/i);\r\n        if (idMatch && orderMatch && indentMatch) {\r\n            data.id = idMatch[2];\r\n            data.order = orderMatch[1];\r\n            data.indent = parseInt(indentMatch[1]);\r\n        }\r\n    }\r\n    return data;\r\n}\r\n/**\r\n * Removes span with a numbering/bullet from a given element.\r\n */\r\nfunction removeBulletElement(element, writer) {\r\n    // Matcher for finding `span` elements holding lists numbering/bullets.\r\n    const bulletMatcher = new Matcher({\r\n        name: 'span',\r\n        styles: {\r\n            'mso-list': 'Ignore'\r\n        }\r\n    });\r\n    const range = writer.createRangeIn(element);\r\n    for (const value of range) {\r\n        if (value.type === 'elementStart' && bulletMatcher.match(value.item)) {\r\n            writer.remove(value.item);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Whether the previous and current items belong to the same list. It is determined based on `item.id`\r\n * (extracted from `mso-list` style, see #getListItemData) and a previous sibling of the current item.\r\n *\r\n * However, it's quite easy to change the `id` attribute for nested lists in Word. It will break the list feature while pasting.\r\n * Let's check also the `indent` attribute. If the difference between those two elements is equal to 1, we can assume that\r\n * the `currentItem` is a beginning of the nested list because lists in CKEditor 5 always start with the `indent=0` attribute.\r\n * See: https://github.com/ckeditor/ckeditor5/issues/7805.\r\n */\r\nfunction isNewListNeeded(previousItem, currentItem) {\r\n    if (!previousItem) {\r\n        return true;\r\n    }\r\n    if (previousItem.id !== currentItem.id) {\r\n        // See: https://github.com/ckeditor/ckeditor5/issues/7805.\r\n        //\r\n        // * List item 1.\r\n        //     - Nested list item 1.\r\n        if (currentItem.indent - previousItem.indent === 1) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    const previousSibling = currentItem.element.previousSibling;\r\n    if (!previousSibling) {\r\n        return true;\r\n    }\r\n    // Even with the same id the list does not have to be continuous (#43).\r\n    return !isList(previousSibling);\r\n}\r\nfunction isList(element) {\r\n    return element.is('element', 'ol') || element.is('element', 'ul');\r\n}\r\n/**\r\n * Calculates the indentation difference between two given list items (based on the indent attribute\r\n * extracted from the `mso-list` style, see #getListItemData).\r\n */\r\nfunction getIndentationDifference(previousItem, currentItem) {\r\n    return previousItem ? currentItem.indent - previousItem.indent : currentItem.indent - 1;\r\n}\r\n/**\r\n * Finds the parent list element (ul/ol) of a given list element with indentation level lower by a given value.\r\n *\r\n * @param listElement List element from which to start looking for a parent list.\r\n * @param indentationDifference Indentation difference between lists.\r\n * @returns Found list element with indentation level lower by a given value.\r\n */\r\nfunction findParentListAtLevel(listElement, indentationDifference) {\r\n    const ancestors = listElement.getAncestors({ parentFirst: true });\r\n    let parentList = null;\r\n    let levelChange = 0;\r\n    for (const ancestor of ancestors) {\r\n        if (ancestor.is('element', 'ul') || ancestor.is('element', 'ol')) {\r\n            levelChange++;\r\n        }\r\n        if (levelChange === indentationDifference) {\r\n            parentList = ancestor;\r\n            break;\r\n        }\r\n    }\r\n    return parentList;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/normalizers/mswordnormalizer\r\n */\r\nimport { transformListItemLikeElementsIntoLists } from '../filters/list';\r\nimport { replaceImagesSourceWithBase64 } from '../filters/image';\r\nconst msWordMatch1 = /<meta\\s*name=\"?generator\"?\\s*content=\"?microsoft\\s*word\\s*\\d+\"?\\/?>/i;\r\nconst msWordMatch2 = /xmlns:o=\"urn:schemas-microsoft-com/i;\r\n/**\r\n * Normalizer for the content pasted from Microsoft Word.\r\n */\r\nexport default class MSWordNormalizer {\r\n    /**\r\n     * Creates a new `MSWordNormalizer` instance.\r\n     *\r\n     * @param document View document.\r\n     */\r\n    constructor(document) {\r\n        this.document = document;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    isActive(htmlString) {\r\n        return msWordMatch1.test(htmlString) || msWordMatch2.test(htmlString);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute(data) {\r\n        const { body: documentFragment, stylesString } = data._parsedData;\r\n        transformListItemLikeElementsIntoLists(documentFragment, stylesString);\r\n        replaceImagesSourceWithBase64(documentFragment, data.dataTransfer.getData('text/rtf'));\r\n        data.content = documentFragment;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/filters/image\r\n */\r\n/* globals btoa */\r\nimport { Matcher, UpcastWriter } from 'ckeditor5/src/engine';\r\n/**\r\n * Replaces source attribute of all `<img>` elements representing regular\r\n * images (not the Word shapes) with inlined base64 image representation extracted from RTF or Blob data.\r\n *\r\n * @param documentFragment Document fragment on which transform images.\r\n * @param rtfData The RTF data from which images representation will be used.\r\n */\r\nexport function replaceImagesSourceWithBase64(documentFragment, rtfData) {\r\n    if (!documentFragment.childCount) {\r\n        return;\r\n    }\r\n    const upcastWriter = new UpcastWriter(documentFragment.document);\r\n    const shapesIds = findAllShapesIds(documentFragment, upcastWriter);\r\n    removeAllImgElementsRepresentingShapes(shapesIds, documentFragment, upcastWriter);\r\n    insertMissingImgs(shapesIds, documentFragment, upcastWriter);\r\n    removeAllShapeElements(documentFragment, upcastWriter);\r\n    const images = findAllImageElementsWithLocalSource(documentFragment, upcastWriter);\r\n    if (images.length) {\r\n        replaceImagesFileSourceWithInlineRepresentation(images, extractImageDataFromRtf(rtfData), upcastWriter);\r\n    }\r\n}\r\n/**\r\n * Converts given HEX string to base64 representation.\r\n *\r\n * @internal\r\n * @param hexString The HEX string to be converted.\r\n * @returns Base64 representation of a given HEX string.\r\n */\r\nexport function _convertHexToBase64(hexString) {\r\n    return btoa(hexString.match(/\\w{2}/g).map(char => {\r\n        return String.fromCharCode(parseInt(char, 16));\r\n    }).join(''));\r\n}\r\n/**\r\n * Finds all shapes (`<v:*>...</v:*>`) ids. Shapes can represent images (canvas)\r\n * or Word shapes (which does not have RTF or Blob representation).\r\n *\r\n * @param documentFragment Document fragment from which to extract shape ids.\r\n * @returns Array of shape ids.\r\n */\r\nfunction findAllShapesIds(documentFragment, writer) {\r\n    const range = writer.createRangeIn(documentFragment);\r\n    const shapeElementsMatcher = new Matcher({\r\n        name: /v:(.+)/\r\n    });\r\n    const shapesIds = [];\r\n    for (const value of range) {\r\n        if (value.type != 'elementStart') {\r\n            continue;\r\n        }\r\n        const el = value.item;\r\n        const previousSibling = el.previousSibling;\r\n        const prevSiblingName = previousSibling && previousSibling.is('element') ? previousSibling.name : null;\r\n        // If shape element have 'o:gfxdata' attribute and is not directly before `<v:shapetype>` element it means it represent Word shape.\r\n        if (shapeElementsMatcher.match(el) && el.getAttribute('o:gfxdata') && prevSiblingName !== 'v:shapetype') {\r\n            shapesIds.push(value.item.getAttribute('id'));\r\n        }\r\n    }\r\n    return shapesIds;\r\n}\r\n/**\r\n * Removes all `<img>` elements which represents Word shapes and not regular images.\r\n *\r\n * @param shapesIds Shape ids which will be checked against `<img>` elements.\r\n * @param documentFragment Document fragment from which to remove `<img>` elements.\r\n */\r\nfunction removeAllImgElementsRepresentingShapes(shapesIds, documentFragment, writer) {\r\n    const range = writer.createRangeIn(documentFragment);\r\n    const imageElementsMatcher = new Matcher({\r\n        name: 'img'\r\n    });\r\n    const imgs = [];\r\n    for (const value of range) {\r\n        if (value.item.is('element') && imageElementsMatcher.match(value.item)) {\r\n            const el = value.item;\r\n            const shapes = el.getAttribute('v:shapes') ? el.getAttribute('v:shapes').split(' ') : [];\r\n            if (shapes.length && shapes.every(shape => shapesIds.indexOf(shape) > -1)) {\r\n                imgs.push(el);\r\n                // Shapes may also have empty source while content is paste in some browsers (Safari).\r\n            }\r\n            else if (!el.getAttribute('src')) {\r\n                imgs.push(el);\r\n            }\r\n        }\r\n    }\r\n    for (const img of imgs) {\r\n        writer.remove(img);\r\n    }\r\n}\r\n/**\r\n * Removes all shape elements (`<v:*>...</v:*>`) so they do not pollute the output structure.\r\n *\r\n * @param documentFragment Document fragment from which to remove shape elements.\r\n */\r\nfunction removeAllShapeElements(documentFragment, writer) {\r\n    const range = writer.createRangeIn(documentFragment);\r\n    const shapeElementsMatcher = new Matcher({\r\n        name: /v:(.+)/\r\n    });\r\n    const shapes = [];\r\n    for (const value of range) {\r\n        if (value.type == 'elementStart' && shapeElementsMatcher.match(value.item)) {\r\n            shapes.push(value.item);\r\n        }\r\n    }\r\n    for (const shape of shapes) {\r\n        writer.remove(shape);\r\n    }\r\n}\r\n/**\r\n * Inserts `img` tags if there is none after a shape.\r\n */\r\nfunction insertMissingImgs(shapeIds, documentFragment, writer) {\r\n    const range = writer.createRangeIn(documentFragment);\r\n    const shapes = [];\r\n    for (const value of range) {\r\n        if (value.type == 'elementStart' && value.item.is('element', 'v:shape')) {\r\n            const id = value.item.getAttribute('id');\r\n            if (shapeIds.includes(id)) {\r\n                continue;\r\n            }\r\n            if (!containsMatchingImg(value.item.parent.getChildren(), id)) {\r\n                shapes.push(value.item);\r\n            }\r\n        }\r\n    }\r\n    for (const shape of shapes) {\r\n        const attrs = {\r\n            src: findSrc(shape)\r\n        };\r\n        if (shape.hasAttribute('alt')) {\r\n            attrs.alt = shape.getAttribute('alt');\r\n        }\r\n        const img = writer.createElement('img', attrs);\r\n        writer.insertChild(shape.index + 1, img, shape.parent);\r\n    }\r\n    function containsMatchingImg(nodes, id) {\r\n        for (const node of nodes) {\r\n            /* istanbul ignore else -- @preserve */\r\n            if (node.is('element')) {\r\n                if (node.name == 'img' && node.getAttribute('v:shapes') == id) {\r\n                    return true;\r\n                }\r\n                if (containsMatchingImg(node.getChildren(), id)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    function findSrc(shape) {\r\n        for (const child of shape.getChildren()) {\r\n            /* istanbul ignore else -- @preserve */\r\n            if (child.is('element') && child.getAttribute('src')) {\r\n                return child.getAttribute('src');\r\n            }\r\n        }\r\n    }\r\n}\r\n/**\r\n * Finds all `<img>` elements in a given document fragment which have source pointing to local `file://` resource.\r\n *\r\n * @param documentFragment Document fragment in which to look for `<img>` elements.\r\n * @returns result All found images grouped by source type.\r\n */\r\nfunction findAllImageElementsWithLocalSource(documentFragment, writer) {\r\n    const range = writer.createRangeIn(documentFragment);\r\n    const imageElementsMatcher = new Matcher({\r\n        name: 'img'\r\n    });\r\n    const imgs = [];\r\n    for (const value of range) {\r\n        if (value.item.is('element') && imageElementsMatcher.match(value.item)) {\r\n            if (value.item.getAttribute('src').startsWith('file://')) {\r\n                imgs.push(value.item);\r\n            }\r\n        }\r\n    }\r\n    return imgs;\r\n}\r\n/**\r\n * Extracts all images HEX representations from a given RTF data.\r\n *\r\n * @param rtfData The RTF data from which to extract images HEX representation.\r\n * @returns Array of found HEX representations. Each array item is an object containing:\r\n *\r\n * * hex Image representation in HEX format.\r\n * * type Type of image, `image/png` or `image/jpeg`.\r\n */\r\nfunction extractImageDataFromRtf(rtfData) {\r\n    if (!rtfData) {\r\n        return [];\r\n    }\r\n    const regexPictureHeader = /{\\\\pict[\\s\\S]+?\\\\bliptag-?\\d+(\\\\blipupi-?\\d+)?({\\\\\\*\\\\blipuid\\s?[\\da-fA-F]+)?[\\s}]*?/;\r\n    const regexPicture = new RegExp('(?:(' + regexPictureHeader.source + '))([\\\\da-fA-F\\\\s]+)\\\\}', 'g');\r\n    const images = rtfData.match(regexPicture);\r\n    const result = [];\r\n    if (images) {\r\n        for (const image of images) {\r\n            let imageType = false;\r\n            if (image.includes('\\\\pngblip')) {\r\n                imageType = 'image/png';\r\n            }\r\n            else if (image.includes('\\\\jpegblip')) {\r\n                imageType = 'image/jpeg';\r\n            }\r\n            if (imageType) {\r\n                result.push({\r\n                    hex: image.replace(regexPictureHeader, '').replace(/[^\\da-fA-F]/g, ''),\r\n                    type: imageType\r\n                });\r\n            }\r\n        }\r\n    }\r\n    return result;\r\n}\r\n/**\r\n * Replaces `src` attribute value of all given images with the corresponding base64 image representation.\r\n *\r\n * @param imageElements Array of image elements which will have its source replaced.\r\n * @param imagesHexSources Array of images hex sources (usually the result of `extractImageDataFromRtf()` function).\r\n * The array should be the same length as `imageElements` parameter.\r\n */\r\nfunction replaceImagesFileSourceWithInlineRepresentation(imageElements, imagesHexSources, writer) {\r\n    // Assume there is an equal amount of image elements and images HEX sources so they can be matched accordingly based on existing order.\r\n    if (imageElements.length === imagesHexSources.length) {\r\n        for (let i = 0; i < imageElements.length; i++) {\r\n            const newSrc = `data:${imagesHexSources[i].type};base64,${_convertHexToBase64(imagesHexSources[i].hex)}`;\r\n            writer.setAttribute('src', newSrc, imageElements[i]);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/filters/br\r\n */\r\nimport { DomConverter, ViewDocument } from 'ckeditor5/src/engine';\r\n/**\r\n * Transforms `<br>` elements that are siblings to some block element into a paragraphs.\r\n *\r\n * @param documentFragment The view structure to be transformed.\r\n */\r\nexport default function transformBlockBrsToParagraphs(documentFragment, writer) {\r\n    const viewDocument = new ViewDocument(writer.document.stylesProcessor);\r\n    const domConverter = new DomConverter(viewDocument, { renderingMode: 'data' });\r\n    const blockElements = domConverter.blockElements;\r\n    const inlineObjectElements = domConverter.inlineObjectElements;\r\n    const elementsToReplace = [];\r\n    for (const value of writer.createRangeIn(documentFragment)) {\r\n        const element = value.item;\r\n        if (element.is('element', 'br')) {\r\n            const nextSibling = findSibling(element, 'forward', writer, { blockElements, inlineObjectElements });\r\n            const previousSibling = findSibling(element, 'backward', writer, { blockElements, inlineObjectElements });\r\n            const nextSiblingIsBlock = isBlockViewElement(nextSibling, blockElements);\r\n            const previousSiblingIsBlock = isBlockViewElement(previousSibling, blockElements);\r\n            // If the <br> is surrounded by blocks then convert it to a paragraph:\r\n            // * <p>foo</p>[<br>]<p>bar</p> -> <p>foo</p>[<p></p>]<p>bar</p>\r\n            // * <p>foo</p>[<br>] -> <p>foo</p>[<p></p>]\r\n            // * [<br>]<p>foo</p> -> [<p></p>]<p>foo</p>\r\n            if (previousSiblingIsBlock || nextSiblingIsBlock) {\r\n                elementsToReplace.push(element);\r\n            }\r\n        }\r\n    }\r\n    for (const element of elementsToReplace) {\r\n        if (element.hasClass('Apple-interchange-newline')) {\r\n            writer.remove(element);\r\n        }\r\n        else {\r\n            writer.replace(element, writer.createElement('p'));\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns sibling node, threats inline elements as transparent (but should stop on an inline objects).\r\n */\r\nfunction findSibling(viewElement, direction, writer, { blockElements, inlineObjectElements }) {\r\n    let position = writer.createPositionAt(viewElement, direction == 'forward' ? 'after' : 'before');\r\n    // Find first position that is just before a first:\r\n    // * text node,\r\n    // * block element,\r\n    // * inline object element.\r\n    // It's ignoring any inline (non-object) elements like span, strong, etc.\r\n    position = position.getLastMatchingPosition(({ item }) => (item.is('element') &&\r\n        !blockElements.includes(item.name) &&\r\n        !inlineObjectElements.includes(item.name)), { direction });\r\n    return direction == 'forward' ? position.nodeAfter : position.nodeBefore;\r\n}\r\n/**\r\n * Returns true for view elements that are listed as block view elements.\r\n */\r\nfunction isBlockViewElement(node, blockElements) {\r\n    return !!node && node.is('element') && blockElements.includes(node.name);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/normalizers/googledocsnormalizer\r\n */\r\nimport { UpcastWriter } from 'ckeditor5/src/engine';\r\nimport removeBoldWrapper from '../filters/removeboldwrapper';\r\nimport transformBlockBrsToParagraphs from '../filters/br';\r\nimport { unwrapParagraphInListItem } from '../filters/list';\r\nconst googleDocsMatch = /id=(\"|')docs-internal-guid-[-0-9a-f]+(\"|')/i;\r\n/**\r\n * Normalizer for the content pasted from Google Docs.\r\n */\r\nexport default class GoogleDocsNormalizer {\r\n    /**\r\n     * Creates a new `GoogleDocsNormalizer` instance.\r\n     *\r\n     * @param document View document.\r\n     */\r\n    constructor(document) {\r\n        this.document = document;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    isActive(htmlString) {\r\n        return googleDocsMatch.test(htmlString);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute(data) {\r\n        const writer = new UpcastWriter(this.document);\r\n        const { body: documentFragment } = data._parsedData;\r\n        removeBoldWrapper(documentFragment, writer);\r\n        unwrapParagraphInListItem(documentFragment, writer);\r\n        transformBlockBrsToParagraphs(documentFragment, writer);\r\n        data.content = documentFragment;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Removes the `<b>` tag wrapper added by Google Docs to a copied content.\r\n *\r\n * @param documentFragment element `data.content` obtained from clipboard\r\n */\r\nexport default function removeBoldWrapper(documentFragment, writer) {\r\n    for (const child of documentFragment.getChildren()) {\r\n        if (child.is('element', 'b') && child.getStyle('font-weight') === 'normal') {\r\n            const childIndex = documentFragment.getChildIndex(child);\r\n            writer.remove(child);\r\n            writer.insertChild(childIndex, child.getChildren(), documentFragment);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/normalizers/googlesheetsnormalizer\r\n */\r\nimport { UpcastWriter } from 'ckeditor5/src/engine';\r\nimport removeXmlns from '../filters/removexmlns';\r\nimport removeGoogleSheetsTag from '../filters/removegooglesheetstag';\r\nimport removeInvalidTableWidth from '../filters/removeinvalidtablewidth';\r\nimport removeStyleBlock from '../filters/removestyleblock';\r\nconst googleSheetsMatch = /<google-sheets-html-origin/i;\r\n/**\r\n * Normalizer for the content pasted from Google Sheets.\r\n */\r\nexport default class GoogleSheetsNormalizer {\r\n    /**\r\n     * Creates a new `GoogleSheetsNormalizer` instance.\r\n     *\r\n     * @param document View document.\r\n     */\r\n    constructor(document) {\r\n        this.document = document;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    isActive(htmlString) {\r\n        return googleSheetsMatch.test(htmlString);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute(data) {\r\n        const writer = new UpcastWriter(this.document);\r\n        const { body: documentFragment } = data._parsedData;\r\n        removeGoogleSheetsTag(documentFragment, writer);\r\n        removeXmlns(documentFragment, writer);\r\n        removeInvalidTableWidth(documentFragment, writer);\r\n        removeStyleBlock(documentFragment, writer);\r\n        data.content = documentFragment;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Removes the `<google-sheets-html-origin>` tag wrapper added by Google Sheets to a copied content.\r\n *\r\n * @param documentFragment element `data.content` obtained from clipboard\r\n */\r\nexport default function removeGoogleSheetsTag(documentFragment, writer) {\r\n    for (const child of documentFragment.getChildren()) {\r\n        if (child.is('element', 'google-sheets-html-origin')) {\r\n            const childIndex = documentFragment.getChildIndex(child);\r\n            writer.remove(child);\r\n            writer.insertChild(childIndex, child.getChildren(), documentFragment);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Removes the `xmlns` attribute from table pasted from Google Sheets.\r\n *\r\n * @param documentFragment element `data.content` obtained from clipboard\r\n */\r\nexport default function removeXmlns(documentFragment, writer) {\r\n    for (const child of documentFragment.getChildren()) {\r\n        if (child.is('element', 'table') && child.hasAttribute('xmlns')) {\r\n            writer.removeAttribute('xmlns', child);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Removes the `width:0px` style from table pasted from Google Sheets.\r\n *\r\n * @param documentFragment element `data.content` obtained from clipboard\r\n */\r\nexport default function removeInvalidTableWidth(documentFragment, writer) {\r\n    for (const child of documentFragment.getChildren()) {\r\n        if (child.is('element', 'table') && child.getStyle('width') === '0px') {\r\n            writer.removeStyle('width', child);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Removes `<style>` block added by Google Sheets to a copied content.\r\n *\r\n * @param documentFragment element `data.content` obtained from clipboard\r\n */\r\nexport default function removeStyleBlock(documentFragment, writer) {\r\n    for (const child of Array.from(documentFragment.getChildren())) {\r\n        if (child.is('element', 'style')) {\r\n            writer.remove(child);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/filters/space\r\n */\r\n/**\r\n * Replaces last space preceding elements closing tag with `&nbsp;`. Such operation prevents spaces from being removed\r\n * during further DOM/View processing (see especially {@link module:engine/view/domconverter~DomConverter#_processDataFromDomText}).\r\n * This method also takes into account Word specific `<o:p></o:p>` empty tags.\r\n * Additionally multiline sequences of spaces and new lines between tags are removed (see #39 and #40).\r\n *\r\n * @param htmlString HTML string in which spacing should be normalized.\r\n * @returns Input HTML with spaces normalized.\r\n */\r\nexport function normalizeSpacing(htmlString) {\r\n    // Run normalizeSafariSpaceSpans() two times to cover nested spans.\r\n    return normalizeSafariSpaceSpans(normalizeSafariSpaceSpans(htmlString))\r\n        // Remove all \\r\\n from \"spacerun spans\" so the last replace line doesn't strip all whitespaces.\r\n        .replace(/(<span\\s+style=['\"]mso-spacerun:yes['\"]>[^\\S\\r\\n]*?)[\\r\\n]+([^\\S\\r\\n]*<\\/span>)/g, '$1$2')\r\n        .replace(/<span\\s+style=['\"]mso-spacerun:yes['\"]><\\/span>/g, '')\r\n        .replace(/ <\\//g, '\\u00A0</')\r\n        .replace(/ <o:p><\\/o:p>/g, '\\u00A0<o:p></o:p>')\r\n        // Remove <o:p> block filler from empty paragraph. Safari uses \\u00A0 instead of &nbsp;.\r\n        .replace(/<o:p>(&nbsp;|\\u00A0)<\\/o:p>/g, '')\r\n        // Remove all whitespaces when they contain any \\r or \\n.\r\n        .replace(/>([^\\S\\r\\n]*[\\r\\n]\\s*)</g, '><');\r\n}\r\n/**\r\n * Normalizes spacing in special Word `spacerun spans` (`<span style='mso-spacerun:yes'>\\s+</span>`) by replacing\r\n * all spaces with `&nbsp; ` pairs. This prevents spaces from being removed during further DOM/View processing\r\n * (see especially {@link module:engine/view/domconverter~DomConverter#_processDataFromDomText}).\r\n *\r\n * @param htmlDocument Native `Document` object in which spacing should be normalized.\r\n */\r\nexport function normalizeSpacerunSpans(htmlDocument) {\r\n    htmlDocument.querySelectorAll('span[style*=spacerun]').forEach(el => {\r\n        const htmlElement = el;\r\n        const innerTextLength = htmlElement.innerText.length || 0;\r\n        htmlElement.innerText = Array(innerTextLength + 1).join('\\u00A0 ').substr(0, innerTextLength);\r\n    });\r\n}\r\n/**\r\n * Normalizes specific spacing generated by Safari when content pasted from Word (`<span class=\"Apple-converted-space\"> </span>`)\r\n * by replacing all spaces sequences longer than 1 space with `&nbsp; ` pairs. This prevents spaces from being removed during\r\n * further DOM/View processing (see especially {@link module:engine/view/domconverter~DomConverter#_processDataFromDomText}).\r\n *\r\n * This function is similar to {@link module:clipboard/utils/normalizeclipboarddata normalizeClipboardData util} but uses\r\n * regular spaces / &nbsp; sequence for replacement.\r\n *\r\n * @param htmlString HTML string in which spacing should be normalized\r\n * @returns Input HTML with spaces normalized.\r\n */\r\nfunction normalizeSafariSpaceSpans(htmlString) {\r\n    return htmlString.replace(/<span(?: class=\"Apple-converted-space\"|)>(\\s+)<\\/span>/g, (fullMatch, spaces) => {\r\n        return spaces.length === 1 ? ' ' : Array(spaces.length + 1).join('\\u00A0 ').substr(0, spaces.length);\r\n    });\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/pastefromoffice\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { ClipboardPipeline } from 'ckeditor5/src/clipboard';\r\nimport MSWordNormalizer from './normalizers/mswordnormalizer';\r\nimport GoogleDocsNormalizer from './normalizers/googledocsnormalizer';\r\nimport GoogleSheetsNormalizer from './normalizers/googlesheetsnormalizer';\r\nimport { parseHtml } from './filters/parse';\r\n/**\r\n * The Paste from Office plugin.\r\n *\r\n * This plugin handles content pasted from Office apps and transforms it (if necessary)\r\n * to a valid structure which can then be understood by the editor features.\r\n *\r\n * Transformation is made by a set of predefined {@link module:paste-from-office/normalizer~Normalizer normalizers}.\r\n * This plugin includes following normalizers:\r\n * * {@link module:paste-from-office/normalizers/mswordnormalizer~MSWordNormalizer Microsoft Word normalizer}\r\n * * {@link module:paste-from-office/normalizers/googledocsnormalizer~GoogleDocsNormalizer Google Docs normalizer}\r\n *\r\n * For more information about this feature check the {@glink api/paste-from-office package page}.\r\n */\r\nexport default class PasteFromOffice extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'PasteFromOffice';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [ClipboardPipeline];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const clipboardPipeline = editor.plugins.get('ClipboardPipeline');\r\n        const viewDocument = editor.editing.view.document;\r\n        const normalizers = [];\r\n        normalizers.push(new MSWordNormalizer(viewDocument));\r\n        normalizers.push(new GoogleDocsNormalizer(viewDocument));\r\n        normalizers.push(new GoogleSheetsNormalizer(viewDocument));\r\n        clipboardPipeline.on('inputTransformation', (evt, data) => {\r\n            if (data._isTransformedWithPasteFromOffice) {\r\n                return;\r\n            }\r\n            const codeBlock = editor.model.document.selection.getFirstPosition().parent;\r\n            if (codeBlock.is('element', 'codeBlock')) {\r\n                return;\r\n            }\r\n            const htmlString = data.dataTransfer.getData('text/html');\r\n            const activeNormalizer = normalizers.find(normalizer => normalizer.isActive(htmlString));\r\n            if (activeNormalizer) {\r\n                if (!data._parsedData) {\r\n                    data._parsedData = parseHtml(htmlString, viewDocument.stylesProcessor);\r\n                }\r\n                activeNormalizer.execute(data);\r\n                data._isTransformedWithPasteFromOffice = true;\r\n            }\r\n        }, { priority: 'high' });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module paste-from-office/filters/parse\r\n */\r\n/* globals DOMParser */\r\nimport { DomConverter, ViewDocument } from 'ckeditor5/src/engine';\r\nimport { normalizeSpacing, normalizeSpacerunSpans } from './space';\r\n/**\r\n * Parses the provided HTML extracting contents of `<body>` and `<style>` tags.\r\n *\r\n * @param htmlString HTML string to be parsed.\r\n */\r\nexport function parseHtml(htmlString, stylesProcessor) {\r\n    const domParser = new DOMParser();\r\n    // Remove Word specific \"if comments\" so content inside is not omitted by the parser.\r\n    htmlString = htmlString.replace(/<!--\\[if gte vml 1]>/g, '');\r\n    const normalizedHtml = normalizeSpacing(cleanContentAfterBody(htmlString));\r\n    // Parse htmlString as native Document object.\r\n    const htmlDocument = domParser.parseFromString(normalizedHtml, 'text/html');\r\n    normalizeSpacerunSpans(htmlDocument);\r\n    // Get `innerHTML` first as transforming to View modifies the source document.\r\n    const bodyString = htmlDocument.body.innerHTML;\r\n    // Transform document.body to View.\r\n    const bodyView = documentToView(htmlDocument, stylesProcessor);\r\n    // Extract stylesheets.\r\n    const stylesObject = extractStyles(htmlDocument);\r\n    return {\r\n        body: bodyView,\r\n        bodyString,\r\n        styles: stylesObject.styles,\r\n        stylesString: stylesObject.stylesString\r\n    };\r\n}\r\n/**\r\n * Transforms native `Document` object into {@link module:engine/view/documentfragment~DocumentFragment}. Comments are skipped.\r\n *\r\n * @param htmlDocument Native `Document` object to be transformed.\r\n */\r\nfunction documentToView(htmlDocument, stylesProcessor) {\r\n    const viewDocument = new ViewDocument(stylesProcessor);\r\n    const domConverter = new DomConverter(viewDocument, { renderingMode: 'data' });\r\n    const fragment = htmlDocument.createDocumentFragment();\r\n    const nodes = htmlDocument.body.childNodes;\r\n    while (nodes.length > 0) {\r\n        fragment.appendChild(nodes[0]);\r\n    }\r\n    return domConverter.domToView(fragment, { skipComments: true });\r\n}\r\n/**\r\n * Extracts both `CSSStyleSheet` and string representation from all `style` elements available in a provided `htmlDocument`.\r\n *\r\n * @param htmlDocument Native `Document` object from which styles will be extracted.\r\n */\r\nfunction extractStyles(htmlDocument) {\r\n    const styles = [];\r\n    const stylesString = [];\r\n    const styleTags = Array.from(htmlDocument.getElementsByTagName('style'));\r\n    for (const style of styleTags) {\r\n        if (style.sheet && style.sheet.cssRules && style.sheet.cssRules.length) {\r\n            styles.push(style.sheet);\r\n            stylesString.push(style.innerHTML);\r\n        }\r\n    }\r\n    return {\r\n        styles,\r\n        stylesString: stylesString.join(' ')\r\n    };\r\n}\r\n/**\r\n * Removes leftover content from between closing </body> and closing </html> tag:\r\n *\r\n * ```html\r\n * <html><body><p>Foo Bar</p></body><span>Fo</span></html> -> <html><body><p>Foo Bar</p></body></html>\r\n * ```\r\n *\r\n * This function is used as specific browsers (Edge) add some random content after `body` tag when pasting from Word.\r\n * @param htmlString The HTML string to be cleaned.\r\n * @returns The HTML string with leftover content removed.\r\n */\r\nfunction cleanContentAfterBody(htmlString) {\r\n    const bodyCloseTag = '</body>';\r\n    const htmlCloseTag = '</html>';\r\n    const bodyCloseIndex = htmlString.indexOf(bodyCloseTag);\r\n    if (bodyCloseIndex < 0) {\r\n        return htmlString;\r\n    }\r\n    const htmlCloseIndex = htmlString.indexOf(htmlCloseTag, bodyCloseIndex + bodyCloseTag.length);\r\n    return htmlString.substring(0, bodyCloseIndex + bodyCloseTag.length) +\r\n        (htmlCloseIndex >= 0 ? htmlString.substring(htmlCloseIndex) : '');\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module source-editing/utils/formathtml\r\n */\r\n/**\r\n * A simple (and naive) HTML code formatter that returns a formatted HTML markup that can be easily\r\n * parsed by human eyes. It beautifies the HTML code by adding new lines between elements that behave like block elements\r\n * (https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements\r\n * and a few more like `tr`, `td`, and similar ones) and inserting indents for nested content.\r\n *\r\n * WARNING: This function works only on a text that does not contain any indentations or new lines.\r\n * Calling this function on the already formatted text will damage the formatting.\r\n *\r\n * @param input An HTML string to format.\r\n */\r\nexport function formatHtml(input) {\r\n    // A list of block-like elements around which the new lines should be inserted, and within which\r\n    // the indentation of their children should be increased.\r\n    // The list is partially based on https://developer.mozilla.org/en-US/docs/Web/HTML/Block-level_elements that contains\r\n    // a full list of HTML block-level elements.\r\n    // A void element is an element that cannot have any child - https://html.spec.whatwg.org/multipage/syntax.html#void-elements.\r\n    // Note that <pre> element is not listed on this list to avoid breaking whitespace formatting.\r\n    const elementsToFormat = [\r\n        { name: 'address', isVoid: false },\r\n        { name: 'article', isVoid: false },\r\n        { name: 'aside', isVoid: false },\r\n        { name: 'blockquote', isVoid: false },\r\n        { name: 'br', isVoid: true },\r\n        { name: 'details', isVoid: false },\r\n        { name: 'dialog', isVoid: false },\r\n        { name: 'dd', isVoid: false },\r\n        { name: 'div', isVoid: false },\r\n        { name: 'dl', isVoid: false },\r\n        { name: 'dt', isVoid: false },\r\n        { name: 'fieldset', isVoid: false },\r\n        { name: 'figcaption', isVoid: false },\r\n        { name: 'figure', isVoid: false },\r\n        { name: 'footer', isVoid: false },\r\n        { name: 'form', isVoid: false },\r\n        { name: 'h1', isVoid: false },\r\n        { name: 'h2', isVoid: false },\r\n        { name: 'h3', isVoid: false },\r\n        { name: 'h4', isVoid: false },\r\n        { name: 'h5', isVoid: false },\r\n        { name: 'h6', isVoid: false },\r\n        { name: 'header', isVoid: false },\r\n        { name: 'hgroup', isVoid: false },\r\n        { name: 'hr', isVoid: true },\r\n        { name: 'input', isVoid: true },\r\n        { name: 'li', isVoid: false },\r\n        { name: 'main', isVoid: false },\r\n        { name: 'nav', isVoid: false },\r\n        { name: 'ol', isVoid: false },\r\n        { name: 'p', isVoid: false },\r\n        { name: 'section', isVoid: false },\r\n        { name: 'table', isVoid: false },\r\n        { name: 'tbody', isVoid: false },\r\n        { name: 'td', isVoid: false },\r\n        { name: 'textarea', isVoid: false },\r\n        { name: 'th', isVoid: false },\r\n        { name: 'thead', isVoid: false },\r\n        { name: 'tr', isVoid: false },\r\n        { name: 'ul', isVoid: false }\r\n    ];\r\n    const elementNamesToFormat = elementsToFormat.map(element => element.name).join('|');\r\n    // It is not the fastest way to format the HTML markup but the performance should be good enough.\r\n    const lines = input\r\n        // Add new line before and after `<tag>` and `</tag>`.\r\n        // It may separate individual elements with two new lines, but this will be fixed below.\r\n        .replace(new RegExp(`</?(${elementNamesToFormat})( .*?)?>`, 'g'), '\\n$&\\n')\r\n        // Divide input string into lines, which start with either an opening tag, a closing tag, or just a text.\r\n        .split('\\n');\r\n    let indentCount = 0;\r\n    return lines\r\n        .filter(line => line.length)\r\n        .map(line => {\r\n        if (isNonVoidOpeningTag(line, elementsToFormat)) {\r\n            return indentLine(line, indentCount++);\r\n        }\r\n        if (isClosingTag(line, elementsToFormat)) {\r\n            return indentLine(line, --indentCount);\r\n        }\r\n        return indentLine(line, indentCount);\r\n    })\r\n        .join('\\n');\r\n}\r\n/**\r\n * Checks, if an argument is an opening tag of a non-void element to be formatted.\r\n *\r\n * @param line String to check.\r\n * @param elementsToFormat Elements to be formatted.\r\n */\r\nfunction isNonVoidOpeningTag(line, elementsToFormat) {\r\n    return elementsToFormat.some(element => {\r\n        if (element.isVoid) {\r\n            return false;\r\n        }\r\n        if (!new RegExp(`<${element.name}( .*?)?>`).test(line)) {\r\n            return false;\r\n        }\r\n        return true;\r\n    });\r\n}\r\n/**\r\n * Checks, if an argument is a closing tag.\r\n *\r\n * @param line String to check.\r\n * @param elementsToFormat Elements to be formatted.\r\n */\r\nfunction isClosingTag(line, elementsToFormat) {\r\n    return elementsToFormat.some(element => {\r\n        return new RegExp(`</${element.name}>`).test(line);\r\n    });\r\n}\r\n/**\r\n * Indents a line by a specified number of characters.\r\n *\r\n * @param line Line to indent.\r\n * @param indentCount Number of characters to use for indentation.\r\n * @param indentChar Indentation character(s). 4 spaces by default.\r\n */\r\nfunction indentLine(line, indentCount, indentChar = '    ') {\r\n    // More about Math.max() here in https://github.com/ckeditor/ckeditor5/issues/10698.\r\n    return `${indentChar.repeat(Math.max(0, indentCount))}${line}`;\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./sourceediting.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module source-editing/sourceediting\r\n */\r\n/* global console */\r\nimport { Plugin, PendingActions } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport { createElement, ElementReplacer } from 'ckeditor5/src/utils';\r\nimport { formatHtml } from './utils/formathtml';\r\nimport '../theme/sourceediting.css';\r\nimport sourceEditingIcon from '../theme/icons/source-editing.svg';\r\nconst COMMAND_FORCE_DISABLE_ID = 'SourceEditingMode';\r\n/**\r\n * The source editing feature.\r\n *\r\n * It provides the possibility to view and edit the source of the document.\r\n *\r\n * For a detailed overview, check the {@glink features/source-editing source editing feature documentation} and the\r\n * {@glink api/source-editing package page}.\r\n */\r\nexport default class SourceEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'SourceEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [PendingActions];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this.set('isSourceEditingMode', false);\r\n        this._elementReplacer = new ElementReplacer();\r\n        this._replacedRoots = new Map();\r\n        this._dataFromRoots = new Map();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        editor.ui.componentFactory.add('sourceEditing', locale => {\r\n            const buttonView = new ButtonView(locale);\r\n            buttonView.set({\r\n                label: t('Source'),\r\n                icon: sourceEditingIcon,\r\n                tooltip: true,\r\n                withText: true,\r\n                class: 'ck-source-editing-button'\r\n            });\r\n            buttonView.bind('isOn').to(this, 'isSourceEditingMode');\r\n            // The button should be disabled if one of the following conditions is met:\r\n            buttonView.bind('isEnabled').to(this, 'isEnabled', editor, 'isReadOnly', editor.plugins.get(PendingActions), 'hasAny', (isEnabled, isEditorReadOnly, hasAnyPendingActions) => {\r\n                // (1) The plugin itself is disabled.\r\n                if (!isEnabled) {\r\n                    return false;\r\n                }\r\n                // (2) The editor is in read-only mode.\r\n                if (isEditorReadOnly) {\r\n                    return false;\r\n                }\r\n                // (3) Any pending action is scheduled. It may change the model, so modifying the document source should be prevented\r\n                // until the model is finally set.\r\n                if (hasAnyPendingActions) {\r\n                    return false;\r\n                }\r\n                return true;\r\n            });\r\n            this.listenTo(buttonView, 'execute', () => {\r\n                this.isSourceEditingMode = !this.isSourceEditingMode;\r\n            });\r\n            return buttonView;\r\n        });\r\n        // Currently, the plugin handles the source editing mode by itself only for the classic editor. To use this plugin with other\r\n        // integrations, listen to the `change:isSourceEditingMode` event and act accordingly.\r\n        if (this._isAllowedToHandleSourceEditingMode()) {\r\n            this.on('change:isSourceEditingMode', (evt, name, isSourceEditingMode) => {\r\n                if (isSourceEditingMode) {\r\n                    this._showSourceEditing();\r\n                    this._disableCommands();\r\n                }\r\n                else {\r\n                    this._hideSourceEditing();\r\n                    this._enableCommands();\r\n                }\r\n            });\r\n            this.on('change:isEnabled', (evt, name, isEnabled) => this._handleReadOnlyMode(!isEnabled));\r\n            this.listenTo(editor, 'change:isReadOnly', (evt, name, isReadOnly) => this._handleReadOnlyMode(isReadOnly));\r\n        }\r\n        // Update the editor data while calling editor.getData() in the source editing mode.\r\n        editor.data.on('get', () => {\r\n            if (this.isSourceEditingMode) {\r\n                this.updateEditorData();\r\n            }\r\n        }, { priority: 'high' });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const editor = this.editor;\r\n        const collaborationPluginNamesToWarn = [\r\n            'RealTimeCollaborativeEditing',\r\n            'CommentsEditing',\r\n            'TrackChangesEditing',\r\n            'RevisionHistory'\r\n        ];\r\n        // Currently, the basic integration with Collaboration Features is to display a warning in the console.\r\n        if (collaborationPluginNamesToWarn.some(pluginName => editor.plugins.has(pluginName))) {\r\n            console.warn('You initialized the editor with the source editing feature and at least one of the collaboration features. ' +\r\n                'Please be advised that the source editing feature may not work, and be careful when editing document source ' +\r\n                'that contains markers created by the collaboration features.');\r\n        }\r\n        // Restricted Editing integration can also lead to problems. Warn the user accordingly.\r\n        if (editor.plugins.has('RestrictedEditingModeEditing')) {\r\n            console.warn('You initialized the editor with the source editing feature and restricted editing feature. ' +\r\n                'Please be advised that the source editing feature may not work, and be careful when editing document source ' +\r\n                'that contains markers created by the restricted editing feature.');\r\n        }\r\n    }\r\n    /**\r\n     * Updates the source data in all hidden editing roots.\r\n     */\r\n    updateEditorData() {\r\n        const editor = this.editor;\r\n        const data = {};\r\n        for (const [rootName, domSourceEditingElementWrapper] of this._replacedRoots) {\r\n            const oldData = this._dataFromRoots.get(rootName);\r\n            const newData = domSourceEditingElementWrapper.dataset.value;\r\n            // Do not set the data unless some changes have been made in the meantime.\r\n            // This prevents empty undo steps after switching to the normal editor.\r\n            if (oldData !== newData) {\r\n                data[rootName] = newData;\r\n            }\r\n        }\r\n        if (Object.keys(data).length) {\r\n            editor.data.set(data, { batchType: { isUndoable: true } });\r\n        }\r\n    }\r\n    /**\r\n     * Creates source editing wrappers that replace each editing root. Each wrapper contains the document source from the corresponding\r\n     * root.\r\n     *\r\n     * The wrapper element contains a textarea and it solves the problem, that the textarea element cannot auto expand its height based on\r\n     * the content it contains. The solution is to make the textarea more like a plain div element, which expands in height as much as it\r\n     * needs to, in order to display the whole document source without scrolling. The wrapper element is a parent for the textarea and for\r\n     * the pseudo-element `::after`, that replicates the look, content, and position of the textarea. The pseudo-element replica is hidden,\r\n     * but it is styled to be an identical visual copy of the textarea with the same content. Then, the wrapper is a grid container and both\r\n     * of its children (the textarea and the `::after` pseudo-element) are positioned within a CSS grid to occupy the same grid cell. The\r\n     * content in the pseudo-element `::after` is set in CSS and it stretches the grid to the appropriate size based on the textarea value.\r\n     * Since both children occupy the same grid cell, both have always the same height.\r\n     */\r\n    _showSourceEditing() {\r\n        const editor = this.editor;\r\n        const editingView = editor.editing.view;\r\n        const model = editor.model;\r\n        model.change(writer => {\r\n            writer.setSelection(null);\r\n            writer.removeSelectionAttribute(model.document.selection.getAttributeKeys());\r\n        });\r\n        // It is not needed to iterate through all editing roots, as currently the plugin supports only the Classic Editor with a single\r\n        // main root, but this code may help understand and use this feature in external integrations.\r\n        for (const [rootName, domRootElement] of editingView.domRoots) {\r\n            const data = formatSource(editor.data.get({ rootName }));\r\n            const domSourceEditingElementTextarea = createElement(domRootElement.ownerDocument, 'textarea', {\r\n                rows: '1',\r\n                'aria-label': 'Source code editing area'\r\n            });\r\n            const domSourceEditingElementWrapper = createElement(domRootElement.ownerDocument, 'div', {\r\n                class: 'ck-source-editing-area',\r\n                'data-value': data\r\n            }, [domSourceEditingElementTextarea]);\r\n            domSourceEditingElementTextarea.value = data;\r\n            // Setting a value to textarea moves the input cursor to the end. We want the selection at the beginning.\r\n            domSourceEditingElementTextarea.setSelectionRange(0, 0);\r\n            // Bind the textarea's value to the wrapper's `data-value` property. Each change of the textarea's value updates the\r\n            // wrapper's `data-value` property.\r\n            domSourceEditingElementTextarea.addEventListener('input', () => {\r\n                domSourceEditingElementWrapper.dataset.value = domSourceEditingElementTextarea.value;\r\n                editor.ui.update();\r\n            });\r\n            editingView.change(writer => {\r\n                const viewRoot = editingView.document.getRoot(rootName);\r\n                writer.addClass('ck-hidden', viewRoot);\r\n            });\r\n            // Register the element so it becomes available for Alt+F10 and Esc navigation.\r\n            editor.ui.setEditableElement('sourceEditing:' + rootName, domSourceEditingElementTextarea);\r\n            this._replacedRoots.set(rootName, domSourceEditingElementWrapper);\r\n            this._elementReplacer.replace(domRootElement, domSourceEditingElementWrapper);\r\n            this._dataFromRoots.set(rootName, data);\r\n        }\r\n        this._focusSourceEditing();\r\n    }\r\n    /**\r\n     * Restores all hidden editing roots and sets the source data in them.\r\n     */\r\n    _hideSourceEditing() {\r\n        const editor = this.editor;\r\n        const editingView = editor.editing.view;\r\n        this.updateEditorData();\r\n        editingView.change(writer => {\r\n            for (const [rootName] of this._replacedRoots) {\r\n                writer.removeClass('ck-hidden', editingView.document.getRoot(rootName));\r\n            }\r\n        });\r\n        this._elementReplacer.restore();\r\n        this._replacedRoots.clear();\r\n        this._dataFromRoots.clear();\r\n        editingView.focus();\r\n    }\r\n    /**\r\n     * Focuses the textarea containing document source from the first editing root.\r\n     */\r\n    _focusSourceEditing() {\r\n        const editor = this.editor;\r\n        const [domSourceEditingElementWrapper] = this._replacedRoots.values();\r\n        const textarea = domSourceEditingElementWrapper.querySelector('textarea');\r\n        // The FocusObserver was disabled by View.render() while the DOM root was getting hidden and the replacer\r\n        // revealed the textarea. So it couldn't notice that the DOM root got blurred in the process.\r\n        // Let's sync this state manually here because otherwise Renderer will attempt to render selection\r\n        // in an invisible DOM root.\r\n        editor.editing.view.document.isFocused = false;\r\n        textarea.focus();\r\n    }\r\n    /**\r\n     * Disables all commands.\r\n     */\r\n    _disableCommands() {\r\n        const editor = this.editor;\r\n        for (const command of editor.commands.commands()) {\r\n            command.forceDisabled(COMMAND_FORCE_DISABLE_ID);\r\n        }\r\n    }\r\n    /**\r\n     * Clears forced disable for all commands, that was previously set through {@link #_disableCommands}.\r\n     */\r\n    _enableCommands() {\r\n        const editor = this.editor;\r\n        for (const command of editor.commands.commands()) {\r\n            command.clearForceDisabled(COMMAND_FORCE_DISABLE_ID);\r\n        }\r\n    }\r\n    /**\r\n     * Adds or removes the `readonly` attribute from the textarea from all roots, if document source mode is active.\r\n     *\r\n     * @param isReadOnly Indicates whether all textarea elements should be read-only.\r\n     */\r\n    _handleReadOnlyMode(isReadOnly) {\r\n        if (!this.isSourceEditingMode) {\r\n            return;\r\n        }\r\n        for (const [, domSourceEditingElementWrapper] of this._replacedRoots) {\r\n            domSourceEditingElementWrapper.querySelector('textarea').readOnly = isReadOnly;\r\n        }\r\n    }\r\n    /**\r\n     * Checks, if the plugin is allowed to handle the source editing mode by itself. Currently, the source editing mode is supported only\r\n     * for the {@link module:editor-classic/classiceditor~ClassicEditor classic editor}.\r\n     */\r\n    _isAllowedToHandleSourceEditingMode() {\r\n        const editor = this.editor;\r\n        const editable = editor.ui.view.editable;\r\n        // Checks, if the editor's editable belongs to the editor's DOM tree.\r\n        return editable && !editable.hasExternalElement;\r\n    }\r\n}\r\n/**\r\n * Formats the content for a better readability.\r\n *\r\n * For a non-HTML source the unchanged input string is returned.\r\n *\r\n * @param input Input string to check.\r\n */\r\nfunction formatSource(input) {\r\n    if (!isHtml(input)) {\r\n        return input;\r\n    }\r\n    return formatHtml(input);\r\n}\r\n/**\r\n * Checks, if the document source is HTML. It is sufficient to just check the first character from the document data.\r\n *\r\n * @param input Input string to check.\r\n */\r\nfunction isHtml(input) {\r\n    return input.startsWith('<');\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"m12.5 0 5 4.5v15.003h-16V0h11zM3 1.5v3.25l-1.497 1-.003 8 1.5 1v3.254L7.685 18l-.001 1.504H17.5V8.002L16 9.428l-.004-4.22-4.222-3.692L3 1.5z\\\"/><path d=\\\"M4.06 6.64a.75.75 0 0 1 .958 1.15l-.085.07L2.29 9.75l2.646 1.89c.302.216.4.62.232.951l-.058.095a.75.75 0 0 1-.951.232l-.095-.058-3.5-2.5V9.14l3.496-2.5zm4.194 6.22a.75.75 0 0 1-.958-1.149l.085-.07 2.643-1.89-2.646-1.89a.75.75 0 0 1-.232-.952l.058-.095a.75.75 0 0 1 .95-.232l.096.058 3.5 2.5v1.22l-3.496 2.5zm7.644-.836 2.122 2.122-5.825 5.809-2.125-.005.003-2.116zm2.539-1.847 1.414 1.414a.5.5 0 0 1 0 .707l-1.06 1.06-2.122-2.12 1.061-1.061a.5.5 0 0 1 .707 0z\\\"/></svg>\";","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { ButtonView, View } from 'ckeditor5/src/ui';\r\n/**\r\n * A class representing an individual button (style) in the grid. Renders a rich preview of the style.\r\n */\r\nexport default class StyleGridButtonView extends ButtonView {\r\n    /**\r\n     * Creates an instance of the {@link module:style/ui/stylegridbuttonview~StyleGridButtonView} class.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param styleDefinition Definition of the style.\r\n     */\r\n    constructor(locale, styleDefinition) {\r\n        super(locale);\r\n        this.styleDefinition = styleDefinition;\r\n        this.previewView = this._createPreview();\r\n        this.set({\r\n            label: styleDefinition.name,\r\n            class: 'ck-style-grid__button',\r\n            withText: true\r\n        });\r\n        this.extendTemplate({\r\n            attributes: {\r\n                role: 'option'\r\n            }\r\n        });\r\n        this.children.add(this.previewView, 0);\r\n    }\r\n    /**\r\n     * Creates the view representing the preview of the style.\r\n     */\r\n    _createPreview() {\r\n        const previewView = new View(this.locale);\r\n        previewView.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-reset_all-excluded',\r\n                    'ck-style-grid__button__preview',\r\n                    'ck-content'\r\n                ],\r\n                // The preview \"AaBbCcDdEeFfGgHhIiJj\" should not be read by screen readers because it is purely presentational.\r\n                'aria-hidden': 'true'\r\n            },\r\n            children: [\r\n                this.styleDefinition.previewTemplate\r\n            ]\r\n        });\r\n        return previewView;\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./stylegrid.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/ui/stylegridview\r\n */\r\nimport { View, addKeyboardHandlingForGrid } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport StyleGridButtonView from './stylegridbuttonview';\r\nimport '../../theme/stylegrid.css';\r\n/**\r\n * A class representing a grid of styles ({@link module:style/ui/stylegridbuttonview~StyleGridButtonView buttons}).\r\n * Allows users to select a style.\r\n */\r\nexport default class StyleGridView extends View {\r\n    /**\r\n     * Creates an instance of the {@link module:style/ui/stylegridview~StyleGridView} class.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param styleDefinitions Definitions of the styles.\r\n     */\r\n    constructor(locale, styleDefinitions) {\r\n        super(locale);\r\n        this.focusTracker = new FocusTracker();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this.set('activeStyles', []);\r\n        this.set('enabledStyles', []);\r\n        this.children = this.createCollection();\r\n        this.children.delegate('execute').to(this);\r\n        for (const definition of styleDefinitions) {\r\n            const gridTileView = new StyleGridButtonView(locale, definition);\r\n            this.children.add(gridTileView);\r\n        }\r\n        this.on('change:activeStyles', () => {\r\n            for (const child of this.children) {\r\n                child.isOn = this.activeStyles.includes(child.styleDefinition.name);\r\n            }\r\n        });\r\n        this.on('change:enabledStyles', () => {\r\n            for (const child of this.children) {\r\n                child.isEnabled = this.enabledStyles.includes(child.styleDefinition.name);\r\n            }\r\n        });\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-style-grid'\r\n                ],\r\n                role: 'listbox'\r\n            },\r\n            children: this.children\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        for (const child of this.children) {\r\n            this.focusTracker.add(child.element);\r\n        }\r\n        addKeyboardHandlingForGrid({\r\n            keystrokeHandler: this.keystrokes,\r\n            focusTracker: this.focusTracker,\r\n            gridItems: this.children,\r\n            numberOfColumns: 3,\r\n            uiLanguageDirection: this.locale && this.locale.uiLanguageDirection\r\n        });\r\n        // Start listening for the keystrokes coming from the grid view.\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * Focuses the first style button in the grid.\r\n     */\r\n    focus() {\r\n        this.children.first.focus();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./stylegroup.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/ui/stylegroupview\r\n */\r\nimport { LabelView, View } from 'ckeditor5/src/ui';\r\nimport StyleGridView from './stylegridview';\r\nimport '../../theme/stylegroup.css';\r\n/**\r\n * A class representing a group of styles (e.g. \"block\" or \"inline\").\r\n *\r\n * Renders a {@link module:style/ui/stylegridview~StyleGridView style grid} and a label.\r\n */\r\nexport default class StyleGroupView extends View {\r\n    /**\r\n     * Creates an instance of the {@link module:style/ui/stylegroupview~StyleGroupView} class.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param label The localized label of the group.\r\n     * @param styleDefinitions Definitions of the styles in the group.\r\n     */\r\n    constructor(locale, label, styleDefinitions) {\r\n        super(locale);\r\n        this.labelView = new LabelView(locale);\r\n        this.labelView.text = label;\r\n        this.gridView = new StyleGridView(locale, styleDefinitions);\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-style-panel__style-group'\r\n                ],\r\n                role: 'group',\r\n                'aria-labelledby': this.labelView.id\r\n            },\r\n            children: [\r\n                this.labelView,\r\n                this.gridView\r\n            ]\r\n        });\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./stylepanel.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/ui/stylepanelview\r\n */\r\nimport { FocusCycler, View, ViewCollection } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport StyleGroupView from './stylegroupview';\r\nimport '../../theme/stylepanel.css';\r\n/**\r\n * A class representing a panel with available content styles. It renders styles in button grids, grouped\r\n * in categories.\r\n */\r\nexport default class StylePanelView extends View {\r\n    /**\r\n     * Creates an instance of the {@link module:style/ui/stylegroupview~StyleGroupView} class.\r\n     *\r\n     * @param locale The localization services instance.\r\n     * @param styleDefinitions Normalized definitions of the styles.\r\n     */\r\n    constructor(locale, styleDefinitions) {\r\n        super(locale);\r\n        const t = locale.t;\r\n        this.focusTracker = new FocusTracker();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this.children = this.createCollection();\r\n        this.blockStylesGroupView = new StyleGroupView(locale, t('Block styles'), styleDefinitions.block);\r\n        this.inlineStylesGroupView = new StyleGroupView(locale, t('Text styles'), styleDefinitions.inline);\r\n        this.set('activeStyles', []);\r\n        this.set('enabledStyles', []);\r\n        this._focusables = new ViewCollection();\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate style groups backwards using the <kbd>Shift</kbd> + <kbd>Tab</kbd> keystroke.\r\n                focusPrevious: ['shift + tab'],\r\n                // Navigate style groups forward using the <kbd>Tab</kbd> key.\r\n                focusNext: ['tab']\r\n            }\r\n        });\r\n        if (styleDefinitions.block.length) {\r\n            this.children.add(this.blockStylesGroupView);\r\n        }\r\n        if (styleDefinitions.inline.length) {\r\n            this.children.add(this.inlineStylesGroupView);\r\n        }\r\n        this.blockStylesGroupView.gridView.delegate('execute').to(this);\r\n        this.inlineStylesGroupView.gridView.delegate('execute').to(this);\r\n        this.blockStylesGroupView.gridView\r\n            .bind('activeStyles', 'enabledStyles')\r\n            .to(this, 'activeStyles', 'enabledStyles');\r\n        this.inlineStylesGroupView.gridView\r\n            .bind('activeStyles', 'enabledStyles')\r\n            .to(this, 'activeStyles', 'enabledStyles');\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-style-panel'\r\n                ]\r\n            },\r\n            children: this.children\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        // Register the views as focusable.\r\n        this._focusables.add(this.blockStylesGroupView.gridView);\r\n        this._focusables.add(this.inlineStylesGroupView.gridView);\r\n        // Register the views in the focus tracker.\r\n        this.focusTracker.add(this.blockStylesGroupView.gridView.element);\r\n        this.focusTracker.add(this.inlineStylesGroupView.gridView.element);\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * Focuses the first focusable element in the panel.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * Focuses the last focusable element in the panel.\r\n     */\r\n    focusLast() {\r\n        this._focusCycler.focusLast();\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/styleutils\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { isObject } from 'lodash-es';\r\n// These are intermediate element names that can't be rendered as style preview because they don't make sense standalone.\r\nconst NON_PREVIEWABLE_ELEMENT_NAMES = [\r\n    'caption', 'colgroup', 'dd', 'dt', 'figcaption', 'legend', 'li', 'optgroup', 'option', 'rp',\r\n    'rt', 'summary', 'tbody', 'td', 'tfoot', 'th', 'thead', 'tr'\r\n];\r\nexport default class StyleUtils extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'StyleUtils';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this.decorate('isStyleEnabledForBlock');\r\n        this.decorate('isStyleActiveForBlock');\r\n        this.decorate('getAffectedBlocks');\r\n        this.decorate('isStyleEnabledForInlineSelection');\r\n        this.decorate('isStyleActiveForInlineSelection');\r\n        this.decorate('getAffectedInlineSelectable');\r\n        this.decorate('getStylePreview');\r\n        this.decorate('configureGHSDataFilter');\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        this._htmlSupport = this.editor.plugins.get('GeneralHtmlSupport');\r\n    }\r\n    /**\r\n     * Normalizes {@link module:style/styleconfig~StyleConfig#definitions} in the configuration of the styles feature.\r\n     * The structure of normalized styles looks as follows:\r\n     *\r\n     * ```ts\r\n     * {\r\n     * \tblock: [\r\n     * \t\t<module:style/style~StyleDefinition>,\r\n     * \t\t<module:style/style~StyleDefinition>,\r\n     * \t\t...\r\n     * \t],\r\n     * \tinline: [\r\n     * \t\t<module:style/style~StyleDefinition>,\r\n     * \t\t<module:style/style~StyleDefinition>,\r\n     * \t\t...\r\n     * \t]\r\n     * }\r\n     * ```\r\n     *\r\n     * @returns An object with normalized style definitions grouped into `block` and `inline` categories (arrays).\r\n     */\r\n    normalizeConfig(dataSchema, styleDefinitions = []) {\r\n        const normalizedDefinitions = {\r\n            block: [],\r\n            inline: []\r\n        };\r\n        for (const definition of styleDefinitions) {\r\n            const modelElements = [];\r\n            const ghsAttributes = [];\r\n            for (const ghsDefinition of dataSchema.getDefinitionsForView(definition.element)) {\r\n                const appliesToBlock = 'appliesToBlock' in ghsDefinition ? ghsDefinition.appliesToBlock : false;\r\n                if (ghsDefinition.isBlock || appliesToBlock) {\r\n                    if (typeof appliesToBlock == 'string') {\r\n                        modelElements.push(appliesToBlock);\r\n                    }\r\n                    else if (ghsDefinition.isBlock) {\r\n                        const ghsBlockDefinition = ghsDefinition;\r\n                        modelElements.push(ghsDefinition.model);\r\n                        if (ghsBlockDefinition.paragraphLikeModel) {\r\n                            modelElements.push(ghsBlockDefinition.paragraphLikeModel);\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    ghsAttributes.push(ghsDefinition.model);\r\n                }\r\n            }\r\n            const previewTemplate = this.getStylePreview(definition, [\r\n                { text: 'AaBbCcDdEeFfGgHhIiJj' }\r\n            ]);\r\n            if (modelElements.length) {\r\n                normalizedDefinitions.block.push({\r\n                    ...definition,\r\n                    previewTemplate,\r\n                    modelElements,\r\n                    isBlock: true\r\n                });\r\n            }\r\n            else {\r\n                normalizedDefinitions.inline.push({\r\n                    ...definition,\r\n                    previewTemplate,\r\n                    ghsAttributes\r\n                });\r\n            }\r\n        }\r\n        return normalizedDefinitions;\r\n    }\r\n    /**\r\n     * Verifies if the given style is applicable to the provided block element.\r\n     *\r\n     * @internal\r\n     */\r\n    isStyleEnabledForBlock(definition, block) {\r\n        const model = this.editor.model;\r\n        const attributeName = this._htmlSupport.getGhsAttributeNameForElement(definition.element);\r\n        if (!model.schema.checkAttribute(block, attributeName)) {\r\n            return false;\r\n        }\r\n        return definition.modelElements.includes(block.name);\r\n    }\r\n    /**\r\n     * Returns true if the given style is applied to the specified block element.\r\n     *\r\n     * @internal\r\n     */\r\n    isStyleActiveForBlock(definition, block) {\r\n        const attributeName = this._htmlSupport.getGhsAttributeNameForElement(definition.element);\r\n        const ghsAttributeValue = block.getAttribute(attributeName);\r\n        return this.hasAllClasses(ghsAttributeValue, definition.classes);\r\n    }\r\n    /**\r\n     * Returns an array of block elements that style should be applied to.\r\n     *\r\n     * @internal\r\n     */\r\n    getAffectedBlocks(definition, block) {\r\n        if (definition.modelElements.includes(block.name)) {\r\n            return [block];\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Verifies if the given style is applicable to the provided document selection.\r\n     *\r\n     * @internal\r\n     */\r\n    isStyleEnabledForInlineSelection(definition, selection) {\r\n        const model = this.editor.model;\r\n        for (const ghsAttributeName of definition.ghsAttributes) {\r\n            if (model.schema.checkAttributeInSelection(selection, ghsAttributeName)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns true if the given style is applied to the specified document selection.\r\n     *\r\n     * @internal\r\n     */\r\n    isStyleActiveForInlineSelection(definition, selection) {\r\n        for (const ghsAttributeName of definition.ghsAttributes) {\r\n            const ghsAttributeValue = this._getValueFromFirstAllowedNode(selection, ghsAttributeName);\r\n            if (this.hasAllClasses(ghsAttributeValue, definition.classes)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns a selectable that given style should be applied to.\r\n     *\r\n     * @internal\r\n     */\r\n    getAffectedInlineSelectable(definition, selection) {\r\n        return selection;\r\n    }\r\n    /**\r\n     * Returns the `TemplateDefinition` used by styles dropdown to render style preview.\r\n     *\r\n     * @internal\r\n     */\r\n    getStylePreview(definition, children) {\r\n        const { element, classes } = definition;\r\n        return {\r\n            tag: isPreviewable(element) ? element : 'div',\r\n            attributes: {\r\n                class: classes\r\n            },\r\n            children\r\n        };\r\n    }\r\n    /**\r\n     * Verifies if all classes are present in the given GHS attribute.\r\n     *\r\n     * @internal\r\n     */\r\n    hasAllClasses(ghsAttributeValue, classes) {\r\n        return isObject(ghsAttributeValue) &&\r\n            hasClassesProperty(ghsAttributeValue) &&\r\n            classes.every(className => ghsAttributeValue.classes.includes(className));\r\n    }\r\n    /**\r\n     * This is where the styles feature configures the GHS feature. This method translates normalized\r\n     * {@link module:style/styleconfig~StyleDefinition style definitions} to\r\n     * {@link module:engine/view/matcher~MatcherPattern matcher patterns} and feeds them to the GHS\r\n     * {@link module:html-support/datafilter~DataFilter} plugin.\r\n     *\r\n     * @internal\r\n     */\r\n    configureGHSDataFilter({ block, inline }) {\r\n        const ghsDataFilter = this.editor.plugins.get('DataFilter');\r\n        ghsDataFilter.loadAllowedConfig(block.map(normalizedStyleDefinitionToMatcherPattern));\r\n        ghsDataFilter.loadAllowedConfig(inline.map(normalizedStyleDefinitionToMatcherPattern));\r\n    }\r\n    /**\r\n     * Checks the attribute value of the first node in the selection that allows the attribute.\r\n     * For the collapsed selection, returns the selection attribute.\r\n     *\r\n     * @param selection The document selection.\r\n     * @param attributeName Name of the GHS attribute.\r\n     * @returns The attribute value.\r\n     */\r\n    _getValueFromFirstAllowedNode(selection, attributeName) {\r\n        const model = this.editor.model;\r\n        const schema = model.schema;\r\n        if (selection.isCollapsed) {\r\n            return selection.getAttribute(attributeName);\r\n        }\r\n        for (const range of selection.getRanges()) {\r\n            for (const item of range.getItems()) {\r\n                if (schema.checkAttribute(item, attributeName)) {\r\n                    return item.getAttribute(attributeName);\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * Checks if given object has `classes` property which is an array.\r\n *\r\n * @param obj Object to check.\r\n */\r\nfunction hasClassesProperty(obj) {\r\n    return Boolean(obj.classes) && Array.isArray(obj.classes);\r\n}\r\n/**\r\n * Decides whether an element should be created in the preview or a substitute `<div>` should\r\n * be used instead. This avoids previewing a standalone `<td>`, `<li>`, etc. without a parent.\r\n *\r\n * @param elementName Name of the element\r\n * @returns Boolean indicating whether the element can be rendered.\r\n */\r\nfunction isPreviewable(elementName) {\r\n    return !NON_PREVIEWABLE_ELEMENT_NAMES.includes(elementName);\r\n}\r\n/**\r\n * Translates a normalized style definition to a view matcher pattern.\r\n */\r\nfunction normalizedStyleDefinitionToMatcherPattern({ element, classes }) {\r\n    return {\r\n        name: element,\r\n        classes\r\n    };\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./style.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/styleui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { createDropdown } from 'ckeditor5/src/ui';\r\nimport StylePanelView from './ui/stylepanelview';\r\nimport StyleUtils from './styleutils';\r\nimport '../theme/style.css';\r\n/**\r\n * The UI plugin of the style feature .\r\n *\r\n * It registers the `'style'` UI dropdown in the editor's {@link module:ui/componentfactory~ComponentFactory component factory}\r\n * that displays a grid of styles and allows changing styles of the content.\r\n */\r\nexport default class StyleUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'StyleUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [StyleUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const dataSchema = editor.plugins.get('DataSchema');\r\n        const styleUtils = editor.plugins.get('StyleUtils');\r\n        const styleDefinitions = editor.config.get('style.definitions');\r\n        const normalizedStyleDefinitions = styleUtils.normalizeConfig(dataSchema, styleDefinitions);\r\n        // Add the dropdown to the component factory.\r\n        editor.ui.componentFactory.add('style', locale => {\r\n            const t = locale.t;\r\n            const dropdown = createDropdown(locale);\r\n            const styleCommand = editor.commands.get('style');\r\n            dropdown.once('change:isOpen', () => {\r\n                const panelView = new StylePanelView(locale, normalizedStyleDefinitions);\r\n                // Put the styles panel is the dropdown.\r\n                dropdown.panelView.children.add(panelView);\r\n                // Close the dropdown when a style is selected in the styles panel.\r\n                panelView.delegate('execute').to(dropdown);\r\n                // Bind the state of the styles panel to the command.\r\n                panelView.bind('activeStyles').to(styleCommand, 'value');\r\n                panelView.bind('enabledStyles').to(styleCommand, 'enabledStyles');\r\n            });\r\n            // The entire dropdown will be disabled together with the command (e.g. when the editor goes read-only).\r\n            dropdown.bind('isEnabled').to(styleCommand);\r\n            // This dropdown has no icon. It displays text label depending on the selection.\r\n            dropdown.buttonView.withText = true;\r\n            // The label of the dropdown is dynamic and depends on how many styles are active at a time.\r\n            dropdown.buttonView.bind('label').to(styleCommand, 'value', value => {\r\n                if (value.length > 1) {\r\n                    return t('Multiple styles');\r\n                }\r\n                else if (value.length === 1) {\r\n                    return value[0];\r\n                }\r\n                else {\r\n                    return t('Styles');\r\n                }\r\n            });\r\n            // The dropdown has a static CSS class for easy customization. There's another CSS class\r\n            // that gets displayed when multiple styles are active at a time allowing visual customization of\r\n            // the label.\r\n            dropdown.bind('class').to(styleCommand, 'value', value => {\r\n                const classes = [\r\n                    'ck-style-dropdown'\r\n                ];\r\n                if (value.length > 1) {\r\n                    classes.push('ck-style-dropdown_multiple-active');\r\n                }\r\n                return classes.join(' ');\r\n            });\r\n            // Execute the command when a style is selected in the styles panel.\r\n            // Also focus the editable after executing the command.\r\n            // It overrides a default behaviour where the focus is moved to the dropdown button (#12125).\r\n            dropdown.on('execute', evt => {\r\n                editor.execute('style', { styleName: evt.source.styleDefinition.name });\r\n                editor.editing.view.focus();\r\n            });\r\n            return dropdown;\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { logWarning, first } from 'ckeditor5/src/utils';\r\nimport StyleUtils from './styleutils';\r\n/**\r\n * Style command.\r\n *\r\n * Applies and removes styles from selection and elements.\r\n */\r\nexport default class StyleCommand extends Command {\r\n    /**\r\n     * Creates an instance of the command.\r\n     *\r\n     * @param editor Editor on which this command will be used.\r\n     * @param styleDefinitions Normalized definitions of the styles.\r\n     */\r\n    constructor(editor, styleDefinitions) {\r\n        super(editor);\r\n        this.set('value', []);\r\n        this.set('enabledStyles', []);\r\n        this._styleDefinitions = styleDefinitions;\r\n        this._styleUtils = this.editor.plugins.get(StyleUtils);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const value = new Set();\r\n        const enabledStyles = new Set();\r\n        // Inline styles.\r\n        for (const definition of this._styleDefinitions.inline) {\r\n            // Check if this inline style is enabled.\r\n            if (this._styleUtils.isStyleEnabledForInlineSelection(definition, selection)) {\r\n                enabledStyles.add(definition.name);\r\n            }\r\n            // Check if this inline style is active.\r\n            if (this._styleUtils.isStyleActiveForInlineSelection(definition, selection)) {\r\n                value.add(definition.name);\r\n            }\r\n        }\r\n        // Block styles.\r\n        const firstBlock = first(selection.getSelectedBlocks()) || selection.getFirstPosition().parent;\r\n        if (firstBlock) {\r\n            const ancestorBlocks = firstBlock.getAncestors({ includeSelf: true, parentFirst: true });\r\n            for (const block of ancestorBlocks) {\r\n                if (block.is('rootElement')) {\r\n                    break;\r\n                }\r\n                for (const definition of this._styleDefinitions.block) {\r\n                    // Check if this block style is enabled.\r\n                    if (!this._styleUtils.isStyleEnabledForBlock(definition, block)) {\r\n                        continue;\r\n                    }\r\n                    enabledStyles.add(definition.name);\r\n                    // Check if this block style is active.\r\n                    if (this._styleUtils.isStyleActiveForBlock(definition, block)) {\r\n                        value.add(definition.name);\r\n                    }\r\n                }\r\n                // E.g. reached a model table when the selection is in a cell. The command should not modify\r\n                // ancestors of a table.\r\n                if (model.schema.isObject(block)) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        this.enabledStyles = Array.from(enabledStyles).sort();\r\n        this.isEnabled = this.enabledStyles.length > 0;\r\n        this.value = this.isEnabled ? Array.from(value).sort() : [];\r\n    }\r\n    /**\r\n     * Executes the command &mdash; applies the style classes to the selection or removes it from the selection.\r\n     *\r\n     * If the command value already contains the requested style, it will remove the style classes. Otherwise, it will set it.\r\n     *\r\n     * The execution result differs, depending on the {@link module:engine/model/document~Document#selection} and the\r\n     * style type (inline or block):\r\n     *\r\n     * * When applying inline styles:\r\n     *   * If the selection is on a range, the command applies the style classes to all nodes in that range.\r\n     *   * If the selection is collapsed in a non-empty node, the command applies the style classes to the\r\n     * {@link module:engine/model/document~Document#selection}.\r\n     *\r\n     * * When applying block styles:\r\n     *   * If the selection is on a range, the command applies the style classes to the nearest block parent element.\r\n     *\r\n     * @fires execute\r\n     * @param options Command options.\r\n     * @param options.styleName Style name matching the one defined in the\r\n     * {@link module:style/styleconfig~StyleConfig#definitions configuration}.\r\n     * @param options.forceValue Whether the command should add given style (`true`) or remove it (`false`) from the selection.\r\n     * If not set (default), the command will toggle the style basing on the first selected node. Note, that this will not force\r\n     * setting a style on an element that cannot receive given style.\r\n     */\r\n    execute({ styleName, forceValue }) {\r\n        if (!this.enabledStyles.includes(styleName)) {\r\n            /**\r\n             * Style command can be executed only with a correct style name.\r\n             *\r\n             * This warning may be caused by:\r\n             *\r\n             * * passing a name that is not specified in the {@link module:style/styleconfig~StyleConfig#definitions configuration}\r\n             * (e.g. a CSS class name),\r\n             * * when trying to apply a style that is not allowed on a given element.\r\n             *\r\n             * @error style-command-executed-with-incorrect-style-name\r\n             */\r\n            logWarning('style-command-executed-with-incorrect-style-name');\r\n            return;\r\n        }\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const htmlSupport = this.editor.plugins.get('GeneralHtmlSupport');\r\n        const allDefinitions = [\r\n            ...this._styleDefinitions.inline,\r\n            ...this._styleDefinitions.block\r\n        ];\r\n        const activeDefinitions = allDefinitions.filter(({ name }) => this.value.includes(name));\r\n        const definition = allDefinitions.find(({ name }) => name == styleName);\r\n        const shouldAddStyle = forceValue === undefined ? !this.value.includes(definition.name) : forceValue;\r\n        model.change(() => {\r\n            let selectables;\r\n            if (isBlockStyleDefinition(definition)) {\r\n                selectables = this._findAffectedBlocks(getBlocksFromSelection(selection), definition);\r\n            }\r\n            else {\r\n                selectables = [this._styleUtils.getAffectedInlineSelectable(definition, selection)];\r\n            }\r\n            for (const selectable of selectables) {\r\n                if (shouldAddStyle) {\r\n                    htmlSupport.addModelHtmlClass(definition.element, definition.classes, selectable);\r\n                }\r\n                else {\r\n                    htmlSupport.removeModelHtmlClass(definition.element, getDefinitionExclusiveClasses(activeDefinitions, definition), selectable);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns a set of elements that should be affected by the block-style change.\r\n     */\r\n    _findAffectedBlocks(selectedBlocks, definition) {\r\n        const blocks = new Set();\r\n        for (const selectedBlock of selectedBlocks) {\r\n            const ancestorBlocks = selectedBlock.getAncestors({ includeSelf: true, parentFirst: true });\r\n            for (const block of ancestorBlocks) {\r\n                if (block.is('rootElement')) {\r\n                    break;\r\n                }\r\n                const affectedBlocks = this._styleUtils.getAffectedBlocks(definition, block);\r\n                if (affectedBlocks) {\r\n                    for (const affectedBlock of affectedBlocks) {\r\n                        blocks.add(affectedBlock);\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return blocks;\r\n    }\r\n}\r\n/**\r\n * Returns classes that are defined only in the supplied definition and not in any other active definition. It's used\r\n * to ensure that classes used by other definitions are preserved when a style is removed. See #11748.\r\n *\r\n * @param activeDefinitions All currently active definitions affecting selected element(s).\r\n * @param definition Definition whose classes will be compared with all other active definition classes.\r\n * @returns Array of classes exclusive to the supplied definition.\r\n */\r\nfunction getDefinitionExclusiveClasses(activeDefinitions, definition) {\r\n    return activeDefinitions.reduce((classes, currentDefinition) => {\r\n        if (currentDefinition.name === definition.name) {\r\n            return classes;\r\n        }\r\n        return classes.filter(className => !currentDefinition.classes.includes(className));\r\n    }, definition.classes);\r\n}\r\n/**\r\n * Checks if provided style definition is of type block.\r\n */\r\nfunction isBlockStyleDefinition(definition) {\r\n    return 'isBlock' in definition;\r\n}\r\n/**\r\n * Gets block elements from selection. If there are none, returns first selected element.\r\n * @param selection Current document's selection.\r\n * @returns Selected blocks if there are any, first selected element otherwise.\r\n */\r\nfunction getBlocksFromSelection(selection) {\r\n    const blocks = Array.from(selection.getSelectedBlocks());\r\n    if (blocks.length) {\r\n        return blocks;\r\n    }\r\n    return [selection.getFirstPosition().parent];\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/integrations/documentlist\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport StyleUtils from '../styleutils';\r\nexport default class DocumentListStyleSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'DocumentListStyleSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [StyleUtils, 'GeneralHtmlSupport'];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        if (!editor.plugins.has('DocumentListEditing')) {\r\n            return;\r\n        }\r\n        this._styleUtils = editor.plugins.get(StyleUtils);\r\n        this._documentListUtils = this.editor.plugins.get('DocumentListUtils');\r\n        this._htmlSupport = this.editor.plugins.get('GeneralHtmlSupport');\r\n        this.listenTo(this._styleUtils, 'isStyleEnabledForBlock', (evt, [definition, block]) => {\r\n            if (this._isStyleEnabledForBlock(definition, block)) {\r\n                evt.return = true;\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        this.listenTo(this._styleUtils, 'isStyleActiveForBlock', (evt, [definition, block]) => {\r\n            if (this._isStyleActiveForBlock(definition, block)) {\r\n                evt.return = true;\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        this.listenTo(this._styleUtils, 'getAffectedBlocks', (evt, [definition, block]) => {\r\n            const blocks = this._getAffectedBlocks(definition, block);\r\n            if (blocks) {\r\n                evt.return = blocks;\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        this.listenTo(this._styleUtils, 'getStylePreview', (evt, [definition, children]) => {\r\n            const templateDefinition = this._getStylePreview(definition, children);\r\n            if (templateDefinition) {\r\n                evt.return = templateDefinition;\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n    }\r\n    /**\r\n     * Verifies if the given style is applicable to the provided block element.\r\n     */\r\n    _isStyleEnabledForBlock(definition, block) {\r\n        const model = this.editor.model;\r\n        if (!['ol', 'ul', 'li'].includes(definition.element)) {\r\n            return false;\r\n        }\r\n        if (!this._documentListUtils.isListItemBlock(block)) {\r\n            return false;\r\n        }\r\n        const attributeName = this._htmlSupport.getGhsAttributeNameForElement(definition.element);\r\n        if (definition.element == 'ol' || definition.element == 'ul') {\r\n            if (!model.schema.checkAttribute(block, attributeName)) {\r\n                return false;\r\n            }\r\n            const viewElementName = block.getAttribute('listType') == 'numbered' ? 'ol' : 'ul';\r\n            return definition.element == viewElementName;\r\n        }\r\n        else {\r\n            return model.schema.checkAttribute(block, attributeName);\r\n        }\r\n    }\r\n    /**\r\n     * Returns true if the given style is applied to the specified block element.\r\n     */\r\n    _isStyleActiveForBlock(definition, block) {\r\n        const attributeName = this._htmlSupport.getGhsAttributeNameForElement(definition.element);\r\n        const ghsAttributeValue = block.getAttribute(attributeName);\r\n        return this._styleUtils.hasAllClasses(ghsAttributeValue, definition.classes);\r\n    }\r\n    /**\r\n     * Returns an array of block elements that style should be applied to.\r\n     */\r\n    _getAffectedBlocks(definition, block) {\r\n        if (!this._isStyleEnabledForBlock(definition, block)) {\r\n            return null;\r\n        }\r\n        if (definition.element == 'li') {\r\n            return this._documentListUtils.expandListBlocksToCompleteItems(block, { withNested: false });\r\n        }\r\n        else {\r\n            return this._documentListUtils.expandListBlocksToCompleteList(block);\r\n        }\r\n    }\r\n    /**\r\n     * Returns a view template definition for the style preview.\r\n     */\r\n    _getStylePreview(definition, children) {\r\n        const { element, classes } = definition;\r\n        if (element == 'ol' || element == 'ul') {\r\n            return {\r\n                tag: element,\r\n                attributes: {\r\n                    class: classes\r\n                },\r\n                children: [\r\n                    {\r\n                        tag: 'li',\r\n                        children\r\n                    }\r\n                ]\r\n            };\r\n        }\r\n        else if (element == 'li') {\r\n            return {\r\n                tag: 'ol',\r\n                children: [\r\n                    {\r\n                        tag: element,\r\n                        attributes: {\r\n                            class: classes\r\n                        },\r\n                        children\r\n                    }\r\n                ]\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/integrations/table\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport StyleUtils from '../styleutils';\r\nexport default class TableStyleSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableStyleSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [StyleUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        if (!editor.plugins.has('TableEditing')) {\r\n            return;\r\n        }\r\n        this._styleUtils = editor.plugins.get(StyleUtils);\r\n        this._tableUtils = this.editor.plugins.get('TableUtils');\r\n        this.listenTo(this._styleUtils, 'isStyleEnabledForBlock', (evt, [definition, block]) => {\r\n            if (this._isApplicable(definition, block)) {\r\n                evt.return = this._isStyleEnabledForBlock(definition, block);\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        this.listenTo(this._styleUtils, 'getAffectedBlocks', (evt, [definition, block]) => {\r\n            if (this._isApplicable(definition, block)) {\r\n                evt.return = this._getAffectedBlocks(definition, block);\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        this.listenTo(this._styleUtils, 'configureGHSDataFilter', (evt, [{ block }]) => {\r\n            const ghsDataFilter = this.editor.plugins.get('DataFilter');\r\n            ghsDataFilter.loadAllowedConfig(block\r\n                .filter(definition => definition.element == 'figcaption')\r\n                .map(definition => ({ name: 'caption', classes: definition.classes })));\r\n        });\r\n    }\r\n    /**\r\n     * Checks if this plugin's custom logic should be applied for defintion-block pair.\r\n     *\r\n     * @param definition Style definition that is being considered.\r\n     * @param block Block element to check if should be styled.\r\n     * @returns True if the defintion-block pair meet the plugin criteria, false otherwise.\r\n     */\r\n    _isApplicable(definition, block) {\r\n        if (['td', 'th'].includes(definition.element)) {\r\n            return block.name == 'tableCell';\r\n        }\r\n        if (['thead', 'tbody'].includes(definition.element)) {\r\n            return block.name == 'table';\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Checks if the style definition should be applied to selected block.\r\n     *\r\n     * @param definition Style definition that is being considered.\r\n     * @param block Block element to check if should be styled.\r\n     * @returns True if the block should be style with the style description, false otherwise.\r\n     */\r\n    _isStyleEnabledForBlock(definition, block) {\r\n        if (['td', 'th'].includes(definition.element)) {\r\n            const location = this._tableUtils.getCellLocation(block);\r\n            const tableRow = block.parent;\r\n            const table = tableRow.parent;\r\n            const headingRows = table.getAttribute('headingRows') || 0;\r\n            const headingColumns = table.getAttribute('headingColumns') || 0;\r\n            const isHeadingCell = location.row < headingRows || location.column < headingColumns;\r\n            if (definition.element == 'th') {\r\n                return isHeadingCell;\r\n            }\r\n            else {\r\n                return !isHeadingCell;\r\n            }\r\n        }\r\n        if (['thead', 'tbody'].includes(definition.element)) {\r\n            const headingRows = block.getAttribute('headingRows') || 0;\r\n            if (definition.element == 'thead') {\r\n                return headingRows > 0;\r\n            }\r\n            else {\r\n                return headingRows < this._tableUtils.getRows(block);\r\n            }\r\n        }\r\n        /* istanbul ignore next -- @preserve */\r\n        return false;\r\n    }\r\n    /**\r\n     * Gets all blocks that the style should be applied to.\r\n     *\r\n     * @param definition Style definition that is being considered.\r\n     * @param block A block element from selection.\r\n     * @returns An array with the block that was passed as an argument if meets the criteria, null otherwise.\r\n     */\r\n    _getAffectedBlocks(definition, block) {\r\n        if (!this._isStyleEnabledForBlock(definition, block)) {\r\n            return null;\r\n        }\r\n        return [block];\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/integrations/link\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { findAttributeRange, findAttributeRangeBound } from 'ckeditor5/src/typing';\r\nimport StyleUtils from '../styleutils';\r\nexport default class LinkStyleSupport extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'LinkStyleSupport';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [StyleUtils, 'GeneralHtmlSupport'];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        if (!editor.plugins.has('LinkEditing')) {\r\n            return;\r\n        }\r\n        this._styleUtils = editor.plugins.get(StyleUtils);\r\n        this._htmlSupport = this.editor.plugins.get('GeneralHtmlSupport');\r\n        this.listenTo(this._styleUtils, 'isStyleEnabledForInlineSelection', (evt, [definition, selection]) => {\r\n            if (definition.element == 'a') {\r\n                evt.return = this._isStyleEnabled(definition, selection);\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        this.listenTo(this._styleUtils, 'isStyleActiveForInlineSelection', (evt, [definition, selection]) => {\r\n            if (definition.element == 'a') {\r\n                evt.return = this._isStyleActive(definition, selection);\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n        this.listenTo(this._styleUtils, 'getAffectedInlineSelectable', (evt, [definition, selection]) => {\r\n            if (definition.element != 'a') {\r\n                return;\r\n            }\r\n            const selectable = this._getAffectedSelectable(definition, selection);\r\n            if (selectable) {\r\n                evt.return = selectable;\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n    }\r\n    /**\r\n     * Verifies if the given style is applicable to the provided document selection.\r\n     */\r\n    _isStyleEnabled(definition, selection) {\r\n        const model = this.editor.model;\r\n        // Handle collapsed selection.\r\n        if (selection.isCollapsed) {\r\n            return selection.hasAttribute('linkHref');\r\n        }\r\n        // Non-collapsed selection.\r\n        for (const range of selection.getRanges()) {\r\n            for (const item of range.getItems()) {\r\n                if ((item.is('$textProxy') || model.schema.isInline(item)) && item.hasAttribute('linkHref')) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns true if the given style is applied to the specified document selection.\r\n     */\r\n    _isStyleActive(definition, selection) {\r\n        const model = this.editor.model;\r\n        const attributeName = this._htmlSupport.getGhsAttributeNameForElement(definition.element);\r\n        // Handle collapsed selection.\r\n        if (selection.isCollapsed) {\r\n            if (selection.hasAttribute('linkHref')) {\r\n                const ghsAttributeValue = selection.getAttribute(attributeName);\r\n                if (this._styleUtils.hasAllClasses(ghsAttributeValue, definition.classes)) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        // Non-collapsed selection.\r\n        for (const range of selection.getRanges()) {\r\n            for (const item of range.getItems()) {\r\n                if ((item.is('$textProxy') || model.schema.isInline(item)) && item.hasAttribute('linkHref')) {\r\n                    const ghsAttributeValue = item.getAttribute(attributeName);\r\n                    return this._styleUtils.hasAllClasses(ghsAttributeValue, definition.classes);\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns a selectable that given style should be applied to.\r\n     */\r\n    _getAffectedSelectable(definition, selection) {\r\n        const model = this.editor.model;\r\n        // Handle collapsed selection.\r\n        if (selection.isCollapsed) {\r\n            const linkHref = selection.getAttribute('linkHref');\r\n            return findAttributeRange(selection.getFirstPosition(), 'linkHref', linkHref, model);\r\n        }\r\n        // Non-collapsed selection.\r\n        const ranges = [];\r\n        for (const range of selection.getRanges()) {\r\n            // First expand range to include the whole link.\r\n            const expandedRange = model.createRange(expandAttributePosition(range.start, 'linkHref', true, model), expandAttributePosition(range.end, 'linkHref', false, model));\r\n            // Pick only ranges on links.\r\n            for (const item of expandedRange.getItems()) {\r\n                if ((item.is('$textProxy') || model.schema.isInline(item)) && item.hasAttribute('linkHref')) {\r\n                    ranges.push(this.editor.model.createRangeOn(item));\r\n                }\r\n            }\r\n        }\r\n        // Make sure that we have a continuous range on a link\r\n        // (not split between text nodes with mixed attributes like bold etc.)\r\n        return normalizeRanges(ranges);\r\n    }\r\n}\r\n/**\r\n * Walks forward or backward (depends on the `lookBack` flag), node by node, as long as they have the same attribute value\r\n * and returns a position just before or after (depends on the `lookBack` flag) the last matched node.\r\n */\r\nfunction expandAttributePosition(position, attributeName, lookBack, model) {\r\n    const referenceNode = position.textNode || (lookBack ? position.nodeAfter : position.nodeBefore);\r\n    if (!referenceNode || !referenceNode.hasAttribute(attributeName)) {\r\n        return position;\r\n    }\r\n    const attributeValue = referenceNode.getAttribute(attributeName);\r\n    return findAttributeRangeBound(position, attributeName, attributeValue, lookBack, model);\r\n}\r\n/**\r\n * Normalizes list of ranges by joining intersecting or \"touching\" ranges.\r\n *\r\n * Note: It assumes that ranges are sorted.\r\n */\r\nfunction normalizeRanges(ranges) {\r\n    for (let i = 1; i < ranges.length; i++) {\r\n        const joinedRange = ranges[i - 1].getJoined(ranges[i]);\r\n        if (joinedRange) {\r\n            // Replace the ranges on the list with the new joined range.\r\n            ranges.splice(--i, 2, joinedRange);\r\n        }\r\n    }\r\n    return ranges;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/styleediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport StyleCommand from './stylecommand';\r\nimport StyleUtils from './styleutils';\r\nimport DocumentListStyleSupport from './integrations/documentlist';\r\nimport TableStyleSupport from './integrations/table';\r\nimport LinkStyleSupport from './integrations/link';\r\n/**\r\n * The style engine feature.\r\n *\r\n * It configures the {@glink features/html/general-html-support General HTML Support feature} based on\r\n * {@link module:style/styleconfig~StyleConfig#definitions configured style definitions} and introduces the\r\n * {@link module:style/stylecommand~StyleCommand style command} that applies styles to the content of the document.\r\n */\r\nexport default class StyleEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'StyleEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return ['GeneralHtmlSupport', StyleUtils, DocumentListStyleSupport, TableStyleSupport, LinkStyleSupport];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const dataSchema = editor.plugins.get('DataSchema');\r\n        const styleUtils = editor.plugins.get('StyleUtils');\r\n        const styleDefinitions = editor.config.get('style.definitions');\r\n        const normalizedStyleDefinitions = styleUtils.normalizeConfig(dataSchema, styleDefinitions);\r\n        editor.commands.add('style', new StyleCommand(editor, normalizedStyleDefinitions));\r\n        styleUtils.configureGHSDataFilter(normalizedStyleDefinitions);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module style/style\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport StyleUI from './styleui';\r\nimport StyleEditing from './styleediting';\r\n/**\r\n * The style plugin.\r\n *\r\n * This is a \"glue\" plugin that loads the {@link module:style/styleediting~StyleEditing style editing feature}\r\n * and {@link module:style/styleui~StyleUI style UI feature}.\r\n */\r\nexport default class Style extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Style';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [StyleEditing, StyleUI];\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { downcastAttributeToStyle, upcastStyleToAttribute } from './../converters/tableproperties';\r\n/**\r\n * A common method to update the numeric value. If a value is the default one, it will be unset.\r\n *\r\n * @param key An attribute key.\r\n * @param value The new attribute value.\r\n * @param item A model item on which the attribute will be set.\r\n * @param defaultValue The default attribute value. If a value is lower or equal, it will be unset.\r\n */\r\nexport function updateNumericAttribute(key, value, item, writer, defaultValue = 1) {\r\n    if (value !== undefined && value !== null && defaultValue !== undefined && defaultValue !== null && value > defaultValue) {\r\n        writer.setAttribute(key, value, item);\r\n    }\r\n    else {\r\n        writer.removeAttribute(key, item);\r\n    }\r\n}\r\n/**\r\n * A common method to create an empty table cell. It creates a proper model structure as a table cell must have at least one block inside.\r\n *\r\n * @param writer The model writer.\r\n * @param insertPosition The position at which the table cell should be inserted.\r\n * @param attributes The element attributes.\r\n * @returns Created table cell.\r\n */\r\nexport function createEmptyTableCell(writer, insertPosition, attributes = {}) {\r\n    const tableCell = writer.createElement('tableCell', attributes);\r\n    writer.insertElement('paragraph', tableCell);\r\n    writer.insert(tableCell, insertPosition);\r\n    return tableCell;\r\n}\r\n/**\r\n * Checks if a table cell belongs to the heading column section.\r\n */\r\nexport function isHeadingColumnCell(tableUtils, tableCell) {\r\n    const table = tableCell.parent.parent;\r\n    const headingColumns = parseInt(table.getAttribute('headingColumns') || '0');\r\n    const { column } = tableUtils.getCellLocation(tableCell);\r\n    return !!headingColumns && column < headingColumns;\r\n}\r\n/**\r\n * Enables conversion for an attribute for simple view-model mappings.\r\n *\r\n * @param options.defaultValue The default value for the specified `modelAttribute`.\r\n */\r\nexport function enableProperty(schema, conversion, options) {\r\n    const { modelAttribute } = options;\r\n    schema.extend('tableCell', {\r\n        allowAttributes: [modelAttribute]\r\n    });\r\n    upcastStyleToAttribute(conversion, { viewElement: /^(td|th)$/, ...options });\r\n    downcastAttributeToStyle(conversion, { modelElement: 'tableCell', ...options });\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { createEmptyTableCell } from '../utils/common';\r\nimport { first } from 'ckeditor5/src/utils';\r\n/**\r\n * Returns a function that converts the table view representation:\r\n *\r\n * ```xml\r\n * <figure class=\"table\"><table>...</table></figure>\r\n * ```\r\n *\r\n * to the model representation:\r\n *\r\n * ```xml\r\n * <table></table>\r\n * ```\r\n */\r\nexport function upcastTableFigure() {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:figure', (evt, data, conversionApi) => {\r\n            // Do not convert if this is not a \"table figure\".\r\n            if (!conversionApi.consumable.test(data.viewItem, { name: true, classes: 'table' })) {\r\n                return;\r\n            }\r\n            // Find a table element inside the figure element.\r\n            const viewTable = getViewTableFromFigure(data.viewItem);\r\n            // Do not convert if table element is absent or was already converted.\r\n            if (!viewTable || !conversionApi.consumable.test(viewTable, { name: true })) {\r\n                return;\r\n            }\r\n            // Consume the figure to prevent other converters from processing it again.\r\n            conversionApi.consumable.consume(data.viewItem, { name: true, classes: 'table' });\r\n            // Convert view table to model table.\r\n            const conversionResult = conversionApi.convertItem(viewTable, data.modelCursor);\r\n            // Get table element from conversion result.\r\n            const modelTable = first(conversionResult.modelRange.getItems());\r\n            // When table wasn't successfully converted then finish conversion.\r\n            if (!modelTable) {\r\n                // Revert consumed figure so other features can convert it.\r\n                conversionApi.consumable.revert(data.viewItem, { name: true, classes: 'table' });\r\n                return;\r\n            }\r\n            conversionApi.convertChildren(data.viewItem, conversionApi.writer.createPositionAt(modelTable, 'end'));\r\n            conversionApi.updateConversionResult(modelTable, data);\r\n        });\r\n    };\r\n}\r\n/**\r\n * View table element to model table element conversion helper.\r\n *\r\n * This conversion helper converts the table element as well as table rows.\r\n *\r\n * @returns Conversion helper.\r\n */\r\nexport default function upcastTable() {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:table', (evt, data, conversionApi) => {\r\n            const viewTable = data.viewItem;\r\n            // When element was already consumed then skip it.\r\n            if (!conversionApi.consumable.test(viewTable, { name: true })) {\r\n                return;\r\n            }\r\n            const { rows, headingRows, headingColumns } = scanTable(viewTable);\r\n            // Only set attributes if values is greater then 0.\r\n            const attributes = {};\r\n            if (headingColumns) {\r\n                attributes.headingColumns = headingColumns;\r\n            }\r\n            if (headingRows) {\r\n                attributes.headingRows = headingRows;\r\n            }\r\n            const table = conversionApi.writer.createElement('table', attributes);\r\n            if (!conversionApi.safeInsert(table, data.modelCursor)) {\r\n                return;\r\n            }\r\n            conversionApi.consumable.consume(viewTable, { name: true });\r\n            // Upcast table rows in proper order (heading rows first).\r\n            rows.forEach(row => conversionApi.convertItem(row, conversionApi.writer.createPositionAt(table, 'end')));\r\n            // Convert everything else.\r\n            conversionApi.convertChildren(viewTable, conversionApi.writer.createPositionAt(table, 'end'));\r\n            // Create one row and one table cell for empty table.\r\n            if (table.isEmpty) {\r\n                const row = conversionApi.writer.createElement('tableRow');\r\n                conversionApi.writer.insert(row, conversionApi.writer.createPositionAt(table, 'end'));\r\n                createEmptyTableCell(conversionApi.writer, conversionApi.writer.createPositionAt(row, 'end'));\r\n            }\r\n            conversionApi.updateConversionResult(table, data);\r\n        });\r\n    };\r\n}\r\n/**\r\n * A conversion helper that skips empty <tr> elements from upcasting at the beginning of the table.\r\n *\r\n * An empty row is considered a table model error but when handling clipboard data there could be rows that contain only row-spanned cells\r\n * and empty TR-s are used to maintain the table structure (also {@link module:table/tablewalker~TableWalker} assumes that there are only\r\n * rows that have related `tableRow` elements).\r\n *\r\n * *Note:* Only the first empty rows are removed because they have no meaning and it solves the issue\r\n * of an improper table with all empty rows.\r\n *\r\n * @returns Conversion helper.\r\n */\r\nexport function skipEmptyTableRow() {\r\n    return (dispatcher) => {\r\n        dispatcher.on('element:tr', (evt, data) => {\r\n            if (data.viewItem.isEmpty && data.modelCursor.index == 0) {\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'high' });\r\n    };\r\n}\r\n/**\r\n * A converter that ensures an empty paragraph is inserted in a table cell if no other content was converted.\r\n *\r\n * @returns Conversion helper.\r\n */\r\nexport function ensureParagraphInTableCell(elementName) {\r\n    return (dispatcher) => {\r\n        dispatcher.on(`element:${elementName}`, (evt, data, { writer }) => {\r\n            // The default converter will create a model range on converted table cell.\r\n            if (!data.modelRange) {\r\n                return;\r\n            }\r\n            const tableCell = data.modelRange.start.nodeAfter;\r\n            const modelCursor = writer.createPositionAt(tableCell, 0);\r\n            // Ensure a paragraph in the model for empty table cells for converted table cells.\r\n            if (data.viewItem.isEmpty) {\r\n                writer.insertElement('paragraph', modelCursor);\r\n                return;\r\n            }\r\n            const childNodes = Array.from(tableCell.getChildren());\r\n            // In case there are only markers inside the table cell then move them to the paragraph.\r\n            if (childNodes.every(node => node.is('element', '$marker'))) {\r\n                const paragraph = writer.createElement('paragraph');\r\n                writer.insert(paragraph, writer.createPositionAt(tableCell, 0));\r\n                for (const node of childNodes) {\r\n                    writer.move(writer.createRangeOn(node), writer.createPositionAt(paragraph, 'end'));\r\n                }\r\n            }\r\n        }, { priority: 'low' });\r\n    };\r\n}\r\n/**\r\n * Get view `<table>` element from the view widget (`<figure>`).\r\n */\r\nfunction getViewTableFromFigure(figureView) {\r\n    for (const figureChild of figureView.getChildren()) {\r\n        if (figureChild.is('element', 'table')) {\r\n            return figureChild;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Scans table rows and extracts required metadata from the table:\r\n *\r\n * headingRows    - The number of rows that go as table headers.\r\n * headingColumns - The maximum number of row headings.\r\n * rows           - Sorted `<tr>` elements as they should go into the model - ie. if `<thead>` is inserted after `<tbody>` in the view.\r\n */\r\nfunction scanTable(viewTable) {\r\n    let headingRows = 0;\r\n    let headingColumns = undefined;\r\n    // The `<tbody>` and `<thead>` sections in the DOM do not have to be in order `<thead>` -> `<tbody>` and there might be more than one\r\n    // of them.\r\n    // As the model does not have these sections, rows from different sections must be sorted.\r\n    // For example, below is a valid HTML table:\r\n    //\r\n    // <table>\r\n    //   <tbody><tr><td>2</td></tr></tbody>\r\n    //   <thead><tr><td>1</td></tr></thead>\r\n    //   <tbody><tr><td>3</td></tr></tbody>\r\n    // </table>\r\n    //\r\n    // But browsers will render rows in order as: 1 as the heading and 2 and 3 as the body.\r\n    const headRows = [];\r\n    const bodyRows = [];\r\n    // Currently the editor does not support more then one <thead> section.\r\n    // Only the first <thead> from the view will be used as a heading row and the others will be converted to body rows.\r\n    let firstTheadElement;\r\n    for (const tableChild of Array.from(viewTable.getChildren())) {\r\n        // Only `<thead>`, `<tbody>` & `<tfoot>` from allowed table children can have `<tr>`s.\r\n        // The else is for future purposes (mainly `<caption>`).\r\n        if (tableChild.name !== 'tbody' && tableChild.name !== 'thead' && tableChild.name !== 'tfoot') {\r\n            continue;\r\n        }\r\n        // Save the first `<thead>` in the table as table header - all other ones will be converted to table body rows.\r\n        if (tableChild.name === 'thead' && !firstTheadElement) {\r\n            firstTheadElement = tableChild;\r\n        }\r\n        // There might be some extra empty text nodes between the `<tr>`s.\r\n        // Make sure further code operates on `tr`s only. (#145)\r\n        const trs = Array.from(tableChild.getChildren()).filter((el) => el.is('element', 'tr'));\r\n        for (const tr of trs) {\r\n            // This <tr> is a child of a first <thead> element.\r\n            if ((firstTheadElement && tableChild === firstTheadElement) ||\r\n                (tableChild.name === 'tbody' &&\r\n                    Array.from(tr.getChildren()).length &&\r\n                    Array.from(tr.getChildren()).every(e => e.is('element', 'th')))) {\r\n                headingRows++;\r\n                headRows.push(tr);\r\n            }\r\n            else {\r\n                bodyRows.push(tr);\r\n                // For other rows check how many column headings this row has.\r\n                const headingCols = scanRowForHeadingColumns(tr);\r\n                if (!headingColumns || headingCols < headingColumns) {\r\n                    headingColumns = headingCols;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return {\r\n        headingRows,\r\n        headingColumns: headingColumns || 0,\r\n        rows: [...headRows, ...bodyRows]\r\n    };\r\n}\r\n/**\r\n * Scans a `<tr>` element and its children for metadata:\r\n * - For heading row:\r\n *     - Adds this row to either the heading or the body rows.\r\n *     - Updates the number of heading rows.\r\n * - For body rows:\r\n *     - Calculates the number of column headings.\r\n */\r\nfunction scanRowForHeadingColumns(tr) {\r\n    let headingColumns = 0;\r\n    let index = 0;\r\n    // Filter out empty text nodes from tr children.\r\n    const children = Array.from(tr.getChildren())\r\n        .filter(child => child.name === 'th' || child.name === 'td');\r\n    // Count starting adjacent <th> elements of a <tr>.\r\n    while (index < children.length && children[index].name === 'th') {\r\n        const th = children[index];\r\n        // Adjust columns calculation by the number of spanned columns.\r\n        const colspan = parseInt(th.getAttribute('colspan') || '1');\r\n        headingColumns = headingColumns + colspan;\r\n        index++;\r\n    }\r\n    return headingColumns;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * The table iterator class. It allows to iterate over table cells. For each cell the iterator yields\r\n * {@link module:table/tablewalker~TableSlot} with proper table cell attributes.\r\n */\r\nexport default class TableWalker {\r\n    /**\r\n     * Creates an instance of the table walker.\r\n     *\r\n     * The table walker iterates internally by traversing the table from row index = 0 and column index = 0.\r\n     * It walks row by row and column by column in order to output values defined in the constructor.\r\n     * By default it will output only the locations that are occupied by a cell. To include also spanned rows and columns,\r\n     * pass the `includeAllSlots` option to the constructor.\r\n     *\r\n     * The most important values of the iterator are column and row indexes of a cell.\r\n     *\r\n     * See {@link module:table/tablewalker~TableSlot} what values are returned by the table walker.\r\n     *\r\n     * To iterate over a given row:\r\n     *\r\n     * ```ts\r\n     * const tableWalker = new TableWalker( table, { startRow: 1, endRow: 2 } );\r\n     *\r\n     * for ( const tableSlot of tableWalker ) {\r\n     *   console.log( 'A cell at row', tableSlot.row, 'and column', tableSlot.column );\r\n     * }\r\n     * ```\r\n     *\r\n     * For instance the code above for the following table:\r\n     *\r\n     *  +----+----+----+----+----+----+\r\n     *  | 00      | 02 | 03 | 04 | 05 |\r\n     *  |         +----+----+----+----+\r\n     *  |         | 12      | 14 | 15 |\r\n     *  |         +----+----+----+    +\r\n     *  |         | 22           |    |\r\n     *  |----+----+----+----+----+    +\r\n     *  | 30 | 31 | 32 | 33 | 34 |    |\r\n     *  +----+----+----+----+----+----+\r\n     *\r\n     * will log in the console:\r\n     *\r\n     *  'A cell at row 1 and column 2'\r\n     *  'A cell at row 1 and column 4'\r\n     *  'A cell at row 1 and column 5'\r\n     *  'A cell at row 2 and column 2'\r\n     *\r\n     * To also iterate over spanned cells:\r\n     *\r\n     * ```ts\r\n     * const tableWalker = new TableWalker( table, { row: 1, includeAllSlots: true } );\r\n     *\r\n     * for ( const tableSlot of tableWalker ) {\r\n     *   console.log( 'Slot at', tableSlot.row, 'x', tableSlot.column, ':', tableSlot.isAnchor ? 'is anchored' : 'is spanned' );\r\n     * }\r\n     * ```\r\n     *\r\n     * will log in the console for the table from the previous example:\r\n     *\r\n     *  'Cell at 1 x 0 : is spanned'\r\n     *  'Cell at 1 x 1 : is spanned'\r\n     *  'Cell at 1 x 2 : is anchored'\r\n     *  'Cell at 1 x 3 : is spanned'\r\n     *  'Cell at 1 x 4 : is anchored'\r\n     *  'Cell at 1 x 5 : is anchored'\r\n     *\r\n     * **Note**: Option `row` is a shortcut that sets both `startRow` and `endRow` to the same row.\r\n     * (Use either `row` or `startRow` and `endRow` but never together). Similarly the `column` option sets both `startColumn`\r\n     * and `endColumn` to the same column (Use either `column` or `startColumn` and `endColumn` but never together).\r\n     *\r\n     * @param table A table over which the walker iterates.\r\n     * @param options An object with configuration.\r\n     * @param options.row A row index for which this iterator will output cells. Can't be used together with `startRow` and `endRow`.\r\n     * @param options.startRow A row index from which this iterator should start. Can't be used together with `row`. Default value is 0.\r\n     * @param options.endRow A row index at which this iterator should end. Can't be used together with `row`.\r\n     * @param options.column A column index for which this iterator will output cells.\r\n     * Can't be used together with `startColumn` and `endColumn`.\r\n     * @param options.startColumn A column index from which this iterator should start.\r\n     * Can't be used together with `column`. Default value is 0.\r\n     * @param options.endColumn A column index at which this iterator should end. Can't be used together with `column`.\r\n     * @param options.includeAllSlots Also return values for spanned cells. Default value is \"false\".\r\n     */\r\n    constructor(table, options = {}) {\r\n        this._table = table;\r\n        this._startRow = options.row !== undefined ? options.row : options.startRow || 0;\r\n        this._endRow = options.row !== undefined ? options.row : options.endRow;\r\n        this._startColumn = options.column !== undefined ? options.column : options.startColumn || 0;\r\n        this._endColumn = options.column !== undefined ? options.column : options.endColumn;\r\n        this._includeAllSlots = !!options.includeAllSlots;\r\n        this._skipRows = new Set();\r\n        this._row = 0;\r\n        this._rowIndex = 0;\r\n        this._column = 0;\r\n        this._cellIndex = 0;\r\n        this._spannedCells = new Map();\r\n        this._nextCellAtColumn = -1;\r\n    }\r\n    /**\r\n     * Iterable interface.\r\n     */\r\n    [Symbol.iterator]() {\r\n        return this;\r\n    }\r\n    /**\r\n     * Gets the next table walker's value.\r\n     *\r\n     * @returns The next table walker's value.\r\n     */\r\n    next() {\r\n        const row = this._table.getChild(this._rowIndex);\r\n        // Iterator is done when there's no row (table ended) or the row is after `endRow` limit.\r\n        if (!row || this._isOverEndRow()) {\r\n            return { done: true, value: undefined };\r\n        }\r\n        // We step over current element when it is not a tableRow instance.\r\n        if (!row.is('element', 'tableRow')) {\r\n            this._rowIndex++;\r\n            return this.next();\r\n        }\r\n        if (this._isOverEndColumn()) {\r\n            return this._advanceToNextRow();\r\n        }\r\n        let outValue = null;\r\n        const spanData = this._getSpanned();\r\n        if (spanData) {\r\n            if (this._includeAllSlots && !this._shouldSkipSlot()) {\r\n                outValue = this._formatOutValue(spanData.cell, spanData.row, spanData.column);\r\n            }\r\n        }\r\n        else {\r\n            const cell = row.getChild(this._cellIndex);\r\n            if (!cell) {\r\n                // If there are no more cells left in row advance to the next row.\r\n                return this._advanceToNextRow();\r\n            }\r\n            const colspan = parseInt(cell.getAttribute('colspan') || '1');\r\n            const rowspan = parseInt(cell.getAttribute('rowspan') || '1');\r\n            // Record this cell spans if it's not 1x1 cell.\r\n            if (colspan > 1 || rowspan > 1) {\r\n                this._recordSpans(cell, rowspan, colspan);\r\n            }\r\n            if (!this._shouldSkipSlot()) {\r\n                outValue = this._formatOutValue(cell);\r\n            }\r\n            this._nextCellAtColumn = this._column + colspan;\r\n        }\r\n        // Advance to the next column before returning value.\r\n        this._column++;\r\n        if (this._column == this._nextCellAtColumn) {\r\n            this._cellIndex++;\r\n        }\r\n        // The current value will be returned only if current row and column are not skipped.\r\n        return outValue || this.next();\r\n    }\r\n    /**\r\n     * Marks a row to skip in the next iteration. It will also skip cells from the current row if there are any cells from the current row\r\n     * to output.\r\n     *\r\n     * @param row The row index to skip.\r\n     */\r\n    skipRow(row) {\r\n        this._skipRows.add(row);\r\n    }\r\n    /**\r\n     * Advances internal cursor to the next row.\r\n     */\r\n    _advanceToNextRow() {\r\n        this._row++;\r\n        this._rowIndex++;\r\n        this._column = 0;\r\n        this._cellIndex = 0;\r\n        this._nextCellAtColumn = -1;\r\n        return this.next();\r\n    }\r\n    /**\r\n     * Checks if the current row is over {@link #_endRow}.\r\n     */\r\n    _isOverEndRow() {\r\n        // If #_endRow is defined skip all rows after it.\r\n        return this._endRow !== undefined && this._row > this._endRow;\r\n    }\r\n    /**\r\n     * Checks if the current cell is over {@link #_endColumn}\r\n     */\r\n    _isOverEndColumn() {\r\n        // If #_endColumn is defined skip all cells after it.\r\n        return this._endColumn !== undefined && this._column > this._endColumn;\r\n    }\r\n    /**\r\n     * A common method for formatting the iterator's output value.\r\n     *\r\n     * @param cell The table cell to output.\r\n     * @param anchorRow The row index of a cell anchor slot.\r\n     * @param anchorColumn The column index of a cell anchor slot.\r\n     */\r\n    _formatOutValue(cell, anchorRow = this._row, anchorColumn = this._column) {\r\n        return {\r\n            done: false,\r\n            value: new TableSlot(this, cell, anchorRow, anchorColumn)\r\n        };\r\n    }\r\n    /**\r\n     * Checks if the current slot should be skipped.\r\n     */\r\n    _shouldSkipSlot() {\r\n        const rowIsMarkedAsSkipped = this._skipRows.has(this._row);\r\n        const rowIsBeforeStartRow = this._row < this._startRow;\r\n        const columnIsBeforeStartColumn = this._column < this._startColumn;\r\n        const columnIsAfterEndColumn = this._endColumn !== undefined && this._column > this._endColumn;\r\n        return rowIsMarkedAsSkipped || rowIsBeforeStartRow || columnIsBeforeStartColumn || columnIsAfterEndColumn;\r\n    }\r\n    /**\r\n     * Returns the cell element that is spanned over the current cell location.\r\n     */\r\n    _getSpanned() {\r\n        const rowMap = this._spannedCells.get(this._row);\r\n        // No spans for given row.\r\n        if (!rowMap) {\r\n            return null;\r\n        }\r\n        // If spans for given rows has entry for column it means that this location if spanned by other cell.\r\n        return rowMap.get(this._column) || null;\r\n    }\r\n    /**\r\n     * Updates spanned cells map relative to the current cell location and its span dimensions.\r\n     *\r\n     * @param cell A cell that is spanned.\r\n     * @param rowspan Cell height.\r\n     * @param colspan Cell width.\r\n     */\r\n    _recordSpans(cell, rowspan, colspan) {\r\n        const data = {\r\n            cell,\r\n            row: this._row,\r\n            column: this._column\r\n        };\r\n        for (let rowToUpdate = this._row; rowToUpdate < this._row + rowspan; rowToUpdate++) {\r\n            for (let columnToUpdate = this._column; columnToUpdate < this._column + colspan; columnToUpdate++) {\r\n                if (rowToUpdate != this._row || columnToUpdate != this._column) {\r\n                    this._markSpannedCell(rowToUpdate, columnToUpdate, data);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Marks the cell location as spanned by another cell.\r\n     *\r\n     * @param row The row index of the cell location.\r\n     * @param column The column index of the cell location.\r\n     * @param data A spanned cell details (cell element, anchor row and column).\r\n     */\r\n    _markSpannedCell(row, column, data) {\r\n        if (!this._spannedCells.has(row)) {\r\n            this._spannedCells.set(row, new Map());\r\n        }\r\n        const rowSpans = this._spannedCells.get(row);\r\n        rowSpans.set(column, data);\r\n    }\r\n}\r\n/**\r\n * An object returned by {@link module:table/tablewalker~TableWalker} when traversing table cells.\r\n */\r\nclass TableSlot {\r\n    /**\r\n     * Creates an instance of the table walker value.\r\n     *\r\n     * @param tableWalker The table walker instance.\r\n     * @param cell The current table cell.\r\n     * @param anchorRow The row index of a cell anchor slot.\r\n     * @param anchorColumn The column index of a cell anchor slot.\r\n     */\r\n    constructor(tableWalker, cell, anchorRow, anchorColumn) {\r\n        this.cell = cell;\r\n        this.row = tableWalker._row;\r\n        this.column = tableWalker._column;\r\n        this.cellAnchorRow = anchorRow;\r\n        this.cellAnchorColumn = anchorColumn;\r\n        this._cellIndex = tableWalker._cellIndex;\r\n        this._rowIndex = tableWalker._rowIndex;\r\n        this._table = tableWalker._table;\r\n    }\r\n    // @if CK_DEBUG // public get isSpanned(): unknown { return throwMissingGetterError( 'isSpanned' ); }\r\n    // @if CK_DEBUG // public get colspan(): unknown { return throwMissingGetterError( 'colspan' ); }\r\n    // @if CK_DEBUG // public get rowspan(): unknown { return throwMissingGetterError( 'rowspan' ); }\r\n    // @if CK_DEBUG // public get cellIndex(): unknown { return throwMissingGetterError( 'cellIndex' ); }\r\n    /**\r\n     * Whether the cell is anchored in the current slot.\r\n     */\r\n    get isAnchor() {\r\n        return this.row === this.cellAnchorRow && this.column === this.cellAnchorColumn;\r\n    }\r\n    /**\r\n     * The width of a cell defined by a `colspan` attribute. If the model attribute is not present, it is set to `1`.\r\n     */\r\n    get cellWidth() {\r\n        return parseInt(this.cell.getAttribute('colspan') || '1');\r\n    }\r\n    /**\r\n     * The height of a cell defined by a `rowspan` attribute. If the model attribute is not present, it is set to `1`.\r\n     */\r\n    get cellHeight() {\r\n        return parseInt(this.cell.getAttribute('rowspan') || '1');\r\n    }\r\n    /**\r\n     * The index of the current row element in the table.\r\n     */\r\n    get rowIndex() {\r\n        return this._rowIndex;\r\n    }\r\n    /**\r\n     * Returns the {@link module:engine/model/position~Position} before the table slot.\r\n     */\r\n    getPositionBefore() {\r\n        const model = this._table.root.document.model;\r\n        return model.createPositionAt(this._table.getChild(this.row), this._cellIndex);\r\n    }\r\n}\r\n/**\r\n * This `TableSlot`'s getter (property) was removed in CKEditor 5 v20.0.0.\r\n *\r\n * Check out the new `TableWalker`'s API in the documentation.\r\n *\r\n * @error tableslot-getter-removed\r\n * @param getterName\r\n */\r\n// @if CK_DEBUG // function throwMissingGetterError( getterName: string ): void {\r\n// @if CK_DEBUG //\t\tthrow new CKEditorError( 'tableslot-getter-removed', null, {\r\n// @if CK_DEBUG //\t\t\tgetterName\r\n// @if CK_DEBUG //\t\t} );\r\n// @if CK_DEBUG // }\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/converters/downcast\r\n */\r\nimport { toWidget, toWidgetEditable } from 'ckeditor5/src/widget';\r\nimport TableWalker from './../tablewalker';\r\n/**\r\n * Model table element to view table element conversion helper.\r\n */\r\nexport function downcastTable(tableUtils, options) {\r\n    return (table, { writer }) => {\r\n        const headingRows = table.getAttribute('headingRows') || 0;\r\n        const tableElement = writer.createContainerElement('table', null, []);\r\n        const figureElement = writer.createContainerElement('figure', { class: 'table' }, tableElement);\r\n        // Table head slot.\r\n        if (headingRows > 0) {\r\n            writer.insert(writer.createPositionAt(tableElement, 'end'), writer.createContainerElement('thead', null, writer.createSlot(element => element.is('element', 'tableRow') && element.index < headingRows)));\r\n        }\r\n        // Table body slot.\r\n        if (headingRows < tableUtils.getRows(table)) {\r\n            writer.insert(writer.createPositionAt(tableElement, 'end'), writer.createContainerElement('tbody', null, writer.createSlot(element => element.is('element', 'tableRow') && element.index >= headingRows)));\r\n        }\r\n        // Dynamic slots.\r\n        for (const { positionOffset, filter } of options.additionalSlots) {\r\n            writer.insert(writer.createPositionAt(tableElement, positionOffset), writer.createSlot(filter));\r\n        }\r\n        // Create a slot with items that don't fit into the table.\r\n        writer.insert(writer.createPositionAt(tableElement, 'after'), writer.createSlot(element => {\r\n            if (element.is('element', 'tableRow')) {\r\n                return false;\r\n            }\r\n            return !options.additionalSlots.some(({ filter }) => filter(element));\r\n        }));\r\n        return options.asWidget ? toTableWidget(figureElement, writer) : figureElement;\r\n    };\r\n}\r\n/**\r\n * Model table row element to view `<tr>` element conversion helper.\r\n *\r\n * @returns Element creator.\r\n */\r\nexport function downcastRow() {\r\n    return (tableRow, { writer }) => {\r\n        return tableRow.isEmpty ?\r\n            writer.createEmptyElement('tr') :\r\n            writer.createContainerElement('tr');\r\n    };\r\n}\r\n/**\r\n * Model table cell element to view `<td>` or `<th>` element conversion helper.\r\n *\r\n * This conversion helper will create proper `<th>` elements for table cells that are in the heading section (heading row or column)\r\n * and `<td>` otherwise.\r\n *\r\n * @param options.asWidget If set to `true`, the downcast conversion will produce a widget.\r\n * @returns Element creator.\r\n */\r\nexport function downcastCell(options = {}) {\r\n    return (tableCell, { writer }) => {\r\n        const tableRow = tableCell.parent;\r\n        const table = tableRow.parent;\r\n        const rowIndex = table.getChildIndex(tableRow);\r\n        const tableWalker = new TableWalker(table, { row: rowIndex });\r\n        const headingRows = table.getAttribute('headingRows') || 0;\r\n        const headingColumns = table.getAttribute('headingColumns') || 0;\r\n        let result = null;\r\n        // We need to iterate over a table in order to get proper row & column values from a walker.\r\n        for (const tableSlot of tableWalker) {\r\n            if (tableSlot.cell == tableCell) {\r\n                const isHeading = tableSlot.row < headingRows || tableSlot.column < headingColumns;\r\n                const cellElementName = isHeading ? 'th' : 'td';\r\n                result = options.asWidget ?\r\n                    toWidgetEditable(writer.createEditableElement(cellElementName), writer) :\r\n                    writer.createContainerElement(cellElementName);\r\n                break;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n}\r\n/**\r\n * Overrides paragraph inside table cell conversion.\r\n *\r\n * This converter:\r\n * * should be used to override default paragraph conversion.\r\n * * It will only convert `<paragraph>` placed directly inside `<tableCell>`.\r\n * * For a single paragraph without attributes it returns `<span>` to simulate data table.\r\n * * For all other cases it returns `<p>` element.\r\n *\r\n * @param options.asWidget If set to `true`, the downcast conversion will produce a widget.\r\n * @returns Element creator.\r\n */\r\nexport function convertParagraphInTableCell(options = {}) {\r\n    return (modelElement, { writer }) => {\r\n        if (!modelElement.parent.is('element', 'tableCell')) {\r\n            return null;\r\n        }\r\n        if (!isSingleParagraphWithoutAttributes(modelElement)) {\r\n            return null;\r\n        }\r\n        if (options.asWidget) {\r\n            return writer.createContainerElement('span', { class: 'ck-table-bogus-paragraph' });\r\n        }\r\n        else {\r\n            // Using `<p>` in case there are some markers on it and transparentRendering will render it anyway.\r\n            const viewElement = writer.createContainerElement('p');\r\n            writer.setCustomProperty('dataPipeline:transparentRendering', true, viewElement);\r\n            return viewElement;\r\n        }\r\n    };\r\n}\r\n/**\r\n * Checks if given model `<paragraph>` is an only child of a parent (`<tableCell>`) and if it has any attribute set.\r\n *\r\n * The paragraph should be converted in the editing view to:\r\n *\r\n * * If returned `true` - to a `<span class=\"ck-table-bogus-paragraph\">`\r\n * * If returned `false` - to a `<p>`\r\n */\r\nexport function isSingleParagraphWithoutAttributes(modelElement) {\r\n    const tableCell = modelElement.parent;\r\n    const isSingleParagraph = tableCell.childCount == 1;\r\n    return isSingleParagraph && !hasAnyAttribute(modelElement);\r\n}\r\n/**\r\n * Converts a given {@link module:engine/view/element~Element} to a table widget:\r\n * * Adds a {@link module:engine/view/element~Element#_setCustomProperty custom property} allowing to recognize the table widget element.\r\n * * Calls the {@link module:widget/utils~toWidget} function with the proper element's label creator.\r\n *\r\n * @param writer An instance of the view writer.\r\n * @param label The element's label. It will be concatenated with the table `alt` attribute if one is present.\r\n */\r\nfunction toTableWidget(viewElement, writer) {\r\n    writer.setCustomProperty('table', true, viewElement);\r\n    return toWidget(viewElement, writer, { hasSelectionHandle: true });\r\n}\r\n/**\r\n * Checks if an element has any attributes set.\r\n */\r\nfunction hasAnyAttribute(element) {\r\n    const iteratorItem = element.getAttributeKeys().next();\r\n    return !iteratorItem.done;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/inserttablecommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The insert table command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'insertTable'` editor command.\r\n *\r\n * To insert a table at the current selection, execute the command and specify the dimensions:\r\n *\r\n * ```ts\r\n * editor.execute( 'insertTable', { rows: 20, columns: 5 } );\r\n * ```\r\n */\r\nexport default class InsertTableCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const schema = model.schema;\r\n        this.isEnabled = isAllowedInParent(selection, schema);\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * Inserts a table with the given number of rows and columns into the editor.\r\n     *\r\n     * @param options.rows The number of rows to create in the inserted table. Default value is 2.\r\n     * @param options.columns The number of columns to create in the inserted table. Default value is 2.\r\n     * @param options.headingRows The number of heading rows. If not provided it will default to\r\n     * {@link module:table/tableconfig~TableConfig#defaultHeadings `config.table.defaultHeadings.rows`} table config.\r\n     * @param options.headingColumns The number of heading columns. If not provided it will default to\r\n     * {@link module:table/tableconfig~TableConfig#defaultHeadings `config.table.defaultHeadings.columns`} table config.\r\n     * @fires execute\r\n     */\r\n    execute(options = {}) {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const tableUtils = editor.plugins.get('TableUtils');\r\n        const defaultRows = editor.config.get('table.defaultHeadings.rows');\r\n        const defaultColumns = editor.config.get('table.defaultHeadings.columns');\r\n        if (options.headingRows === undefined && defaultRows) {\r\n            options.headingRows = defaultRows;\r\n        }\r\n        if (options.headingColumns === undefined && defaultColumns) {\r\n            options.headingColumns = defaultColumns;\r\n        }\r\n        model.change(writer => {\r\n            const table = tableUtils.createTable(writer, options);\r\n            model.insertObject(table, null, null, { findOptimalPosition: 'auto' });\r\n            writer.setSelection(writer.createPositionAt(table.getNodeByPath([0, 0, 0]), 0));\r\n        });\r\n    }\r\n}\r\n/**\r\n * Checks if the table is allowed in the parent.\r\n */\r\nfunction isAllowedInParent(selection, schema) {\r\n    const positionParent = selection.getFirstPosition().parent;\r\n    const validParent = positionParent === positionParent.root ? positionParent : positionParent.parent;\r\n    return schema.checkChild(validParent, 'table');\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/insertrowcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The insert row command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'insertTableRowBelow'` and\r\n * `'insertTableRowAbove'` editor commands.\r\n *\r\n * To insert a row below the selected cell, execute the following command:\r\n *\r\n * ```ts\r\n * editor.execute( 'insertTableRowBelow' );\r\n * ```\r\n *\r\n * To insert a row above the selected cell, execute the following command:\r\n *\r\n * ```ts\r\n * editor.execute( 'insertTableRowAbove' );\r\n * ```\r\n */\r\nexport default class InsertRowCommand extends Command {\r\n    /**\r\n     * Creates a new `InsertRowCommand` instance.\r\n     *\r\n     * @param editor The editor on which this command will be used.\r\n     * @param options.order The order of insertion relative to the row in which the caret is located.\r\n     * Possible values: `\"above\"` and `\"below\"`. Default value is \"below\"\r\n     */\r\n    constructor(editor, options = {}) {\r\n        super(editor);\r\n        this.order = options.order || 'below';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const selection = this.editor.model.document.selection;\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const isAnyCellSelected = !!tableUtils.getSelectionAffectedTableCells(selection).length;\r\n        this.isEnabled = isAnyCellSelected;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * Depending on the command's {@link #order} value, it inserts a row `'below'` or `'above'` the row in which selection is set.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const editor = this.editor;\r\n        const selection = editor.model.document.selection;\r\n        const tableUtils = editor.plugins.get('TableUtils');\r\n        const insertAbove = this.order === 'above';\r\n        const affectedTableCells = tableUtils.getSelectionAffectedTableCells(selection);\r\n        const rowIndexes = tableUtils.getRowIndexes(affectedTableCells);\r\n        const row = insertAbove ? rowIndexes.first : rowIndexes.last;\r\n        const table = affectedTableCells[0].findAncestor('table');\r\n        tableUtils.insertRows(table, { at: insertAbove ? row : row + 1, copyStructureFromAbove: !insertAbove });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/insertcolumncommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The insert column command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'insertTableColumnLeft'` and\r\n * `'insertTableColumnRight'` editor commands.\r\n *\r\n * To insert a column to the left of the selected cell, execute the following command:\r\n *\r\n * ```ts\r\n * editor.execute( 'insertTableColumnLeft' );\r\n * ```\r\n *\r\n * To insert a column to the right of the selected cell, execute the following command:\r\n *\r\n * ```ts\r\n * editor.execute( 'insertTableColumnRight' );\r\n * ```\r\n */\r\nexport default class InsertColumnCommand extends Command {\r\n    /**\r\n     * Creates a new `InsertColumnCommand` instance.\r\n     *\r\n     * @param editor An editor on which this command will be used.\r\n     * @param options.order The order of insertion relative to the column in which the caret is located.\r\n     * Possible values: `\"left\"` and `\"right\"`. Default value is \"right\".\r\n     */\r\n    constructor(editor, options = {}) {\r\n        super(editor);\r\n        this.order = options.order || 'right';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const selection = this.editor.model.document.selection;\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const isAnyCellSelected = !!tableUtils.getSelectionAffectedTableCells(selection).length;\r\n        this.isEnabled = isAnyCellSelected;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * Depending on the command's {@link #order} value, it inserts a column to the `'left'` or `'right'` of the column\r\n     * in which the selection is set.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const editor = this.editor;\r\n        const selection = editor.model.document.selection;\r\n        const tableUtils = editor.plugins.get('TableUtils');\r\n        const insertBefore = this.order === 'left';\r\n        const affectedTableCells = tableUtils.getSelectionAffectedTableCells(selection);\r\n        const columnIndexes = tableUtils.getColumnIndexes(affectedTableCells);\r\n        const column = insertBefore ? columnIndexes.first : columnIndexes.last;\r\n        const table = affectedTableCells[0].findAncestor('table');\r\n        tableUtils.insertColumns(table, { columns: 1, at: insertBefore ? column : column + 1 });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/splitcellcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The split cell command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'splitTableCellVertically'`\r\n * and `'splitTableCellHorizontally'`  editor commands.\r\n *\r\n * You can split any cell vertically or horizontally by executing this command. For example, to split the selected table cell vertically:\r\n *\r\n * ```ts\r\n * editor.execute( 'splitTableCellVertically' );\r\n * ```\r\n */\r\nexport default class SplitCellCommand extends Command {\r\n    /**\r\n     * Creates a new `SplitCellCommand` instance.\r\n     *\r\n     * @param editor The editor on which this command will be used.\r\n     * @param options.direction Indicates whether the command should split cells `'horizontally'` or `'vertically'`.\r\n     */\r\n    constructor(editor, options = {}) {\r\n        super(editor);\r\n        this.direction = options.direction || 'horizontally';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(this.editor.model.document.selection);\r\n        this.isEnabled = selectedCells.length === 1;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const tableCell = tableUtils.getSelectionAffectedTableCells(this.editor.model.document.selection)[0];\r\n        const isHorizontal = this.direction === 'horizontally';\r\n        if (isHorizontal) {\r\n            tableUtils.splitCellHorizontally(tableCell, 2);\r\n        }\r\n        else {\r\n            tableUtils.splitCellVertically(tableCell, 2);\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { default as TableWalker } from '../tablewalker';\r\nimport { createEmptyTableCell, updateNumericAttribute } from './common';\r\n/**\r\n * Returns a cropped table according to given dimensions.\r\n\r\n * To return a cropped table that starts at first row and first column and end in third row and column:\r\n *\r\n * ```ts\r\n * const croppedTable = cropTableToDimensions( table, {\r\n *   startRow: 1,\r\n *   endRow: 3,\r\n *   startColumn: 1,\r\n *   endColumn: 3\r\n * }, writer );\r\n * ```\r\n *\r\n * Calling the code above for the table below:\r\n *\r\n *        0   1   2   3   4                      0   1   2\r\n *      ┌───┬───┬───┬───┬───┐\r\n *   0  │ a │ b │ c │ d │ e │\r\n *      ├───┴───┤   ├───┴───┤                  ┌───┬───┬───┐\r\n *   1  │ f     │   │ g     │                  │   │   │ g │  0\r\n *      ├───┬───┴───┼───┬───┤   will return:   ├───┴───┼───┤\r\n *   2  │ h │ i     │ j │ k │                  │ i     │ j │  1\r\n *      ├───┤       ├───┤   │                  │       ├───┤\r\n *   3  │ l │       │ m │   │                  │       │ m │  2\r\n *      ├───┼───┬───┤   ├───┤                  └───────┴───┘\r\n *   4  │ n │ o │ p │   │ q │\r\n *      └───┴───┴───┴───┴───┘\r\n */\r\nexport function cropTableToDimensions(sourceTable, cropDimensions, writer) {\r\n    const { startRow, startColumn, endRow, endColumn } = cropDimensions;\r\n    // Create empty table with empty rows equal to crop height.\r\n    const croppedTable = writer.createElement('table');\r\n    const cropHeight = endRow - startRow + 1;\r\n    for (let i = 0; i < cropHeight; i++) {\r\n        writer.insertElement('tableRow', croppedTable, 'end');\r\n    }\r\n    const tableMap = [...new TableWalker(sourceTable, { startRow, endRow, startColumn, endColumn, includeAllSlots: true })];\r\n    // Iterate over source table slots (including empty - spanned - ones).\r\n    for (const { row: sourceRow, column: sourceColumn, cell: tableCell, isAnchor, cellAnchorRow, cellAnchorColumn } of tableMap) {\r\n        // Row index in cropped table.\r\n        const rowInCroppedTable = sourceRow - startRow;\r\n        const row = croppedTable.getChild(rowInCroppedTable);\r\n        // For empty slots: fill the gap with empty table cell.\r\n        if (!isAnchor) {\r\n            // But fill the gap only if the spanning cell is anchored outside cropped area.\r\n            // In the table from method jsdoc those cells are: \"c\" & \"f\".\r\n            if (cellAnchorRow < startRow || cellAnchorColumn < startColumn) {\r\n                createEmptyTableCell(writer, writer.createPositionAt(row, 'end'));\r\n            }\r\n        }\r\n        // Otherwise clone the cell with all children and trim if it exceeds cropped area.\r\n        else {\r\n            const tableCellCopy = writer.cloneElement(tableCell);\r\n            writer.append(tableCellCopy, row);\r\n            // Trim table if it exceeds cropped area.\r\n            // In the table from method jsdoc those cells are: \"g\" & \"m\".\r\n            trimTableCellIfNeeded(tableCellCopy, sourceRow, sourceColumn, endRow, endColumn, writer);\r\n        }\r\n    }\r\n    // Adjust heading rows & columns in cropped table if crop selection includes headings parts.\r\n    addHeadingsToCroppedTable(croppedTable, sourceTable, startRow, startColumn, writer);\r\n    return croppedTable;\r\n}\r\n/**\r\n * Returns slot info of cells that starts above and overlaps a given row.\r\n *\r\n * In a table below, passing `overlapRow = 3`\r\n *\r\n *     ┌───┬───┬───┬───┬───┐\r\n *  0  │ a │ b │ c │ d │ e │\r\n *     │   ├───┼───┼───┼───┤\r\n *  1  │   │ f │ g │ h │ i │\r\n *     ├───┤   ├───┼───┤   │\r\n *  2  │ j │   │ k │ l │   │\r\n *     │   │   │   ├───┼───┤\r\n *  3  │   │   │   │ m │ n │  <- overlap row to check\r\n *     ├───┼───┤   │   ├───│\r\n *  4  │ o │ p │   │   │ q │\r\n *     └───┴───┴───┴───┴───┘\r\n *\r\n * will return slot info for cells: \"j\", \"f\", \"k\".\r\n *\r\n * @param table The table to check.\r\n * @param overlapRow The index of the row to check.\r\n * @param startRow row to start analysis. Use it when it is known that the cells above that row will not overlap. Default value is 0.\r\n */\r\nexport function getVerticallyOverlappingCells(table, overlapRow, startRow = 0) {\r\n    const cells = [];\r\n    const tableWalker = new TableWalker(table, { startRow, endRow: overlapRow - 1 });\r\n    for (const slotInfo of tableWalker) {\r\n        const { row, cellHeight } = slotInfo;\r\n        const cellEndRow = row + cellHeight - 1;\r\n        if (row < overlapRow && overlapRow <= cellEndRow) {\r\n            cells.push(slotInfo);\r\n        }\r\n    }\r\n    return cells;\r\n}\r\n/**\r\n * Splits the table cell horizontally.\r\n *\r\n * @returns Created table cell, if any were created.\r\n */\r\nexport function splitHorizontally(tableCell, splitRow, writer) {\r\n    const tableRow = tableCell.parent;\r\n    const table = tableRow.parent;\r\n    const rowIndex = tableRow.index;\r\n    const rowspan = parseInt(tableCell.getAttribute('rowspan'));\r\n    const newRowspan = splitRow - rowIndex;\r\n    const newCellAttributes = {};\r\n    const newCellRowSpan = rowspan - newRowspan;\r\n    if (newCellRowSpan > 1) {\r\n        newCellAttributes.rowspan = newCellRowSpan;\r\n    }\r\n    const colspan = parseInt(tableCell.getAttribute('colspan') || '1');\r\n    if (colspan > 1) {\r\n        newCellAttributes.colspan = colspan;\r\n    }\r\n    const startRow = rowIndex;\r\n    const endRow = startRow + newRowspan;\r\n    const tableMap = [...new TableWalker(table, { startRow, endRow, includeAllSlots: true })];\r\n    let newCell = null;\r\n    let columnIndex;\r\n    for (const tableSlot of tableMap) {\r\n        const { row, column, cell } = tableSlot;\r\n        if (cell === tableCell && columnIndex === undefined) {\r\n            columnIndex = column;\r\n        }\r\n        if (columnIndex !== undefined && columnIndex === column && row === endRow) {\r\n            newCell = createEmptyTableCell(writer, tableSlot.getPositionBefore(), newCellAttributes);\r\n        }\r\n    }\r\n    // Update the rowspan attribute after updating table.\r\n    updateNumericAttribute('rowspan', newRowspan, tableCell, writer);\r\n    return newCell;\r\n}\r\n/**\r\n * Returns slot info of cells that starts before and overlaps a given column.\r\n *\r\n * In a table below, passing `overlapColumn = 3`\r\n *\r\n *    0   1   2   3   4\r\n *  ┌───────┬───────┬───┐\r\n *  │ a     │ b     │ c │\r\n *  │───┬───┴───────┼───┤\r\n *  │ d │ e         │ f │\r\n *  ├───┼───┬───────┴───┤\r\n *  │ g │ h │ i         │\r\n *  ├───┼───┼───┬───────┤\r\n *  │ j │ k │ l │ m     │\r\n *  ├───┼───┴───┼───┬───┤\r\n *  │ n │ o     │ p │ q │\r\n *  └───┴───────┴───┴───┘\r\n *                ^\r\n *                Overlap column to check\r\n *\r\n * will return slot info for cells: \"b\", \"e\", \"i\".\r\n *\r\n * @param table The table to check.\r\n * @param overlapColumn The index of the column to check.\r\n */\r\nexport function getHorizontallyOverlappingCells(table, overlapColumn) {\r\n    const cellsToSplit = [];\r\n    const tableWalker = new TableWalker(table);\r\n    for (const slotInfo of tableWalker) {\r\n        const { column, cellWidth } = slotInfo;\r\n        const cellEndColumn = column + cellWidth - 1;\r\n        if (column < overlapColumn && overlapColumn <= cellEndColumn) {\r\n            cellsToSplit.push(slotInfo);\r\n        }\r\n    }\r\n    return cellsToSplit;\r\n}\r\n/**\r\n * Splits the table cell vertically.\r\n *\r\n * @param columnIndex The table cell column index.\r\n * @param splitColumn The index of column to split cell on.\r\n * @returns Created table cell.\r\n */\r\nexport function splitVertically(tableCell, columnIndex, splitColumn, writer) {\r\n    const colspan = parseInt(tableCell.getAttribute('colspan'));\r\n    const newColspan = splitColumn - columnIndex;\r\n    const newCellAttributes = {};\r\n    const newCellColSpan = colspan - newColspan;\r\n    if (newCellColSpan > 1) {\r\n        newCellAttributes.colspan = newCellColSpan;\r\n    }\r\n    const rowspan = parseInt(tableCell.getAttribute('rowspan') || '1');\r\n    if (rowspan > 1) {\r\n        newCellAttributes.rowspan = rowspan;\r\n    }\r\n    const newCell = createEmptyTableCell(writer, writer.createPositionAfter(tableCell), newCellAttributes);\r\n    // Update the colspan attribute after updating table.\r\n    updateNumericAttribute('colspan', newColspan, tableCell, writer);\r\n    return newCell;\r\n}\r\n/**\r\n * Adjusts table cell dimensions to not exceed limit row and column.\r\n *\r\n * If table cell width (or height) covers a column (or row) that is after a limit column (or row)\r\n * this method will trim \"colspan\" (or \"rowspan\") attribute so the table cell will fit in a defined limits.\r\n */\r\nexport function trimTableCellIfNeeded(tableCell, cellRow, cellColumn, limitRow, limitColumn, writer) {\r\n    const colspan = parseInt(tableCell.getAttribute('colspan') || '1');\r\n    const rowspan = parseInt(tableCell.getAttribute('rowspan') || '1');\r\n    const endColumn = cellColumn + colspan - 1;\r\n    if (endColumn > limitColumn) {\r\n        const trimmedSpan = limitColumn - cellColumn + 1;\r\n        updateNumericAttribute('colspan', trimmedSpan, tableCell, writer, 1);\r\n    }\r\n    const endRow = cellRow + rowspan - 1;\r\n    if (endRow > limitRow) {\r\n        const trimmedSpan = limitRow - cellRow + 1;\r\n        updateNumericAttribute('rowspan', trimmedSpan, tableCell, writer, 1);\r\n    }\r\n}\r\n/**\r\n * Sets proper heading attributes to a cropped table.\r\n */\r\nfunction addHeadingsToCroppedTable(croppedTable, sourceTable, startRow, startColumn, writer) {\r\n    const headingRows = parseInt(sourceTable.getAttribute('headingRows') || '0');\r\n    if (headingRows > 0) {\r\n        const headingRowsInCrop = headingRows - startRow;\r\n        updateNumericAttribute('headingRows', headingRowsInCrop, croppedTable, writer, 0);\r\n    }\r\n    const headingColumns = parseInt(sourceTable.getAttribute('headingColumns') || '0');\r\n    if (headingColumns > 0) {\r\n        const headingColumnsInCrop = headingColumns - startColumn;\r\n        updateNumericAttribute('headingColumns', headingColumnsInCrop, croppedTable, writer, 0);\r\n    }\r\n}\r\n/**\r\n * Removes columns that have no cells anchored.\r\n *\r\n * In table below:\r\n *\r\n *     +----+----+----+----+----+----+----+\r\n *     | 00 | 01      | 03 | 04      | 06 |\r\n *     +----+----+----+----+         +----+\r\n *     | 10 | 11      | 13 |         | 16 |\r\n *     +----+----+----+----+----+----+----+\r\n *     | 20 | 21      | 23 | 24      | 26 |\r\n *     +----+----+----+----+----+----+----+\r\n *                  ^--- empty ---^\r\n *\r\n * Will remove columns 2 and 5.\r\n *\r\n * **Note:** This is a low-level helper method for clearing invalid model state when doing table modifications.\r\n * To remove a column from a table use {@link module:table/tableutils~TableUtils#removeColumns `TableUtils.removeColumns()`}.\r\n *\r\n * @internal\r\n * @returns True if removed some columns.\r\n */\r\nexport function removeEmptyColumns(table, tableUtils) {\r\n    const width = tableUtils.getColumns(table);\r\n    const columnsMap = new Array(width).fill(0);\r\n    for (const { column } of new TableWalker(table)) {\r\n        columnsMap[column]++;\r\n    }\r\n    const emptyColumns = columnsMap.reduce((result, cellsCount, column) => {\r\n        return cellsCount ? result : [...result, column];\r\n    }, []);\r\n    if (emptyColumns.length > 0) {\r\n        // Remove only last empty column because it will recurrently trigger removing empty rows.\r\n        const emptyColumn = emptyColumns[emptyColumns.length - 1];\r\n        // @if CK_DEBUG_TABLE // console.log( `Removing empty column: ${ emptyColumn }.` );\r\n        tableUtils.removeColumns(table, { at: emptyColumn });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Removes rows that have no cells anchored.\r\n *\r\n * In table below:\r\n *\r\n *     +----+----+----+\r\n *     | 00 | 01 | 02 |\r\n *     +----+----+----+\r\n *     | 10 | 11 | 12 |\r\n *     +    +    +    +\r\n *     |    |    |    | <-- empty\r\n *     +----+----+----+\r\n *     | 30 | 31 | 32 |\r\n *     +----+----+----+\r\n *     | 40      | 42 |\r\n *     +         +    +\r\n *     |         |    | <-- empty\r\n *     +----+----+----+\r\n *     | 60 | 61 | 62 |\r\n *     +----+----+----+\r\n *\r\n * Will remove rows 2 and 5.\r\n *\r\n * **Note:** This is a low-level helper method for clearing invalid model state when doing table modifications.\r\n * To remove a row from a table use {@link module:table/tableutils~TableUtils#removeRows `TableUtils.removeRows()`}.\r\n *\r\n * @internal\r\n * @returns True if removed some rows.\r\n */\r\nexport function removeEmptyRows(table, tableUtils) {\r\n    const emptyRows = [];\r\n    const tableRowCount = tableUtils.getRows(table);\r\n    for (let rowIndex = 0; rowIndex < tableRowCount; rowIndex++) {\r\n        const tableRow = table.getChild(rowIndex);\r\n        if (tableRow.isEmpty) {\r\n            emptyRows.push(rowIndex);\r\n        }\r\n    }\r\n    if (emptyRows.length > 0) {\r\n        // Remove only last empty row because it will recurrently trigger removing empty columns.\r\n        const emptyRow = emptyRows[emptyRows.length - 1];\r\n        // @if CK_DEBUG_TABLE // console.log( `Removing empty row: ${ emptyRow }.` );\r\n        tableUtils.removeRows(table, { at: emptyRow });\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n/**\r\n * Removes rows and columns that have no cells anchored.\r\n *\r\n * In table below:\r\n *\r\n *     +----+----+----+----+\r\n *     | 00      | 02      |\r\n *     +----+----+         +\r\n *     | 10      |         |\r\n *     +----+----+----+----+\r\n *     | 20      | 22 | 23 |\r\n *     +         +    +    +\r\n *     |         |    |    | <-- empty row\r\n *     +----+----+----+----+\r\n *             ^--- empty column\r\n *\r\n * Will remove row 3 and column 1.\r\n *\r\n * **Note:** This is a low-level helper method for clearing invalid model state when doing table modifications.\r\n * To remove a rows from a table use {@link module:table/tableutils~TableUtils#removeRows `TableUtils.removeRows()`} and\r\n * {@link module:table/tableutils~TableUtils#removeColumns `TableUtils.removeColumns()`} to remove a column.\r\n *\r\n * @internal\r\n */\r\nexport function removeEmptyRowsColumns(table, tableUtils) {\r\n    const removedColumns = removeEmptyColumns(table, tableUtils);\r\n    // If there was some columns removed then cleaning empty rows was already triggered.\r\n    if (!removedColumns) {\r\n        removeEmptyRows(table, tableUtils);\r\n    }\r\n}\r\n/**\r\n * Returns adjusted last row index if selection covers part of a row with empty slots (spanned by other cells).\r\n * The `dimensions.lastRow` is equal to last row index but selection might be bigger.\r\n *\r\n * This happens *only* on rectangular selection so we analyze a case like this:\r\n *\r\n *        +---+---+---+---+\r\n *      0 | a | b | c | d |\r\n *        +   +   +---+---+\r\n *      1 |   | e | f | g |\r\n *        +   +---+   +---+\r\n *      2 |   | h |   | i | <- last row, each cell has rowspan = 2,\r\n *        +   +   +   +   +    so we need to return 3, not 2\r\n *      3 |   |   |   |   |\r\n *        +---+---+---+---+\r\n *\r\n * @returns Adjusted last row index.\r\n */\r\nexport function adjustLastRowIndex(table, dimensions) {\r\n    const lastRowMap = Array.from(new TableWalker(table, {\r\n        startColumn: dimensions.firstColumn,\r\n        endColumn: dimensions.lastColumn,\r\n        row: dimensions.lastRow\r\n    }));\r\n    const everyCellHasSingleRowspan = lastRowMap.every(({ cellHeight }) => cellHeight === 1);\r\n    // It is a \"flat\" row, so the last row index is OK.\r\n    if (everyCellHasSingleRowspan) {\r\n        return dimensions.lastRow;\r\n    }\r\n    // Otherwise get any cell's rowspan and adjust the last row index.\r\n    const rowspanAdjustment = lastRowMap[0].cellHeight - 1;\r\n    return dimensions.lastRow + rowspanAdjustment;\r\n}\r\n/**\r\n * Returns adjusted last column index if selection covers part of a column with empty slots (spanned by other cells).\r\n * The `dimensions.lastColumn` is equal to last column index but selection might be bigger.\r\n *\r\n * This happens *only* on rectangular selection so we analyze a case like this:\r\n *\r\n *       0   1   2   3\r\n *     +---+---+---+---+\r\n *     | a             |\r\n *     +---+---+---+---+\r\n *     | b | c | d     |\r\n *     +---+---+---+---+\r\n *     | e     | f     |\r\n *     +---+---+---+---+\r\n *     | g | h         |\r\n *     +---+---+---+---+\r\n *               ^\r\n *              last column, each cell has colspan = 2, so we need to return 3, not 2\r\n *\r\n * @returns Adjusted last column index.\r\n */\r\nexport function adjustLastColumnIndex(table, dimensions) {\r\n    const lastColumnMap = Array.from(new TableWalker(table, {\r\n        startRow: dimensions.firstRow,\r\n        endRow: dimensions.lastRow,\r\n        column: dimensions.lastColumn\r\n    }));\r\n    const everyCellHasSingleColspan = lastColumnMap.every(({ cellWidth }) => cellWidth === 1);\r\n    // It is a \"flat\" column, so the last column index is OK.\r\n    if (everyCellHasSingleColspan) {\r\n        return dimensions.lastColumn;\r\n    }\r\n    // Otherwise get any cell's colspan and adjust the last column index.\r\n    const colspanAdjustment = lastColumnMap[0].cellWidth - 1;\r\n    return dimensions.lastColumn + colspanAdjustment;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport TableWalker from '../tablewalker';\r\nimport { isHeadingColumnCell } from '../utils/common';\r\nimport { removeEmptyRowsColumns } from '../utils/structure';\r\n/**\r\n * The merge cell command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'mergeTableCellRight'`, `'mergeTableCellLeft'`,\r\n * `'mergeTableCellUp'` and `'mergeTableCellDown'` editor commands.\r\n *\r\n * To merge a table cell at the current selection with another cell, execute the command corresponding with the preferred direction.\r\n *\r\n * For example, to merge with a cell to the right:\r\n *\r\n * ```ts\r\n * editor.execute( 'mergeTableCellRight' );\r\n * ```\r\n *\r\n * **Note**: If a table cell has a different [`rowspan`](https://www.w3.org/TR/html50/tabular-data.html#attr-tdth-rowspan)\r\n * (for `'mergeTableCellRight'` and `'mergeTableCellLeft'`) or [`colspan`](https://www.w3.org/TR/html50/tabular-data.html#attr-tdth-colspan)\r\n * (for `'mergeTableCellUp'` and `'mergeTableCellDown'`), the command will be disabled.\r\n */\r\nexport default class MergeCellCommand extends Command {\r\n    /**\r\n     * Creates a new `MergeCellCommand` instance.\r\n     *\r\n     * @param editor The editor on which this command will be used.\r\n     * @param options.direction Indicates which cell to merge with the currently selected one.\r\n     * Possible values are: `'left'`, `'right'`, `'up'` and `'down'`.\r\n     */\r\n    constructor(editor, options) {\r\n        super(editor);\r\n        this.direction = options.direction;\r\n        this.isHorizontal = this.direction == 'right' || this.direction == 'left';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const cellToMerge = this._getMergeableCell();\r\n        this.value = cellToMerge;\r\n        this.isEnabled = !!cellToMerge;\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * Depending on the command's {@link #direction} value, it will merge the cell that is to the `'left'`, `'right'`, `'up'` or `'down'`.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const model = this.editor.model;\r\n        const doc = model.document;\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const tableCell = tableUtils.getTableCellsContainingSelection(doc.selection)[0];\r\n        const cellToMerge = this.value;\r\n        const direction = this.direction;\r\n        model.change(writer => {\r\n            const isMergeNext = direction == 'right' || direction == 'down';\r\n            // The merge mechanism is always the same so sort cells to be merged.\r\n            const cellToExpand = (isMergeNext ? tableCell : cellToMerge);\r\n            const cellToRemove = (isMergeNext ? cellToMerge : tableCell);\r\n            // Cache the parent of cell to remove for later check.\r\n            const removedTableCellRow = cellToRemove.parent;\r\n            mergeTableCells(cellToRemove, cellToExpand, writer);\r\n            const spanAttribute = this.isHorizontal ? 'colspan' : 'rowspan';\r\n            const cellSpan = parseInt(tableCell.getAttribute(spanAttribute) || '1');\r\n            const cellToMergeSpan = parseInt(cellToMerge.getAttribute(spanAttribute) || '1');\r\n            // Update table cell span attribute and merge set selection on merged contents.\r\n            writer.setAttribute(spanAttribute, cellSpan + cellToMergeSpan, cellToExpand);\r\n            writer.setSelection(writer.createRangeIn(cellToExpand));\r\n            const tableUtils = this.editor.plugins.get('TableUtils');\r\n            const table = removedTableCellRow.findAncestor('table');\r\n            // Remove empty rows and columns after merging.\r\n            removeEmptyRowsColumns(table, tableUtils);\r\n        });\r\n    }\r\n    /**\r\n     * Returns a cell that can be merged with the current cell depending on the command's direction.\r\n     */\r\n    _getMergeableCell() {\r\n        const model = this.editor.model;\r\n        const doc = model.document;\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const tableCell = tableUtils.getTableCellsContainingSelection(doc.selection)[0];\r\n        if (!tableCell) {\r\n            return;\r\n        }\r\n        // First get the cell on proper direction.\r\n        const cellToMerge = this.isHorizontal ?\r\n            getHorizontalCell(tableCell, this.direction, tableUtils) :\r\n            getVerticalCell(tableCell, this.direction, tableUtils);\r\n        if (!cellToMerge) {\r\n            return;\r\n        }\r\n        // If found check if the span perpendicular to merge direction is equal on both cells.\r\n        const spanAttribute = this.isHorizontal ? 'rowspan' : 'colspan';\r\n        const span = parseInt(tableCell.getAttribute(spanAttribute) || '1');\r\n        const cellToMergeSpan = parseInt(cellToMerge.getAttribute(spanAttribute) || '1');\r\n        if (cellToMergeSpan === span) {\r\n            return cellToMerge;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns the cell that can be merged horizontally.\r\n */\r\nfunction getHorizontalCell(tableCell, direction, tableUtils) {\r\n    const tableRow = tableCell.parent;\r\n    const table = tableRow.parent;\r\n    const horizontalCell = direction == 'right' ? tableCell.nextSibling : tableCell.previousSibling;\r\n    const hasHeadingColumns = (table.getAttribute('headingColumns') || 0) > 0;\r\n    if (!horizontalCell) {\r\n        return;\r\n    }\r\n    // Sort cells:\r\n    const cellOnLeft = (direction == 'right' ? tableCell : horizontalCell);\r\n    const cellOnRight = (direction == 'right' ? horizontalCell : tableCell);\r\n    // Get their column indexes:\r\n    const { column: leftCellColumn } = tableUtils.getCellLocation(cellOnLeft);\r\n    const { column: rightCellColumn } = tableUtils.getCellLocation(cellOnRight);\r\n    const leftCellSpan = parseInt(cellOnLeft.getAttribute('colspan') || '1');\r\n    const isCellOnLeftInHeadingColumn = isHeadingColumnCell(tableUtils, cellOnLeft);\r\n    const isCellOnRightInHeadingColumn = isHeadingColumnCell(tableUtils, cellOnRight);\r\n    // We cannot merge heading columns cells with regular cells.\r\n    if (hasHeadingColumns && isCellOnLeftInHeadingColumn != isCellOnRightInHeadingColumn) {\r\n        return;\r\n    }\r\n    // The cell on the right must have index that is distant to the cell on the left by the left cell's width (colspan).\r\n    const cellsAreTouching = leftCellColumn + leftCellSpan === rightCellColumn;\r\n    // If the right cell's column index is different it means that there are rowspanned cells between them.\r\n    return cellsAreTouching ? horizontalCell : undefined;\r\n}\r\n/**\r\n * Returns the cell that can be merged vertically.\r\n */\r\nfunction getVerticalCell(tableCell, direction, tableUtils) {\r\n    const tableRow = tableCell.parent;\r\n    const table = tableRow.parent;\r\n    const rowIndex = table.getChildIndex(tableRow);\r\n    // Don't search for mergeable cell if direction points out of the table.\r\n    if ((direction == 'down' && rowIndex === tableUtils.getRows(table) - 1) || (direction == 'up' && rowIndex === 0)) {\r\n        return null;\r\n    }\r\n    const rowspan = parseInt(tableCell.getAttribute('rowspan') || '1');\r\n    const headingRows = table.getAttribute('headingRows') || 0;\r\n    const isMergeWithBodyCell = direction == 'down' && (rowIndex + rowspan) === headingRows;\r\n    const isMergeWithHeadCell = direction == 'up' && rowIndex === headingRows;\r\n    // Don't search for mergeable cell if direction points out of the current table section.\r\n    if (headingRows && (isMergeWithBodyCell || isMergeWithHeadCell)) {\r\n        return null;\r\n    }\r\n    const currentCellRowSpan = parseInt(tableCell.getAttribute('rowspan') || '1');\r\n    const rowOfCellToMerge = direction == 'down' ? rowIndex + currentCellRowSpan : rowIndex;\r\n    const tableMap = [...new TableWalker(table, { endRow: rowOfCellToMerge })];\r\n    const currentCellData = tableMap.find(value => value.cell === tableCell);\r\n    const mergeColumn = currentCellData.column;\r\n    const cellToMergeData = tableMap.find(({ row, cellHeight, column }) => {\r\n        if (column !== mergeColumn) {\r\n            return false;\r\n        }\r\n        if (direction == 'down') {\r\n            // If merging a cell below the mergeRow is already calculated.\r\n            return row === rowOfCellToMerge;\r\n        }\r\n        else {\r\n            // If merging a cell above calculate if it spans to mergeRow.\r\n            return rowOfCellToMerge === row + cellHeight;\r\n        }\r\n    });\r\n    return cellToMergeData && cellToMergeData.cell ? cellToMergeData.cell : null;\r\n}\r\n/**\r\n * Merges two table cells. It will ensure that after merging cells with an empty paragraph, the resulting table cell will only have one\r\n * paragraph. If one of the merged table cells is empty, the merged table cell will have the contents of the non-empty table cell.\r\n * If both are empty, the merged table cell will have only one empty paragraph.\r\n */\r\nfunction mergeTableCells(cellToRemove, cellToExpand, writer) {\r\n    if (!isEmpty(cellToRemove)) {\r\n        if (isEmpty(cellToExpand)) {\r\n            writer.remove(writer.createRangeIn(cellToExpand));\r\n        }\r\n        writer.move(writer.createRangeIn(cellToRemove), writer.createPositionAt(cellToExpand, 'end'));\r\n    }\r\n    // Remove merged table cell.\r\n    writer.remove(cellToRemove);\r\n}\r\n/**\r\n * Checks if the passed table cell contains an empty paragraph.\r\n */\r\nfunction isEmpty(tableCell) {\r\n    const firstTableChild = tableCell.getChild(0);\r\n    return tableCell.childCount == 1 && firstTableChild.is('element', 'paragraph') && firstTableChild.isEmpty;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/removerowcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The remove row command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'removeTableRow'` editor command.\r\n *\r\n * To remove the row containing the selected cell, execute the command:\r\n *\r\n * ```ts\r\n * editor.execute( 'removeTableRow' );\r\n * ```\r\n */\r\nexport default class RemoveRowCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(this.editor.model.document.selection);\r\n        const firstCell = selectedCells[0];\r\n        if (firstCell) {\r\n            const table = firstCell.findAncestor('table');\r\n            const tableRowCount = tableUtils.getRows(table);\r\n            const lastRowIndex = tableRowCount - 1;\r\n            const selectedRowIndexes = tableUtils.getRowIndexes(selectedCells);\r\n            const areAllRowsSelected = selectedRowIndexes.first === 0 && selectedRowIndexes.last === lastRowIndex;\r\n            // Disallow selecting whole table -> delete whole table should be used instead.\r\n            this.isEnabled = !areAllRowsSelected;\r\n        }\r\n        else {\r\n            this.isEnabled = false;\r\n        }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute() {\r\n        const model = this.editor.model;\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const referenceCells = tableUtils.getSelectionAffectedTableCells(model.document.selection);\r\n        const removedRowIndexes = tableUtils.getRowIndexes(referenceCells);\r\n        const firstCell = referenceCells[0];\r\n        const table = firstCell.findAncestor('table');\r\n        const columnIndexToFocus = tableUtils.getCellLocation(firstCell).column;\r\n        model.change(writer => {\r\n            const rowsToRemove = removedRowIndexes.last - removedRowIndexes.first + 1;\r\n            tableUtils.removeRows(table, {\r\n                at: removedRowIndexes.first,\r\n                rows: rowsToRemove\r\n            });\r\n            const cellToFocus = getCellToFocus(table, removedRowIndexes.first, columnIndexToFocus, tableUtils.getRows(table));\r\n            writer.setSelection(writer.createPositionAt(cellToFocus, 0));\r\n        });\r\n    }\r\n}\r\n/**\r\n * Returns a cell that should be focused before removing the row, belonging to the same column as the currently focused cell.\r\n * - If the row was not the last one, the cell to focus will be in the row that followed it (before removal).\r\n * - If the row was the last one, the cell to focus will be in the row that preceded it (before removal).\r\n */\r\nfunction getCellToFocus(table, removedRowIndex, columnToFocus, tableRowCount) {\r\n    // Don't go beyond last row's index.\r\n    const row = table.getChild(Math.min(removedRowIndex, tableRowCount - 1));\r\n    // Default to first table cell.\r\n    let cellToFocus = row.getChild(0);\r\n    let column = 0;\r\n    for (const tableCell of row.getChildren()) {\r\n        if (column > columnToFocus) {\r\n            return cellToFocus;\r\n        }\r\n        cellToFocus = tableCell;\r\n        column += parseInt(tableCell.getAttribute('colspan') || '1');\r\n    }\r\n    return cellToFocus;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/removecolumncommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport TableWalker from '../tablewalker';\r\n/**\r\n * The remove column command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'removeTableColumn'` editor command.\r\n *\r\n * To remove the column containing the selected cell, execute the command:\r\n *\r\n * ```ts\r\n * editor.execute( 'removeTableColumn' );\r\n * ```\r\n */\r\nexport default class RemoveColumnCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(this.editor.model.document.selection);\r\n        const firstCell = selectedCells[0];\r\n        if (firstCell) {\r\n            const table = firstCell.findAncestor('table');\r\n            const tableColumnCount = tableUtils.getColumns(table);\r\n            const { first, last } = tableUtils.getColumnIndexes(selectedCells);\r\n            this.isEnabled = last - first < (tableColumnCount - 1);\r\n        }\r\n        else {\r\n            this.isEnabled = false;\r\n        }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const [firstCell, lastCell] = getBoundaryCells(this.editor.model.document.selection, tableUtils);\r\n        const table = firstCell.parent.parent;\r\n        // Cache the table before removing or updating colspans.\r\n        const tableMap = [...new TableWalker(table)];\r\n        // Store column indexes of removed columns.\r\n        const removedColumnIndexes = {\r\n            first: tableMap.find(value => value.cell === firstCell).column,\r\n            last: tableMap.find(value => value.cell === lastCell).column\r\n        };\r\n        const cellToFocus = getCellToFocus(tableMap, firstCell, lastCell, removedColumnIndexes);\r\n        this.editor.model.change(writer => {\r\n            const columnsToRemove = removedColumnIndexes.last - removedColumnIndexes.first + 1;\r\n            tableUtils.removeColumns(table, {\r\n                at: removedColumnIndexes.first,\r\n                columns: columnsToRemove\r\n            });\r\n            writer.setSelection(writer.createPositionAt(cellToFocus, 0));\r\n        });\r\n    }\r\n}\r\n/**\r\n * Returns a proper table cell to focus after removing a column.\r\n * - selection is on last table cell it will return previous cell.\r\n */\r\nfunction getCellToFocus(tableMap, firstCell, lastCell, removedColumnIndexes) {\r\n    const colspan = parseInt(lastCell.getAttribute('colspan') || '1');\r\n    // If the table cell is spanned over 2+ columns - it will be truncated so the selection should\r\n    // stay in that cell.\r\n    if (colspan > 1) {\r\n        return lastCell;\r\n    }\r\n    // Normally, look for the cell in the same row that precedes the first cell to put selection there (\"column on the left\").\r\n    // If the deleted column is the first column of the table, there will be no predecessor: use the cell\r\n    // from the column that follows then (also in the same row).\r\n    else if (firstCell.previousSibling || lastCell.nextSibling) {\r\n        return lastCell.nextSibling || firstCell.previousSibling;\r\n    }\r\n    // It can happen that table cells have no siblings in a row, for instance, when there are row spans\r\n    // in the table (in the previous row). Then just look for the closest cell that is in a column\r\n    // that will not be removed to put the selection there.\r\n    else {\r\n        // Look for any cell in a column that precedes the first removed column.\r\n        if (removedColumnIndexes.first) {\r\n            return tableMap.reverse().find(({ column }) => {\r\n                return column < removedColumnIndexes.first;\r\n            }).cell;\r\n        }\r\n        // If the first removed column is the first column of the table, then\r\n        // look for any cell that is in a column that follows the last removed column.\r\n        else {\r\n            return tableMap.reverse().find(({ column }) => {\r\n                return column > removedColumnIndexes.last;\r\n            }).cell;\r\n        }\r\n    }\r\n}\r\n/**\r\n * Returns helper object returning the first and the last cell contained in given selection, based on DOM order.\r\n */\r\nfunction getBoundaryCells(selection, tableUtils) {\r\n    const referenceCells = tableUtils.getSelectionAffectedTableCells(selection);\r\n    const firstCell = referenceCells[0];\r\n    const lastCell = referenceCells.pop();\r\n    const returnValue = [firstCell, lastCell];\r\n    return firstCell.isBefore(lastCell) ? returnValue : returnValue.reverse();\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/setheaderrowcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { updateNumericAttribute } from '../utils/common';\r\nimport { getVerticallyOverlappingCells, splitHorizontally } from '../utils/structure';\r\n/**\r\n * The header row command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'setTableColumnHeader'` editor command.\r\n *\r\n * You can make the row containing the selected cell a [header](https://www.w3.org/TR/html50/tabular-data.html#the-th-element) by executing:\r\n *\r\n * ```ts\r\n * editor.execute( 'setTableRowHeader' );\r\n * ```\r\n *\r\n * **Note:** All preceding rows will also become headers. If the current row is already a header, executing this command\r\n * will make it a regular row back again (including the following rows).\r\n */\r\nexport default class SetHeaderRowCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const model = this.editor.model;\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(model.document.selection);\r\n        const isInTable = selectedCells.length > 0;\r\n        this.isEnabled = isInTable;\r\n        this.value = isInTable && selectedCells.every(cell => this._isInHeading(cell, cell.parent.parent));\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * When the selection is in a non-header row, the command will set the `headingRows` table attribute to cover that row.\r\n     *\r\n     * When the selection is already in a header row, it will set `headingRows` so the heading section will end before that row.\r\n     *\r\n     * @fires execute\r\n     * @param options.forceValue If set, the command will set (`true`) or unset (`false`) the header rows according to\r\n     * the `forceValue` parameter instead of the current model state.\r\n     */\r\n    execute(options = {}) {\r\n        if (options.forceValue === this.value) {\r\n            return;\r\n        }\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const model = this.editor.model;\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(model.document.selection);\r\n        const table = selectedCells[0].findAncestor('table');\r\n        const { first, last } = tableUtils.getRowIndexes(selectedCells);\r\n        const headingRowsToSet = this.value ? first : last + 1;\r\n        const currentHeadingRows = table.getAttribute('headingRows') || 0;\r\n        model.change(writer => {\r\n            if (headingRowsToSet) {\r\n                // Changing heading rows requires to check if any of a heading cell is overlapping vertically the table head.\r\n                // Any table cell that has a rowspan attribute > 1 will not exceed the table head so we need to fix it in rows below.\r\n                const startRow = headingRowsToSet > currentHeadingRows ? currentHeadingRows : 0;\r\n                const overlappingCells = getVerticallyOverlappingCells(table, headingRowsToSet, startRow);\r\n                for (const { cell } of overlappingCells) {\r\n                    splitHorizontally(cell, headingRowsToSet, writer);\r\n                }\r\n            }\r\n            updateNumericAttribute('headingRows', headingRowsToSet, table, writer, 0);\r\n        });\r\n    }\r\n    /**\r\n     * Checks if a table cell is in the heading section.\r\n     */\r\n    _isInHeading(tableCell, table) {\r\n        const headingRows = parseInt(table.getAttribute('headingRows') || '0');\r\n        return !!headingRows && tableCell.parent.index < headingRows;\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/setheadercolumncommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { isHeadingColumnCell, updateNumericAttribute } from '../utils/common';\r\nimport { getHorizontallyOverlappingCells, splitVertically } from '../utils/structure';\r\n/**\r\n * The header column command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'setTableColumnHeader'` editor command.\r\n *\r\n * You can make the column containing the selected cell a [header](https://www.w3.org/TR/html50/tabular-data.html#the-th-element)\r\n * by executing:\r\n *\r\n * ```ts\r\n * editor.execute( 'setTableColumnHeader' );\r\n * ```\r\n *\r\n * **Note:** All preceding columns will also become headers. If the current column is already a header, executing this command\r\n * will make it a regular column back again (including the following columns).\r\n */\r\nexport default class SetHeaderColumnCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const model = this.editor.model;\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(model.document.selection);\r\n        const isInTable = selectedCells.length > 0;\r\n        this.isEnabled = isInTable;\r\n        this.value = isInTable && selectedCells.every(cell => isHeadingColumnCell(tableUtils, cell));\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * When the selection is in a non-header column, the command will set the `headingColumns` table attribute to cover that column.\r\n     *\r\n     * When the selection is already in a header column, it will set `headingColumns` so the heading section will end before that column.\r\n     *\r\n     * @fires execute\r\n     * @param options.forceValue If set, the command will set (`true`) or unset (`false`) the header columns according to\r\n     * the `forceValue` parameter instead of the current model state.\r\n     */\r\n    execute(options = {}) {\r\n        if (options.forceValue === this.value) {\r\n            return;\r\n        }\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const model = this.editor.model;\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(model.document.selection);\r\n        const table = selectedCells[0].findAncestor('table');\r\n        const { first, last } = tableUtils.getColumnIndexes(selectedCells);\r\n        const headingColumnsToSet = this.value ? first : last + 1;\r\n        model.change(writer => {\r\n            if (headingColumnsToSet) {\r\n                // Changing heading columns requires to check if any of a heading cell is overlapping horizontally the table head.\r\n                // Any table cell that has a colspan attribute > 1 will not exceed the table head so we need to fix it in columns before.\r\n                const overlappingCells = getHorizontallyOverlappingCells(table, headingColumnsToSet);\r\n                for (const { cell, column } of overlappingCells) {\r\n                    splitVertically(cell, column, headingColumnsToSet, writer);\r\n                }\r\n            }\r\n            updateNumericAttribute('headingColumns', headingColumnsToSet, table, writer, 0);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tableutils\r\n */\r\nimport { CKEditorError } from 'ckeditor5/src/utils';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport TableWalker from './tablewalker';\r\nimport { createEmptyTableCell, updateNumericAttribute } from './utils/common';\r\nimport { removeEmptyColumns, removeEmptyRows } from './utils/structure';\r\n/**\r\n * The table utilities plugin.\r\n */\r\nexport default class TableUtils extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableUtils';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        this.decorate('insertColumns');\r\n        this.decorate('insertRows');\r\n    }\r\n    /**\r\n     * Returns the table cell location as an object with table row and table column indexes.\r\n     *\r\n     * For instance, in the table below:\r\n     *\r\n     *      0   1   2   3\r\n     *    +---+---+---+---+\r\n     *  0 | a     | b | c |\r\n     *    +       +   +---+\r\n     *  1 |       |   | d |\r\n     *    +---+---+   +---+\r\n     *  2 | e     |   | f |\r\n     *    +---+---+---+---+\r\n     *\r\n     * the method will return:\r\n     *\r\n     * ```ts\r\n     * const cellA = table.getNodeByPath( [ 0, 0 ] );\r\n     * editor.plugins.get( 'TableUtils' ).getCellLocation( cellA );\r\n     * // will return { row: 0, column: 0 }\r\n     *\r\n     * const cellD = table.getNodeByPath( [ 1, 0 ] );\r\n     * editor.plugins.get( 'TableUtils' ).getCellLocation( cellD );\r\n     * // will return { row: 1, column: 3 }\r\n     * ```\r\n     *\r\n     * @returns Returns a `{row, column}` object.\r\n     */\r\n    getCellLocation(tableCell) {\r\n        const tableRow = tableCell.parent;\r\n        const table = tableRow.parent;\r\n        const rowIndex = table.getChildIndex(tableRow);\r\n        const tableWalker = new TableWalker(table, { row: rowIndex });\r\n        for (const { cell, row, column } of tableWalker) {\r\n            if (cell === tableCell) {\r\n                return { row, column };\r\n            }\r\n        }\r\n        // Should be unreachable code.\r\n        /* istanbul ignore next -- @preserve */\r\n        return undefined;\r\n    }\r\n    /**\r\n     * Creates an empty table with a proper structure. The table needs to be inserted into the model,\r\n     * for example, by using the {@link module:engine/model/model~Model#insertContent} function.\r\n     *\r\n     * ```ts\r\n     * model.change( ( writer ) => {\r\n     *   // Create a table of 2 rows and 7 columns:\r\n     *   const table = tableUtils.createTable( writer, { rows: 2, columns: 7 } );\r\n     *\r\n     *   // Insert a table to the model at the best position taking the current selection:\r\n     *   model.insertContent( table );\r\n     * }\r\n     * ```\r\n     *\r\n     * @param writer The model writer.\r\n     * @param options.rows The number of rows to create. Default value is 2.\r\n     * @param options.columns The number of columns to create. Default value is 2.\r\n     * @param options.headingRows The number of heading rows. Default value is 0.\r\n     * @param options.headingColumns The number of heading columns. Default value is 0.\r\n     * @returns The created table element.\r\n     */\r\n    createTable(writer, options) {\r\n        const table = writer.createElement('table');\r\n        const rows = options.rows || 2;\r\n        const columns = options.columns || 2;\r\n        createEmptyRows(writer, table, 0, rows, columns);\r\n        if (options.headingRows) {\r\n            updateNumericAttribute('headingRows', Math.min(options.headingRows, rows), table, writer, 0);\r\n        }\r\n        if (options.headingColumns) {\r\n            updateNumericAttribute('headingColumns', Math.min(options.headingColumns, columns), table, writer, 0);\r\n        }\r\n        return table;\r\n    }\r\n    /**\r\n     * Inserts rows into a table.\r\n     *\r\n     * ```ts\r\n     * editor.plugins.get( 'TableUtils' ).insertRows( table, { at: 1, rows: 2 } );\r\n     * ```\r\n     *\r\n     * Assuming the table on the left, the above code will transform it to the table on the right:\r\n     *\r\n     *  row index\r\n     *    0 +---+---+---+       `at` = 1,      +---+---+---+ 0\r\n     *      | a | b | c |       `rows` = 2,    | a | b | c |\r\n     *    1 +   +---+---+   <-- insert here    +   +---+---+ 1\r\n     *      |   | d | e |                      |   |   |   |\r\n     *    2 +   +---+---+       will give:     +   +---+---+ 2\r\n     *      |   | f | g |                      |   |   |   |\r\n     *    3 +---+---+---+                      +   +---+---+ 3\r\n     *                                         |   | d | e |\r\n     *                                         +   +---+---+ 4\r\n     *                                         +   + f | g |\r\n     *                                         +---+---+---+ 5\r\n     *\r\n     * @param table The table model element where the rows will be inserted.\r\n     * @param options.at The row index at which the rows will be inserted.  Default value is 0.\r\n     * @param options.rows The number of rows to insert.  Default value is 1.\r\n     * @param options.copyStructureFromAbove The flag for copying row structure. Note that\r\n     * the row structure will not be copied if this option is not provided.\r\n     */\r\n    insertRows(table, options = {}) {\r\n        const model = this.editor.model;\r\n        const insertAt = options.at || 0;\r\n        const rowsToInsert = options.rows || 1;\r\n        const isCopyStructure = options.copyStructureFromAbove !== undefined;\r\n        const copyStructureFrom = options.copyStructureFromAbove ? insertAt - 1 : insertAt;\r\n        const rows = this.getRows(table);\r\n        const columns = this.getColumns(table);\r\n        if (insertAt > rows) {\r\n            /**\r\n             * The `options.at` points at a row position that does not exist.\r\n             *\r\n             * @error tableutils-insertrows-insert-out-of-range\r\n             */\r\n            throw new CKEditorError('tableutils-insertrows-insert-out-of-range', this, { options });\r\n        }\r\n        model.change(writer => {\r\n            const headingRows = table.getAttribute('headingRows') || 0;\r\n            // Inserting rows inside heading section requires to update `headingRows` attribute as the heading section will grow.\r\n            if (headingRows > insertAt) {\r\n                updateNumericAttribute('headingRows', headingRows + rowsToInsert, table, writer, 0);\r\n            }\r\n            // Inserting at the end or at the beginning of a table doesn't require to calculate anything special.\r\n            if (!isCopyStructure && (insertAt === 0 || insertAt === rows)) {\r\n                createEmptyRows(writer, table, insertAt, rowsToInsert, columns);\r\n                return;\r\n            }\r\n            // Iterate over all the rows above the inserted rows in order to check for the row-spanned cells.\r\n            const walkerEndRow = isCopyStructure ? Math.max(insertAt, copyStructureFrom) : insertAt;\r\n            const tableIterator = new TableWalker(table, { endRow: walkerEndRow });\r\n            // Store spans of the reference row to reproduce it's structure. This array is column number indexed.\r\n            const rowColSpansMap = new Array(columns).fill(1);\r\n            for (const { row, column, cellHeight, cellWidth, cell } of tableIterator) {\r\n                const lastCellRow = row + cellHeight - 1;\r\n                const isOverlappingInsertedRow = row < insertAt && insertAt <= lastCellRow;\r\n                const isReferenceRow = row <= copyStructureFrom && copyStructureFrom <= lastCellRow;\r\n                // If the cell is row-spanned and overlaps the inserted row, then reserve space for it in the row map.\r\n                if (isOverlappingInsertedRow) {\r\n                    // This cell overlaps the inserted rows so we need to expand it further.\r\n                    writer.setAttribute('rowspan', cellHeight + rowsToInsert, cell);\r\n                    // Mark this cell with negative number to indicate how many cells should be skipped when adding the new cells.\r\n                    rowColSpansMap[column] = -cellWidth;\r\n                }\r\n                // Store the colspan from reference row.\r\n                else if (isCopyStructure && isReferenceRow) {\r\n                    rowColSpansMap[column] = cellWidth;\r\n                }\r\n            }\r\n            for (let rowIndex = 0; rowIndex < rowsToInsert; rowIndex++) {\r\n                const tableRow = writer.createElement('tableRow');\r\n                writer.insert(tableRow, table, insertAt);\r\n                for (let cellIndex = 0; cellIndex < rowColSpansMap.length; cellIndex++) {\r\n                    const colspan = rowColSpansMap[cellIndex];\r\n                    const insertPosition = writer.createPositionAt(tableRow, 'end');\r\n                    // Insert the empty cell only if this slot is not row-spanned from any other cell.\r\n                    if (colspan > 0) {\r\n                        createEmptyTableCell(writer, insertPosition, colspan > 1 ? { colspan } : undefined);\r\n                    }\r\n                    // Skip the col-spanned slots, there won't be any cells.\r\n                    cellIndex += Math.abs(colspan) - 1;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Inserts columns into a table.\r\n     *\r\n     * ```ts\r\n     * editor.plugins.get( 'TableUtils' ).insertColumns( table, { at: 1, columns: 2 } );\r\n     * ```\r\n     *\r\n     * Assuming the table on the left, the above code will transform it to the table on the right:\r\n     *\r\n     *  0   1   2   3                   0   1   2   3   4   5\r\n     *  +---+---+---+                   +---+---+---+---+---+\r\n     *  | a     | b |                   | a             | b |\r\n     *  +       +---+                   +               +---+\r\n     *  |       | c |                   |               | c |\r\n     *  +---+---+---+     will give:    +---+---+---+---+---+\r\n     *  | d | e | f |                   | d |   |   | e | f |\r\n     *  +---+   +---+                   +---+---+---+   +---+\r\n     *  | g |   | h |                   | g |   |   |   | h |\r\n     *  +---+---+---+                   +---+---+---+---+---+\r\n     *  | i         |                   | i                 |\r\n     *  +---+---+---+                   +---+---+---+---+---+\r\n     *      ^---- insert here, `at` = 1, `columns` = 2\r\n     *\r\n     * @param table The table model element where the columns will be inserted.\r\n     * @param options.at The column index at which the columns will be inserted. Default value is 0.\r\n     * @param options.columns The number of columns to insert. Default value is 1.\r\n     */\r\n    insertColumns(table, options = {}) {\r\n        const model = this.editor.model;\r\n        const insertAt = options.at || 0;\r\n        const columnsToInsert = options.columns || 1;\r\n        model.change(writer => {\r\n            const headingColumns = table.getAttribute('headingColumns');\r\n            // Inserting columns inside heading section requires to update `headingColumns` attribute as the heading section will grow.\r\n            if (insertAt < headingColumns) {\r\n                writer.setAttribute('headingColumns', headingColumns + columnsToInsert, table);\r\n            }\r\n            const tableColumns = this.getColumns(table);\r\n            // Inserting at the end and at the beginning of a table doesn't require to calculate anything special.\r\n            if (insertAt === 0 || tableColumns === insertAt) {\r\n                for (const tableRow of table.getChildren()) {\r\n                    // Ignore non-row elements inside the table (e.g. caption).\r\n                    if (!tableRow.is('element', 'tableRow')) {\r\n                        continue;\r\n                    }\r\n                    createCells(columnsToInsert, writer, writer.createPositionAt(tableRow, insertAt ? 'end' : 0));\r\n                }\r\n                return;\r\n            }\r\n            const tableWalker = new TableWalker(table, { column: insertAt, includeAllSlots: true });\r\n            for (const tableSlot of tableWalker) {\r\n                const { row, cell, cellAnchorColumn, cellAnchorRow, cellWidth, cellHeight } = tableSlot;\r\n                // When iterating over column the table walker outputs either:\r\n                // - cells at given column index (cell \"e\" from method docs),\r\n                // - spanned columns (spanned cell from row between cells \"g\" and \"h\" - spanned by \"e\", only if `includeAllSlots: true`),\r\n                // - or a cell from the same row which spans over this column (cell \"a\").\r\n                if (cellAnchorColumn < insertAt) {\r\n                    // If cell is anchored in previous column, it is a cell that spans over an inserted column (cell \"a\" & \"i\").\r\n                    // For such cells expand them by a number of columns inserted.\r\n                    writer.setAttribute('colspan', cellWidth + columnsToInsert, cell);\r\n                    // This cell will overlap cells in rows below so skip them (because of `includeAllSlots` option) - (cell \"a\")\r\n                    const lastCellRow = cellAnchorRow + cellHeight - 1;\r\n                    for (let i = row; i <= lastCellRow; i++) {\r\n                        tableWalker.skipRow(i);\r\n                    }\r\n                }\r\n                else {\r\n                    // It's either cell at this column index or spanned cell by a row-spanned cell from row above.\r\n                    // In table above it's cell \"e\" and a spanned position from row below (empty cell between cells \"g\" and \"h\")\r\n                    createCells(columnsToInsert, writer, tableSlot.getPositionBefore());\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes rows from the given `table`.\r\n     *\r\n     * This method re-calculates the table geometry including `rowspan` attribute of table cells overlapping removed rows\r\n     * and table headings values.\r\n     *\r\n     * ```ts\r\n     * editor.plugins.get( 'TableUtils' ).removeRows( table, { at: 1, rows: 2 } );\r\n     * ```\r\n     *\r\n     * Executing the above code in the context of the table on the left will transform its structure as presented on the right:\r\n     *\r\n     *  row index\r\n     *      ┌───┬───┬───┐        `at` = 1        ┌───┬───┬───┐\r\n     *    0 │ a │ b │ c │        `rows` = 2      │ a │ b │ c │ 0\r\n     *      │   ├───┼───┤                        │   ├───┼───┤\r\n     *    1 │   │ d │ e │  <-- remove from here  │   │ d │ g │ 1\r\n     *      │   │   ├───┤        will give:      ├───┼───┼───┤\r\n     *    2 │   │   │ f │                        │ h │ i │ j │ 2\r\n     *      │   │   ├───┤                        └───┴───┴───┘\r\n     *    3 │   │   │ g │\r\n     *      ├───┼───┼───┤\r\n     *    4 │ h │ i │ j │\r\n     *      └───┴───┴───┘\r\n     *\r\n     * @param options.at The row index at which the removing rows will start.\r\n     * @param options.rows The number of rows to remove. Default value is 1.\r\n     */\r\n    removeRows(table, options) {\r\n        const model = this.editor.model;\r\n        const rowsToRemove = options.rows || 1;\r\n        const rowCount = this.getRows(table);\r\n        const first = options.at;\r\n        const last = first + rowsToRemove - 1;\r\n        if (last > rowCount - 1) {\r\n            /**\r\n             * The `options.at` param must point at existing row and `options.rows` must not exceed the rows in the table.\r\n             *\r\n             * @error tableutils-removerows-row-index-out-of-range\r\n             */\r\n            throw new CKEditorError('tableutils-removerows-row-index-out-of-range', this, { table, options });\r\n        }\r\n        model.change(writer => {\r\n            const indexesObject = { first, last };\r\n            // Removing rows from the table require that most calculations to be done prior to changing table structure.\r\n            // Preparations must be done in the same enqueueChange callback to use the current table structure.\r\n            // 1. Preparation - get row-spanned cells that have to be modified after removing rows.\r\n            const { cellsToMove, cellsToTrim } = getCellsToMoveAndTrimOnRemoveRow(table, indexesObject);\r\n            // 2. Execution\r\n            // 2a. Move cells from removed rows that extends over a removed section - must be done before removing rows.\r\n            // This will fill any gaps in a rows below that previously were empty because of row-spanned cells.\r\n            if (cellsToMove.size) {\r\n                const rowAfterRemovedSection = last + 1;\r\n                moveCellsToRow(table, rowAfterRemovedSection, cellsToMove, writer);\r\n            }\r\n            // 2b. Remove all required rows.\r\n            for (let i = last; i >= first; i--) {\r\n                writer.remove(table.getChild(i));\r\n            }\r\n            // 2c. Update cells from rows above that overlap removed section. Similar to step 2 but does not involve moving cells.\r\n            for (const { rowspan, cell } of cellsToTrim) {\r\n                updateNumericAttribute('rowspan', rowspan, cell, writer);\r\n            }\r\n            // 2d. Adjust heading rows if removed rows were in a heading section.\r\n            updateHeadingRows(table, indexesObject, writer);\r\n            // 2e. Remove empty columns (without anchored cells) if there are any.\r\n            if (!removeEmptyColumns(table, this)) {\r\n                // If there wasn't any empty columns then we still need to check if this wasn't called\r\n                // because of cleaning empty rows and we only removed one of them.\r\n                removeEmptyRows(table, this);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Removes columns from the given `table`.\r\n     *\r\n     * This method re-calculates the table geometry including the `colspan` attribute of table cells overlapping removed columns\r\n     * and table headings values.\r\n     *\r\n     * ```ts\r\n     * editor.plugins.get( 'TableUtils' ).removeColumns( table, { at: 1, columns: 2 } );\r\n     * ```\r\n     *\r\n     * Executing the above code in the context of the table on the left will transform its structure as presented on the right:\r\n     *\r\n     *    0   1   2   3   4                       0   1   2\r\n     *  ┌───────────────┬───┐                   ┌───────┬───┐\r\n     *  │ a             │ b │                   │ a     │ b │\r\n     *  │               ├───┤                   │       ├───┤\r\n     *  │               │ c │                   │       │ c │\r\n     *  ├───┬───┬───┬───┼───┤     will give:    ├───┬───┼───┤\r\n     *  │ d │ e │ f │ g │ h │                   │ d │ g │ h │\r\n     *  ├───┼───┼───┤   ├───┤                   ├───┤   ├───┤\r\n     *  │ i │ j │ k │   │ l │                   │ i │   │ l │\r\n     *  ├───┴───┴───┴───┴───┤                   ├───┴───┴───┤\r\n     *  │ m                 │                   │ m         │\r\n     *  └───────────────────┘                   └───────────┘\r\n     *        ^---- remove from here, `at` = 1, `columns` = 2\r\n     *\r\n     * @param options.at The row index at which the removing columns will start.\r\n     * @param options.columns The number of columns to remove.\r\n     */\r\n    removeColumns(table, options) {\r\n        const model = this.editor.model;\r\n        const first = options.at;\r\n        const columnsToRemove = options.columns || 1;\r\n        const last = options.at + columnsToRemove - 1;\r\n        model.change(writer => {\r\n            adjustHeadingColumns(table, { first, last }, writer);\r\n            for (let removedColumnIndex = last; removedColumnIndex >= first; removedColumnIndex--) {\r\n                for (const { cell, column, cellWidth } of [...new TableWalker(table)]) {\r\n                    // If colspaned cell overlaps removed column decrease its span.\r\n                    if (column <= removedColumnIndex && cellWidth > 1 && column + cellWidth > removedColumnIndex) {\r\n                        updateNumericAttribute('colspan', cellWidth - 1, cell, writer);\r\n                    }\r\n                    else if (column === removedColumnIndex) {\r\n                        // The cell in removed column has colspan of 1.\r\n                        writer.remove(cell);\r\n                    }\r\n                }\r\n            }\r\n            // Remove empty rows that could appear after removing columns.\r\n            if (!removeEmptyRows(table, this)) {\r\n                // If there wasn't any empty rows then we still need to check if this wasn't called\r\n                // because of cleaning empty columns and we only removed one of them.\r\n                removeEmptyColumns(table, this);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Divides a table cell vertically into several ones.\r\n     *\r\n     * The cell will be visually split into more cells by updating colspans of other cells in a column\r\n     * and inserting cells (columns) after that cell.\r\n     *\r\n     * In the table below, if cell \"a\" is split into 3 cells:\r\n     *\r\n     *  +---+---+---+\r\n     *  | a | b | c |\r\n     *  +---+---+---+\r\n     *  | d | e | f |\r\n     *  +---+---+---+\r\n     *\r\n     * it will result in the table below:\r\n     *\r\n     *  +---+---+---+---+---+\r\n     *  | a |   |   | b | c |\r\n     *  +---+---+---+---+---+\r\n     *  | d         | e | f |\r\n     *  +---+---+---+---+---+\r\n     *\r\n     * So cell \"d\" will get its `colspan` updated to `3` and 2 cells will be added (2 columns will be created).\r\n     *\r\n     * Splitting a cell that already has a `colspan` attribute set will distribute the cell `colspan` evenly and the remainder\r\n     * will be left to the original cell:\r\n     *\r\n     *  +---+---+---+\r\n     *  | a         |\r\n     *  +---+---+---+\r\n     *  | b | c | d |\r\n     *  +---+---+---+\r\n     *\r\n     * Splitting cell \"a\" with `colspan=3` into 2 cells will create 1 cell with a `colspan=a` and cell \"a\" that will have `colspan=2`:\r\n     *\r\n     *  +---+---+---+\r\n     *  | a     |   |\r\n     *  +---+---+---+\r\n     *  | b | c | d |\r\n     *  +---+---+---+\r\n     */\r\n    splitCellVertically(tableCell, numberOfCells = 2) {\r\n        const model = this.editor.model;\r\n        const tableRow = tableCell.parent;\r\n        const table = tableRow.parent;\r\n        const rowspan = parseInt(tableCell.getAttribute('rowspan') || '1');\r\n        const colspan = parseInt(tableCell.getAttribute('colspan') || '1');\r\n        model.change(writer => {\r\n            // First check - the cell spans over multiple rows so before doing anything else just split this cell.\r\n            if (colspan > 1) {\r\n                // Get spans of new (inserted) cells and span to update of split cell.\r\n                const { newCellsSpan, updatedSpan } = breakSpanEvenly(colspan, numberOfCells);\r\n                updateNumericAttribute('colspan', updatedSpan, tableCell, writer);\r\n                // Each inserted cell will have the same attributes:\r\n                const newCellsAttributes = {};\r\n                // Do not store default value in the model.\r\n                if (newCellsSpan > 1) {\r\n                    newCellsAttributes.colspan = newCellsSpan;\r\n                }\r\n                // Copy rowspan of split cell.\r\n                if (rowspan > 1) {\r\n                    newCellsAttributes.rowspan = rowspan;\r\n                }\r\n                const cellsToInsert = colspan > numberOfCells ? numberOfCells - 1 : colspan - 1;\r\n                createCells(cellsToInsert, writer, writer.createPositionAfter(tableCell), newCellsAttributes);\r\n            }\r\n            // Second check - the cell has colspan of 1 or we need to create more cells then the currently one spans over.\r\n            if (colspan < numberOfCells) {\r\n                const cellsToInsert = numberOfCells - colspan;\r\n                // First step: expand cells on the same column as split cell.\r\n                const tableMap = [...new TableWalker(table)];\r\n                // Get the column index of split cell.\r\n                const { column: splitCellColumn } = tableMap.find(({ cell }) => cell === tableCell);\r\n                // Find cells which needs to be expanded vertically - those on the same column or those that spans over split cell's column.\r\n                const cellsToUpdate = tableMap.filter(({ cell, cellWidth, column }) => {\r\n                    const isOnSameColumn = cell !== tableCell && column === splitCellColumn;\r\n                    const spansOverColumn = (column < splitCellColumn && column + cellWidth > splitCellColumn);\r\n                    return isOnSameColumn || spansOverColumn;\r\n                });\r\n                // Expand cells vertically.\r\n                for (const { cell, cellWidth } of cellsToUpdate) {\r\n                    writer.setAttribute('colspan', cellWidth + cellsToInsert, cell);\r\n                }\r\n                // Second step: create columns after split cell.\r\n                // Each inserted cell will have the same attributes:\r\n                const newCellsAttributes = {};\r\n                // Do not store default value in the model.\r\n                // Copy rowspan of split cell.\r\n                if (rowspan > 1) {\r\n                    newCellsAttributes.rowspan = rowspan;\r\n                }\r\n                createCells(cellsToInsert, writer, writer.createPositionAfter(tableCell), newCellsAttributes);\r\n                const headingColumns = table.getAttribute('headingColumns') || 0;\r\n                // Update heading section if split cell is in heading section.\r\n                if (headingColumns > splitCellColumn) {\r\n                    updateNumericAttribute('headingColumns', headingColumns + cellsToInsert, table, writer);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Divides a table cell horizontally into several ones.\r\n     *\r\n     * The cell will be visually split into more cells by updating rowspans of other cells in the row and inserting rows with a single cell\r\n     * below.\r\n     *\r\n     * If in the table below cell \"b\" is split into 3 cells:\r\n     *\r\n     *  +---+---+---+\r\n     *  | a | b | c |\r\n     *  +---+---+---+\r\n     *  | d | e | f |\r\n     *  +---+---+---+\r\n     *\r\n     * It will result in the table below:\r\n     *\r\n     *  +---+---+---+\r\n     *  | a | b | c |\r\n     *  +   +---+   +\r\n     *  |   |   |   |\r\n     *  +   +---+   +\r\n     *  |   |   |   |\r\n     *  +---+---+---+\r\n     *  | d | e | f |\r\n     *  +---+---+---+\r\n     *\r\n     * So cells \"a\" and \"b\" will get their `rowspan` updated to `3` and 2 rows with a single cell will be added.\r\n     *\r\n     * Splitting a cell that already has a `rowspan` attribute set will distribute the cell `rowspan` evenly and the remainder\r\n     * will be left to the original cell:\r\n     *\r\n     *  +---+---+---+\r\n     *  | a | b | c |\r\n     *  +   +---+---+\r\n     *  |   | d | e |\r\n     *  +   +---+---+\r\n     *  |   | f | g |\r\n     *  +   +---+---+\r\n     *  |   | h | i |\r\n     *  +---+---+---+\r\n     *\r\n     * Splitting cell \"a\" with `rowspan=4` into 3 cells will create 2 cells with a `rowspan=1` and cell \"a\" will have `rowspan=2`:\r\n     *\r\n     *  +---+---+---+\r\n     *  | a | b | c |\r\n     *  +   +---+---+\r\n     *  |   | d | e |\r\n     *  +---+---+---+\r\n     *  |   | f | g |\r\n     *  +---+---+---+\r\n     *  |   | h | i |\r\n     *  +---+---+---+\r\n     */\r\n    splitCellHorizontally(tableCell, numberOfCells = 2) {\r\n        const model = this.editor.model;\r\n        const tableRow = tableCell.parent;\r\n        const table = tableRow.parent;\r\n        const splitCellRow = table.getChildIndex(tableRow);\r\n        const rowspan = parseInt(tableCell.getAttribute('rowspan') || '1');\r\n        const colspan = parseInt(tableCell.getAttribute('colspan') || '1');\r\n        model.change(writer => {\r\n            // First check - the cell spans over multiple rows so before doing anything else just split this cell.\r\n            if (rowspan > 1) {\r\n                // Cache table map before updating table.\r\n                const tableMap = [...new TableWalker(table, {\r\n                        startRow: splitCellRow,\r\n                        endRow: splitCellRow + rowspan - 1,\r\n                        includeAllSlots: true\r\n                    })];\r\n                // Get spans of new (inserted) cells and span to update of split cell.\r\n                const { newCellsSpan, updatedSpan } = breakSpanEvenly(rowspan, numberOfCells);\r\n                updateNumericAttribute('rowspan', updatedSpan, tableCell, writer);\r\n                const { column: cellColumn } = tableMap.find(({ cell }) => cell === tableCell);\r\n                // Each inserted cell will have the same attributes:\r\n                const newCellsAttributes = {};\r\n                // Do not store default value in the model.\r\n                if (newCellsSpan > 1) {\r\n                    newCellsAttributes.rowspan = newCellsSpan;\r\n                }\r\n                // Copy colspan of split cell.\r\n                if (colspan > 1) {\r\n                    newCellsAttributes.colspan = colspan;\r\n                }\r\n                for (const tableSlot of tableMap) {\r\n                    const { column, row } = tableSlot;\r\n                    // As both newly created cells and the split cell might have rowspan,\r\n                    // the insertion of new cells must go to appropriate rows:\r\n                    //\r\n                    // 1. It's a row after split cell + it's height.\r\n                    const isAfterSplitCell = row >= splitCellRow + updatedSpan;\r\n                    // 2. Is on the same column.\r\n                    const isOnSameColumn = column === cellColumn;\r\n                    // 3. And it's row index is after previous cell height.\r\n                    const isInEvenlySplitRow = (row + splitCellRow + updatedSpan) % newCellsSpan === 0;\r\n                    if (isAfterSplitCell && isOnSameColumn && isInEvenlySplitRow) {\r\n                        createCells(1, writer, tableSlot.getPositionBefore(), newCellsAttributes);\r\n                    }\r\n                }\r\n            }\r\n            // Second check - the cell has rowspan of 1 or we need to create more cells than the current cell spans over.\r\n            if (rowspan < numberOfCells) {\r\n                // We already split the cell in check one so here we split to the remaining number of cells only.\r\n                const cellsToInsert = numberOfCells - rowspan;\r\n                // This check is needed since we need to check if there are any cells from previous rows than spans over this cell's row.\r\n                const tableMap = [...new TableWalker(table, { startRow: 0, endRow: splitCellRow })];\r\n                // First step: expand cells.\r\n                for (const { cell, cellHeight, row } of tableMap) {\r\n                    // Expand rowspan of cells that are either:\r\n                    // - on the same row as current cell,\r\n                    // - or are below split cell row and overlaps that row.\r\n                    if (cell !== tableCell && row + cellHeight > splitCellRow) {\r\n                        const rowspanToSet = cellHeight + cellsToInsert;\r\n                        writer.setAttribute('rowspan', rowspanToSet, cell);\r\n                    }\r\n                }\r\n                // Second step: create rows with single cell below split cell.\r\n                const newCellsAttributes = {};\r\n                // Copy colspan of split cell.\r\n                if (colspan > 1) {\r\n                    newCellsAttributes.colspan = colspan;\r\n                }\r\n                createEmptyRows(writer, table, splitCellRow + 1, cellsToInsert, 1, newCellsAttributes);\r\n                // Update heading section if split cell is in heading section.\r\n                const headingRows = table.getAttribute('headingRows') || 0;\r\n                if (headingRows > splitCellRow) {\r\n                    updateNumericAttribute('headingRows', headingRows + cellsToInsert, table, writer);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Returns the number of columns for a given table.\r\n     *\r\n     * ```ts\r\n     * editor.plugins.get( 'TableUtils' ).getColumns( table );\r\n     * ```\r\n     *\r\n     * @param table The table to analyze.\r\n     */\r\n    getColumns(table) {\r\n        // Analyze first row only as all the rows should have the same width.\r\n        // Using the first row without checking if it's a tableRow because we expect\r\n        // that table will have only tableRow model elements at the beginning.\r\n        const row = table.getChild(0);\r\n        return [...row.getChildren()].reduce((columns, row) => {\r\n            const columnWidth = parseInt(row.getAttribute('colspan') || '1');\r\n            return columns + columnWidth;\r\n        }, 0);\r\n    }\r\n    /**\r\n     * Returns the number of rows for a given table. Any other element present in the table model is omitted.\r\n     *\r\n     * ```ts\r\n     * editor.plugins.get( 'TableUtils' ).getRows( table );\r\n     * ```\r\n     *\r\n     * @param table The table to analyze.\r\n     */\r\n    getRows(table) {\r\n        // Rowspan not included due to #6427.\r\n        return Array.from(table.getChildren())\r\n            .reduce((rowCount, child) => child.is('element', 'tableRow') ? rowCount + 1 : rowCount, 0);\r\n    }\r\n    /**\r\n     * Creates an instance of the table walker.\r\n     *\r\n     * The table walker iterates internally by traversing the table from row index = 0 and column index = 0.\r\n     * It walks row by row and column by column in order to output values defined in the options.\r\n     * By default it will output only the locations that are occupied by a cell. To include also spanned rows and columns,\r\n     * pass the `includeAllSlots` option.\r\n     *\r\n     * @internal\r\n     * @param table A table over which the walker iterates.\r\n     * @param options An object with configuration.\r\n     */\r\n    createTableWalker(table, options = {}) {\r\n        return new TableWalker(table, options);\r\n    }\r\n    /**\r\n     * Returns all model table cells that are fully selected (from the outside)\r\n     * within the provided model selection's ranges.\r\n     *\r\n     * To obtain the cells selected from the inside, use\r\n     * {@link #getTableCellsContainingSelection}.\r\n     */\r\n    getSelectedTableCells(selection) {\r\n        const cells = [];\r\n        for (const range of this.sortRanges(selection.getRanges())) {\r\n            const element = range.getContainedElement();\r\n            if (element && element.is('element', 'tableCell')) {\r\n                cells.push(element);\r\n            }\r\n        }\r\n        return cells;\r\n    }\r\n    /**\r\n     * Returns all model table cells that the provided model selection's ranges\r\n     * {@link module:engine/model/range~Range#start} inside.\r\n     *\r\n     * To obtain the cells selected from the outside, use\r\n     * {@link #getSelectedTableCells}.\r\n     */\r\n    getTableCellsContainingSelection(selection) {\r\n        const cells = [];\r\n        for (const range of selection.getRanges()) {\r\n            const cellWithSelection = range.start.findAncestor('tableCell');\r\n            if (cellWithSelection) {\r\n                cells.push(cellWithSelection);\r\n            }\r\n        }\r\n        return cells;\r\n    }\r\n    /**\r\n     * Returns all model table cells that are either completely selected\r\n     * by selection ranges or host selection range\r\n     * {@link module:engine/model/range~Range#start start positions} inside them.\r\n     *\r\n     * Combines {@link #getTableCellsContainingSelection} and\r\n     * {@link #getSelectedTableCells}.\r\n     */\r\n    getSelectionAffectedTableCells(selection) {\r\n        const selectedCells = this.getSelectedTableCells(selection);\r\n        if (selectedCells.length) {\r\n            return selectedCells;\r\n        }\r\n        return this.getTableCellsContainingSelection(selection);\r\n    }\r\n    /**\r\n     * Returns an object with the `first` and `last` row index contained in the given `tableCells`.\r\n     *\r\n     * ```ts\r\n     * const selectedTableCells = getSelectedTableCells( editor.model.document.selection );\r\n     *\r\n     * const { first, last } = getRowIndexes( selectedTableCells );\r\n     *\r\n     * console.log( `Selected rows: ${ first } to ${ last }` );\r\n     * ```\r\n     *\r\n     * @returns Returns an object with the `first` and `last` table row indexes.\r\n     */\r\n    getRowIndexes(tableCells) {\r\n        const indexes = tableCells.map(cell => cell.parent.index);\r\n        return this._getFirstLastIndexesObject(indexes);\r\n    }\r\n    /**\r\n     * Returns an object with the `first` and `last` column index contained in the given `tableCells`.\r\n     *\r\n     * ```ts\r\n     * const selectedTableCells = getSelectedTableCells( editor.model.document.selection );\r\n     *\r\n     * const { first, last } = getColumnIndexes( selectedTableCells );\r\n     *\r\n     * console.log( `Selected columns: ${ first } to ${ last }` );\r\n     * ```\r\n     *\r\n     * @returns Returns an object with the `first` and `last` table column indexes.\r\n     */\r\n    getColumnIndexes(tableCells) {\r\n        const table = tableCells[0].findAncestor('table');\r\n        const tableMap = [...new TableWalker(table)];\r\n        const indexes = tableMap\r\n            .filter(entry => tableCells.includes(entry.cell))\r\n            .map(entry => entry.column);\r\n        return this._getFirstLastIndexesObject(indexes);\r\n    }\r\n    /**\r\n     * Checks if the selection contains cells that do not exceed rectangular selection.\r\n     *\r\n     * In a table below:\r\n     *\r\n     *  ┌───┬───┬───┬───┐\r\n     *  │ a │ b │ c │ d │\r\n     *  ├───┴───┼───┤   │\r\n     *  │ e     │ f │   │\r\n     *  │       ├───┼───┤\r\n     *  │       │ g │ h │\r\n     *  └───────┴───┴───┘\r\n     *\r\n     * Valid selections are these which create a solid rectangle (without gaps), such as:\r\n     *   - a, b (two horizontal cells)\r\n     *   - c, f (two vertical cells)\r\n     *   - a, b, e (cell \"e\" spans over four cells)\r\n     *   - c, d, f (cell d spans over a cell in the row below)\r\n     *\r\n     * While an invalid selection would be:\r\n     *   - a, c (the unselected cell \"b\" creates a gap)\r\n     *   - f, g, h (cell \"d\" spans over a cell from the row of \"f\" cell - thus creates a gap)\r\n     */\r\n    isSelectionRectangular(selectedTableCells) {\r\n        if (selectedTableCells.length < 2 || !this._areCellInTheSameTableSection(selectedTableCells)) {\r\n            return false;\r\n        }\r\n        // A valid selection is a fully occupied rectangle composed of table cells.\r\n        // Below we will calculate the area of a selected table cells and the area of valid selection.\r\n        // The area of a valid selection is defined by top-left and bottom-right cells.\r\n        const rows = new Set();\r\n        const columns = new Set();\r\n        let areaOfSelectedCells = 0;\r\n        for (const tableCell of selectedTableCells) {\r\n            const { row, column } = this.getCellLocation(tableCell);\r\n            const rowspan = parseInt(tableCell.getAttribute('rowspan')) || 1;\r\n            const colspan = parseInt(tableCell.getAttribute('colspan')) || 1;\r\n            // Record row & column indexes of current cell.\r\n            rows.add(row);\r\n            columns.add(column);\r\n            // For cells that spans over multiple rows add also the last row that this cell spans over.\r\n            if (rowspan > 1) {\r\n                rows.add(row + rowspan - 1);\r\n            }\r\n            // For cells that spans over multiple columns add also the last column that this cell spans over.\r\n            if (colspan > 1) {\r\n                columns.add(column + colspan - 1);\r\n            }\r\n            areaOfSelectedCells += (rowspan * colspan);\r\n        }\r\n        // We can only merge table cells that are in adjacent rows...\r\n        const areaOfValidSelection = getBiggestRectangleArea(rows, columns);\r\n        return areaOfValidSelection == areaOfSelectedCells;\r\n    }\r\n    /**\r\n     * Returns array of sorted ranges.\r\n     */\r\n    sortRanges(ranges) {\r\n        return Array.from(ranges).sort(compareRangeOrder);\r\n    }\r\n    /**\r\n     * Helper method to get an object with `first` and `last` indexes from an unsorted array of indexes.\r\n     */\r\n    _getFirstLastIndexesObject(indexes) {\r\n        const allIndexesSorted = indexes.sort((indexA, indexB) => indexA - indexB);\r\n        const first = allIndexesSorted[0];\r\n        const last = allIndexesSorted[allIndexesSorted.length - 1];\r\n        return { first, last };\r\n    }\r\n    /**\r\n     * Checks if the selection does not mix a header (column or row) with other cells.\r\n     *\r\n     * For instance, in the table below valid selections consist of cells with the same letter only.\r\n     * So, a-a (same heading row and column) or d-d (body cells) are valid while c-d or a-b are not.\r\n     *\r\n     * header columns\r\n     *    ↓   ↓\r\n     *  ┌───┬───┬───┬───┐\r\n     *  │ a │ a │ b │ b │  ← header row\r\n     *  ├───┼───┼───┼───┤\r\n     *  │ c │ c │ d │ d │\r\n     *  ├───┼───┼───┼───┤\r\n     *  │ c │ c │ d │ d │\r\n     *  └───┴───┴───┴───┘\r\n     */\r\n    _areCellInTheSameTableSection(tableCells) {\r\n        const table = tableCells[0].findAncestor('table');\r\n        const rowIndexes = this.getRowIndexes(tableCells);\r\n        const headingRows = parseInt(table.getAttribute('headingRows')) || 0;\r\n        // Calculating row indexes is a bit cheaper so if this check fails we can't merge.\r\n        if (!this._areIndexesInSameSection(rowIndexes, headingRows)) {\r\n            return false;\r\n        }\r\n        const columnIndexes = this.getColumnIndexes(tableCells);\r\n        const headingColumns = parseInt(table.getAttribute('headingColumns')) || 0;\r\n        // Similarly cells must be in same column section.\r\n        return this._areIndexesInSameSection(columnIndexes, headingColumns);\r\n    }\r\n    /**\r\n     * Unified check if table rows/columns indexes are in the same heading/body section.\r\n     */\r\n    _areIndexesInSameSection({ first, last }, headingSectionSize) {\r\n        const firstCellIsInHeading = first < headingSectionSize;\r\n        const lastCellIsInHeading = last < headingSectionSize;\r\n        return firstCellIsInHeading === lastCellIsInHeading;\r\n    }\r\n}\r\n/**\r\n * Creates empty rows at the given index in an existing table.\r\n *\r\n * @param insertAt The row index of row insertion.\r\n * @param rows The number of rows to create.\r\n * @param tableCellToInsert The number of cells to insert in each row.\r\n */\r\nfunction createEmptyRows(writer, table, insertAt, rows, tableCellToInsert, attributes = {}) {\r\n    for (let i = 0; i < rows; i++) {\r\n        const tableRow = writer.createElement('tableRow');\r\n        writer.insert(tableRow, table, insertAt);\r\n        createCells(tableCellToInsert, writer, writer.createPositionAt(tableRow, 'end'), attributes);\r\n    }\r\n}\r\n/**\r\n * Creates cells at a given position.\r\n *\r\n * @param cells The number of cells to create\r\n */\r\nfunction createCells(cells, writer, insertPosition, attributes = {}) {\r\n    for (let i = 0; i < cells; i++) {\r\n        createEmptyTableCell(writer, insertPosition, attributes);\r\n    }\r\n}\r\n/**\r\n * Evenly distributes the span of a cell to a number of provided cells.\r\n * The resulting spans will always be integer values.\r\n *\r\n * For instance breaking a span of 7 into 3 cells will return:\r\n *\r\n * ```ts\r\n * { newCellsSpan: 2, updatedSpan: 3 }\r\n * ```\r\n *\r\n * as two cells will have a span of 2 and the remainder will go the first cell so its span will change to 3.\r\n *\r\n * @param span The span value do break.\r\n * @param numberOfCells The number of resulting spans.\r\n */\r\nfunction breakSpanEvenly(span, numberOfCells) {\r\n    if (span < numberOfCells) {\r\n        return { newCellsSpan: 1, updatedSpan: 1 };\r\n    }\r\n    const newCellsSpan = Math.floor(span / numberOfCells);\r\n    const updatedSpan = (span - newCellsSpan * numberOfCells) + newCellsSpan;\r\n    return { newCellsSpan, updatedSpan };\r\n}\r\n/**\r\n * Updates heading columns attribute if removing a row from head section.\r\n */\r\nfunction adjustHeadingColumns(table, removedColumnIndexes, writer) {\r\n    const headingColumns = table.getAttribute('headingColumns') || 0;\r\n    if (headingColumns && removedColumnIndexes.first < headingColumns) {\r\n        const headingsRemoved = Math.min(headingColumns - 1 /* Other numbers are 0-based */, removedColumnIndexes.last) -\r\n            removedColumnIndexes.first + 1;\r\n        writer.setAttribute('headingColumns', headingColumns - headingsRemoved, table);\r\n    }\r\n}\r\n/**\r\n * Calculates a new heading rows value for removing rows from heading section.\r\n */\r\nfunction updateHeadingRows(table, { first, last }, writer) {\r\n    const headingRows = table.getAttribute('headingRows') || 0;\r\n    if (first < headingRows) {\r\n        const newRows = last < headingRows ? headingRows - (last - first + 1) : first;\r\n        updateNumericAttribute('headingRows', newRows, table, writer, 0);\r\n    }\r\n}\r\n/**\r\n * Finds cells that will be:\r\n * - trimmed - Cells that are \"above\" removed rows sections and overlap the removed section - their rowspan must be trimmed.\r\n * - moved - Cells from removed rows section might stick out of. These cells are moved to the next row after a removed section.\r\n *\r\n * Sample table with overlapping & sticking out cells:\r\n *\r\n *      +----+----+----+----+----+\r\n *      | 00 | 01 | 02 | 03 | 04 |\r\n *      +----+    +    +    +    +\r\n *      | 10 |    |    |    |    |\r\n *      +----+----+    +    +    +\r\n *      | 20 | 21 |    |    |    | <-- removed row\r\n *      +    +    +----+    +    +\r\n *      |    |    | 32 |    |    | <-- removed row\r\n *      +----+    +    +----+    +\r\n *      | 40 |    |    | 43 |    |\r\n *      +----+----+----+----+----+\r\n *\r\n * In a table above:\r\n * - cells to trim: '02', '03' & '04'.\r\n * - cells to move: '21' & '32'.\r\n */\r\nfunction getCellsToMoveAndTrimOnRemoveRow(table, { first, last }) {\r\n    const cellsToMove = new Map();\r\n    const cellsToTrim = [];\r\n    for (const { row, column, cellHeight, cell } of new TableWalker(table, { endRow: last })) {\r\n        const lastRowOfCell = row + cellHeight - 1;\r\n        const isCellStickingOutFromRemovedRows = row >= first && row <= last && lastRowOfCell > last;\r\n        if (isCellStickingOutFromRemovedRows) {\r\n            const rowspanInRemovedSection = last - row + 1;\r\n            const rowSpanToSet = cellHeight - rowspanInRemovedSection;\r\n            cellsToMove.set(column, {\r\n                cell,\r\n                rowspan: rowSpanToSet\r\n            });\r\n        }\r\n        const isCellOverlappingRemovedRows = row < first && lastRowOfCell >= first;\r\n        if (isCellOverlappingRemovedRows) {\r\n            let rowspanAdjustment;\r\n            // Cell fully covers removed section - trim it by removed rows count.\r\n            if (lastRowOfCell >= last) {\r\n                rowspanAdjustment = last - first + 1;\r\n            }\r\n            // Cell partially overlaps removed section - calculate cell's span that is in removed section.\r\n            else {\r\n                rowspanAdjustment = lastRowOfCell - first + 1;\r\n            }\r\n            cellsToTrim.push({\r\n                cell,\r\n                rowspan: cellHeight - rowspanAdjustment\r\n            });\r\n        }\r\n    }\r\n    return { cellsToMove, cellsToTrim };\r\n}\r\nfunction moveCellsToRow(table, targetRowIndex, cellsToMove, writer) {\r\n    const tableWalker = new TableWalker(table, {\r\n        includeAllSlots: true,\r\n        row: targetRowIndex\r\n    });\r\n    const tableRowMap = [...tableWalker];\r\n    const row = table.getChild(targetRowIndex);\r\n    let previousCell;\r\n    for (const { column, cell, isAnchor } of tableRowMap) {\r\n        if (cellsToMove.has(column)) {\r\n            const { cell: cellToMove, rowspan } = cellsToMove.get(column);\r\n            const targetPosition = previousCell ?\r\n                writer.createPositionAfter(previousCell) :\r\n                writer.createPositionAt(row, 0);\r\n            writer.move(writer.createRangeOn(cellToMove), targetPosition);\r\n            updateNumericAttribute('rowspan', rowspan, cellToMove, writer);\r\n            previousCell = cellToMove;\r\n        }\r\n        else if (isAnchor) {\r\n            // If cell is spanned then `cell` holds reference to overlapping cell. See ckeditor/ckeditor5#6502.\r\n            previousCell = cell;\r\n        }\r\n    }\r\n}\r\nfunction compareRangeOrder(rangeA, rangeB) {\r\n    // Since table cell ranges are disjoint, it's enough to check their start positions.\r\n    const posA = rangeA.start;\r\n    const posB = rangeB.start;\r\n    // Checking for equal position (returning 0) is not needed because this would be either:\r\n    // a. Intersecting range (not allowed by model)\r\n    // b. Collapsed range on the same position (allowed by model but should not happen).\r\n    return posA.isBefore(posB) ? -1 : 1;\r\n}\r\n/**\r\n * Calculates the area of a maximum rectangle that can span over the provided row & column indexes.\r\n */\r\nfunction getBiggestRectangleArea(rows, columns) {\r\n    const rowsIndexes = Array.from(rows.values());\r\n    const columnIndexes = Array.from(columns.values());\r\n    const lastRow = Math.max(...rowsIndexes);\r\n    const firstRow = Math.min(...rowsIndexes);\r\n    const lastColumn = Math.max(...columnIndexes);\r\n    const firstColumn = Math.min(...columnIndexes);\r\n    return (lastRow - firstRow + 1) * (lastColumn - firstColumn + 1);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport TableUtils from '../tableutils';\r\nimport { updateNumericAttribute } from '../utils/common';\r\nimport { removeEmptyRowsColumns } from '../utils/structure';\r\n/**\r\n * The merge cells command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'mergeTableCells'` editor command.\r\n *\r\n * For example, to merge selected table cells:\r\n *\r\n * ```ts\r\n * editor.execute( 'mergeTableCells' );\r\n * ```\r\n */\r\nexport default class MergeCellsCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const tableUtils = this.editor.plugins.get(TableUtils);\r\n        const selectedTableCells = tableUtils.getSelectedTableCells(this.editor.model.document.selection);\r\n        this.isEnabled = tableUtils.isSelectionRectangular(selectedTableCells);\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * @fires execute\r\n     */\r\n    execute() {\r\n        const model = this.editor.model;\r\n        const tableUtils = this.editor.plugins.get(TableUtils);\r\n        model.change(writer => {\r\n            const selectedTableCells = tableUtils.getSelectedTableCells(model.document.selection);\r\n            // All cells will be merged into the first one.\r\n            const firstTableCell = selectedTableCells.shift();\r\n            // Update target cell dimensions.\r\n            const { mergeWidth, mergeHeight } = getMergeDimensions(firstTableCell, selectedTableCells, tableUtils);\r\n            updateNumericAttribute('colspan', mergeWidth, firstTableCell, writer);\r\n            updateNumericAttribute('rowspan', mergeHeight, firstTableCell, writer);\r\n            for (const tableCell of selectedTableCells) {\r\n                mergeTableCells(tableCell, firstTableCell, writer);\r\n            }\r\n            const table = firstTableCell.findAncestor('table');\r\n            // Remove rows and columns that become empty (have no anchored cells).\r\n            removeEmptyRowsColumns(table, tableUtils);\r\n            writer.setSelection(firstTableCell, 'in');\r\n        });\r\n    }\r\n}\r\n/**\r\n *  Merges two table cells. It will ensure that after merging cells with empty paragraphs the resulting table cell will only have one\r\n * paragraph. If one of the merged table cells is empty, the merged table cell will have contents of the non-empty table cell.\r\n * If both are empty, the merged table cell will have only one empty paragraph.\r\n */\r\nfunction mergeTableCells(cellBeingMerged, targetCell, writer) {\r\n    if (!isEmpty(cellBeingMerged)) {\r\n        if (isEmpty(targetCell)) {\r\n            writer.remove(writer.createRangeIn(targetCell));\r\n        }\r\n        writer.move(writer.createRangeIn(cellBeingMerged), writer.createPositionAt(targetCell, 'end'));\r\n    }\r\n    // Remove merged table cell.\r\n    writer.remove(cellBeingMerged);\r\n}\r\n/**\r\n * Checks if the passed table cell contains an empty paragraph.\r\n */\r\nfunction isEmpty(tableCell) {\r\n    const firstTableChild = tableCell.getChild(0);\r\n    return tableCell.childCount == 1 && firstTableChild.is('element', 'paragraph') && firstTableChild.isEmpty;\r\n}\r\nfunction getMergeDimensions(firstTableCell, selectedTableCells, tableUtils) {\r\n    let maxWidthOffset = 0;\r\n    let maxHeightOffset = 0;\r\n    for (const tableCell of selectedTableCells) {\r\n        const { row, column } = tableUtils.getCellLocation(tableCell);\r\n        maxWidthOffset = getMaxOffset(tableCell, column, maxWidthOffset, 'colspan');\r\n        maxHeightOffset = getMaxOffset(tableCell, row, maxHeightOffset, 'rowspan');\r\n    }\r\n    // Update table cell span attribute and merge set selection on a merged contents.\r\n    const { row: firstCellRow, column: firstCellColumn } = tableUtils.getCellLocation(firstTableCell);\r\n    const mergeWidth = maxWidthOffset - firstCellColumn;\r\n    const mergeHeight = maxHeightOffset - firstCellRow;\r\n    return { mergeWidth, mergeHeight };\r\n}\r\nfunction getMaxOffset(tableCell, start, currentMaxOffset, which) {\r\n    const dimensionValue = parseInt(tableCell.getAttribute(which) || '1');\r\n    return Math.max(currentMaxOffset, start + dimensionValue);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/selectrowcommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\n/**\r\n * The select row command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'selectTableRow'` editor command.\r\n *\r\n * To select the rows containing the selected cells, execute the command:\r\n *\r\n * ```ts\r\n * editor.execute( 'selectTableRow' );\r\n * ```\r\n */\r\nexport default class SelectRowCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        // It does not affect data so should be enabled in read-only mode.\r\n        this.affectsData = false;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(this.editor.model.document.selection);\r\n        this.isEnabled = selectedCells.length > 0;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute() {\r\n        const model = this.editor.model;\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const referenceCells = tableUtils.getSelectionAffectedTableCells(model.document.selection);\r\n        const rowIndexes = tableUtils.getRowIndexes(referenceCells);\r\n        const table = referenceCells[0].findAncestor('table');\r\n        const rangesToSelect = [];\r\n        for (let rowIndex = rowIndexes.first; rowIndex <= rowIndexes.last; rowIndex++) {\r\n            for (const cell of table.getChild(rowIndex).getChildren()) {\r\n                rangesToSelect.push(model.createRangeOn(cell));\r\n            }\r\n        }\r\n        model.change(writer => {\r\n            writer.setSelection(rangesToSelect);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/commands/selectcolumncommand\r\n */\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport TableWalker from '../tablewalker';\r\n/**\r\n * The select column command.\r\n *\r\n * The command is registered by {@link module:table/tableediting~TableEditing} as the `'selectTableColumn'` editor command.\r\n *\r\n * To select the columns containing the selected cells, execute the command:\r\n *\r\n * ```ts\r\n * editor.execute( 'selectTableColumn' );\r\n * ```\r\n */\r\nexport default class SelectColumnCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        // It does not affect data so should be enabled in read-only mode.\r\n        this.affectsData = false;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const selectedCells = tableUtils.getSelectionAffectedTableCells(this.editor.model.document.selection);\r\n        this.isEnabled = selectedCells.length > 0;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    execute() {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const model = this.editor.model;\r\n        const referenceCells = tableUtils.getSelectionAffectedTableCells(model.document.selection);\r\n        const firstCell = referenceCells[0];\r\n        const lastCell = referenceCells.pop();\r\n        const table = firstCell.findAncestor('table');\r\n        const startLocation = tableUtils.getCellLocation(firstCell);\r\n        const endLocation = tableUtils.getCellLocation(lastCell);\r\n        const startColumn = Math.min(startLocation.column, endLocation.column);\r\n        const endColumn = Math.max(startLocation.column, endLocation.column);\r\n        const rangesToSelect = [];\r\n        for (const cellInfo of new TableWalker(table, { startColumn, endColumn })) {\r\n            rangesToSelect.push(model.createRangeOn(cellInfo.cell));\r\n        }\r\n        model.change(writer => {\r\n            writer.setSelection(rangesToSelect);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport TableWalker from './../tablewalker';\r\nimport { createEmptyTableCell, updateNumericAttribute } from '../utils/common';\r\n/**\r\n * Injects a table layout post-fixer into the model.\r\n *\r\n * The role of the table layout post-fixer is to ensure that the table rows have the correct structure\r\n * after a {@link module:engine/model/model~Model#change `change()`} block was executed.\r\n *\r\n * The correct structure means that:\r\n *\r\n * * All table rows have the same size.\r\n * * None of the table cells extend vertically beyond their section (either header or body).\r\n * * A table cell has always at least one element as a child.\r\n *\r\n * If the table structure is not correct, the post-fixer will automatically correct it in two steps:\r\n *\r\n * 1. It will clip table cells that extend beyond their section.\r\n * 2. It will add empty table cells to the rows that are narrower than the widest table row.\r\n *\r\n * ## Clipping overlapping table cells\r\n *\r\n * Such situation may occur when pasting a table (or a part of a table) to the editor from external sources.\r\n *\r\n * For example, see the following table which has a cell (FOO) with the rowspan attribute (2):\r\n *\r\n * ```xml\r\n * <table headingRows=\"1\">\r\n *   <tableRow>\r\n *     <tableCell rowspan=\"2\"><paragraph>FOO</paragraph></tableCell>\r\n *     <tableCell colspan=\"2\"><paragraph>BAR</paragraph></tableCell>\r\n *   </tableRow>\r\n *   <tableRow>\r\n *     <tableCell><paragraph>BAZ</paragraph></tableCell>\r\n *     <tableCell><paragraph>XYZ</paragraph></tableCell>\r\n *   </tableRow>\r\n * </table>\r\n * ```\r\n *\r\n * It will be rendered in the view as:\r\n *\r\n * ```xml\r\n * <table>\r\n *   <thead>\r\n *     <tr>\r\n *       <td rowspan=\"2\">FOO</td>\r\n *       <td colspan=\"2\">BAR</td>\r\n *     </tr>\r\n *   </thead>\r\n *   <tbody>\r\n *     <tr>\r\n *       <td>BAZ</td>\r\n *       <td>XYZ</td>\r\n *     </tr>\r\n *   </tbody>\r\n * </table>\r\n * ```\r\n *\r\n * In the above example the table will be rendered as a table with two rows: one in the header and second one in the body.\r\n * The table cell (FOO) cannot span over multiple rows as it would extend from the header to the body section.\r\n * The `rowspan` attribute must be changed to (1). The value (1) is the default value of the `rowspan` attribute\r\n * so the `rowspan` attribute will be removed from the model.\r\n *\r\n * The table cell with BAZ in the content will be in the first column of the table.\r\n *\r\n * ## Adding missing table cells\r\n *\r\n * The table post-fixer will insert empty table cells to equalize table row sizes (the number of columns).\r\n * The size of a table row is calculated by counting column spans of table cells, both horizontal (from the same row) and\r\n * vertical (from the rows above).\r\n *\r\n * In the above example, the table row in the body section of the table is narrower then the row from the header: it has two cells\r\n * with the default colspan (1). The header row has one cell with colspan (1) and the second with colspan (2).\r\n * The table cell (FOO) does not extend beyond the head section (and as such will be fixed in the first step of this post-fixer).\r\n * The post-fixer will add a missing table cell to the row in the body section of the table.\r\n *\r\n * The table from the above example will be fixed and rendered to the view as below:\r\n *\r\n * ```xml\r\n * <table>\r\n *   <thead>\r\n *     <tr>\r\n *       <td rowspan=\"2\">FOO</td>\r\n *       <td colspan=\"2\">BAR</td>\r\n *     </tr>\r\n *   </thead>\r\n *   <tbody>\r\n *     <tr>\r\n *       <td>BAZ</td>\r\n *       <td>XYZ</td>\r\n *     </tr>\r\n *   </tbody>\r\n * </table>\r\n * ```\r\n *\r\n * ## Collaboration and undo - Expectations vs post-fixer results\r\n *\r\n * The table post-fixer only ensures proper structure without a deeper analysis of the nature of the change. As such, it might lead\r\n * to a structure which was not intended by the user. In particular, it will also fix undo steps (in conjunction with collaboration)\r\n * in which the editor content might not return to the original state.\r\n *\r\n * This will usually happen when one or more users change the size of the table.\r\n *\r\n * As an example see the table below:\r\n *\r\n * ```xml\r\n * <table>\r\n *   <tbody>\r\n *     <tr>\r\n *       <td>11</td>\r\n *       <td>12</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>21</td>\r\n *       <td>22</td>\r\n *     </tr>\r\n *   </tbody>\r\n * </table>\r\n * ```\r\n *\r\n * and the user actions:\r\n *\r\n * 1. Both users have a table with two rows and two columns.\r\n * 2. User A adds a column at the end of the table. This will insert empty table cells to two rows.\r\n * 3. User B adds a row at the end of the table. This will insert a row with two empty table cells.\r\n * 4. Both users will have a table as below:\r\n *\r\n * ```xml\r\n * <table>\r\n *   <tbody>\r\n *     <tr>\r\n *       <td>11</td>\r\n *       <td>12</td>\r\n *       <td>(empty, inserted by A)</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>21</td>\r\n *       <td>22</td>\r\n *       <td>(empty, inserted by A)</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>(empty, inserted by B)</td>\r\n *       <td>(empty, inserted by B)</td>\r\n *     </tr>\r\n *   </tbody>\r\n * </table>\r\n * ```\r\n *\r\n * The last row is shorter then others so the table post-fixer will add an empty row to the last row:\r\n *\r\n * ```xml\r\n * <table>\r\n *   <tbody>\r\n *     <tr>\r\n *       <td>11</td>\r\n *       <td>12</td>\r\n *       <td>(empty, inserted by A)</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>21</td>\r\n *       <td>22</td>\r\n *       <td>(empty, inserted by A)</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>(empty, inserted by B)</td>\r\n *       <td>(empty, inserted by B)</td>\r\n *       <td>(empty, inserted by the post-fixer)</td>\r\n *     </tr>\r\n *   </tbody>\r\n * </table>\r\n * ```\r\n *\r\n * Unfortunately undo does not know the nature of the changes and depending on which user applies the post-fixer changes, undoing them\r\n * might lead to a broken table. If User B undoes inserting the column to the table, the undo engine will undo only the operations of\r\n * inserting empty cells to rows from the initial table state (row 1 and 2) but the cell in the post-fixed row will remain:\r\n *\r\n * ```xml\r\n * <table>\r\n *   <tbody>\r\n *     <tr>\r\n *       <td>11</td>\r\n *       <td>12</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>21</td>\r\n *       <td>22</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>(empty, inserted by B)</td>\r\n *       <td>(empty, inserted by B)</td>\r\n *       <td>(empty, inserted by a post-fixer)</td>\r\n *     </tr>\r\n *   </tbody>\r\n * </table>\r\n * ```\r\n *\r\n * After undo, the table post-fixer will detect that two rows are shorter than others and will fix the table to:\r\n *\r\n * ```xml\r\n * <table>\r\n *   <tbody>\r\n *     <tr>\r\n *       <td>11</td>\r\n *       <td>12</td>\r\n *       <td>(empty, inserted by a post-fixer after undo)</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>21</td>\r\n *       <td>22</td>\r\n *       <td>(empty, inserted by a post-fixer after undo)</td>\r\n *     </tr>\r\n *     <tr>\r\n *       <td>(empty, inserted by B)</td>\r\n *       <td>(empty, inserted by B)</td>\r\n *       <td>(empty, inserted by a post-fixer)</td>\r\n *     </tr>\r\n *   </tbody>\r\n * </table>\r\n * ```\r\n */\r\nexport default function injectTableLayoutPostFixer(model) {\r\n    model.document.registerPostFixer(writer => tableLayoutPostFixer(writer, model));\r\n}\r\n/**\r\n * The table layout post-fixer.\r\n */\r\nfunction tableLayoutPostFixer(writer, model) {\r\n    const changes = model.document.differ.getChanges();\r\n    let wasFixed = false;\r\n    // Do not analyze the same table more then once - may happen for multiple changes in the same table.\r\n    const analyzedTables = new Set();\r\n    for (const entry of changes) {\r\n        let table = null;\r\n        if (entry.type == 'insert' && entry.name == 'table') {\r\n            table = entry.position.nodeAfter;\r\n        }\r\n        // Fix table on adding/removing table cells and rows.\r\n        if ((entry.type == 'insert' || entry.type == 'remove') && (entry.name == 'tableRow' || entry.name == 'tableCell')) {\r\n            table = entry.position.findAncestor('table');\r\n        }\r\n        // Fix table on any table's attribute change - including attributes of table cells.\r\n        if (isTableAttributeEntry(entry)) {\r\n            table = entry.range.start.findAncestor('table');\r\n        }\r\n        if (table && !analyzedTables.has(table)) {\r\n            // Step 1: correct rowspans of table cells if necessary.\r\n            // The wasFixed flag should be true if any of tables in batch was fixed - might be more then one.\r\n            wasFixed = fixTableCellsRowspan(table, writer) || wasFixed;\r\n            // Step 2: fix table rows sizes.\r\n            wasFixed = fixTableRowsSizes(table, writer) || wasFixed;\r\n            analyzedTables.add(table);\r\n        }\r\n    }\r\n    return wasFixed;\r\n}\r\n/**\r\n * Fixes the invalid value of the `rowspan` attribute because a table cell cannot vertically extend beyond the table section it belongs to.\r\n *\r\n * @returns Returns `true` if the table was fixed.\r\n */\r\nfunction fixTableCellsRowspan(table, writer) {\r\n    let wasFixed = false;\r\n    const cellsToTrim = findCellsToTrim(table);\r\n    if (cellsToTrim.length) {\r\n        // @if CK_DEBUG_TABLE // console.log( `Post-fixing table: trimming cells row-spans (${ cellsToTrim.length }).` );\r\n        wasFixed = true;\r\n        for (const data of cellsToTrim) {\r\n            updateNumericAttribute('rowspan', data.rowspan, data.cell, writer, 1);\r\n        }\r\n    }\r\n    return wasFixed;\r\n}\r\n/**\r\n * Makes all table rows in a table the same size.\r\n *\r\n * @returns Returns `true` if the table was fixed.\r\n */\r\nfunction fixTableRowsSizes(table, writer) {\r\n    let wasFixed = false;\r\n    const childrenLengths = getChildrenLengths(table);\r\n    const rowsToRemove = [];\r\n    // Find empty rows.\r\n    for (const [rowIndex, size] of childrenLengths.entries()) {\r\n        // Ignore all non-row models.\r\n        if (!size && table.getChild(rowIndex).is('element', 'tableRow')) {\r\n            rowsToRemove.push(rowIndex);\r\n        }\r\n    }\r\n    // Remove empty rows.\r\n    if (rowsToRemove.length) {\r\n        // @if CK_DEBUG_TABLE // console.log( `Post-fixing table: remove empty rows (${ rowsToRemove.length }).` );\r\n        wasFixed = true;\r\n        for (const rowIndex of rowsToRemove.reverse()) {\r\n            writer.remove(table.getChild(rowIndex));\r\n            childrenLengths.splice(rowIndex, 1);\r\n        }\r\n    }\r\n    // Filter out everything that's not a table row.\r\n    const rowsLengths = childrenLengths.filter((row, rowIndex) => table.getChild(rowIndex).is('element', 'tableRow'));\r\n    // Verify if all the rows have the same number of columns.\r\n    const tableSize = rowsLengths[0];\r\n    const isValid = rowsLengths.every(length => length === tableSize);\r\n    if (!isValid) {\r\n        // @if CK_DEBUG_TABLE // console.log( 'Post-fixing table: adding missing cells.' );\r\n        // Find the maximum number of columns.\r\n        const maxColumns = rowsLengths.reduce((prev, current) => current > prev ? current : prev, 0);\r\n        for (const [rowIndex, size] of rowsLengths.entries()) {\r\n            const columnsToInsert = maxColumns - size;\r\n            if (columnsToInsert) {\r\n                for (let i = 0; i < columnsToInsert; i++) {\r\n                    createEmptyTableCell(writer, writer.createPositionAt(table.getChild(rowIndex), 'end'));\r\n                }\r\n                wasFixed = true;\r\n            }\r\n        }\r\n    }\r\n    return wasFixed;\r\n}\r\n/**\r\n * Searches for table cells that extend beyond the table section to which they belong to. It will return an array of objects\r\n * that stores table cells to be trimmed and the correct value of the `rowspan` attribute to set.\r\n */\r\nfunction findCellsToTrim(table) {\r\n    const headingRows = parseInt(table.getAttribute('headingRows') || '0');\r\n    const maxRows = Array.from(table.getChildren())\r\n        .reduce((count, row) => row.is('element', 'tableRow') ? count + 1 : count, 0);\r\n    const cellsToTrim = [];\r\n    for (const { row, cell, cellHeight } of new TableWalker(table)) {\r\n        // Skip cells that do not expand over its row.\r\n        if (cellHeight < 2) {\r\n            continue;\r\n        }\r\n        const isInHeader = row < headingRows;\r\n        // Row limit is either end of header section or whole table as table body is after the header.\r\n        const rowLimit = isInHeader ? headingRows : maxRows;\r\n        // If table cell expands over its limit reduce it height to proper value.\r\n        if (row + cellHeight > rowLimit) {\r\n            const newRowspan = rowLimit - row;\r\n            cellsToTrim.push({ cell, rowspan: newRowspan });\r\n        }\r\n    }\r\n    return cellsToTrim;\r\n}\r\n/**\r\n * Returns an array with lengths of rows assigned to the corresponding row index.\r\n */\r\nfunction getChildrenLengths(table) {\r\n    // TableWalker will not provide items for the empty rows, we need to pre-fill this array.\r\n    const lengths = new Array(table.childCount).fill(0);\r\n    for (const { rowIndex } of new TableWalker(table, { includeAllSlots: true })) {\r\n        lengths[rowIndex]++;\r\n    }\r\n    return lengths;\r\n}\r\n/**\r\n * Checks if the differ entry for an attribute change is one of the table's attributes.\r\n */\r\nfunction isTableAttributeEntry(entry) {\r\n    if (entry.type !== 'attribute') {\r\n        return false;\r\n    }\r\n    const key = entry.attributeKey;\r\n    return key === 'headingRows' || key === 'colspan' || key === 'rowspan';\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Injects a table cell post-fixer into the model which inserts a `paragraph` element into empty table cells.\r\n *\r\n * A table cell must contain at least one block element as a child. An empty table cell will have an empty `paragraph` as a child.\r\n *\r\n * ```xml\r\n * <table>\r\n *   <tableRow>\r\n *      <tableCell></tableCell>\r\n *   </tableRow>\r\n * </table>\r\n * ```\r\n *\r\n * Will be fixed to:\r\n *\r\n * ```xml\r\n * <table>\r\n *   <tableRow>\r\n *      <tableCell><paragraph></paragraph></tableCell>\r\n *   </tableRow>\r\n * </table>\r\n * ```\r\n */\r\nexport default function injectTableCellParagraphPostFixer(model) {\r\n    model.document.registerPostFixer(writer => tableCellContentsPostFixer(writer, model));\r\n}\r\n/**\r\n * The table cell contents post-fixer.\r\n */\r\nfunction tableCellContentsPostFixer(writer, model) {\r\n    const changes = model.document.differ.getChanges();\r\n    let wasFixed = false;\r\n    for (const entry of changes) {\r\n        if (entry.type == 'insert' && entry.name == 'table') {\r\n            wasFixed = fixTable(entry.position.nodeAfter, writer) || wasFixed;\r\n        }\r\n        if (entry.type == 'insert' && entry.name == 'tableRow') {\r\n            wasFixed = fixTableRow(entry.position.nodeAfter, writer) || wasFixed;\r\n        }\r\n        if (entry.type == 'insert' && entry.name == 'tableCell') {\r\n            wasFixed = fixTableCellContent(entry.position.nodeAfter, writer) || wasFixed;\r\n        }\r\n        if ((entry.type == 'remove' || entry.type == 'insert') && checkTableCellChange(entry)) {\r\n            wasFixed = fixTableCellContent(entry.position.parent, writer) || wasFixed;\r\n        }\r\n    }\r\n    return wasFixed;\r\n}\r\n/**\r\n * Fixes all table cells in a table.\r\n */\r\nfunction fixTable(table, writer) {\r\n    let wasFixed = false;\r\n    for (const row of table.getChildren()) {\r\n        if (row.is('element', 'tableRow')) {\r\n            wasFixed = fixTableRow(row, writer) || wasFixed;\r\n        }\r\n    }\r\n    return wasFixed;\r\n}\r\n/**\r\n * Fixes all table cells in a table row.\r\n */\r\nfunction fixTableRow(tableRow, writer) {\r\n    let wasFixed = false;\r\n    for (const tableCell of tableRow.getChildren()) {\r\n        wasFixed = fixTableCellContent(tableCell, writer) || wasFixed;\r\n    }\r\n    return wasFixed;\r\n}\r\n/**\r\n * Fixes all table cell content by:\r\n * - Adding a paragraph to a table cell without any child.\r\n * - Wrapping direct $text in a `<paragraph>`.\r\n */\r\nfunction fixTableCellContent(tableCell, writer) {\r\n    // Insert paragraph to an empty table cell.\r\n    if (tableCell.childCount == 0) {\r\n        // @if CK_DEBUG_TABLE // console.log( 'Post-fixing table: insert paragraph in empty cell.' );\r\n        writer.insertElement('paragraph', tableCell);\r\n        return true;\r\n    }\r\n    // Check table cell children for directly placed text nodes.\r\n    // Temporary solution. See https://github.com/ckeditor/ckeditor5/issues/1464.\r\n    const textNodes = Array.from(tableCell.getChildren()).filter(child => child.is('$text'));\r\n    // @if CK_DEBUG_TABLE // textNodes.length && console.log( 'Post-fixing table: wrap cell content with paragraph.' );\r\n    for (const child of textNodes) {\r\n        writer.wrap(writer.createRangeOn(child), 'paragraph');\r\n    }\r\n    // Return true when there were text nodes to fix.\r\n    return !!textNodes.length;\r\n}\r\n/**\r\n * Checks if a differ change should fix the table cell. This happens on:\r\n * - Removing content from the table cell (i.e. `tableCell` can be left empty).\r\n * - Adding a text node directly into a table cell.\r\n */\r\nfunction checkTableCellChange(entry) {\r\n    if (!entry.position.parent.is('element', 'tableCell')) {\r\n        return false;\r\n    }\r\n    return entry.type == 'insert' && entry.name == '$text' || entry.type == 'remove';\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { isSingleParagraphWithoutAttributes } from './downcast';\r\n/**\r\n * A table cell refresh handler which marks the table cell in the differ to have it re-rendered.\r\n *\r\n * Model `paragraph` inside a table cell can be rendered as `<span>` or `<p>`. It is rendered as `<span>` if this is the only block\r\n * element in that table cell and it does not have any attributes. It is rendered as `<p>` otherwise.\r\n *\r\n * When table cell content changes, for example a second `paragraph` element is added, we need to ensure that the first `paragraph` is\r\n * re-rendered so it changes from `<span>` to `<p>`. The easiest way to do it is to re-render the entire table cell.\r\n */\r\nexport default function tableCellRefreshHandler(model, editing) {\r\n    const differ = model.document.differ;\r\n    // Stores cells to be refreshed, so the table cell will be refreshed once for multiple changes.\r\n    const cellsToCheck = new Set();\r\n    for (const change of differ.getChanges()) {\r\n        const parent = change.type == 'attribute' ? change.range.start.parent : change.position.parent;\r\n        if (parent.is('element', 'tableCell')) {\r\n            cellsToCheck.add(parent);\r\n        }\r\n    }\r\n    for (const tableCell of cellsToCheck.values()) {\r\n        const paragraphsToRefresh = Array.from(tableCell.getChildren())\r\n            .filter(child => shouldRefresh(child, editing.mapper));\r\n        for (const paragraph of paragraphsToRefresh) {\r\n            editing.reconvertItem(paragraph);\r\n        }\r\n    }\r\n}\r\n/**\r\n * Check if given model element needs refreshing.\r\n */\r\nfunction shouldRefresh(child, mapper) {\r\n    if (!child.is('element', 'paragraph')) {\r\n        return false;\r\n    }\r\n    const viewElement = mapper.toViewElement(child);\r\n    if (!viewElement) {\r\n        return false;\r\n    }\r\n    return isSingleParagraphWithoutAttributes(child) !== viewElement.is('element', 'span');\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./tableediting.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tableediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport upcastTable, { ensureParagraphInTableCell, skipEmptyTableRow, upcastTableFigure } from './converters/upcasttable';\r\nimport { convertParagraphInTableCell, downcastCell, downcastRow, downcastTable } from './converters/downcast';\r\nimport InsertTableCommand from './commands/inserttablecommand';\r\nimport InsertRowCommand from './commands/insertrowcommand';\r\nimport InsertColumnCommand from './commands/insertcolumncommand';\r\nimport SplitCellCommand from './commands/splitcellcommand';\r\nimport MergeCellCommand from './commands/mergecellcommand';\r\nimport RemoveRowCommand from './commands/removerowcommand';\r\nimport RemoveColumnCommand from './commands/removecolumncommand';\r\nimport SetHeaderRowCommand from './commands/setheaderrowcommand';\r\nimport SetHeaderColumnCommand from './commands/setheadercolumncommand';\r\nimport MergeCellsCommand from './commands/mergecellscommand';\r\nimport SelectRowCommand from './commands/selectrowcommand';\r\nimport SelectColumnCommand from './commands/selectcolumncommand';\r\nimport TableUtils from '../src/tableutils';\r\nimport injectTableLayoutPostFixer from './converters/table-layout-post-fixer';\r\nimport injectTableCellParagraphPostFixer from './converters/table-cell-paragraph-post-fixer';\r\nimport tableHeadingsRefreshHandler from './converters/table-headings-refresh-handler';\r\nimport tableCellRefreshHandler from './converters/table-cell-refresh-handler';\r\nimport '../theme/tableediting.css';\r\n/**\r\n * The table editing feature.\r\n */\r\nexport default class TableEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TableUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._additionalSlots = [];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const schema = model.schema;\r\n        const conversion = editor.conversion;\r\n        const tableUtils = editor.plugins.get(TableUtils);\r\n        schema.register('table', {\r\n            inheritAllFrom: '$blockObject',\r\n            allowAttributes: ['headingRows', 'headingColumns']\r\n        });\r\n        schema.register('tableRow', {\r\n            allowIn: 'table',\r\n            isLimit: true\r\n        });\r\n        schema.register('tableCell', {\r\n            allowContentOf: '$container',\r\n            allowIn: 'tableRow',\r\n            allowAttributes: ['colspan', 'rowspan'],\r\n            isLimit: true,\r\n            isSelectable: true\r\n        });\r\n        // Figure conversion.\r\n        conversion.for('upcast').add(upcastTableFigure());\r\n        // Table conversion.\r\n        conversion.for('upcast').add(upcastTable());\r\n        conversion.for('editingDowncast').elementToStructure({\r\n            model: {\r\n                name: 'table',\r\n                attributes: ['headingRows']\r\n            },\r\n            view: downcastTable(tableUtils, {\r\n                asWidget: true,\r\n                additionalSlots: this._additionalSlots\r\n            })\r\n        });\r\n        conversion.for('dataDowncast').elementToStructure({\r\n            model: {\r\n                name: 'table',\r\n                attributes: ['headingRows']\r\n            },\r\n            view: downcastTable(tableUtils, {\r\n                additionalSlots: this._additionalSlots\r\n            })\r\n        });\r\n        // Table row conversion.\r\n        conversion.for('upcast').elementToElement({ model: 'tableRow', view: 'tr' });\r\n        conversion.for('upcast').add(skipEmptyTableRow());\r\n        conversion.for('downcast').elementToElement({\r\n            model: 'tableRow',\r\n            view: downcastRow()\r\n        });\r\n        // Table cell conversion.\r\n        conversion.for('upcast').elementToElement({ model: 'tableCell', view: 'td' });\r\n        conversion.for('upcast').elementToElement({ model: 'tableCell', view: 'th' });\r\n        conversion.for('upcast').add(ensureParagraphInTableCell('td'));\r\n        conversion.for('upcast').add(ensureParagraphInTableCell('th'));\r\n        conversion.for('editingDowncast').elementToElement({\r\n            model: 'tableCell',\r\n            view: downcastCell({ asWidget: true })\r\n        });\r\n        conversion.for('dataDowncast').elementToElement({\r\n            model: 'tableCell',\r\n            view: downcastCell()\r\n        });\r\n        // Duplicates code - needed to properly refresh paragraph inside a table cell.\r\n        conversion.for('editingDowncast').elementToElement({\r\n            model: 'paragraph',\r\n            view: convertParagraphInTableCell({ asWidget: true }),\r\n            converterPriority: 'high'\r\n        });\r\n        conversion.for('dataDowncast').elementToElement({\r\n            model: 'paragraph',\r\n            view: convertParagraphInTableCell(),\r\n            converterPriority: 'high'\r\n        });\r\n        // Table attributes conversion.\r\n        conversion.for('downcast').attributeToAttribute({ model: 'colspan', view: 'colspan' });\r\n        conversion.for('upcast').attributeToAttribute({\r\n            model: { key: 'colspan', value: upcastCellSpan('colspan') },\r\n            view: 'colspan'\r\n        });\r\n        conversion.for('downcast').attributeToAttribute({ model: 'rowspan', view: 'rowspan' });\r\n        conversion.for('upcast').attributeToAttribute({\r\n            model: { key: 'rowspan', value: upcastCellSpan('rowspan') },\r\n            view: 'rowspan'\r\n        });\r\n        // Define the config.\r\n        editor.config.define('table.defaultHeadings.rows', 0);\r\n        editor.config.define('table.defaultHeadings.columns', 0);\r\n        // Define all the commands.\r\n        editor.commands.add('insertTable', new InsertTableCommand(editor));\r\n        editor.commands.add('insertTableRowAbove', new InsertRowCommand(editor, { order: 'above' }));\r\n        editor.commands.add('insertTableRowBelow', new InsertRowCommand(editor, { order: 'below' }));\r\n        editor.commands.add('insertTableColumnLeft', new InsertColumnCommand(editor, { order: 'left' }));\r\n        editor.commands.add('insertTableColumnRight', new InsertColumnCommand(editor, { order: 'right' }));\r\n        editor.commands.add('removeTableRow', new RemoveRowCommand(editor));\r\n        editor.commands.add('removeTableColumn', new RemoveColumnCommand(editor));\r\n        editor.commands.add('splitTableCellVertically', new SplitCellCommand(editor, { direction: 'vertically' }));\r\n        editor.commands.add('splitTableCellHorizontally', new SplitCellCommand(editor, { direction: 'horizontally' }));\r\n        editor.commands.add('mergeTableCells', new MergeCellsCommand(editor));\r\n        editor.commands.add('mergeTableCellRight', new MergeCellCommand(editor, { direction: 'right' }));\r\n        editor.commands.add('mergeTableCellLeft', new MergeCellCommand(editor, { direction: 'left' }));\r\n        editor.commands.add('mergeTableCellDown', new MergeCellCommand(editor, { direction: 'down' }));\r\n        editor.commands.add('mergeTableCellUp', new MergeCellCommand(editor, { direction: 'up' }));\r\n        editor.commands.add('setTableColumnHeader', new SetHeaderColumnCommand(editor));\r\n        editor.commands.add('setTableRowHeader', new SetHeaderRowCommand(editor));\r\n        editor.commands.add('selectTableRow', new SelectRowCommand(editor));\r\n        editor.commands.add('selectTableColumn', new SelectColumnCommand(editor));\r\n        injectTableLayoutPostFixer(model);\r\n        injectTableCellParagraphPostFixer(model);\r\n        this.listenTo(model.document, 'change:data', () => {\r\n            tableHeadingsRefreshHandler(model, editor.editing);\r\n            tableCellRefreshHandler(model, editor.editing);\r\n        });\r\n    }\r\n    /**\r\n     * Registers downcast handler for the additional table slot.\r\n     */\r\n    registerAdditionalSlot(slotHandler) {\r\n        this._additionalSlots.push(slotHandler);\r\n    }\r\n}\r\n/**\r\n * Returns fixed colspan and rowspan attrbutes values.\r\n *\r\n * @param type colspan or rowspan.\r\n * @returns conversion value function.\r\n */\r\nfunction upcastCellSpan(type) {\r\n    return (cell) => {\r\n        const span = parseInt(cell.getAttribute(type));\r\n        if (Number.isNaN(span) || span <= 0) {\r\n            return null;\r\n        }\r\n        return span;\r\n    };\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport TableWalker from '../tablewalker';\r\n/**\r\n * A table headings refresh handler which marks the table cells or rows in the differ to have it re-rendered\r\n * if the headings attribute changed.\r\n *\r\n * Table heading rows and heading columns are represented in the model by a `headingRows` and `headingColumns` attributes.\r\n *\r\n * When table headings attribute changes, all the cells/rows are marked to re-render to change between `<td>` and `<th>`.\r\n */\r\nexport default function tableHeadingsRefreshHandler(model, editing) {\r\n    const differ = model.document.differ;\r\n    for (const change of differ.getChanges()) {\r\n        let table;\r\n        let isRowChange = false;\r\n        if (change.type == 'attribute') {\r\n            const element = change.range.start.nodeAfter;\r\n            if (!element || !element.is('element', 'table')) {\r\n                continue;\r\n            }\r\n            if (change.attributeKey != 'headingRows' && change.attributeKey != 'headingColumns') {\r\n                continue;\r\n            }\r\n            table = element;\r\n            isRowChange = change.attributeKey == 'headingRows';\r\n        }\r\n        else if (change.name == 'tableRow' || change.name == 'tableCell') {\r\n            table = change.position.findAncestor('table');\r\n            isRowChange = change.name == 'tableRow';\r\n        }\r\n        if (!table) {\r\n            continue;\r\n        }\r\n        const headingRows = table.getAttribute('headingRows') || 0;\r\n        const headingColumns = table.getAttribute('headingColumns') || 0;\r\n        const tableWalker = new TableWalker(table);\r\n        for (const tableSlot of tableWalker) {\r\n            const isHeading = tableSlot.row < headingRows || tableSlot.column < headingColumns;\r\n            const expectedElementName = isHeading ? 'th' : 'td';\r\n            const viewElement = editing.mapper.toViewElement(tableSlot.cell);\r\n            if (viewElement && viewElement.is('element') && viewElement.name != expectedElementName) {\r\n                editing.reconvertItem((isRowChange ? tableSlot.cell.parent : tableSlot.cell));\r\n            }\r\n        }\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./inserttable.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/ui/inserttableview\r\n */\r\nimport { View, ButtonView, addKeyboardHandlingForGrid } from 'ckeditor5/src/ui';\r\nimport { KeystrokeHandler, FocusTracker } from 'ckeditor5/src/utils';\r\nimport './../../theme/inserttable.css';\r\n/**\r\n * The table size view.\r\n *\r\n * It renders a 10x10 grid to choose the inserted table size.\r\n */\r\nexport default class InsertTableView extends View {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(locale) {\r\n        super(locale);\r\n        const bind = this.bindTemplate;\r\n        this.items = this._createGridCollection();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this.focusTracker = new FocusTracker();\r\n        this.set('rows', 0);\r\n        this.set('columns', 0);\r\n        this.bind('label').to(this, 'columns', this, 'rows', (columns, rows) => `${rows} × ${columns}`);\r\n        this.setTemplate({\r\n            tag: 'div',\r\n            attributes: {\r\n                class: ['ck']\r\n            },\r\n            children: [\r\n                {\r\n                    tag: 'div',\r\n                    attributes: {\r\n                        class: ['ck-insert-table-dropdown__grid']\r\n                    },\r\n                    on: {\r\n                        'mouseover@.ck-insert-table-dropdown-grid-box': bind.to('boxover')\r\n                    },\r\n                    children: this.items\r\n                },\r\n                {\r\n                    tag: 'div',\r\n                    attributes: {\r\n                        class: [\r\n                            'ck',\r\n                            'ck-insert-table-dropdown__label'\r\n                        ],\r\n                        'aria-hidden': true\r\n                    },\r\n                    children: [\r\n                        {\r\n                            text: bind.to('label')\r\n                        }\r\n                    ]\r\n                }\r\n            ],\r\n            on: {\r\n                mousedown: bind.to(evt => {\r\n                    evt.preventDefault();\r\n                }),\r\n                click: bind.to(() => {\r\n                    this.fire('execute');\r\n                })\r\n            }\r\n        });\r\n        // #rows and #columns are set via changes to #focusTracker on mouse over.\r\n        this.on('boxover', (evt, domEvt) => {\r\n            const { row, column } = domEvt.target.dataset;\r\n            this.items.get((parseInt(row, 10) - 1) * 10 + (parseInt(column, 10) - 1)).focus();\r\n        });\r\n        // This allows the #rows and #columns to be updated when:\r\n        // * the user navigates the grid using the keyboard,\r\n        // * the user moves the mouse over grid items.\r\n        this.focusTracker.on('change:focusedElement', (evt, name, focusedElement) => {\r\n            if (!focusedElement) {\r\n                return;\r\n            }\r\n            const { row, column } = focusedElement.dataset;\r\n            // As row & column indexes are zero-based transform it to number of selected rows & columns.\r\n            this.set({\r\n                rows: parseInt(row),\r\n                columns: parseInt(column)\r\n            });\r\n        });\r\n        this.on('change:columns', () => this._highlightGridBoxes());\r\n        this.on('change:rows', () => this._highlightGridBoxes());\r\n    }\r\n    render() {\r\n        super.render();\r\n        addKeyboardHandlingForGrid({\r\n            keystrokeHandler: this.keystrokes,\r\n            focusTracker: this.focusTracker,\r\n            gridItems: this.items,\r\n            numberOfColumns: 10,\r\n            uiLanguageDirection: this.locale && this.locale.uiLanguageDirection\r\n        });\r\n        for (const item of this.items) {\r\n            this.focusTracker.add(item.element);\r\n        }\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    focus() {\r\n        this.items.get(0).focus();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    focusLast() {\r\n        this.items.get(0).focus();\r\n    }\r\n    /**\r\n     * Highlights grid boxes depending on rows and columns selected.\r\n     */\r\n    _highlightGridBoxes() {\r\n        const rows = this.rows;\r\n        const columns = this.columns;\r\n        this.items.map((boxView, index) => {\r\n            // Translate box index to the row & column index.\r\n            const itemRow = Math.floor(index / 10);\r\n            const itemColumn = index % 10;\r\n            // Grid box is highlighted when its row & column index belongs to selected number of rows & columns.\r\n            const isOn = itemRow < rows && itemColumn < columns;\r\n            boxView.set('isOn', isOn);\r\n        });\r\n    }\r\n    /**\r\n     * Creates a new Button for the grid.\r\n     *\r\n     * @param locale The locale instance.\r\n     * @param row Row number.\r\n     * @param column Column number.\r\n     * @param label The grid button label.\r\n     */\r\n    _createGridButton(locale, row, column, label) {\r\n        const button = new ButtonView(locale);\r\n        button.set({\r\n            label,\r\n            class: 'ck-insert-table-dropdown-grid-box'\r\n        });\r\n        button.extendTemplate({\r\n            attributes: {\r\n                'data-row': row,\r\n                'data-column': column\r\n            }\r\n        });\r\n        return button;\r\n    }\r\n    /**\r\n     * @returns A view collection containing boxes to be placed in a table grid.\r\n     */\r\n    _createGridCollection() {\r\n        const boxes = [];\r\n        // Add grid boxes to table selection view.\r\n        for (let index = 0; index < 100; index++) {\r\n            const row = Math.floor(index / 10);\r\n            const column = index % 10;\r\n            const label = `${row + 1} × ${column + 1}`;\r\n            boxes.push(this._createGridButton(this.locale, row + 1, column + 1, label));\r\n        }\r\n        return this.createCollection(boxes);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tableui\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { addListToDropdown, createDropdown, Model, SplitButtonView, SwitchButtonView } from 'ckeditor5/src/ui';\r\nimport { Collection } from 'ckeditor5/src/utils';\r\nimport InsertTableView from './ui/inserttableview';\r\nimport tableIcon from './../theme/icons/table.svg';\r\nimport tableColumnIcon from './../theme/icons/table-column.svg';\r\nimport tableRowIcon from './../theme/icons/table-row.svg';\r\nimport tableMergeCellIcon from './../theme/icons/table-merge-cell.svg';\r\n/**\r\n * The table UI plugin. It introduces:\r\n *\r\n * * The `'insertTable'` dropdown,\r\n * * The `'tableColumn'` dropdown,\r\n * * The `'tableRow'` dropdown,\r\n * * The `'mergeTableCells'` split button.\r\n *\r\n * The `'tableColumn'`, `'tableRow'` and `'mergeTableCells'` dropdowns work best with {@link module:table/tabletoolbar~TableToolbar}.\r\n */\r\nexport default class TableUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const t = this.editor.t;\r\n        const contentLanguageDirection = editor.locale.contentLanguageDirection;\r\n        const isContentLtr = contentLanguageDirection === 'ltr';\r\n        editor.ui.componentFactory.add('insertTable', locale => {\r\n            const command = editor.commands.get('insertTable');\r\n            const dropdownView = createDropdown(locale);\r\n            dropdownView.bind('isEnabled').to(command);\r\n            // Decorate dropdown's button.\r\n            dropdownView.buttonView.set({\r\n                icon: tableIcon,\r\n                label: t('Insert table'),\r\n                tooltip: true\r\n            });\r\n            let insertTableView;\r\n            dropdownView.on('change:isOpen', () => {\r\n                if (insertTableView) {\r\n                    return;\r\n                }\r\n                // Prepare custom view for dropdown's panel.\r\n                insertTableView = new InsertTableView(locale);\r\n                dropdownView.panelView.children.add(insertTableView);\r\n                insertTableView.delegate('execute').to(dropdownView);\r\n                dropdownView.on('execute', () => {\r\n                    editor.execute('insertTable', { rows: insertTableView.rows, columns: insertTableView.columns });\r\n                    editor.editing.view.focus();\r\n                });\r\n            });\r\n            return dropdownView;\r\n        });\r\n        editor.ui.componentFactory.add('tableColumn', locale => {\r\n            const options = [\r\n                {\r\n                    type: 'switchbutton',\r\n                    model: {\r\n                        commandName: 'setTableColumnHeader',\r\n                        label: t('Header column'),\r\n                        bindIsOn: true\r\n                    }\r\n                },\r\n                { type: 'separator' },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: isContentLtr ? 'insertTableColumnLeft' : 'insertTableColumnRight',\r\n                        label: t('Insert column left')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: isContentLtr ? 'insertTableColumnRight' : 'insertTableColumnLeft',\r\n                        label: t('Insert column right')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'removeTableColumn',\r\n                        label: t('Delete column')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'selectTableColumn',\r\n                        label: t('Select column')\r\n                    }\r\n                }\r\n            ];\r\n            return this._prepareDropdown(t('Column'), tableColumnIcon, options, locale);\r\n        });\r\n        editor.ui.componentFactory.add('tableRow', locale => {\r\n            const options = [\r\n                {\r\n                    type: 'switchbutton',\r\n                    model: {\r\n                        commandName: 'setTableRowHeader',\r\n                        label: t('Header row'),\r\n                        bindIsOn: true\r\n                    }\r\n                },\r\n                { type: 'separator' },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'insertTableRowAbove',\r\n                        label: t('Insert row above')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'insertTableRowBelow',\r\n                        label: t('Insert row below')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'removeTableRow',\r\n                        label: t('Delete row')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'selectTableRow',\r\n                        label: t('Select row')\r\n                    }\r\n                }\r\n            ];\r\n            return this._prepareDropdown(t('Row'), tableRowIcon, options, locale);\r\n        });\r\n        editor.ui.componentFactory.add('mergeTableCells', locale => {\r\n            const options = [\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'mergeTableCellUp',\r\n                        label: t('Merge cell up')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: isContentLtr ? 'mergeTableCellRight' : 'mergeTableCellLeft',\r\n                        label: t('Merge cell right')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'mergeTableCellDown',\r\n                        label: t('Merge cell down')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: isContentLtr ? 'mergeTableCellLeft' : 'mergeTableCellRight',\r\n                        label: t('Merge cell left')\r\n                    }\r\n                },\r\n                { type: 'separator' },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'splitTableCellVertically',\r\n                        label: t('Split cell vertically')\r\n                    }\r\n                },\r\n                {\r\n                    type: 'button',\r\n                    model: {\r\n                        commandName: 'splitTableCellHorizontally',\r\n                        label: t('Split cell horizontally')\r\n                    }\r\n                }\r\n            ];\r\n            return this._prepareMergeSplitButtonDropdown(t('Merge cells'), tableMergeCellIcon, options, locale);\r\n        });\r\n    }\r\n    /**\r\n     * Creates a dropdown view from a set of options.\r\n     *\r\n     * @param label The dropdown button label.\r\n     * @param icon An icon for the dropdown button.\r\n     * @param options The list of options for the dropdown.\r\n     */\r\n    _prepareDropdown(label, icon, options, locale) {\r\n        const editor = this.editor;\r\n        const dropdownView = createDropdown(locale);\r\n        const commands = this._fillDropdownWithListOptions(dropdownView, options);\r\n        // Decorate dropdown's button.\r\n        dropdownView.buttonView.set({\r\n            label,\r\n            icon,\r\n            tooltip: true\r\n        });\r\n        // Make dropdown button disabled when all options are disabled.\r\n        dropdownView.bind('isEnabled').toMany(commands, 'isEnabled', (...areEnabled) => {\r\n            return areEnabled.some(isEnabled => isEnabled);\r\n        });\r\n        this.listenTo(dropdownView, 'execute', evt => {\r\n            editor.execute(evt.source.commandName);\r\n            // Toggling a switch button view should not move the focus to the editable.\r\n            if (!(evt.source instanceof SwitchButtonView)) {\r\n                editor.editing.view.focus();\r\n            }\r\n        });\r\n        return dropdownView;\r\n    }\r\n    /**\r\n     * Creates a dropdown view with a {@link module:ui/dropdown/button/splitbuttonview~SplitButtonView} for\r\n     * merge (and split)–related commands.\r\n     *\r\n     * @param label The dropdown button label.\r\n     * @param icon An icon for the dropdown button.\r\n     * @param options The list of options for the dropdown.\r\n     */\r\n    _prepareMergeSplitButtonDropdown(label, icon, options, locale) {\r\n        const editor = this.editor;\r\n        const dropdownView = createDropdown(locale, SplitButtonView);\r\n        const mergeCommandName = 'mergeTableCells';\r\n        // Main command.\r\n        const mergeCommand = editor.commands.get(mergeCommandName);\r\n        // Subcommands in the dropdown.\r\n        const commands = this._fillDropdownWithListOptions(dropdownView, options);\r\n        dropdownView.buttonView.set({\r\n            label,\r\n            icon,\r\n            tooltip: true,\r\n            isEnabled: true\r\n        });\r\n        // Make dropdown button disabled when all options are disabled together with the main command.\r\n        dropdownView.bind('isEnabled').toMany([mergeCommand, ...commands], 'isEnabled', (...areEnabled) => {\r\n            return areEnabled.some(isEnabled => isEnabled);\r\n        });\r\n        // Merge selected table cells when the main part of the split button is clicked.\r\n        this.listenTo(dropdownView.buttonView, 'execute', () => {\r\n            editor.execute(mergeCommandName);\r\n            editor.editing.view.focus();\r\n        });\r\n        // Execute commands for events coming from the list in the dropdown panel.\r\n        this.listenTo(dropdownView, 'execute', evt => {\r\n            editor.execute(evt.source.commandName);\r\n            editor.editing.view.focus();\r\n        });\r\n        return dropdownView;\r\n    }\r\n    /**\r\n     * Injects a {@link module:ui/list/listview~ListView} into the passed dropdown with buttons\r\n     * which execute editor commands as configured in passed options.\r\n     *\r\n     * @param options The list of options for the dropdown.\r\n     * @returns Commands the list options are interacting with.\r\n     */\r\n    _fillDropdownWithListOptions(dropdownView, options) {\r\n        const editor = this.editor;\r\n        const commands = [];\r\n        const itemDefinitions = new Collection();\r\n        for (const option of options) {\r\n            addListOption(option, editor, commands, itemDefinitions);\r\n        }\r\n        addListToDropdown(dropdownView, itemDefinitions);\r\n        return commands;\r\n    }\r\n}\r\n/**\r\n * Adds an option to a list view.\r\n *\r\n * @param option A configuration option.\r\n * @param commands The list of commands to update.\r\n * @param itemDefinitions A collection of dropdown items to update with the given option.\r\n */\r\nfunction addListOption(option, editor, commands, itemDefinitions) {\r\n    if (option.type === 'button' || option.type === 'switchbutton') {\r\n        const model = option.model = new Model(option.model);\r\n        const { commandName, bindIsOn } = option.model;\r\n        const command = editor.commands.get(commandName);\r\n        commands.push(command);\r\n        model.set({ commandName });\r\n        model.bind('isEnabled').to(command);\r\n        if (bindIsOn) {\r\n            model.bind('isOn').to(command, 'value');\r\n        }\r\n        model.set({\r\n            withText: true\r\n        });\r\n    }\r\n    itemDefinitions.add(option);\r\n}\r\n","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\\\" opacity=\\\".6\\\"/><path d=\\\"M18 7v1H2V7h16zm0 5v1H2v-1h16z\\\" opacity=\\\".6\\\"/><path d=\\\"M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\\\" opacity=\\\".6\\\"/><path d=\\\"M7 2h1v16H7V2zm5 0h1v16h-1V2z\\\" opacity=\\\".6\\\"/><path d=\\\"M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z\\\"/></svg>\";","export default \"<svg viewBox=\\\"0 0 20 20\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\\\" opacity=\\\".6\\\"/><path d=\\\"M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z\\\" opacity=\\\".6\\\"/><path d=\\\"M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z\\\"/></svg>\";","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./tableselection.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tableselection\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { first } from 'ckeditor5/src/utils';\r\nimport TableWalker from './tablewalker';\r\nimport TableUtils from './tableutils';\r\nimport { cropTableToDimensions, adjustLastRowIndex, adjustLastColumnIndex } from './utils/structure';\r\nimport '../theme/tableselection.css';\r\n/**\r\n * This plugin enables the advanced table cells, rows and columns selection.\r\n * It is loaded automatically by the {@link module:table/table~Table} plugin.\r\n */\r\nexport default class TableSelection extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableSelection';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TableUtils, TableUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const model = editor.model;\r\n        const view = editor.editing.view;\r\n        this.listenTo(model, 'deleteContent', (evt, args) => this._handleDeleteContent(evt, args), { priority: 'high' });\r\n        this.listenTo(view.document, 'insertText', (evt, data) => this._handleInsertTextEvent(evt, data), { priority: 'high' });\r\n        this._defineSelectionConverter();\r\n        this._enablePluginDisabling(); // sic!\r\n    }\r\n    /**\r\n     * Returns the currently selected table cells or `null` if it is not a table cells selection.\r\n     */\r\n    getSelectedTableCells() {\r\n        const tableUtils = this.editor.plugins.get(TableUtils);\r\n        const selection = this.editor.model.document.selection;\r\n        const selectedCells = tableUtils.getSelectedTableCells(selection);\r\n        if (selectedCells.length == 0) {\r\n            return null;\r\n        }\r\n        // This should never happen, but let's know if it ever happens.\r\n        // @if CK_DEBUG //\tif ( selectedCells.length != selection.rangeCount ) {\r\n        // @if CK_DEBUG //\t\tconsole.warn( 'Mixed selection warning. The selection contains table cells and some other ranges.' );\r\n        // @if CK_DEBUG //\t}\r\n        return selectedCells;\r\n    }\r\n    /**\r\n     * Returns the selected table fragment as a document fragment.\r\n     */\r\n    getSelectionAsFragment() {\r\n        const tableUtils = this.editor.plugins.get(TableUtils);\r\n        const selectedCells = this.getSelectedTableCells();\r\n        if (!selectedCells) {\r\n            return null;\r\n        }\r\n        return this.editor.model.change(writer => {\r\n            const documentFragment = writer.createDocumentFragment();\r\n            const { first: firstColumn, last: lastColumn } = tableUtils.getColumnIndexes(selectedCells);\r\n            const { first: firstRow, last: lastRow } = tableUtils.getRowIndexes(selectedCells);\r\n            const sourceTable = selectedCells[0].findAncestor('table');\r\n            let adjustedLastRow = lastRow;\r\n            let adjustedLastColumn = lastColumn;\r\n            // If the selection is rectangular there could be a case of all cells in the last row/column spanned over\r\n            // next row/column so the real lastRow/lastColumn should be updated.\r\n            if (tableUtils.isSelectionRectangular(selectedCells)) {\r\n                const dimensions = {\r\n                    firstColumn,\r\n                    lastColumn,\r\n                    firstRow,\r\n                    lastRow\r\n                };\r\n                adjustedLastRow = adjustLastRowIndex(sourceTable, dimensions);\r\n                adjustedLastColumn = adjustLastColumnIndex(sourceTable, dimensions);\r\n            }\r\n            const cropDimensions = {\r\n                startRow: firstRow,\r\n                startColumn: firstColumn,\r\n                endRow: adjustedLastRow,\r\n                endColumn: adjustedLastColumn\r\n            };\r\n            const table = cropTableToDimensions(sourceTable, cropDimensions, writer);\r\n            writer.insert(table, documentFragment, 0);\r\n            return documentFragment;\r\n        });\r\n    }\r\n    /**\r\n     * Sets the model selection based on given anchor and target cells (can be the same cell).\r\n     * Takes care of setting the backward flag.\r\n     *\r\n     * ```ts\r\n     * const modelRoot = editor.model.document.getRoot();\r\n     * const firstCell = modelRoot.getNodeByPath( [ 0, 0, 0 ] );\r\n     * const lastCell = modelRoot.getNodeByPath( [ 0, 0, 1 ] );\r\n     *\r\n     * const tableSelection = editor.plugins.get( 'TableSelection' );\r\n     * tableSelection.setCellSelection( firstCell, lastCell );\r\n     * ```\r\n     */\r\n    setCellSelection(anchorCell, targetCell) {\r\n        const cellsToSelect = this._getCellsToSelect(anchorCell, targetCell);\r\n        this.editor.model.change(writer => {\r\n            writer.setSelection(cellsToSelect.cells.map(cell => writer.createRangeOn(cell)), { backward: cellsToSelect.backward });\r\n        });\r\n    }\r\n    /**\r\n     * Returns the focus cell from the current selection.\r\n     */\r\n    getFocusCell() {\r\n        const selection = this.editor.model.document.selection;\r\n        const focusCellRange = [...selection.getRanges()].pop();\r\n        const element = focusCellRange.getContainedElement();\r\n        if (element && element.is('element', 'tableCell')) {\r\n            return element;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns the anchor cell from the current selection.\r\n     */\r\n    getAnchorCell() {\r\n        const selection = this.editor.model.document.selection;\r\n        const anchorCellRange = first(selection.getRanges());\r\n        const element = anchorCellRange.getContainedElement();\r\n        if (element && element.is('element', 'tableCell')) {\r\n            return element;\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Defines a selection converter which marks the selected cells with a specific class.\r\n     *\r\n     * The real DOM selection is put in the last cell. Since the order of ranges is dependent on whether the\r\n     * selection is backward or not, the last cell will usually be close to the \"focus\" end of the selection\r\n     * (a selection has anchor and focus).\r\n     *\r\n     * The real DOM selection is then hidden with CSS.\r\n     */\r\n    _defineSelectionConverter() {\r\n        const editor = this.editor;\r\n        const highlighted = new Set();\r\n        editor.conversion.for('editingDowncast').add(dispatcher => dispatcher.on('selection', (evt, data, conversionApi) => {\r\n            const viewWriter = conversionApi.writer;\r\n            clearHighlightedTableCells(viewWriter);\r\n            const selectedCells = this.getSelectedTableCells();\r\n            if (!selectedCells) {\r\n                return;\r\n            }\r\n            for (const tableCell of selectedCells) {\r\n                const viewElement = conversionApi.mapper.toViewElement(tableCell);\r\n                viewWriter.addClass('ck-editor__editable_selected', viewElement);\r\n                highlighted.add(viewElement);\r\n            }\r\n            const lastViewCell = conversionApi.mapper.toViewElement(selectedCells[selectedCells.length - 1]);\r\n            viewWriter.setSelection(lastViewCell, 0);\r\n        }, { priority: 'lowest' }));\r\n        function clearHighlightedTableCells(viewWriter) {\r\n            for (const previouslyHighlighted of highlighted) {\r\n                viewWriter.removeClass('ck-editor__editable_selected', previouslyHighlighted);\r\n            }\r\n            highlighted.clear();\r\n        }\r\n    }\r\n    /**\r\n     * Creates a listener that reacts to changes in {@link #isEnabled} and, if the plugin was disabled,\r\n     * it collapses the multi-cell selection to a regular selection placed inside a table cell.\r\n     *\r\n     * This listener helps features that disable the table selection plugin bring the selection\r\n     * to a clear state they can work with (for instance, because they don't support multiple cell selection).\r\n     */\r\n    _enablePluginDisabling() {\r\n        const editor = this.editor;\r\n        this.on('change:isEnabled', () => {\r\n            if (!this.isEnabled) {\r\n                const selectedCells = this.getSelectedTableCells();\r\n                if (!selectedCells) {\r\n                    return;\r\n                }\r\n                editor.model.change(writer => {\r\n                    const position = writer.createPositionAt(selectedCells[0], 0);\r\n                    const range = editor.model.schema.getNearestSelectionRange(position);\r\n                    writer.setSelection(range);\r\n                });\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Overrides the default `model.deleteContent()` behavior over a selected table fragment.\r\n     *\r\n     * @param args Delete content method arguments.\r\n     */\r\n    _handleDeleteContent(event, args) {\r\n        const tableUtils = this.editor.plugins.get(TableUtils);\r\n        const selection = args[0];\r\n        const options = args[1];\r\n        const model = this.editor.model;\r\n        const isBackward = !options || options.direction == 'backward';\r\n        const selectedTableCells = tableUtils.getSelectedTableCells(selection);\r\n        if (!selectedTableCells.length) {\r\n            return;\r\n        }\r\n        event.stop();\r\n        model.change(writer => {\r\n            const tableCellToSelect = selectedTableCells[isBackward ? selectedTableCells.length - 1 : 0];\r\n            model.change(writer => {\r\n                for (const tableCell of selectedTableCells) {\r\n                    model.deleteContent(writer.createSelection(tableCell, 'in'));\r\n                }\r\n            });\r\n            const rangeToSelect = model.schema.getNearestSelectionRange(writer.createPositionAt(tableCellToSelect, 0));\r\n            // Note: we ignore the case where rangeToSelect may be null because deleteContent() will always (unless someone broke it)\r\n            // create an empty paragraph to accommodate the selection.\r\n            if (selection.is('documentSelection')) {\r\n                writer.setSelection(rangeToSelect);\r\n            }\r\n            else {\r\n                selection.setTo(rangeToSelect);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * This handler makes it possible to remove the content of all selected cells by starting to type.\r\n     * If you take a look at {@link #_defineSelectionConverter} you will find out that despite the multi-cell selection being set\r\n     * in the model, the view selection is collapsed in the last cell (because most browsers are unable to render multi-cell selections;\r\n     * yes, it's a hack).\r\n     *\r\n     * When multiple cells are selected in the model and the user starts to type, the\r\n     * {@link module:engine/view/document~Document#event:insertText} event carries information provided by the\r\n     * beforeinput DOM  event, that in turn only knows about this collapsed DOM selection in the last cell.\r\n     *\r\n     * As a result, the selected cells have no chance to be cleaned up. To fix this, this listener intercepts\r\n     * the event and injects the custom view selection in the data that translates correctly to the actual state\r\n     * of the multi-cell selection in the model.\r\n     *\r\n     * @param data Insert text event data.\r\n     */\r\n    _handleInsertTextEvent(evt, data) {\r\n        const editor = this.editor;\r\n        const selectedCells = this.getSelectedTableCells();\r\n        if (!selectedCells) {\r\n            return;\r\n        }\r\n        const view = editor.editing.view;\r\n        const mapper = editor.editing.mapper;\r\n        const viewRanges = selectedCells.map(tableCell => view.createRangeOn(mapper.toViewElement(tableCell)));\r\n        data.selection = view.createSelection(viewRanges);\r\n    }\r\n    /**\r\n     * Returns an array of table cells that should be selected based on the\r\n     * given anchor cell and target (focus) cell.\r\n     *\r\n     * The cells are returned in a reverse direction if the selection is backward.\r\n     */\r\n    _getCellsToSelect(anchorCell, targetCell) {\r\n        const tableUtils = this.editor.plugins.get('TableUtils');\r\n        const startLocation = tableUtils.getCellLocation(anchorCell);\r\n        const endLocation = tableUtils.getCellLocation(targetCell);\r\n        const startRow = Math.min(startLocation.row, endLocation.row);\r\n        const endRow = Math.max(startLocation.row, endLocation.row);\r\n        const startColumn = Math.min(startLocation.column, endLocation.column);\r\n        const endColumn = Math.max(startLocation.column, endLocation.column);\r\n        // 2-dimensional array of the selected cells to ease flipping the order of cells for backward selections.\r\n        const selectionMap = new Array(endRow - startRow + 1).fill(null).map(() => []);\r\n        const walkerOptions = {\r\n            startRow,\r\n            endRow,\r\n            startColumn,\r\n            endColumn\r\n        };\r\n        for (const { row, cell } of new TableWalker(anchorCell.findAncestor('table'), walkerOptions)) {\r\n            selectionMap[row - startRow].push(cell);\r\n        }\r\n        const flipVertically = endLocation.row < startLocation.row;\r\n        const flipHorizontally = endLocation.column < startLocation.column;\r\n        if (flipVertically) {\r\n            selectionMap.reverse();\r\n        }\r\n        if (flipHorizontally) {\r\n            selectionMap.forEach(row => row.reverse());\r\n        }\r\n        return {\r\n            cells: selectionMap.flat(),\r\n            backward: flipVertically || flipHorizontally\r\n        };\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport TableSelection from './tableselection';\r\nimport TableWalker from './tablewalker';\r\nimport TableUtils from './tableutils';\r\nimport { cropTableToDimensions, getHorizontallyOverlappingCells, getVerticallyOverlappingCells, removeEmptyRowsColumns, splitHorizontally, splitVertically, trimTableCellIfNeeded, adjustLastRowIndex, adjustLastColumnIndex } from './utils/structure';\r\n/**\r\n * This plugin adds support for copying/cutting/pasting fragments of tables.\r\n * It is loaded automatically by the {@link module:table/table~Table} plugin.\r\n */\r\nexport default class TableClipboard extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableClipboard';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TableSelection, TableUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const viewDocument = editor.editing.view.document;\r\n        this.listenTo(viewDocument, 'copy', (evt, data) => this._onCopyCut(evt, data));\r\n        this.listenTo(viewDocument, 'cut', (evt, data) => this._onCopyCut(evt, data));\r\n        this.listenTo(editor.model, 'insertContent', (evt, [content, selectable]) => this._onInsertContent(evt, content, selectable), { priority: 'high' });\r\n        this.decorate('_replaceTableSlotCell');\r\n    }\r\n    /**\r\n     * Copies table content to a clipboard on \"copy\" & \"cut\" events.\r\n     *\r\n     * @param evt An object containing information about the handled event.\r\n     * @param data Clipboard event data.\r\n     */\r\n    _onCopyCut(evt, data) {\r\n        const tableSelection = this.editor.plugins.get(TableSelection);\r\n        if (!tableSelection.getSelectedTableCells()) {\r\n            return;\r\n        }\r\n        if (evt.name == 'cut' && !this.editor.model.canEditAt(this.editor.model.document.selection)) {\r\n            return;\r\n        }\r\n        data.preventDefault();\r\n        evt.stop();\r\n        const dataController = this.editor.data;\r\n        const viewDocument = this.editor.editing.view.document;\r\n        const content = dataController.toView(tableSelection.getSelectionAsFragment());\r\n        viewDocument.fire('clipboardOutput', {\r\n            dataTransfer: data.dataTransfer,\r\n            content,\r\n            method: evt.name\r\n        });\r\n    }\r\n    /**\r\n     * Overrides default {@link module:engine/model/model~Model#insertContent `model.insertContent()`} method to handle pasting table inside\r\n     * selected table fragment.\r\n     *\r\n     * Depending on selected table fragment:\r\n     * - If a selected table fragment is smaller than paste table it will crop pasted table to match dimensions.\r\n     * - If dimensions are equal it will replace selected table fragment with a pasted table contents.\r\n     *\r\n     * @param content The content to insert.\r\n     * @param selectable The selection into which the content should be inserted.\r\n     * If not provided the current model document selection will be used.\r\n     */\r\n    _onInsertContent(evt, content, selectable) {\r\n        if (selectable && !selectable.is('documentSelection')) {\r\n            return;\r\n        }\r\n        const model = this.editor.model;\r\n        const tableUtils = this.editor.plugins.get(TableUtils);\r\n        // We might need to crop table before inserting so reference might change.\r\n        let pastedTable = this.getTableIfOnlyTableInContent(content, model);\r\n        if (!pastedTable) {\r\n            return;\r\n        }\r\n        const selectedTableCells = tableUtils.getSelectionAffectedTableCells(model.document.selection);\r\n        if (!selectedTableCells.length) {\r\n            removeEmptyRowsColumns(pastedTable, tableUtils);\r\n            return;\r\n        }\r\n        // Override default model.insertContent() handling at this point.\r\n        evt.stop();\r\n        model.change(writer => {\r\n            const pastedDimensions = {\r\n                width: tableUtils.getColumns(pastedTable),\r\n                height: tableUtils.getRows(pastedTable)\r\n            };\r\n            // Prepare the table for pasting.\r\n            const selection = prepareTableForPasting(selectedTableCells, pastedDimensions, writer, tableUtils);\r\n            // Beyond this point we operate on a fixed content table with rectangular selection and proper last row/column values.\r\n            const selectionHeight = selection.lastRow - selection.firstRow + 1;\r\n            const selectionWidth = selection.lastColumn - selection.firstColumn + 1;\r\n            // Crop pasted table if:\r\n            // - Pasted table dimensions exceeds selection area.\r\n            // - Pasted table has broken layout (ie some cells sticks out by the table dimensions established by the first and last row).\r\n            //\r\n            // Note: The table dimensions are established by the width of the first row and the total number of rows.\r\n            // It is possible to programmatically create a table that has rows which would have cells anchored beyond first row width but\r\n            // such table will not be created by other editing solutions.\r\n            const cropDimensions = {\r\n                startRow: 0,\r\n                startColumn: 0,\r\n                endRow: Math.min(selectionHeight, pastedDimensions.height) - 1,\r\n                endColumn: Math.min(selectionWidth, pastedDimensions.width) - 1\r\n            };\r\n            pastedTable = cropTableToDimensions(pastedTable, cropDimensions, writer);\r\n            // Content table to which we insert a pasted table.\r\n            const selectedTable = selectedTableCells[0].findAncestor('table');\r\n            const cellsToSelect = this._replaceSelectedCellsWithPasted(pastedTable, pastedDimensions, selectedTable, selection, writer);\r\n            if (this.editor.plugins.get('TableSelection').isEnabled) {\r\n                // Selection ranges must be sorted because the first and last selection ranges are considered\r\n                // as anchor/focus cell ranges for multi-cell selection.\r\n                const selectionRanges = tableUtils.sortRanges(cellsToSelect.map(cell => writer.createRangeOn(cell)));\r\n                writer.setSelection(selectionRanges);\r\n            }\r\n            else {\r\n                // Set selection inside first cell if multi-cell selection is disabled.\r\n                writer.setSelection(cellsToSelect[0], 0);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Replaces the part of selectedTable with pastedTable.\r\n     */\r\n    _replaceSelectedCellsWithPasted(pastedTable, pastedDimensions, selectedTable, selection, writer) {\r\n        const { width: pastedWidth, height: pastedHeight } = pastedDimensions;\r\n        // Holds two-dimensional array that is addressed by [ row ][ column ] that stores cells anchored at given location.\r\n        const pastedTableLocationMap = createLocationMap(pastedTable, pastedWidth, pastedHeight);\r\n        const selectedTableMap = [...new TableWalker(selectedTable, {\r\n                startRow: selection.firstRow,\r\n                endRow: selection.lastRow,\r\n                startColumn: selection.firstColumn,\r\n                endColumn: selection.lastColumn,\r\n                includeAllSlots: true\r\n            })];\r\n        // Selection must be set to pasted cells (some might be removed or new created).\r\n        const cellsToSelect = [];\r\n        // Store next cell insert position.\r\n        let insertPosition;\r\n        // Content table replace cells algorithm iterates over a selected table fragment and:\r\n        //\r\n        // - Removes existing table cells at current slot (location).\r\n        // - Inserts cell from a pasted table for a matched slots.\r\n        //\r\n        // This ensures proper table geometry after the paste\r\n        for (const tableSlot of selectedTableMap) {\r\n            const { row, column } = tableSlot;\r\n            // Save the insert position for current row start.\r\n            if (column === selection.firstColumn) {\r\n                insertPosition = tableSlot.getPositionBefore();\r\n            }\r\n            // Map current table slot location to an pasted table slot location.\r\n            const pastedRow = row - selection.firstRow;\r\n            const pastedColumn = column - selection.firstColumn;\r\n            const pastedCell = pastedTableLocationMap[pastedRow % pastedHeight][pastedColumn % pastedWidth];\r\n            // Clone cell to insert (to duplicate its attributes and children).\r\n            // Cloning is required to support repeating pasted table content when inserting to a bigger selection.\r\n            const cellToInsert = pastedCell ? writer.cloneElement(pastedCell) : null;\r\n            // Replace the cell from the current slot with new table cell.\r\n            const newTableCell = this._replaceTableSlotCell(tableSlot, cellToInsert, insertPosition, writer);\r\n            // The cell was only removed.\r\n            if (!newTableCell) {\r\n                continue;\r\n            }\r\n            // Trim the cell if it's row/col-spans would exceed selection area.\r\n            trimTableCellIfNeeded(newTableCell, row, column, selection.lastRow, selection.lastColumn, writer);\r\n            cellsToSelect.push(newTableCell);\r\n            insertPosition = writer.createPositionAfter(newTableCell);\r\n        }\r\n        // If there are any headings, all the cells that overlap from heading must be splitted.\r\n        const headingRows = parseInt(selectedTable.getAttribute('headingRows') || '0');\r\n        const headingColumns = parseInt(selectedTable.getAttribute('headingColumns') || '0');\r\n        const areHeadingRowsIntersectingSelection = selection.firstRow < headingRows && headingRows <= selection.lastRow;\r\n        const areHeadingColumnsIntersectingSelection = selection.firstColumn < headingColumns && headingColumns <= selection.lastColumn;\r\n        if (areHeadingRowsIntersectingSelection) {\r\n            const columnsLimit = { first: selection.firstColumn, last: selection.lastColumn };\r\n            const newCells = doHorizontalSplit(selectedTable, headingRows, columnsLimit, writer, selection.firstRow);\r\n            cellsToSelect.push(...newCells);\r\n        }\r\n        if (areHeadingColumnsIntersectingSelection) {\r\n            const rowsLimit = { first: selection.firstRow, last: selection.lastRow };\r\n            const newCells = doVerticalSplit(selectedTable, headingColumns, rowsLimit, writer);\r\n            cellsToSelect.push(...newCells);\r\n        }\r\n        return cellsToSelect;\r\n    }\r\n    /**\r\n     * Replaces a single table slot.\r\n     *\r\n     * @returns Inserted table cell or null if slot should remain empty.\r\n     * @private\r\n     */\r\n    _replaceTableSlotCell(tableSlot, cellToInsert, insertPosition, writer) {\r\n        const { cell, isAnchor } = tableSlot;\r\n        // If the slot is occupied by a cell in a selected table - remove it.\r\n        // The slot of this cell will be either:\r\n        // - Replaced by a pasted table cell.\r\n        // - Spanned by a previously pasted table cell.\r\n        if (isAnchor) {\r\n            writer.remove(cell);\r\n        }\r\n        // There is no cell to insert (might be spanned by other cell in a pasted table) - advance to the next content table slot.\r\n        if (!cellToInsert) {\r\n            return null;\r\n        }\r\n        writer.insert(cellToInsert, insertPosition);\r\n        return cellToInsert;\r\n    }\r\n    /**\r\n     * Extracts the table for pasting into a table.\r\n     *\r\n     * @param content The content to insert.\r\n     * @param model The editor model.\r\n     */\r\n    getTableIfOnlyTableInContent(content, model) {\r\n        if (!content.is('documentFragment') && !content.is('element')) {\r\n            return null;\r\n        }\r\n        // Table passed directly.\r\n        if (content.is('element', 'table')) {\r\n            return content;\r\n        }\r\n        // We do not support mixed content when pasting table into table.\r\n        // See: https://github.com/ckeditor/ckeditor5/issues/6817.\r\n        if (content.childCount == 1 && content.getChild(0).is('element', 'table')) {\r\n            return content.getChild(0);\r\n        }\r\n        // If there are only whitespaces around a table then use that table for pasting.\r\n        const contentRange = model.createRangeIn(content);\r\n        for (const element of contentRange.getItems()) {\r\n            if (element.is('element', 'table')) {\r\n                // Stop checking if there is some content before table.\r\n                const rangeBefore = model.createRange(contentRange.start, model.createPositionBefore(element));\r\n                if (model.hasContent(rangeBefore, { ignoreWhitespaces: true })) {\r\n                    return null;\r\n                }\r\n                // Stop checking if there is some content after table.\r\n                const rangeAfter = model.createRange(model.createPositionAfter(element), contentRange.end);\r\n                if (model.hasContent(rangeAfter, { ignoreWhitespaces: true })) {\r\n                    return null;\r\n                }\r\n                // There wasn't any content neither before nor after.\r\n                return element;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n}\r\n/**\r\n * Prepares a table for pasting and returns adjusted selection dimensions.\r\n */\r\nfunction prepareTableForPasting(selectedTableCells, pastedDimensions, writer, tableUtils) {\r\n    const selectedTable = selectedTableCells[0].findAncestor('table');\r\n    const columnIndexes = tableUtils.getColumnIndexes(selectedTableCells);\r\n    const rowIndexes = tableUtils.getRowIndexes(selectedTableCells);\r\n    const selection = {\r\n        firstColumn: columnIndexes.first,\r\n        lastColumn: columnIndexes.last,\r\n        firstRow: rowIndexes.first,\r\n        lastRow: rowIndexes.last\r\n    };\r\n    // Single cell selected - expand selection to pasted table dimensions.\r\n    const shouldExpandSelection = selectedTableCells.length === 1;\r\n    if (shouldExpandSelection) {\r\n        selection.lastRow += pastedDimensions.height - 1;\r\n        selection.lastColumn += pastedDimensions.width - 1;\r\n        expandTableSize(selectedTable, selection.lastRow + 1, selection.lastColumn + 1, tableUtils);\r\n    }\r\n    // In case of expanding selection we do not reset the selection so in this case we will always try to fix selection\r\n    // like in the case of a non-rectangular area. This might be fixed by re-setting selected cells array but this shortcut is safe.\r\n    if (shouldExpandSelection || !tableUtils.isSelectionRectangular(selectedTableCells)) {\r\n        // For a non-rectangular selection (ie in which some cells sticks out from a virtual selection rectangle) we need to create\r\n        // a table layout that has a rectangular selection. This will split cells so the selection become rectangular.\r\n        // Beyond this point we will operate on fixed content table.\r\n        splitCellsToRectangularSelection(selectedTable, selection, writer);\r\n    }\r\n    // However a selected table fragment might be invalid if examined alone. Ie such table fragment:\r\n    //\r\n    //    +---+---+---+---+\r\n    //  0 | a | b | c | d |\r\n    //    +   +   +---+---+\r\n    //  1 |   | e | f | g |\r\n    //    +   +---+   +---+\r\n    //  2 |   | h |   | i | <- last row, each cell has rowspan = 2,\r\n    //    +   +   +   +   +    so we need to return 3, not 2\r\n    //  3 |   |   |   |   |\r\n    //    +---+---+---+---+\r\n    //\r\n    // is invalid as the cells \"h\" and \"i\" have rowspans.\r\n    // This case needs only adjusting the selection dimension as the rest of the algorithm operates on empty slots also.\r\n    else {\r\n        selection.lastRow = adjustLastRowIndex(selectedTable, selection);\r\n        selection.lastColumn = adjustLastColumnIndex(selectedTable, selection);\r\n    }\r\n    return selection;\r\n}\r\n/**\r\n * Expand table (in place) to expected size.\r\n */\r\nfunction expandTableSize(table, expectedHeight, expectedWidth, tableUtils) {\r\n    const tableWidth = tableUtils.getColumns(table);\r\n    const tableHeight = tableUtils.getRows(table);\r\n    if (expectedWidth > tableWidth) {\r\n        tableUtils.insertColumns(table, {\r\n            at: tableWidth,\r\n            columns: expectedWidth - tableWidth\r\n        });\r\n    }\r\n    if (expectedHeight > tableHeight) {\r\n        tableUtils.insertRows(table, {\r\n            at: tableHeight,\r\n            rows: expectedHeight - tableHeight\r\n        });\r\n    }\r\n}\r\n/**\r\n * Returns two-dimensional array that is addressed by [ row ][ column ] that stores cells anchored at given location.\r\n *\r\n * At given row & column location it might be one of:\r\n *\r\n * * cell - cell from pasted table anchored at this location.\r\n * * null - if no cell is anchored at this location.\r\n *\r\n * For instance, from a table below:\r\n *\r\n *   +----+----+----+----+\r\n *   | 00 | 01 | 02 | 03 |\r\n *   +    +----+----+----+\r\n *   |    | 11      | 13 |\r\n *   +----+         +----+\r\n *   | 20 |         | 23 |\r\n *   +----+----+----+----+\r\n *\r\n * The method will return an array (numbers represents cell element):\r\n *\r\n * ```ts\r\n * const map = [\r\n *   [ '00', '01', '02', '03' ],\r\n *   [ null, '11', null, '13' ],\r\n *   [ '20', null, null, '23' ]\r\n * ]\r\n * ```\r\n *\r\n * This allows for a quick access to table at give row & column. For instance to access table cell \"13\" from pasted table call:\r\n *\r\n * ```ts\r\n * const cell = map[ 1 ][ 3 ]\r\n * ```\r\n */\r\nfunction createLocationMap(table, width, height) {\r\n    // Create height x width (row x column) two-dimensional table to store cells.\r\n    const map = new Array(height).fill(null)\r\n        .map(() => new Array(width).fill(null));\r\n    for (const { column, row, cell } of new TableWalker(table)) {\r\n        map[row][column] = cell;\r\n    }\r\n    return map;\r\n}\r\n/**\r\n * Make selected cells rectangular by splitting the cells that stand out from a rectangular selection.\r\n *\r\n * In the table below a selection is shown with \"::\" and slots with anchor cells are named.\r\n *\r\n * +----+----+----+----+----+                    +----+----+----+----+----+\r\n * | 00 | 01 | 02 | 03      |                    | 00 | 01 | 02 | 03      |\r\n * +    +----+    +----+----+                    |    ::::::::::::::::----+\r\n * |    | 11 |    | 13 | 14 |                    |    ::11 |    | 13:: 14 |    <- first row\r\n * +----+----+    +    +----+                    +----::---|    |   ::----+\r\n * | 20 | 21 |    |    | 24 |   select cells:    | 20 ::21 |    |   :: 24 |\r\n * +----+----+    +----+----+     11 -> 33       +----::---|    |---::----+\r\n * | 30      |    | 33 | 34 |                    | 30 ::   |    | 33:: 34 |    <- last row\r\n * +         +    +----+    +                    |    ::::::::::::::::    +\r\n * |         |    | 43 |    |                    |         |    | 43 |    |\r\n * +----+----+----+----+----+                    +----+----+----+----+----+\r\n *                                                      ^          ^\r\n *                                                     first & last columns\r\n *\r\n * Will update table to:\r\n *\r\n *                       +----+----+----+----+----+\r\n *                       | 00 | 01 | 02 | 03      |\r\n *                       +    +----+----+----+----+\r\n *                       |    | 11 |    | 13 | 14 |\r\n *                       +----+----+    +    +----+\r\n *                       | 20 | 21 |    |    | 24 |\r\n *                       +----+----+    +----+----+\r\n *                       | 30 |    |    | 33 | 34 |\r\n *                       +    +----+----+----+    +\r\n *                       |    |    |    | 43 |    |\r\n *                       +----+----+----+----+----+\r\n *\r\n * In th example above:\r\n * - Cell \"02\" which have `rowspan = 4` must be trimmed at first and at after last row.\r\n * - Cell \"03\" which have `rowspan = 2` and `colspan = 2` must be trimmed at first column and after last row.\r\n * - Cells \"00\", \"03\" & \"30\" which cannot be cut by this algorithm as they are outside the trimmed area.\r\n * - Cell \"13\" cannot be cut as it is inside the trimmed area.\r\n */\r\nfunction splitCellsToRectangularSelection(table, dimensions, writer) {\r\n    const { firstRow, lastRow, firstColumn, lastColumn } = dimensions;\r\n    const rowIndexes = { first: firstRow, last: lastRow };\r\n    const columnIndexes = { first: firstColumn, last: lastColumn };\r\n    // 1. Split cells vertically in two steps as first step might create cells that needs to split again.\r\n    doVerticalSplit(table, firstColumn, rowIndexes, writer);\r\n    doVerticalSplit(table, lastColumn + 1, rowIndexes, writer);\r\n    // 2. Split cells horizontally in two steps as first step might create cells that needs to split again.\r\n    doHorizontalSplit(table, firstRow, columnIndexes, writer);\r\n    doHorizontalSplit(table, lastRow + 1, columnIndexes, writer, firstRow);\r\n}\r\nfunction doHorizontalSplit(table, splitRow, limitColumns, writer, startRow = 0) {\r\n    // If selection starts at first row then no split is needed.\r\n    if (splitRow < 1) {\r\n        return;\r\n    }\r\n    const overlappingCells = getVerticallyOverlappingCells(table, splitRow, startRow);\r\n    // Filter out cells that are not touching insides of the rectangular selection.\r\n    const cellsToSplit = overlappingCells.filter(({ column, cellWidth }) => isAffectedBySelection(column, cellWidth, limitColumns));\r\n    return cellsToSplit.map(({ cell }) => splitHorizontally(cell, splitRow, writer));\r\n}\r\nfunction doVerticalSplit(table, splitColumn, limitRows, writer) {\r\n    // If selection starts at first column then no split is needed.\r\n    if (splitColumn < 1) {\r\n        return;\r\n    }\r\n    const overlappingCells = getHorizontallyOverlappingCells(table, splitColumn);\r\n    // Filter out cells that are not touching insides of the rectangular selection.\r\n    const cellsToSplit = overlappingCells.filter(({ row, cellHeight }) => isAffectedBySelection(row, cellHeight, limitRows));\r\n    return cellsToSplit.map(({ cell, column }) => splitVertically(cell, column, splitColumn, writer));\r\n}\r\n/**\r\n * Checks if cell at given row (column) is affected by a rectangular selection defined by first/last column (row).\r\n *\r\n * The same check is used for row as for column.\r\n */\r\nfunction isAffectedBySelection(index, span, limit) {\r\n    const endIndex = index + span - 1;\r\n    const { first, last } = limit;\r\n    const isInsideSelection = index >= first && index <= last;\r\n    const overlapsSelectionFromOutside = index < first && endIndex >= first;\r\n    return isInsideSelection || overlapsSelectionFromOutside;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tablekeyboard\r\n */\r\nimport TableSelection from './tableselection';\r\nimport TableWalker from './tablewalker';\r\nimport TableUtils from './tableutils';\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { getLocalizedArrowKeyCodeDirection } from 'ckeditor5/src/utils';\r\n/**\r\n * This plugin enables keyboard navigation for tables.\r\n * It is loaded automatically by the {@link module:table/table~Table} plugin.\r\n */\r\nexport default class TableKeyboard extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableKeyboard';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TableSelection, TableUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const view = this.editor.editing.view;\r\n        const viewDocument = view.document;\r\n        this.listenTo(viewDocument, 'arrowKey', (...args) => this._onArrowKey(...args), { context: 'table' });\r\n        this.listenTo(viewDocument, 'tab', (...args) => this._handleTabOnSelectedTable(...args), { context: 'figure' });\r\n        this.listenTo(viewDocument, 'tab', (...args) => this._handleTab(...args), { context: ['th', 'td'] });\r\n    }\r\n    /**\r\n     * Handles {@link module:engine/view/document~Document#event:tab tab} events for the <kbd>Tab</kbd> key executed\r\n     * when the table widget is selected.\r\n     */\r\n    _handleTabOnSelectedTable(bubblingEventInfo, domEventData) {\r\n        const editor = this.editor;\r\n        const selection = editor.model.document.selection;\r\n        const selectedElement = selection.getSelectedElement();\r\n        if (!selectedElement || !selectedElement.is('element', 'table')) {\r\n            return;\r\n        }\r\n        domEventData.preventDefault();\r\n        domEventData.stopPropagation();\r\n        bubblingEventInfo.stop();\r\n        editor.model.change(writer => {\r\n            writer.setSelection(writer.createRangeIn(selectedElement.getChild(0).getChild(0)));\r\n        });\r\n    }\r\n    /**\r\n     * Handles {@link module:engine/view/document~Document#event:tab tab} events for the <kbd>Tab</kbd> key executed\r\n     * inside table cells.\r\n     */\r\n    _handleTab(bubblingEventInfo, domEventData) {\r\n        const editor = this.editor;\r\n        const tableUtils = this.editor.plugins.get(TableUtils);\r\n        const tableSelection = this.editor.plugins.get('TableSelection');\r\n        const selection = editor.model.document.selection;\r\n        const isForward = !domEventData.shiftKey;\r\n        let tableCell = tableUtils.getTableCellsContainingSelection(selection)[0];\r\n        if (!tableCell) {\r\n            tableCell = tableSelection.getFocusCell();\r\n        }\r\n        if (!tableCell) {\r\n            return;\r\n        }\r\n        domEventData.preventDefault();\r\n        domEventData.stopPropagation();\r\n        bubblingEventInfo.stop();\r\n        const tableRow = tableCell.parent;\r\n        const table = tableRow.parent;\r\n        const currentRowIndex = table.getChildIndex(tableRow);\r\n        const currentCellIndex = tableRow.getChildIndex(tableCell);\r\n        const isFirstCellInRow = currentCellIndex === 0;\r\n        if (!isForward && isFirstCellInRow && currentRowIndex === 0) {\r\n            // Set the selection over the whole table if the selection was in the first table cell.\r\n            editor.model.change(writer => {\r\n                writer.setSelection(writer.createRangeOn(table));\r\n            });\r\n            return;\r\n        }\r\n        const isLastCellInRow = currentCellIndex === tableRow.childCount - 1;\r\n        const isLastRow = currentRowIndex === tableUtils.getRows(table) - 1;\r\n        if (isForward && isLastRow && isLastCellInRow) {\r\n            editor.execute('insertTableRowBelow');\r\n            // Check if the command actually added a row. If `insertTableRowBelow` execution didn't add a row (because it was disabled\r\n            // or it got overwritten) set the selection over the whole table to mirror the first cell case.\r\n            if (currentRowIndex === tableUtils.getRows(table) - 1) {\r\n                editor.model.change(writer => {\r\n                    writer.setSelection(writer.createRangeOn(table));\r\n                });\r\n                return;\r\n            }\r\n        }\r\n        let cellToFocus;\r\n        // Move to the first cell in the next row.\r\n        if (isForward && isLastCellInRow) {\r\n            const nextRow = table.getChild(currentRowIndex + 1);\r\n            cellToFocus = nextRow.getChild(0);\r\n        }\r\n        // Move to the last cell in the previous row.\r\n        else if (!isForward && isFirstCellInRow) {\r\n            const previousRow = table.getChild(currentRowIndex - 1);\r\n            cellToFocus = previousRow.getChild(previousRow.childCount - 1);\r\n        }\r\n        // Move to the next/previous cell.\r\n        else {\r\n            cellToFocus = tableRow.getChild(currentCellIndex + (isForward ? 1 : -1));\r\n        }\r\n        editor.model.change(writer => {\r\n            writer.setSelection(writer.createRangeIn(cellToFocus));\r\n        });\r\n    }\r\n    /**\r\n     * Handles {@link module:engine/view/document~Document#event:keydown keydown} events.\r\n     */\r\n    _onArrowKey(eventInfo, domEventData) {\r\n        const editor = this.editor;\r\n        const keyCode = domEventData.keyCode;\r\n        const direction = getLocalizedArrowKeyCodeDirection(keyCode, editor.locale.contentLanguageDirection);\r\n        const wasHandled = this._handleArrowKeys(direction, domEventData.shiftKey);\r\n        if (wasHandled) {\r\n            domEventData.preventDefault();\r\n            domEventData.stopPropagation();\r\n            eventInfo.stop();\r\n        }\r\n    }\r\n    /**\r\n     * Handles arrow keys to move the selection around the table.\r\n     *\r\n     * @param direction The direction of the arrow key.\r\n     * @param expandSelection If the current selection should be expanded.\r\n     * @returns Returns `true` if key was handled.\r\n     */\r\n    _handleArrowKeys(direction, expandSelection) {\r\n        const tableUtils = this.editor.plugins.get(TableUtils);\r\n        const tableSelection = this.editor.plugins.get('TableSelection');\r\n        const model = this.editor.model;\r\n        const selection = model.document.selection;\r\n        const isForward = ['right', 'down'].includes(direction);\r\n        // In case one or more table cells are selected (from outside),\r\n        // move the selection to a cell adjacent to the selected table fragment.\r\n        const selectedCells = tableUtils.getSelectedTableCells(selection);\r\n        if (selectedCells.length) {\r\n            let focusCell;\r\n            if (expandSelection) {\r\n                focusCell = tableSelection.getFocusCell();\r\n            }\r\n            else {\r\n                focusCell = isForward ? selectedCells[selectedCells.length - 1] : selectedCells[0];\r\n            }\r\n            this._navigateFromCellInDirection(focusCell, direction, expandSelection);\r\n            return true;\r\n        }\r\n        // Abort if we're not in a table cell.\r\n        const tableCell = selection.focus.findAncestor('tableCell');\r\n        /* istanbul ignore if: paranoid check -- @preserve */\r\n        if (!tableCell) {\r\n            return false;\r\n        }\r\n        // When the selection is not collapsed.\r\n        if (!selection.isCollapsed) {\r\n            if (expandSelection) {\r\n                // Navigation is in the opposite direction than the selection direction so this is shrinking of the selection.\r\n                // Selection for sure will not approach cell edge.\r\n                //\r\n                // With a special case when all cell content is selected - then selection should expand to the other cell.\r\n                // Note: When the entire cell gets selected using CTRL+A, the selection is always forward.\r\n                if (selection.isBackward == isForward && !selection.containsEntireContent(tableCell)) {\r\n                    return false;\r\n                }\r\n            }\r\n            else {\r\n                const selectedElement = selection.getSelectedElement();\r\n                // It will collapse for non-object selected so it's not going to move to other cell.\r\n                if (!selectedElement || !model.schema.isObject(selectedElement)) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        // Let's check if the selection is at the beginning/end of the cell.\r\n        if (this._isSelectionAtCellEdge(selection, tableCell, isForward)) {\r\n            this._navigateFromCellInDirection(tableCell, direction, expandSelection);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns `true` if the selection is at the boundary of a table cell according to the navigation direction.\r\n     *\r\n     * @param selection The current selection.\r\n     * @param tableCell The current table cell element.\r\n     * @param isForward The expected navigation direction.\r\n     */\r\n    _isSelectionAtCellEdge(selection, tableCell, isForward) {\r\n        const model = this.editor.model;\r\n        const schema = this.editor.model.schema;\r\n        const focus = isForward ? selection.getLastPosition() : selection.getFirstPosition();\r\n        // If the current limit element is not table cell we are for sure not at the cell edge.\r\n        // Also `modifySelection` will not let us out of it.\r\n        if (!schema.getLimitElement(focus).is('element', 'tableCell')) {\r\n            const boundaryPosition = model.createPositionAt(tableCell, isForward ? 'end' : 0);\r\n            return boundaryPosition.isTouching(focus);\r\n        }\r\n        const probe = model.createSelection(focus);\r\n        model.modifySelection(probe, { direction: isForward ? 'forward' : 'backward' });\r\n        // If there was no change in the focus position, then it's not possible to move the selection there.\r\n        return focus.isEqual(probe.focus);\r\n    }\r\n    /**\r\n     * Moves the selection from the given table cell in the specified direction.\r\n     *\r\n     * @param focusCell The table cell that is current multi-cell selection focus.\r\n     * @param direction Direction in which selection should move.\r\n     * @param expandSelection If the current selection should be expanded. Default value is false.\r\n     */\r\n    _navigateFromCellInDirection(focusCell, direction, expandSelection = false) {\r\n        const model = this.editor.model;\r\n        const table = focusCell.findAncestor('table');\r\n        const tableMap = [...new TableWalker(table, { includeAllSlots: true })];\r\n        const { row: lastRow, column: lastColumn } = tableMap[tableMap.length - 1];\r\n        const currentCellInfo = tableMap.find(({ cell }) => cell == focusCell);\r\n        let { row, column } = currentCellInfo;\r\n        switch (direction) {\r\n            case 'left':\r\n                column--;\r\n                break;\r\n            case 'up':\r\n                row--;\r\n                break;\r\n            case 'right':\r\n                column += currentCellInfo.cellWidth;\r\n                break;\r\n            case 'down':\r\n                row += currentCellInfo.cellHeight;\r\n                break;\r\n        }\r\n        const isOutsideVertically = row < 0 || row > lastRow;\r\n        const isBeforeFirstCell = column < 0 && row <= 0;\r\n        const isAfterLastCell = column > lastColumn && row >= lastRow;\r\n        // Note that if the table cell at the end of a row is row-spanned then isAfterLastCell will never be true.\r\n        // However, we don't know if user was navigating on the last row or not, so let's stay in the table.\r\n        if (isOutsideVertically || isBeforeFirstCell || isAfterLastCell) {\r\n            model.change(writer => {\r\n                writer.setSelection(writer.createRangeOn(table));\r\n            });\r\n            return;\r\n        }\r\n        if (column < 0) {\r\n            column = expandSelection ? 0 : lastColumn;\r\n            row--;\r\n        }\r\n        else if (column > lastColumn) {\r\n            column = expandSelection ? lastColumn : 0;\r\n            row++;\r\n        }\r\n        const cellToSelect = tableMap.find(cellInfo => cellInfo.row == row && cellInfo.column == column).cell;\r\n        const isForward = ['right', 'down'].includes(direction);\r\n        const tableSelection = this.editor.plugins.get('TableSelection');\r\n        if (expandSelection && tableSelection.isEnabled) {\r\n            const anchorCell = tableSelection.getAnchorCell() || focusCell;\r\n            tableSelection.setCellSelection(anchorCell, cellToSelect);\r\n        }\r\n        else {\r\n            const positionToSelect = model.createPositionAt(cellToSelect, isForward ? 0 : 'end');\r\n            model.change(writer => {\r\n                writer.setSelection(positionToSelect);\r\n            });\r\n        }\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tablemouse/mouseeventsobserver\r\n */\r\nimport { DomEventObserver } from 'ckeditor5/src/engine';\r\n/**\r\n * The mouse selection event observer.\r\n *\r\n * It registers listeners for the following DOM events:\r\n *\r\n * - `'mousemove'`\r\n * - `'mouseleave'`\r\n *\r\n * Note that this observer is disabled by default. To enable this observer, it needs to be added to\r\n * {@link module:engine/view/view~View} using the {@link module:engine/view/view~View#addObserver} method.\r\n *\r\n * The observer is registered by the {@link module:table/tableselection~TableSelection} plugin.\r\n */\r\nexport default class MouseEventsObserver extends DomEventObserver {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.domEventType = [\r\n            'mousemove', 'mouseleave'\r\n        ];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    onDomEvent(domEvent) {\r\n        this.fire(domEvent.type, domEvent);\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tablemouse\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport TableSelection from './tableselection';\r\nimport MouseEventsObserver from './tablemouse/mouseeventsobserver';\r\nimport TableUtils from './tableutils';\r\n/**\r\n * This plugin enables a table cells' selection with the mouse.\r\n * It is loaded automatically by the {@link module:table/table~Table} plugin.\r\n */\r\nexport default class TableMouse extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableMouse';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TableSelection, TableUtils];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        // Currently the MouseObserver only handles `mousedown` and `mouseup` events.\r\n        // TODO move to the engine?\r\n        editor.editing.view.addObserver(MouseEventsObserver);\r\n        this._enableShiftClickSelection();\r\n        this._enableMouseDragSelection();\r\n    }\r\n    /**\r\n     * Enables making cells selection by <kbd>Shift</kbd>+click. Creates a selection from the cell which previously held\r\n     * the selection to the cell which was clicked. It can be the same cell, in which case it selects a single cell.\r\n     */\r\n    _enableShiftClickSelection() {\r\n        const editor = this.editor;\r\n        const tableUtils = editor.plugins.get(TableUtils);\r\n        let blockSelectionChange = false;\r\n        const tableSelection = editor.plugins.get(TableSelection);\r\n        this.listenTo(editor.editing.view.document, 'mousedown', (evt, domEventData) => {\r\n            const selection = editor.model.document.selection;\r\n            if (!this.isEnabled || !tableSelection.isEnabled) {\r\n                return;\r\n            }\r\n            if (!domEventData.domEvent.shiftKey) {\r\n                return;\r\n            }\r\n            const anchorCell = tableSelection.getAnchorCell() || tableUtils.getTableCellsContainingSelection(selection)[0];\r\n            if (!anchorCell) {\r\n                return;\r\n            }\r\n            const targetCell = this._getModelTableCellFromDomEvent(domEventData);\r\n            if (targetCell && haveSameTableParent(anchorCell, targetCell)) {\r\n                blockSelectionChange = true;\r\n                tableSelection.setCellSelection(anchorCell, targetCell);\r\n                domEventData.preventDefault();\r\n            }\r\n        });\r\n        this.listenTo(editor.editing.view.document, 'mouseup', () => {\r\n            blockSelectionChange = false;\r\n        });\r\n        // We need to ignore a `selectionChange` event that is fired after we render our new table cells selection.\r\n        // When downcasting table cells selection to the view, we put the view selection in the last selected cell\r\n        // in a place that may not be natively a \"correct\" location. This is – we put it directly in the `<td>` element.\r\n        // All browsers fire the native `selectionchange` event.\r\n        // However, all browsers except Safari return the selection in the exact place where we put it\r\n        // (even though it's visually normalized). Safari returns `<td><p>^foo` that makes our selection observer\r\n        // fire our `selectionChange` event (because the view selection that we set in the first step differs from the DOM selection).\r\n        // Since `selectionChange` is fired, we automatically update the model selection that moves it that paragraph.\r\n        // This breaks our dear cells selection.\r\n        //\r\n        // Theoretically this issue concerns only Safari that is the only browser that do normalize the selection.\r\n        // However, to avoid code branching and to have a good coverage for this event blocker, I enabled it for all browsers.\r\n        //\r\n        // Note: I'm keeping the `blockSelectionChange` state separately for shift+click and mouse drag (exact same logic)\r\n        // so I don't have to try to analyze whether they don't overlap in some weird cases. Probably they don't.\r\n        // But I have other things to do, like writing this comment.\r\n        this.listenTo(editor.editing.view.document, 'selectionChange', evt => {\r\n            if (blockSelectionChange) {\r\n                // @if CK_DEBUG // console.log( 'Blocked selectionChange to avoid breaking table cells selection.' );\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'highest' });\r\n    }\r\n    /**\r\n     * Enables making cells selection by dragging.\r\n     *\r\n     * The selection is made only on mousemove. Mouse tracking is started on mousedown.\r\n     * However, the cells selection is enabled only after the mouse cursor left the anchor cell.\r\n     * Thanks to that normal text selection within one cell works just fine. However, you can still select\r\n     * just one cell by leaving the anchor cell and moving back to it.\r\n     */\r\n    _enableMouseDragSelection() {\r\n        const editor = this.editor;\r\n        let anchorCell, targetCell;\r\n        let beganCellSelection = false;\r\n        let blockSelectionChange = false;\r\n        const tableSelection = editor.plugins.get(TableSelection);\r\n        this.listenTo(editor.editing.view.document, 'mousedown', (evt, domEventData) => {\r\n            if (!this.isEnabled || !tableSelection.isEnabled) {\r\n                return;\r\n            }\r\n            // Make sure to not conflict with the shift+click listener and any other possible handler.\r\n            if (domEventData.domEvent.shiftKey || domEventData.domEvent.ctrlKey || domEventData.domEvent.altKey) {\r\n                return;\r\n            }\r\n            anchorCell = this._getModelTableCellFromDomEvent(domEventData);\r\n        });\r\n        this.listenTo(editor.editing.view.document, 'mousemove', (evt, domEventData) => {\r\n            if (!domEventData.domEvent.buttons) {\r\n                return;\r\n            }\r\n            if (!anchorCell) {\r\n                return;\r\n            }\r\n            const newTargetCell = this._getModelTableCellFromDomEvent(domEventData);\r\n            if (newTargetCell && haveSameTableParent(anchorCell, newTargetCell)) {\r\n                targetCell = newTargetCell;\r\n                // Switch to the cell selection mode after the mouse cursor left the anchor cell.\r\n                // Switch off only on mouseup (makes selecting a single cell possible).\r\n                if (!beganCellSelection && targetCell != anchorCell) {\r\n                    beganCellSelection = true;\r\n                }\r\n            }\r\n            // Yep, not making a cell selection yet. See method docs.\r\n            if (!beganCellSelection) {\r\n                return;\r\n            }\r\n            blockSelectionChange = true;\r\n            tableSelection.setCellSelection(anchorCell, targetCell);\r\n            domEventData.preventDefault();\r\n        });\r\n        this.listenTo(editor.editing.view.document, 'mouseup', () => {\r\n            beganCellSelection = false;\r\n            blockSelectionChange = false;\r\n            anchorCell = null;\r\n            targetCell = null;\r\n        });\r\n        // See the explanation in `_enableShiftClickSelection()`.\r\n        this.listenTo(editor.editing.view.document, 'selectionChange', evt => {\r\n            if (blockSelectionChange) {\r\n                // @if CK_DEBUG // console.log( 'Blocked selectionChange to avoid breaking table cells selection.' );\r\n                evt.stop();\r\n            }\r\n        }, { priority: 'highest' });\r\n    }\r\n    /**\r\n     * Returns the model table cell element based on the target element of the passed DOM event.\r\n     *\r\n     * @returns Returns the table cell or `undefined`.\r\n     */\r\n    _getModelTableCellFromDomEvent(domEventData) {\r\n        // Note: Work with positions (not element mapping) because the target element can be an attribute or other non-mapped element.\r\n        const viewTargetElement = domEventData.target;\r\n        const viewPosition = this.editor.editing.view.createPositionAt(viewTargetElement, 0);\r\n        const modelPosition = this.editor.editing.mapper.toModelPosition(viewPosition);\r\n        const modelElement = modelPosition.parent;\r\n        return modelElement.findAncestor('tableCell', { includeSelf: true });\r\n    }\r\n}\r\nfunction haveSameTableParent(cellA, cellB) {\r\n    return cellA.parent.parent == cellB.parent.parent;\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./table.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/table\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Widget } from 'ckeditor5/src/widget';\r\nimport TableEditing from './tableediting';\r\nimport TableUI from './tableui';\r\nimport TableSelection from './tableselection';\r\nimport TableClipboard from './tableclipboard';\r\nimport TableKeyboard from './tablekeyboard';\r\nimport TableMouse from './tablemouse';\r\nimport '../theme/table.css';\r\n/**\r\n * The table plugin.\r\n *\r\n * For a detailed overview, check the {@glink features/tables/tables Table feature documentation}.\r\n *\r\n * This is a \"glue\" plugin that loads the following table features:\r\n *\r\n * * {@link module:table/tableediting~TableEditing editing feature},\r\n * * {@link module:table/tableselection~TableSelection selection feature},\r\n * * {@link module:table/tablekeyboard~TableKeyboard keyboard navigation feature},\r\n * * {@link module:table/tablemouse~TableMouse mouse selection feature},\r\n * * {@link module:table/tableclipboard~TableClipboard clipboard feature},\r\n * * {@link module:table/tableui~TableUI UI feature}.\r\n */\r\nexport default class Table extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TableEditing, TableUI, TableSelection, TableMouse, TableKeyboard, TableClipboard, Widget];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'Table';\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { isWidget } from 'ckeditor5/src/widget';\r\n/**\r\n * Returns a table widget editing view element if one is selected.\r\n */\r\nexport function getSelectedTableWidget(selection) {\r\n    const viewElement = selection.getSelectedElement();\r\n    if (viewElement && isTableWidget(viewElement)) {\r\n        return viewElement;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns a table widget editing view element if one is among the selection's ancestors.\r\n */\r\nexport function getTableWidgetAncestor(selection) {\r\n    const selectionPosition = selection.getFirstPosition();\r\n    if (!selectionPosition) {\r\n        return null;\r\n    }\r\n    let parent = selectionPosition.parent;\r\n    while (parent) {\r\n        if (parent.is('element') && isTableWidget(parent)) {\r\n            return parent;\r\n        }\r\n        parent = parent.parent;\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Checks if a given view element is a table widget.\r\n */\r\nfunction isTableWidget(viewElement) {\r\n    return !!viewElement.getCustomProperty('table') && isWidget(viewElement);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tabletoolbar\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { WidgetToolbarRepository } from 'ckeditor5/src/widget';\r\nimport { getSelectedTableWidget, getTableWidgetAncestor } from './utils/ui/widget';\r\n/**\r\n * The table toolbar class. It creates toolbars for the table feature and its content (for now only for the table cell content).\r\n *\r\n * The table toolbar shows up when a table widget is selected. Its components (e.g. buttons) are created based on the\r\n * {@link module:table/tableconfig~TableConfig#tableToolbar `table.tableToolbar` configuration option}.\r\n *\r\n * Table content toolbar shows up when the selection is inside the content of a table. It creates its component based on the\r\n * {@link module:table/tableconfig~TableConfig#contentToolbar `table.contentToolbar` configuration option}.\r\n */\r\nexport default class TableToolbar extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [WidgetToolbarRepository];\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableToolbar';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    afterInit() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const widgetToolbarRepository = editor.plugins.get(WidgetToolbarRepository);\r\n        const tableContentToolbarItems = editor.config.get('table.contentToolbar');\r\n        const tableToolbarItems = editor.config.get('table.tableToolbar');\r\n        if (tableContentToolbarItems) {\r\n            widgetToolbarRepository.register('tableContent', {\r\n                ariaLabel: t('Table toolbar'),\r\n                items: tableContentToolbarItems,\r\n                getRelatedElement: getTableWidgetAncestor\r\n            });\r\n        }\r\n        if (tableToolbarItems) {\r\n            widgetToolbarRepository.register('table', {\r\n                ariaLabel: t('Table toolbar'),\r\n                items: tableToolbarItems,\r\n                getRelatedElement: getSelectedTableWidget\r\n            });\r\n        }\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./colorinput.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./formrow.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./form.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./tableform.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./tablecellproperties.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tablecellproperties/ui/tablecellpropertiesview\r\n */\r\nimport { addListToDropdown, ButtonView, createLabeledDropdown, createLabeledInputText, FocusCycler, FormHeaderView, LabeledFieldView, LabelView, submitHandler, ToolbarView, View, ViewCollection } from 'ckeditor5/src/ui';\r\nimport { KeystrokeHandler, FocusTracker } from 'ckeditor5/src/utils';\r\nimport { icons } from 'ckeditor5/src/core';\r\nimport { fillToolbar, getBorderStyleDefinitions, getBorderStyleLabels, getLabeledColorInputCreator } from '../../utils/ui/table-properties';\r\nimport FormRowView from '../../ui/formrowview';\r\nimport '../../../theme/form.css';\r\nimport '../../../theme/tableform.css';\r\nimport '../../../theme/tablecellproperties.css';\r\nconst ALIGNMENT_ICONS = {\r\n    left: icons.alignLeft,\r\n    center: icons.alignCenter,\r\n    right: icons.alignRight,\r\n    justify: icons.alignJustify,\r\n    top: icons.alignTop,\r\n    middle: icons.alignMiddle,\r\n    bottom: icons.alignBottom\r\n};\r\n/**\r\n * The class representing a table cell properties form, allowing users to customize\r\n * certain style aspects of a table cell, for instance, border, padding, text alignment, etc..\r\n */\r\nexport default class TableCellPropertiesView extends View {\r\n    /**\r\n     * @param locale The {@link module:core/editor/editor~Editor#locale} instance.\r\n     * @param options Additional configuration of the view.\r\n     * @param options.borderColors A configuration of the border color palette used by the\r\n     * {@link module:table/tablecellproperties/ui/tablecellpropertiesview~TableCellPropertiesView#borderColorInput}.\r\n     * @param options.backgroundColors A configuration of the background color palette used by the\r\n     * {@link module:table/tablecellproperties/ui/tablecellpropertiesview~TableCellPropertiesView#backgroundInput}.\r\n     * @param options.defaultTableCellProperties The default table cell properties.\r\n     */\r\n    constructor(locale, options) {\r\n        super(locale);\r\n        this.set({\r\n            borderStyle: '',\r\n            borderWidth: '',\r\n            borderColor: '',\r\n            padding: '',\r\n            backgroundColor: '',\r\n            width: '',\r\n            height: '',\r\n            horizontalAlignment: '',\r\n            verticalAlignment: ''\r\n        });\r\n        this.options = options;\r\n        const { borderStyleDropdown, borderWidthInput, borderColorInput, borderRowLabel } = this._createBorderFields();\r\n        const { backgroundRowLabel, backgroundInput } = this._createBackgroundFields();\r\n        const { widthInput, operatorLabel, heightInput, dimensionsLabel } = this._createDimensionFields();\r\n        const { horizontalAlignmentToolbar, verticalAlignmentToolbar, alignmentLabel } = this._createAlignmentFields();\r\n        this.focusTracker = new FocusTracker();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this.children = this.createCollection();\r\n        this.borderStyleDropdown = borderStyleDropdown;\r\n        this.borderWidthInput = borderWidthInput;\r\n        this.borderColorInput = borderColorInput;\r\n        this.backgroundInput = backgroundInput;\r\n        this.paddingInput = this._createPaddingField();\r\n        this.widthInput = widthInput;\r\n        this.heightInput = heightInput;\r\n        this.horizontalAlignmentToolbar = horizontalAlignmentToolbar;\r\n        this.verticalAlignmentToolbar = verticalAlignmentToolbar;\r\n        // Defer creating to make sure other fields are present and the Save button can\r\n        // bind its #isEnabled to their error messages so there's no way to save unless all\r\n        // fields are valid.\r\n        const { saveButtonView, cancelButtonView } = this._createActionButtons();\r\n        this.saveButtonView = saveButtonView;\r\n        this.cancelButtonView = cancelButtonView;\r\n        this._focusables = new ViewCollection();\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate form fields backwards using the Shift + Tab keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate form fields forwards using the Tab key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        // Form header.\r\n        this.children.add(new FormHeaderView(locale, {\r\n            label: this.t('Cell properties')\r\n        }));\r\n        // Border row.\r\n        this.children.add(new FormRowView(locale, {\r\n            labelView: borderRowLabel,\r\n            children: [\r\n                borderRowLabel,\r\n                borderStyleDropdown,\r\n                borderColorInput,\r\n                borderWidthInput\r\n            ],\r\n            class: 'ck-table-form__border-row'\r\n        }));\r\n        // Background.\r\n        this.children.add(new FormRowView(locale, {\r\n            labelView: backgroundRowLabel,\r\n            children: [\r\n                backgroundRowLabel,\r\n                backgroundInput\r\n            ],\r\n            class: 'ck-table-form__background-row'\r\n        }));\r\n        // Dimensions row and padding.\r\n        this.children.add(new FormRowView(locale, {\r\n            children: [\r\n                // Dimensions row.\r\n                new FormRowView(locale, {\r\n                    labelView: dimensionsLabel,\r\n                    children: [\r\n                        dimensionsLabel,\r\n                        widthInput,\r\n                        operatorLabel,\r\n                        heightInput\r\n                    ],\r\n                    class: 'ck-table-form__dimensions-row'\r\n                }),\r\n                // Padding row.\r\n                new FormRowView(locale, {\r\n                    children: [\r\n                        this.paddingInput\r\n                    ],\r\n                    class: 'ck-table-cell-properties-form__padding-row'\r\n                })\r\n            ]\r\n        }));\r\n        // Text alignment row.\r\n        this.children.add(new FormRowView(locale, {\r\n            labelView: alignmentLabel,\r\n            children: [\r\n                alignmentLabel,\r\n                horizontalAlignmentToolbar,\r\n                verticalAlignmentToolbar\r\n            ],\r\n            class: 'ck-table-cell-properties-form__alignment-row'\r\n        }));\r\n        // Action row.\r\n        this.children.add(new FormRowView(locale, {\r\n            children: [\r\n                this.saveButtonView,\r\n                this.cancelButtonView\r\n            ],\r\n            class: 'ck-table-form__action-row'\r\n        }));\r\n        this.setTemplate({\r\n            tag: 'form',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-form',\r\n                    'ck-table-form',\r\n                    'ck-table-cell-properties-form'\r\n                ],\r\n                // https://github.com/ckeditor/ckeditor5-link/issues/90\r\n                tabindex: '-1'\r\n            },\r\n            children: this.children\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        // Enable the \"submit\" event for this view. It can be triggered by the #saveButtonView\r\n        // which is of the \"submit\" DOM \"type\".\r\n        submitHandler({\r\n            view: this\r\n        });\r\n        [\r\n            this.borderStyleDropdown,\r\n            this.borderColorInput,\r\n            this.borderColorInput.fieldView.dropdownView.buttonView,\r\n            this.borderWidthInput,\r\n            this.backgroundInput,\r\n            this.backgroundInput.fieldView.dropdownView.buttonView,\r\n            this.widthInput,\r\n            this.heightInput,\r\n            this.paddingInput,\r\n            this.horizontalAlignmentToolbar,\r\n            this.verticalAlignmentToolbar,\r\n            this.saveButtonView,\r\n            this.cancelButtonView\r\n        ].forEach(view => {\r\n            // Register the view as focusable.\r\n            this._focusables.add(view);\r\n            // Register the view in the focus tracker.\r\n            this.focusTracker.add(view.element);\r\n        });\r\n        // Mainly for closing using \"Esc\" and navigation using \"Tab\".\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Focuses the fist focusable field in the form.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #borderStyleDropdown},\r\n     * * {@link #borderWidthInput},\r\n     * * {@link #borderColorInput}.\r\n     */\r\n    _createBorderFields() {\r\n        const defaultTableCellProperties = this.options.defaultTableCellProperties;\r\n        const defaultBorder = {\r\n            style: defaultTableCellProperties.borderStyle,\r\n            width: defaultTableCellProperties.borderWidth,\r\n            color: defaultTableCellProperties.borderColor\r\n        };\r\n        const colorInputCreator = getLabeledColorInputCreator({\r\n            colorConfig: this.options.borderColors,\r\n            columns: 5,\r\n            defaultColorValue: defaultBorder.color\r\n        });\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        const accessibleLabel = t('Style');\r\n        // -- Group label ---------------------------------------------\r\n        const borderRowLabel = new LabelView(locale);\r\n        borderRowLabel.text = t('Border');\r\n        // -- Style ---------------------------------------------------\r\n        const styleLabels = getBorderStyleLabels(t);\r\n        const borderStyleDropdown = new LabeledFieldView(locale, createLabeledDropdown);\r\n        borderStyleDropdown.set({\r\n            label: accessibleLabel,\r\n            class: 'ck-table-form__border-style'\r\n        });\r\n        borderStyleDropdown.fieldView.buttonView.set({\r\n            ariaLabel: accessibleLabel,\r\n            ariaLabelledBy: undefined,\r\n            isOn: false,\r\n            withText: true,\r\n            tooltip: accessibleLabel\r\n        });\r\n        borderStyleDropdown.fieldView.buttonView.bind('label').to(this, 'borderStyle', value => {\r\n            return styleLabels[value ? value : 'none'];\r\n        });\r\n        borderStyleDropdown.fieldView.on('execute', evt => {\r\n            this.borderStyle = evt.source._borderStyleValue;\r\n        });\r\n        borderStyleDropdown.bind('isEmpty').to(this, 'borderStyle', value => !value);\r\n        addListToDropdown(borderStyleDropdown.fieldView, getBorderStyleDefinitions(this, defaultBorder.style), {\r\n            role: 'menu',\r\n            ariaLabel: accessibleLabel\r\n        });\r\n        // -- Width ---------------------------------------------------\r\n        const borderWidthInput = new LabeledFieldView(locale, createLabeledInputText);\r\n        borderWidthInput.set({\r\n            label: t('Width'),\r\n            class: 'ck-table-form__border-width'\r\n        });\r\n        borderWidthInput.fieldView.bind('value').to(this, 'borderWidth');\r\n        borderWidthInput.bind('isEnabled').to(this, 'borderStyle', isBorderStyleSet);\r\n        borderWidthInput.fieldView.on('input', () => {\r\n            this.borderWidth = borderWidthInput.fieldView.element.value;\r\n        });\r\n        // -- Color ---------------------------------------------------\r\n        const borderColorInput = new LabeledFieldView(locale, colorInputCreator);\r\n        borderColorInput.set({\r\n            label: t('Color'),\r\n            class: 'ck-table-form__border-color'\r\n        });\r\n        borderColorInput.fieldView.bind('value').to(this, 'borderColor');\r\n        borderColorInput.bind('isEnabled').to(this, 'borderStyle', isBorderStyleSet);\r\n        borderColorInput.fieldView.on('input', () => {\r\n            this.borderColor = borderColorInput.fieldView.value;\r\n        });\r\n        // Reset the border color and width fields depending on the `border-style` value.\r\n        this.on('change:borderStyle', (evt, name, newValue, oldValue) => {\r\n            // When removing the border (`border-style:none`), clear the remaining `border-*` properties.\r\n            // See: https://github.com/ckeditor/ckeditor5/issues/6227.\r\n            if (!isBorderStyleSet(newValue)) {\r\n                this.borderColor = '';\r\n                this.borderWidth = '';\r\n            }\r\n            // When setting the `border-style` from `none`, set the default `border-color` and `border-width` properties.\r\n            if (!isBorderStyleSet(oldValue)) {\r\n                this.borderColor = defaultBorder.color;\r\n                this.borderWidth = defaultBorder.width;\r\n            }\r\n        });\r\n        return {\r\n            borderRowLabel,\r\n            borderStyleDropdown,\r\n            borderColorInput,\r\n            borderWidthInput\r\n        };\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #backgroundInput}.\r\n     */\r\n    _createBackgroundFields() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        // -- Group label ---------------------------------------------\r\n        const backgroundRowLabel = new LabelView(locale);\r\n        backgroundRowLabel.text = t('Background');\r\n        // -- Background color input -----------------------------------\r\n        const colorInputCreator = getLabeledColorInputCreator({\r\n            colorConfig: this.options.backgroundColors,\r\n            columns: 5,\r\n            defaultColorValue: this.options.defaultTableCellProperties.backgroundColor\r\n        });\r\n        const backgroundInput = new LabeledFieldView(locale, colorInputCreator);\r\n        backgroundInput.set({\r\n            label: t('Color'),\r\n            class: 'ck-table-cell-properties-form__background'\r\n        });\r\n        backgroundInput.fieldView.bind('value').to(this, 'backgroundColor');\r\n        backgroundInput.fieldView.on('input', () => {\r\n            this.backgroundColor = backgroundInput.fieldView.value;\r\n        });\r\n        return {\r\n            backgroundRowLabel,\r\n            backgroundInput\r\n        };\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #widthInput}.\r\n     * * {@link #heightInput}.\r\n     */\r\n    _createDimensionFields() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        // -- Label ---------------------------------------------------\r\n        const dimensionsLabel = new LabelView(locale);\r\n        dimensionsLabel.text = t('Dimensions');\r\n        // -- Width ---------------------------------------------------\r\n        const widthInput = new LabeledFieldView(locale, createLabeledInputText);\r\n        widthInput.set({\r\n            label: t('Width'),\r\n            class: 'ck-table-form__dimensions-row__width'\r\n        });\r\n        widthInput.fieldView.bind('value').to(this, 'width');\r\n        widthInput.fieldView.on('input', () => {\r\n            this.width = widthInput.fieldView.element.value;\r\n        });\r\n        // -- Operator ---------------------------------------------------\r\n        const operatorLabel = new View(locale);\r\n        operatorLabel.setTemplate({\r\n            tag: 'span',\r\n            attributes: {\r\n                class: [\r\n                    'ck-table-form__dimension-operator'\r\n                ]\r\n            },\r\n            children: [\r\n                { text: '×' }\r\n            ]\r\n        });\r\n        // -- Height ---------------------------------------------------\r\n        const heightInput = new LabeledFieldView(locale, createLabeledInputText);\r\n        heightInput.set({\r\n            label: t('Height'),\r\n            class: 'ck-table-form__dimensions-row__height'\r\n        });\r\n        heightInput.fieldView.bind('value').to(this, 'height');\r\n        heightInput.fieldView.on('input', () => {\r\n            this.height = heightInput.fieldView.element.value;\r\n        });\r\n        return {\r\n            dimensionsLabel,\r\n            widthInput,\r\n            operatorLabel,\r\n            heightInput\r\n        };\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #paddingInput}.\r\n     */\r\n    _createPaddingField() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        const paddingInput = new LabeledFieldView(locale, createLabeledInputText);\r\n        paddingInput.set({\r\n            label: t('Padding'),\r\n            class: 'ck-table-cell-properties-form__padding'\r\n        });\r\n        paddingInput.fieldView.bind('value').to(this, 'padding');\r\n        paddingInput.fieldView.on('input', () => {\r\n            this.padding = paddingInput.fieldView.element.value;\r\n        });\r\n        return paddingInput;\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #horizontalAlignmentToolbar},\r\n     * * {@link #verticalAlignmentToolbar}.\r\n     */\r\n    _createAlignmentFields() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        const alignmentLabel = new LabelView(locale);\r\n        alignmentLabel.text = t('Table cell text alignment');\r\n        // -- Horizontal ---------------------------------------------------\r\n        const horizontalAlignmentToolbar = new ToolbarView(locale);\r\n        const isContentRTL = locale.contentLanguageDirection === 'rtl';\r\n        horizontalAlignmentToolbar.set({\r\n            isCompact: true,\r\n            ariaLabel: t('Horizontal text alignment toolbar')\r\n        });\r\n        fillToolbar({\r\n            view: this,\r\n            icons: ALIGNMENT_ICONS,\r\n            toolbar: horizontalAlignmentToolbar,\r\n            labels: this._horizontalAlignmentLabels,\r\n            propertyName: 'horizontalAlignment',\r\n            nameToValue: name => {\r\n                // For the RTL content, we want to swap the buttons \"align to the left\" and \"align to the right\".\r\n                if (isContentRTL) {\r\n                    if (name === 'left') {\r\n                        return 'right';\r\n                    }\r\n                    else if (name === 'right') {\r\n                        return 'left';\r\n                    }\r\n                }\r\n                return name;\r\n            },\r\n            defaultValue: this.options.defaultTableCellProperties.horizontalAlignment\r\n        });\r\n        // -- Vertical -----------------------------------------------------\r\n        const verticalAlignmentToolbar = new ToolbarView(locale);\r\n        verticalAlignmentToolbar.set({\r\n            isCompact: true,\r\n            ariaLabel: t('Vertical text alignment toolbar')\r\n        });\r\n        fillToolbar({\r\n            view: this,\r\n            icons: ALIGNMENT_ICONS,\r\n            toolbar: verticalAlignmentToolbar,\r\n            labels: this._verticalAlignmentLabels,\r\n            propertyName: 'verticalAlignment',\r\n            defaultValue: this.options.defaultTableCellProperties.verticalAlignment\r\n        });\r\n        return {\r\n            horizontalAlignmentToolbar,\r\n            verticalAlignmentToolbar,\r\n            alignmentLabel\r\n        };\r\n    }\r\n    /**\r\n     * Creates the following form controls:\r\n     *\r\n     * * {@link #saveButtonView},\r\n     * * {@link #cancelButtonView}.\r\n     */\r\n    _createActionButtons() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        const saveButtonView = new ButtonView(locale);\r\n        const cancelButtonView = new ButtonView(locale);\r\n        const fieldsThatShouldValidateToSave = [\r\n            this.borderWidthInput,\r\n            this.borderColorInput,\r\n            this.backgroundInput,\r\n            this.paddingInput\r\n        ];\r\n        saveButtonView.set({\r\n            label: t('Save'),\r\n            icon: icons.check,\r\n            class: 'ck-button-save',\r\n            type: 'submit',\r\n            withText: true\r\n        });\r\n        saveButtonView.bind('isEnabled').toMany(fieldsThatShouldValidateToSave, 'errorText', (...errorTexts) => {\r\n            return errorTexts.every(errorText => !errorText);\r\n        });\r\n        cancelButtonView.set({\r\n            label: t('Cancel'),\r\n            icon: icons.cancel,\r\n            class: 'ck-button-cancel',\r\n            withText: true\r\n        });\r\n        cancelButtonView.delegate('execute').to(this, 'cancel');\r\n        return {\r\n            saveButtonView, cancelButtonView\r\n        };\r\n    }\r\n    /**\r\n     * Provides localized labels for {@link #horizontalAlignmentToolbar} buttons.\r\n     */\r\n    get _horizontalAlignmentLabels() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        const left = t('Align cell text to the left');\r\n        const center = t('Align cell text to the center');\r\n        const right = t('Align cell text to the right');\r\n        const justify = t('Justify cell text');\r\n        // Returns object with a proper order of labels.\r\n        if (locale.uiLanguageDirection === 'rtl') {\r\n            return { right, center, left, justify };\r\n        }\r\n        else {\r\n            return { left, center, right, justify };\r\n        }\r\n    }\r\n    /**\r\n     * Provides localized labels for {@link #verticalAlignmentToolbar} buttons.\r\n     */\r\n    get _verticalAlignmentLabels() {\r\n        const t = this.t;\r\n        return {\r\n            top: t('Align cell text to the top'),\r\n            middle: t('Align cell text to the middle'),\r\n            bottom: t('Align cell text to the bottom')\r\n        };\r\n    }\r\n}\r\nfunction isBorderStyleSet(value) {\r\n    return value !== 'none';\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/utils/ui/contextualballoon\r\n */\r\nimport { Rect } from 'ckeditor5/src/utils';\r\nimport { BalloonPanelView } from 'ckeditor5/src/ui';\r\nimport { getTableWidgetAncestor } from './widget';\r\nconst DEFAULT_BALLOON_POSITIONS = BalloonPanelView.defaultPositions;\r\nconst BALLOON_POSITIONS = [\r\n    DEFAULT_BALLOON_POSITIONS.northArrowSouth,\r\n    DEFAULT_BALLOON_POSITIONS.northArrowSouthWest,\r\n    DEFAULT_BALLOON_POSITIONS.northArrowSouthEast,\r\n    DEFAULT_BALLOON_POSITIONS.southArrowNorth,\r\n    DEFAULT_BALLOON_POSITIONS.southArrowNorthWest,\r\n    DEFAULT_BALLOON_POSITIONS.southArrowNorthEast,\r\n    DEFAULT_BALLOON_POSITIONS.viewportStickyNorth\r\n];\r\n/**\r\n * A helper utility that positions the\r\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} instance\r\n * with respect to the table in the editor content, if one is selected.\r\n *\r\n * @param editor The editor instance.\r\n * @param target Either \"cell\" or \"table\". Determines the target the balloon will be attached to.\r\n */\r\nexport function repositionContextualBalloon(editor, target) {\r\n    const balloon = editor.plugins.get('ContextualBalloon');\r\n    if (getTableWidgetAncestor(editor.editing.view.document.selection)) {\r\n        let position;\r\n        if (target === 'cell') {\r\n            position = getBalloonCellPositionData(editor);\r\n        }\r\n        else {\r\n            position = getBalloonTablePositionData(editor);\r\n        }\r\n        balloon.updatePosition(position);\r\n    }\r\n}\r\n/**\r\n * Returns the positioning options that control the geometry of the\r\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} with respect\r\n * to the selected table in the editor content.\r\n *\r\n * @param editor The editor instance.\r\n */\r\nexport function getBalloonTablePositionData(editor) {\r\n    const firstPosition = editor.model.document.selection.getFirstPosition();\r\n    const modelTable = firstPosition.findAncestor('table');\r\n    const viewTable = editor.editing.mapper.toViewElement(modelTable);\r\n    return {\r\n        target: editor.editing.view.domConverter.mapViewToDom(viewTable),\r\n        positions: BALLOON_POSITIONS\r\n    };\r\n}\r\n/**\r\n * Returns the positioning options that control the geometry of the\r\n * {@link module:ui/panel/balloon/contextualballoon~ContextualBalloon contextual balloon} with respect\r\n * to the selected table cell in the editor content.\r\n *\r\n * @param editor The editor instance.\r\n */\r\nexport function getBalloonCellPositionData(editor) {\r\n    const mapper = editor.editing.mapper;\r\n    const domConverter = editor.editing.view.domConverter;\r\n    const selection = editor.model.document.selection;\r\n    if (selection.rangeCount > 1) {\r\n        return {\r\n            target: () => createBoundingRect(selection.getRanges(), editor),\r\n            positions: BALLOON_POSITIONS\r\n        };\r\n    }\r\n    const modelTableCell = getTableCellAtPosition(selection.getFirstPosition());\r\n    const viewTableCell = mapper.toViewElement(modelTableCell);\r\n    return {\r\n        target: domConverter.mapViewToDom(viewTableCell),\r\n        positions: BALLOON_POSITIONS\r\n    };\r\n}\r\n/**\r\n * Returns the first selected table cell from a multi-cell or in-cell selection.\r\n *\r\n * @param position Document position.\r\n */\r\nfunction getTableCellAtPosition(position) {\r\n    const isTableCellSelected = position.nodeAfter && position.nodeAfter.is('element', 'tableCell');\r\n    return isTableCellSelected ? position.nodeAfter : position.findAncestor('tableCell');\r\n}\r\n/**\r\n * Returns bounding rectangle for given model ranges.\r\n *\r\n * @param ranges Model ranges that the bounding rect should be returned for.\r\n * @param editor The editor instance.\r\n */\r\nfunction createBoundingRect(ranges, editor) {\r\n    const mapper = editor.editing.mapper;\r\n    const domConverter = editor.editing.view.domConverter;\r\n    const rects = Array.from(ranges).map(range => {\r\n        const modelTableCell = getTableCellAtPosition(range.start);\r\n        const viewTableCell = mapper.toViewElement(modelTableCell);\r\n        return new Rect(domConverter.mapViewToDom(viewTableCell));\r\n    });\r\n    return Rect.getBoundingRect(rects);\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Checks if the provided model element is a `table`.\r\n *\r\n * @param modelElement Element to check if it is a table.\r\n */\r\nexport function isTable(modelElement) {\r\n    return !!modelElement && modelElement.is('element', 'table');\r\n}\r\n/**\r\n * Returns the caption model element from a given table element. Returns `null` if no caption is found.\r\n *\r\n * @param tableModelElement Table element in which we will try to find a caption element.\r\n */\r\nexport function getCaptionFromTableModelElement(tableModelElement) {\r\n    for (const node of tableModelElement.getChildren()) {\r\n        if (node.is('element', 'caption')) {\r\n            return node;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Returns the caption model element for a model selection. Returns `null` if the selection has no caption element ancestor.\r\n *\r\n * @param selection The selection checked for caption presence.\r\n */\r\nexport function getCaptionFromModelSelection(selection) {\r\n    const tableElement = getSelectionAffectedTable(selection);\r\n    if (!tableElement) {\r\n        return null;\r\n    }\r\n    return getCaptionFromTableModelElement(tableElement);\r\n}\r\n/**\r\n * {@link module:engine/view/matcher~Matcher} pattern. Checks if a given element is a caption.\r\n *\r\n * There are two possible forms of the valid caption:\r\n *  - A `<figcaption>` element inside a `<figure class=\"table\">` element.\r\n *  - A `<caption>` inside a <table>.\r\n *\r\n * @returns Returns the object accepted by {@link module:engine/view/matcher~Matcher} or `null` if the element cannot be matched.\r\n */\r\nexport function matchTableCaptionViewElement(element) {\r\n    const parent = element.parent;\r\n    if (element.name == 'figcaption' && parent && parent.is('element', 'figure') && parent.hasClass('table')) {\r\n        return { name: true };\r\n    }\r\n    if (element.name == 'caption' && parent && parent.is('element', 'table')) {\r\n        return { name: true };\r\n    }\r\n    return null;\r\n}\r\n/**\r\n * Depending on the position of the selection we either return the table under cursor or look for the table higher in the hierarchy.\r\n */\r\nexport function getSelectionAffectedTable(selection) {\r\n    const selectedElement = selection.getSelectedElement();\r\n    // Is the command triggered from the `tableToolbar`?\r\n    if (selectedElement && selectedElement.is('element', 'table')) {\r\n        return selectedElement;\r\n    }\r\n    return selection.getFirstPosition().findAncestor('table');\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./tableproperties.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tableproperties/ui/tablepropertiesview\r\n */\r\nimport { addListToDropdown, ButtonView, createLabeledDropdown, createLabeledInputText, FocusCycler, FormHeaderView, LabeledFieldView, LabelView, submitHandler, ToolbarView, View, ViewCollection } from 'ckeditor5/src/ui';\r\nimport { FocusTracker, KeystrokeHandler } from 'ckeditor5/src/utils';\r\nimport { icons } from 'ckeditor5/src/core';\r\nimport { fillToolbar, getBorderStyleDefinitions, getBorderStyleLabels, getLabeledColorInputCreator } from '../../utils/ui/table-properties';\r\nimport FormRowView from '../../ui/formrowview';\r\nimport '../../../theme/form.css';\r\nimport '../../../theme/tableform.css';\r\nimport '../../../theme/tableproperties.css';\r\nconst ALIGNMENT_ICONS = {\r\n    left: icons.objectLeft,\r\n    center: icons.objectCenter,\r\n    right: icons.objectRight\r\n};\r\n/**\r\n * The class representing a table properties form, allowing users to customize\r\n * certain style aspects of a table, for instance, border, background color, alignment, etc..\r\n */\r\nexport default class TablePropertiesView extends View {\r\n    /**\r\n     * @param locale The {@link module:core/editor/editor~Editor#locale} instance.\r\n     * @param options Additional configuration of the view.\r\n     */\r\n    constructor(locale, options) {\r\n        super(locale);\r\n        this.set({\r\n            borderStyle: '',\r\n            borderWidth: '',\r\n            borderColor: '',\r\n            backgroundColor: '',\r\n            width: '',\r\n            height: '',\r\n            alignment: ''\r\n        });\r\n        this.options = options;\r\n        const { borderStyleDropdown, borderWidthInput, borderColorInput, borderRowLabel } = this._createBorderFields();\r\n        const { backgroundRowLabel, backgroundInput } = this._createBackgroundFields();\r\n        const { widthInput, operatorLabel, heightInput, dimensionsLabel } = this._createDimensionFields();\r\n        const { alignmentToolbar, alignmentLabel } = this._createAlignmentFields();\r\n        this.focusTracker = new FocusTracker();\r\n        this.keystrokes = new KeystrokeHandler();\r\n        this.children = this.createCollection();\r\n        this.borderStyleDropdown = borderStyleDropdown;\r\n        this.borderWidthInput = borderWidthInput;\r\n        this.borderColorInput = borderColorInput;\r\n        this.backgroundInput = backgroundInput;\r\n        this.widthInput = widthInput;\r\n        this.heightInput = heightInput;\r\n        this.alignmentToolbar = alignmentToolbar;\r\n        // Defer creating to make sure other fields are present and the Save button can\r\n        // bind its #isEnabled to their error messages so there's no way to save unless all\r\n        // fields are valid.\r\n        const { saveButtonView, cancelButtonView } = this._createActionButtons();\r\n        this.saveButtonView = saveButtonView;\r\n        this.cancelButtonView = cancelButtonView;\r\n        this._focusables = new ViewCollection();\r\n        this._focusCycler = new FocusCycler({\r\n            focusables: this._focusables,\r\n            focusTracker: this.focusTracker,\r\n            keystrokeHandler: this.keystrokes,\r\n            actions: {\r\n                // Navigate form fields backwards using the Shift + Tab keystroke.\r\n                focusPrevious: 'shift + tab',\r\n                // Navigate form fields forwards using the Tab key.\r\n                focusNext: 'tab'\r\n            }\r\n        });\r\n        // Form header.\r\n        this.children.add(new FormHeaderView(locale, {\r\n            label: this.t('Table properties')\r\n        }));\r\n        // Border row.\r\n        this.children.add(new FormRowView(locale, {\r\n            labelView: borderRowLabel,\r\n            children: [\r\n                borderRowLabel,\r\n                borderStyleDropdown,\r\n                borderColorInput,\r\n                borderWidthInput\r\n            ],\r\n            class: 'ck-table-form__border-row'\r\n        }));\r\n        // Background row.\r\n        this.children.add(new FormRowView(locale, {\r\n            labelView: backgroundRowLabel,\r\n            children: [\r\n                backgroundRowLabel,\r\n                backgroundInput\r\n            ],\r\n            class: 'ck-table-form__background-row'\r\n        }));\r\n        this.children.add(new FormRowView(locale, {\r\n            children: [\r\n                // Dimensions row.\r\n                new FormRowView(locale, {\r\n                    labelView: dimensionsLabel,\r\n                    children: [\r\n                        dimensionsLabel,\r\n                        widthInput,\r\n                        operatorLabel,\r\n                        heightInput\r\n                    ],\r\n                    class: 'ck-table-form__dimensions-row'\r\n                }),\r\n                // Alignment row.\r\n                new FormRowView(locale, {\r\n                    labelView: alignmentLabel,\r\n                    children: [\r\n                        alignmentLabel,\r\n                        alignmentToolbar\r\n                    ],\r\n                    class: 'ck-table-properties-form__alignment-row'\r\n                })\r\n            ]\r\n        }));\r\n        // Action row.\r\n        this.children.add(new FormRowView(locale, {\r\n            children: [\r\n                this.saveButtonView,\r\n                this.cancelButtonView\r\n            ],\r\n            class: 'ck-table-form__action-row'\r\n        }));\r\n        this.setTemplate({\r\n            tag: 'form',\r\n            attributes: {\r\n                class: [\r\n                    'ck',\r\n                    'ck-form',\r\n                    'ck-table-form',\r\n                    'ck-table-properties-form'\r\n                ],\r\n                // https://github.com/ckeditor/ckeditor5-link/issues/90\r\n                tabindex: '-1'\r\n            },\r\n            children: this.children\r\n        });\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    render() {\r\n        super.render();\r\n        // Enable the \"submit\" event for this view. It can be triggered by the #saveButtonView\r\n        // which is of the \"submit\" DOM \"type\".\r\n        submitHandler({\r\n            view: this\r\n        });\r\n        [\r\n            this.borderStyleDropdown,\r\n            this.borderColorInput,\r\n            this.borderColorInput.fieldView.dropdownView.buttonView,\r\n            this.borderWidthInput,\r\n            this.backgroundInput,\r\n            this.backgroundInput.fieldView.dropdownView.buttonView,\r\n            this.widthInput,\r\n            this.heightInput,\r\n            this.alignmentToolbar,\r\n            this.saveButtonView,\r\n            this.cancelButtonView\r\n        ].forEach(view => {\r\n            // Register the view as focusable.\r\n            this._focusables.add(view);\r\n            // Register the view in the focus tracker.\r\n            this.focusTracker.add(view.element);\r\n        });\r\n        // Mainly for closing using \"Esc\" and navigation using \"Tab\".\r\n        this.keystrokes.listenTo(this.element);\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        super.destroy();\r\n        this.focusTracker.destroy();\r\n        this.keystrokes.destroy();\r\n    }\r\n    /**\r\n     * Focuses the fist focusable field in the form.\r\n     */\r\n    focus() {\r\n        this._focusCycler.focusFirst();\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #borderStyleDropdown},\r\n     * * {@link #borderWidthInput},\r\n     * * {@link #borderColorInput}.\r\n     */\r\n    _createBorderFields() {\r\n        const defaultTableProperties = this.options.defaultTableProperties;\r\n        const defaultBorder = {\r\n            style: defaultTableProperties.borderStyle,\r\n            width: defaultTableProperties.borderWidth,\r\n            color: defaultTableProperties.borderColor\r\n        };\r\n        const colorInputCreator = getLabeledColorInputCreator({\r\n            colorConfig: this.options.borderColors,\r\n            columns: 5,\r\n            defaultColorValue: defaultBorder.color\r\n        });\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        const accessibleLabel = t('Style');\r\n        // -- Group label ---------------------------------------------\r\n        const borderRowLabel = new LabelView(locale);\r\n        borderRowLabel.text = t('Border');\r\n        // -- Style ---------------------------------------------------\r\n        const styleLabels = getBorderStyleLabels(t);\r\n        const borderStyleDropdown = new LabeledFieldView(locale, createLabeledDropdown);\r\n        borderStyleDropdown.set({\r\n            label: accessibleLabel,\r\n            class: 'ck-table-form__border-style'\r\n        });\r\n        borderStyleDropdown.fieldView.buttonView.set({\r\n            ariaLabel: accessibleLabel,\r\n            ariaLabelledBy: undefined,\r\n            isOn: false,\r\n            withText: true,\r\n            tooltip: accessibleLabel\r\n        });\r\n        borderStyleDropdown.fieldView.buttonView.bind('label').to(this, 'borderStyle', value => {\r\n            return styleLabels[value ? value : 'none'];\r\n        });\r\n        borderStyleDropdown.fieldView.on('execute', evt => {\r\n            this.borderStyle = evt.source._borderStyleValue;\r\n        });\r\n        borderStyleDropdown.bind('isEmpty').to(this, 'borderStyle', value => !value);\r\n        addListToDropdown(borderStyleDropdown.fieldView, getBorderStyleDefinitions(this, defaultBorder.style), {\r\n            role: 'menu',\r\n            ariaLabel: accessibleLabel\r\n        });\r\n        // -- Width ---------------------------------------------------\r\n        const borderWidthInput = new LabeledFieldView(locale, createLabeledInputText);\r\n        borderWidthInput.set({\r\n            label: t('Width'),\r\n            class: 'ck-table-form__border-width'\r\n        });\r\n        borderWidthInput.fieldView.bind('value').to(this, 'borderWidth');\r\n        borderWidthInput.bind('isEnabled').to(this, 'borderStyle', isBorderStyleSet);\r\n        borderWidthInput.fieldView.on('input', () => {\r\n            this.borderWidth = borderWidthInput.fieldView.element.value;\r\n        });\r\n        // -- Color ---------------------------------------------------\r\n        const borderColorInput = new LabeledFieldView(locale, colorInputCreator);\r\n        borderColorInput.set({\r\n            label: t('Color'),\r\n            class: 'ck-table-form__border-color'\r\n        });\r\n        borderColorInput.fieldView.bind('value').to(this, 'borderColor');\r\n        borderColorInput.bind('isEnabled').to(this, 'borderStyle', isBorderStyleSet);\r\n        borderColorInput.fieldView.on('input', () => {\r\n            this.borderColor = borderColorInput.fieldView.value;\r\n        });\r\n        // Reset the border color and width fields depending on the `border-style` value.\r\n        this.on('change:borderStyle', (evt, name, newValue, oldValue) => {\r\n            // When removing the border (`border-style:none`), clear the remaining `border-*` properties.\r\n            // See: https://github.com/ckeditor/ckeditor5/issues/6227.\r\n            if (!isBorderStyleSet(newValue)) {\r\n                this.borderColor = '';\r\n                this.borderWidth = '';\r\n            }\r\n            // When setting the `border-style` from `none`, set the default `border-color` and `border-width` properties.\r\n            if (!isBorderStyleSet(oldValue)) {\r\n                this.borderColor = defaultBorder.color;\r\n                this.borderWidth = defaultBorder.width;\r\n            }\r\n        });\r\n        return {\r\n            borderRowLabel,\r\n            borderStyleDropdown,\r\n            borderColorInput,\r\n            borderWidthInput\r\n        };\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #backgroundInput}.\r\n     */\r\n    _createBackgroundFields() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        // -- Group label ---------------------------------------------\r\n        const backgroundRowLabel = new LabelView(locale);\r\n        backgroundRowLabel.text = t('Background');\r\n        // -- Background color input -----------------------------------\r\n        const backgroundInputCreator = getLabeledColorInputCreator({\r\n            colorConfig: this.options.backgroundColors,\r\n            columns: 5,\r\n            defaultColorValue: this.options.defaultTableProperties.backgroundColor\r\n        });\r\n        const backgroundInput = new LabeledFieldView(locale, backgroundInputCreator);\r\n        backgroundInput.set({\r\n            label: t('Color'),\r\n            class: 'ck-table-properties-form__background'\r\n        });\r\n        backgroundInput.fieldView.bind('value').to(this, 'backgroundColor');\r\n        backgroundInput.fieldView.on('input', () => {\r\n            this.backgroundColor = backgroundInput.fieldView.value;\r\n        });\r\n        return {\r\n            backgroundRowLabel,\r\n            backgroundInput\r\n        };\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #widthInput},\r\n     * * {@link #heightInput}.\r\n     */\r\n    _createDimensionFields() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        // -- Label ---------------------------------------------------\r\n        const dimensionsLabel = new LabelView(locale);\r\n        dimensionsLabel.text = t('Dimensions');\r\n        // -- Width ---------------------------------------------------\r\n        const widthInput = new LabeledFieldView(locale, createLabeledInputText);\r\n        widthInput.set({\r\n            label: t('Width'),\r\n            class: 'ck-table-form__dimensions-row__width'\r\n        });\r\n        widthInput.fieldView.bind('value').to(this, 'width');\r\n        widthInput.fieldView.on('input', () => {\r\n            this.width = widthInput.fieldView.element.value;\r\n        });\r\n        // -- Operator ---------------------------------------------------\r\n        const operatorLabel = new View(locale);\r\n        operatorLabel.setTemplate({\r\n            tag: 'span',\r\n            attributes: {\r\n                class: [\r\n                    'ck-table-form__dimension-operator'\r\n                ]\r\n            },\r\n            children: [\r\n                { text: '×' }\r\n            ]\r\n        });\r\n        // -- Height ---------------------------------------------------\r\n        const heightInput = new LabeledFieldView(locale, createLabeledInputText);\r\n        heightInput.set({\r\n            label: t('Height'),\r\n            class: 'ck-table-form__dimensions-row__height'\r\n        });\r\n        heightInput.fieldView.bind('value').to(this, 'height');\r\n        heightInput.fieldView.on('input', () => {\r\n            this.height = heightInput.fieldView.element.value;\r\n        });\r\n        return {\r\n            dimensionsLabel,\r\n            widthInput,\r\n            operatorLabel,\r\n            heightInput\r\n        };\r\n    }\r\n    /**\r\n     * Creates the following form fields:\r\n     *\r\n     * * {@link #alignmentToolbar}.\r\n     */\r\n    _createAlignmentFields() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        // -- Label ---------------------------------------------------\r\n        const alignmentLabel = new LabelView(locale);\r\n        alignmentLabel.text = t('Alignment');\r\n        // -- Toolbar ---------------------------------------------------\r\n        const alignmentToolbar = new ToolbarView(locale);\r\n        alignmentToolbar.set({\r\n            isCompact: true,\r\n            ariaLabel: t('Table alignment toolbar')\r\n        });\r\n        fillToolbar({\r\n            view: this,\r\n            icons: ALIGNMENT_ICONS,\r\n            toolbar: alignmentToolbar,\r\n            labels: this._alignmentLabels,\r\n            propertyName: 'alignment',\r\n            defaultValue: this.options.defaultTableProperties.alignment\r\n        });\r\n        return {\r\n            alignmentLabel,\r\n            alignmentToolbar\r\n        };\r\n    }\r\n    /**\r\n     * Creates the following form controls:\r\n     *\r\n     * * {@link #saveButtonView},\r\n     * * {@link #cancelButtonView}.\r\n     */\r\n    _createActionButtons() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        const saveButtonView = new ButtonView(locale);\r\n        const cancelButtonView = new ButtonView(locale);\r\n        const fieldsThatShouldValidateToSave = [\r\n            this.borderWidthInput,\r\n            this.borderColorInput,\r\n            this.backgroundInput,\r\n            this.widthInput,\r\n            this.heightInput\r\n        ];\r\n        saveButtonView.set({\r\n            label: t('Save'),\r\n            icon: icons.check,\r\n            class: 'ck-button-save',\r\n            type: 'submit',\r\n            withText: true\r\n        });\r\n        saveButtonView.bind('isEnabled').toMany(fieldsThatShouldValidateToSave, 'errorText', (...errorTexts) => {\r\n            return errorTexts.every(errorText => !errorText);\r\n        });\r\n        cancelButtonView.set({\r\n            label: t('Cancel'),\r\n            icon: icons.cancel,\r\n            class: 'ck-button-cancel',\r\n            withText: true\r\n        });\r\n        cancelButtonView.delegate('execute').to(this, 'cancel');\r\n        return {\r\n            saveButtonView, cancelButtonView\r\n        };\r\n    }\r\n    /**\r\n     * Provides localized labels for {@link #alignmentToolbar} buttons.\r\n     */\r\n    get _alignmentLabels() {\r\n        const locale = this.locale;\r\n        const t = this.t;\r\n        const left = t('Align table to the left');\r\n        const center = t('Center table');\r\n        const right = t('Align table to the right');\r\n        // Returns object with a proper order of labels.\r\n        if (locale.uiLanguageDirection === 'rtl') {\r\n            return { right, center, left };\r\n        }\r\n        else {\r\n            return { left, center, right };\r\n        }\r\n    }\r\n}\r\nfunction isBorderStyleSet(value) {\r\n    return value !== 'none';\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n* @module table/tablecaption/toggletablecaptioncommand\r\n*/\r\nimport { Command } from 'ckeditor5/src/core';\r\nimport { getCaptionFromTableModelElement, getSelectionAffectedTable } from './utils';\r\n/**\r\n * The toggle table caption command.\r\n *\r\n * This command is registered by {@link module:table/tablecaption/tablecaptionediting~TableCaptionEditing} as the\r\n * `'toggleTableCaption'` editor command.\r\n *\r\n * Executing this command:\r\n *\r\n * * either adds or removes the table caption of a selected table (depending on whether the caption is present or not),\r\n * * removes the table caption if the selection is anchored in one.\r\n *\r\n * ```ts\r\n * // Toggle the presence of the caption.\r\n * editor.execute( 'toggleTableCaption' );\r\n * ```\r\n *\r\n * **Note**: You can move the selection to the caption right away as it shows up upon executing this command by using\r\n * the `focusCaptionOnShow` option:\r\n *\r\n * ```ts\r\n * editor.execute( 'toggleTableCaption', { focusCaptionOnShow: true } );\r\n * ```\r\n */\r\nexport default class ToggleTableCaptionCommand extends Command {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    refresh() {\r\n        const editor = this.editor;\r\n        const tableElement = getSelectionAffectedTable(editor.model.document.selection);\r\n        this.isEnabled = !!tableElement;\r\n        if (!this.isEnabled) {\r\n            this.value = false;\r\n        }\r\n        else {\r\n            this.value = !!getCaptionFromTableModelElement(tableElement);\r\n        }\r\n    }\r\n    /**\r\n     * Executes the command.\r\n     *\r\n     * ```ts\r\n     * editor.execute( 'toggleTableCaption' );\r\n     * ```\r\n     *\r\n     * @param options Options for the executed command.\r\n     * @param options.focusCaptionOnShow When true and the caption shows up, the selection will be moved into it straight away.\r\n     * @fires execute\r\n     */\r\n    execute({ focusCaptionOnShow = false } = {}) {\r\n        this.editor.model.change(writer => {\r\n            if (this.value) {\r\n                this._hideTableCaption(writer);\r\n            }\r\n            else {\r\n                this._showTableCaption(writer, focusCaptionOnShow);\r\n            }\r\n        });\r\n    }\r\n    /**\r\n     * Shows the table caption. Also:\r\n     *\r\n     * * it attempts to restore the caption content from the `TableCaptionEditing` caption registry,\r\n     * * it moves the selection to the caption right away, it the `focusCaptionOnShow` option was set.\r\n     *\r\n     * @param focusCaptionOnShow Default focus behavior when showing the caption.\r\n     */\r\n    _showTableCaption(writer, focusCaptionOnShow) {\r\n        const model = this.editor.model;\r\n        const tableElement = getSelectionAffectedTable(model.document.selection);\r\n        const tableCaptionEditing = this.editor.plugins.get('TableCaptionEditing');\r\n        const savedCaptionElement = tableCaptionEditing._getSavedCaption(tableElement);\r\n        // Try restoring the caption from the TableCaptionEditing plugin storage.\r\n        const newCaptionElement = savedCaptionElement || writer.createElement('caption');\r\n        model.insertContent(newCaptionElement, tableElement, 'end');\r\n        if (focusCaptionOnShow) {\r\n            writer.setSelection(newCaptionElement, 'in');\r\n        }\r\n    }\r\n    /**\r\n     * Hides the caption of a selected table (or an table caption the selection is anchored to).\r\n     *\r\n     * The content of the caption is stored in the `TableCaptionEditing` caption registry to make this\r\n     * a reversible action.\r\n     */\r\n    _hideTableCaption(writer) {\r\n        const model = this.editor.model;\r\n        const tableElement = getSelectionAffectedTable(model.document.selection);\r\n        const tableCaptionEditing = this.editor.plugins.get('TableCaptionEditing');\r\n        const captionElement = getCaptionFromTableModelElement(tableElement);\r\n        // Store the caption content so it can be restored quickly if the user changes their mind.\r\n        tableCaptionEditing._saveCaption(tableElement, captionElement);\r\n        model.deleteContent(writer.createSelection(captionElement, 'on'));\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tablecaption/tablecaptionediting\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Element, enablePlaceholder } from 'ckeditor5/src/engine';\r\nimport { toWidgetEditable } from 'ckeditor5/src/widget';\r\nimport injectTableCaptionPostFixer from '../converters/table-caption-post-fixer';\r\nimport ToggleTableCaptionCommand from './toggletablecaptioncommand';\r\nimport { isTable, matchTableCaptionViewElement } from './utils';\r\n/**\r\n * The table caption editing plugin.\r\n */\r\nexport default class TableCaptionEditing extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableCaptionEditing';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this._savedCaptionsMap = new WeakMap();\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const schema = editor.model.schema;\r\n        const view = editor.editing.view;\r\n        const t = editor.t;\r\n        if (!schema.isRegistered('caption')) {\r\n            schema.register('caption', {\r\n                allowIn: 'table',\r\n                allowContentOf: '$block',\r\n                isLimit: true\r\n            });\r\n        }\r\n        else {\r\n            schema.extend('caption', {\r\n                allowIn: 'table'\r\n            });\r\n        }\r\n        editor.commands.add('toggleTableCaption', new ToggleTableCaptionCommand(this.editor));\r\n        // View -> model converter for the data pipeline.\r\n        editor.conversion.for('upcast').elementToElement({\r\n            view: matchTableCaptionViewElement,\r\n            model: 'caption'\r\n        });\r\n        // Model -> view converter for the data pipeline.\r\n        editor.conversion.for('dataDowncast').elementToElement({\r\n            model: 'caption',\r\n            view: (modelElement, { writer }) => {\r\n                if (!isTable(modelElement.parent)) {\r\n                    return null;\r\n                }\r\n                return writer.createContainerElement('figcaption');\r\n            }\r\n        });\r\n        // Model -> view converter for the editing pipeline.\r\n        editor.conversion.for('editingDowncast').elementToElement({\r\n            model: 'caption',\r\n            view: (modelElement, { writer }) => {\r\n                if (!isTable(modelElement.parent)) {\r\n                    return null;\r\n                }\r\n                const figcaptionElement = writer.createEditableElement('figcaption');\r\n                writer.setCustomProperty('tableCaption', true, figcaptionElement);\r\n                enablePlaceholder({\r\n                    view,\r\n                    element: figcaptionElement,\r\n                    text: t('Enter table caption'),\r\n                    keepOnFocus: true\r\n                });\r\n                return toWidgetEditable(figcaptionElement, writer);\r\n            }\r\n        });\r\n        injectTableCaptionPostFixer(editor.model);\r\n    }\r\n    /**\r\n     * Returns the saved {@link module:engine/model/element~Element#toJSON JSONified} caption\r\n     * of a table model element.\r\n     *\r\n     * See {@link #_saveCaption}.\r\n     *\r\n     * @internal\r\n     * @param tableModelElement The model element the caption should be returned for.\r\n     * @returns The model caption element or `null` if there is none.\r\n     */\r\n    _getSavedCaption(tableModelElement) {\r\n        const jsonObject = this._savedCaptionsMap.get(tableModelElement);\r\n        return jsonObject ? Element.fromJSON(jsonObject) : null;\r\n    }\r\n    /**\r\n     * Saves a {@link module:engine/model/element~Element#toJSON JSONified} caption for\r\n     * a table element to allow restoring it in the future.\r\n     *\r\n     * A caption is saved every time it gets hidden. The\r\n     * user should be able to restore it on demand.\r\n     *\r\n     * **Note**: The caption cannot be stored in the table model element attribute because,\r\n     * for instance, when the model state propagates to collaborators, the attribute would get\r\n     * lost (mainly because it does not convert to anything when the caption is hidden) and\r\n     * the states of collaborators' models would de-synchronize causing numerous issues.\r\n     *\r\n     * See {@link #_getSavedCaption}.\r\n     *\r\n     * @internal\r\n     * @param tableModelElement The model element the caption is saved for.\r\n     * @param caption The caption model element to be saved.\r\n     */\r\n    _saveCaption(tableModelElement, caption) {\r\n        this._savedCaptionsMap.set(tableModelElement, caption.toJSON());\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Injects a table caption post-fixer into the model.\r\n *\r\n * The role of the table caption post-fixer is to ensure that the table with caption have the correct structure\r\n * after a {@link module:engine/model/model~Model#change `change()`} block was executed.\r\n *\r\n * The correct structure means that:\r\n *\r\n * * If there are many caption model element, they are merged into one model.\r\n * * A final, merged caption model is placed at the end of the table.\r\n */\r\nexport default function injectTableCaptionPostFixer(model) {\r\n    model.document.registerPostFixer(writer => tableCaptionPostFixer(writer, model));\r\n}\r\n/**\r\n * The table caption post-fixer.\r\n */\r\nfunction tableCaptionPostFixer(writer, model) {\r\n    const changes = model.document.differ.getChanges();\r\n    let wasFixed = false;\r\n    for (const entry of changes) {\r\n        if (entry.type != 'insert') {\r\n            continue;\r\n        }\r\n        const positionParent = entry.position.parent;\r\n        if (positionParent.is('element', 'table') || entry.name == 'table') {\r\n            const table = (entry.name == 'table' ? entry.position.nodeAfter : positionParent);\r\n            const captionsToMerge = Array.from(table.getChildren())\r\n                .filter((child) => child.is('element', 'caption'));\r\n            const firstCaption = captionsToMerge.shift();\r\n            if (!firstCaption) {\r\n                continue;\r\n            }\r\n            // Move all the contents of the captions to the first one.\r\n            for (const caption of captionsToMerge) {\r\n                writer.move(writer.createRangeIn(caption), firstCaption, 'end');\r\n                writer.remove(caption);\r\n            }\r\n            // Make sure the final caption is at the end of the table.\r\n            if (firstCaption.nextSibling) {\r\n                writer.move(writer.createRangeOn(firstCaption), table, 'end');\r\n                wasFixed = true;\r\n            }\r\n            // Do we merged captions and/or moved the single caption to the end of the table?\r\n            wasFixed = !!captionsToMerge.length || wasFixed;\r\n        }\r\n    }\r\n    return wasFixed;\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n* @module table/tablecaption/tablecaptionui\r\n*/\r\nimport { Plugin, icons } from 'ckeditor5/src/core';\r\nimport { ButtonView } from 'ckeditor5/src/ui';\r\nimport { getCaptionFromModelSelection } from './utils';\r\n/**\r\n  * The table caption UI plugin. It introduces the `'toggleTableCaption'` UI button.\r\n  */\r\nexport default class TableCaptionUI extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableCaptionUI';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        const editingView = editor.editing.view;\r\n        const t = editor.t;\r\n        editor.ui.componentFactory.add('toggleTableCaption', locale => {\r\n            const command = editor.commands.get('toggleTableCaption');\r\n            const view = new ButtonView(locale);\r\n            view.set({\r\n                icon: icons.caption,\r\n                tooltip: true,\r\n                isToggleable: true\r\n            });\r\n            view.bind('isOn', 'isEnabled').to(command, 'value', 'isEnabled');\r\n            view.bind('label').to(command, 'value', value => value ? t('Toggle caption off') : t('Toggle caption on'));\r\n            this.listenTo(view, 'execute', () => {\r\n                editor.execute('toggleTableCaption', { focusCaptionOnShow: true });\r\n                // Scroll to the selection and highlight the caption if the caption showed up.\r\n                if (command.value) {\r\n                    const modelCaptionElement = getCaptionFromModelSelection(editor.model.document.selection);\r\n                    const figcaptionElement = editor.editing.mapper.toViewElement(modelCaptionElement);\r\n                    if (!figcaptionElement) {\r\n                        return;\r\n                    }\r\n                    editingView.scrollToTheSelection();\r\n                    editingView.change(writer => {\r\n                        writer.addClass('table__caption_highlighted', figcaptionElement);\r\n                    });\r\n                }\r\n                editor.editing.view.focus();\r\n            });\r\n            return view;\r\n        });\r\n    }\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./tablecaption.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * @module table/tablecaption\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport TableCaptionEditing from './tablecaption/tablecaptionediting';\r\nimport TableCaptionUI from './tablecaption/tablecaptionui';\r\nimport '../theme/tablecaption.css';\r\n/**\r\n * The table caption plugin.\r\n */\r\nexport default class TableCaption extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'TableCaption';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get requires() {\r\n        return [TableCaptionEditing, TableCaptionUI];\r\n    }\r\n}\r\n","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\n/**\r\n * Returns a plain text representation of an element and its children.\r\n *\r\n * @returns Plain text representing the model's data.\r\n */\r\nexport function modelElementToPlainText(item) {\r\n    if (item.is('$text') || item.is('$textProxy')) {\r\n        return item.data;\r\n    }\r\n    const element = item;\r\n    let text = '';\r\n    let prev = null;\r\n    for (const child of element.getChildren()) {\r\n        const childText = modelElementToPlainText(child);\r\n        // If last block was finish, start from new line.\r\n        if (prev && prev.is('element')) {\r\n            text += '\\n';\r\n        }\r\n        text += childText;\r\n        prev = child;\r\n    }\r\n    return text;\r\n}\r\n","import api from \"!../../../style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../../css-loader/dist/cjs.js!../../../postcss-loader/dist/cjs.js??ruleSet[1].rules[7].use[2]!./tablecolumnresize.css\";\n\nvar options = {\"injectType\":\"singletonStyleTag\",\"attributes\":{\"data-cke\":true}};\n\noptions.insert = \"head\";\noptions.singleton = true;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","/**\r\n * @license Copyright (c) 2003-2023, CKSource Holding sp. z o.o. All rights reserved.\r\n * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license\r\n */\r\nimport { Plugin } from 'ckeditor5/src/core';\r\nimport { Template, View } from 'ckeditor5/src/ui';\r\nimport { env } from 'ckeditor5/src/utils';\r\nimport { modelElementToPlainText } from './utils';\r\nimport { throttle, isElement } from 'lodash-es';\r\n/**\r\n * The word count plugin.\r\n *\r\n * This plugin calculates all words and characters in all {@link module:engine/model/text~Text text nodes} available in the model.\r\n * It also provides an HTML element that updates its state whenever the editor content is changed.\r\n *\r\n * The model's data is first converted to plain text using {@link module:word-count/utils~modelElementToPlainText}.\r\n * The number of words and characters in your text are determined based on the created plain text. Please keep in mind\r\n * that every block in the editor is separated with a newline character, which is included in the calculation.\r\n *\r\n * Here are some examples of how the word and character calculations are made:\r\n *\r\n * ```html\r\n * <paragraph>foo</paragraph>\r\n * <paragraph>bar</paragraph>\r\n * // Words: 2, Characters: 7\r\n *\r\n * <paragraph><$text bold=\"true\">foo</$text>bar</paragraph>\r\n * // Words: 1, Characters: 6\r\n *\r\n * <paragraph>*&^%)</paragraph>\r\n * // Words: 0, Characters: 5\r\n *\r\n * <paragraph>foo(bar)</paragraph>\r\n * //Words: 1, Characters: 8\r\n *\r\n * <paragraph>12345</paragraph>\r\n * // Words: 1, Characters: 5\r\n * ```\r\n */\r\nexport default class WordCount extends Plugin {\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    constructor(editor) {\r\n        super(editor);\r\n        this.set('characters', 0);\r\n        this.set('words', 0);\r\n        // Don't wait for the #update event to set the value of the properties but obtain it right away.\r\n        // This way, accessing the properties directly returns precise numbers, e.g. for validation, etc.\r\n        // If not accessed directly, the properties will be refreshed upon #update anyway.\r\n        Object.defineProperties(this, {\r\n            characters: {\r\n                get() {\r\n                    return (this.characters = this._getCharacters(this._getText()));\r\n                }\r\n            },\r\n            words: {\r\n                get() {\r\n                    return (this.words = this._getWords(this._getText()));\r\n                }\r\n            }\r\n        });\r\n        this.set('_wordsLabel', undefined);\r\n        this.set('_charactersLabel', undefined);\r\n        this._config = editor.config.get('wordCount') || {};\r\n        this._outputView = undefined;\r\n        this._wordsMatchRegExp = env.features.isRegExpUnicodePropertySupported ?\r\n            // Usage of regular expression literal cause error during build (ckeditor/ckeditor5-dev#534).\r\n            // Groups:\r\n            // {L} - Any kind of letter from any language.\r\n            // {N} - Any kind of numeric character in any script.\r\n            new RegExp('([\\\\p{L}\\\\p{N}]+\\\\S?)+', 'gu') :\r\n            /([a-zA-Z0-9À-ž]+\\S?)+/gu;\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    static get pluginName() {\r\n        return 'WordCount';\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    init() {\r\n        const editor = this.editor;\r\n        editor.model.document.on('change:data', throttle(this._refreshStats.bind(this), 250));\r\n        if (typeof this._config.onUpdate == 'function') {\r\n            this.on('update', (evt, data) => {\r\n                this._config.onUpdate(data);\r\n            });\r\n        }\r\n        if (isElement(this._config.container)) {\r\n            this._config.container.appendChild(this.wordCountContainer);\r\n        }\r\n    }\r\n    /**\r\n     * @inheritDoc\r\n     */\r\n    destroy() {\r\n        if (this._outputView) {\r\n            this._outputView.element.remove();\r\n            this._outputView.destroy();\r\n        }\r\n        super.destroy();\r\n    }\r\n    /**\r\n     * Creates a self-updating HTML element. Repeated executions return the same element.\r\n     * The returned element has the following HTML structure:\r\n     *\r\n     * ```html\r\n     * <div class=\"ck ck-word-count\">\r\n     * \t<div class=\"ck-word-count__words\">Words: 4</div>\r\n     * \t<div class=\"ck-word-count__characters\">Characters: 28</div>\r\n     * </div>\r\n     * ```\r\n     */\r\n    get wordCountContainer() {\r\n        const editor = this.editor;\r\n        const t = editor.t;\r\n        const displayWords = editor.config.get('wordCount.displayWords');\r\n        const displayCharacters = editor.config.get('wordCount.displayCharacters');\r\n        const bind = Template.bind(this, this);\r\n        const children = [];\r\n        if (!this._outputView) {\r\n            this._outputView = new View();\r\n            if (displayWords || displayWords === undefined) {\r\n                this.bind('_wordsLabel').to(this, 'words', words => {\r\n                    return t('Words: %0', words);\r\n                });\r\n                children.push({\r\n                    tag: 'div',\r\n                    children: [\r\n                        {\r\n                            text: [bind.to('_wordsLabel')]\r\n                        }\r\n                    ],\r\n                    attributes: {\r\n                        class: 'ck-word-count__words'\r\n                    }\r\n                });\r\n            }\r\n            if (displayCharacters || displayCharacters === undefined) {\r\n                this.bind('_charactersLabel').to(this, 'characters', words => {\r\n                    return t('Characters: %0', words);\r\n                });\r\n                children.push({\r\n                    tag: 'div',\r\n                    children: [\r\n                        {\r\n                            text: [bind.to('_charactersLabel')]\r\n                        }\r\n                    ],\r\n                    attributes: {\r\n                        class: 'ck-word-count__characters'\r\n                    }\r\n                });\r\n            }\r\n            this._outputView.setTemplate({\r\n                tag: 'div',\r\n                attributes: {\r\n                    class: [\r\n                        'ck',\r\n                        'ck-word-count'\r\n                    ]\r\n                },\r\n                children\r\n            });\r\n            this._outputView.render();\r\n        }\r\n        return this._outputView.element;\r\n    }\r\n    _getText() {\r\n        let txt = '';\r\n        for (const rootName of this.editor.model.document.getRootNames()) {\r\n            if (txt !== '') {\r\n                // Add a delimiter, so words from each root are treated independently.\r\n                txt += '\\n';\r\n            }\r\n            txt += modelElementToPlainText(this.editor.model.document.getRoot(rootName));\r\n        }\r\n        return txt;\r\n    }\r\n    /**\r\n     * Determines the number of characters in the current editor's model.\r\n     */\r\n    _getCharacters(txt) {\r\n        return txt.replace(/\\n/g, '').length;\r\n    }\r\n    /**\r\n     * Determines the number of words in the current editor's model.\r\n     */\r\n    _getWords(txt) {\r\n        const detectedWords = txt.match(this._wordsMatchRegExp) || [];\r\n        return detectedWords.length;\r\n    }\r\n    /**\r\n     * Determines the number of words and characters in the current editor's model and assigns it to {@link #characters} and {@link #words}.\r\n     * It also fires the {@link #event:update}.\r\n     *\r\n     * @fires update\r\n     */\r\n    _refreshStats() {\r\n        const txt = this._getText();\r\n        const words = this.words = this._getWords(txt);\r\n        const characters = this.characters = this._getCharacters(txt);\r\n        this.fire('update', {\r\n            words,\r\n            characters\r\n        });\r\n    }\r\n}\r\n","import debounce from './debounce.js';\nimport isObject from './isObject.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nexport default throttle;\n","import {icons} from 'ckeditor5/src/core';\nimport {ButtonView} from 'ckeditor5/src/ui';\nimport {ImageInsertUI} from '@ckeditor/ckeditor5-image';\n\nexport default class CraftImageInsertUI extends ImageInsertUI {\n  static get pluginName() {\n    return 'CraftImageInsertUI';\n  }\n\n  init() {\n    // Make sure there are linked volumes\n    if (!this._linkOption) {\n      console.warn(\n        'Omitting the \"image\" CKEditor toolbar button, because there aren’t any permitted volumes.'\n      );\n      return;\n    }\n\n    // Register `insertImage` dropdown and add `imageInsert` dropdown as an alias for consistency with ImageInsertUI\n    const componentFactory = this.editor.ui.componentFactory;\n    const componentCreator = (locale) => {\n      return this._createToolbarImageButton(locale);\n    };\n    componentFactory.add('insertImage', componentCreator);\n    componentFactory.add('imageInsert', componentCreator);\n  }\n\n  get _linkOption() {\n    const linkOptions = this.editor.config.get('linkOptions');\n    return linkOptions.find(\n      (option) => option.elementType === 'craft\\\\elements\\\\Asset'\n    );\n  }\n\n  _createToolbarImageButton(locale) {\n    const editor = this.editor;\n    const t = editor.t;\n    const button = new ButtonView(locale);\n    button.isEnabled = true;\n    button.label = t('Insert image');\n    button.icon = icons.image;\n    button.tooltip = true;\n    const insertImageCommand = editor.commands.get('insertImage');\n    button.bind('isEnabled').to(insertImageCommand);\n    this.listenTo(button, 'execute', () => this._showImageSelectModal());\n    return button;\n  }\n\n  _showImageSelectModal() {\n    const editor = this.editor;\n    const config = editor.config;\n    const linkOption = this._linkOption;\n\n    Craft.createElementSelectorModal(linkOption.elementType, {\n      storageKey: `ckeditor:${this.pluginName}:${linkOption.elementType}`,\n      sources: linkOption.sources,\n      criteria: Object.assign({}, linkOption.criteria, {\n        kind: 'image',\n      }),\n      defaultSiteId: config.get('elementSiteId'),\n      transforms: config.get('transforms'),\n      multiSelect: true,\n      autoFocusSearchBox: false,\n      onSelect: (assets, transform) => {\n        this._processAssetUrls(assets, transform).then(() => {\n          editor.editing.view.focus();\n        });\n      },\n      onHide: () => {\n        editor.editing.view.focus();\n      },\n      closeOtherModals: false,\n    });\n  }\n\n  _processAssetUrls(assets, transform) {\n    return new Promise((resolve) => {\n      if (!assets.length) {\n        resolve();\n        return;\n      }\n\n      const editor = this.editor;\n      const defaultTransform = editor.config.get('defaultTransform');\n      const queue = new Craft.Queue();\n      const urls = [];\n\n      queue.on('afterRun', () => {\n        editor.execute('insertImage', {source: urls});\n        resolve();\n      });\n\n      for (const asset of assets) {\n        queue.push(\n          () =>\n            new Promise((resolve) => {\n              const hasTransform = this._isTransformUrl(asset.url);\n              // Do we need to apply the default transform?\n              if (!hasTransform && defaultTransform) {\n                this._getTransformUrl(asset.id, defaultTransform, (url) => {\n                  urls.push(url);\n                  // editor.execute('insertImage', {source: url});\n                  resolve();\n                });\n              } else {\n                const url = this._buildAssetUrl(\n                  asset.id,\n                  asset.url,\n                  hasTransform ? transform : defaultTransform\n                );\n                urls.push(url);\n                // editor.execute('insertImage', {source: url});\n                resolve();\n              }\n            })\n        );\n      }\n    });\n  }\n\n  _buildAssetUrl(assetId, assetUrl, transform) {\n    return `${assetUrl}#asset:${assetId}:${\n      transform ? 'transform:' + transform : 'url'\n    }`;\n  }\n\n  _removeTransformFromUrl(url) {\n    return url.replace(/(^|\\/)(_[^\\/]+\\/)([^\\/]+)$/, '$1$3');\n  }\n\n  _isTransformUrl(url) {\n    return /(^|\\/)_[^\\/]+\\/[^\\/]+$/.test(url);\n  }\n\n  _getTransformUrl(assetId, handle, callback) {\n    Craft.sendActionRequest('POST', 'ckeditor/ckeditor/image-url', {\n      data: {\n        assetId: assetId,\n        transform: handle,\n      },\n    })\n      .then(({data}) => {\n        callback(this._buildAssetUrl(assetId, data.url, handle));\n      })\n      .catch(() => {\n        alert('There was an error generating the transform URL.');\n      });\n  }\n\n  _getAssetUrlComponents(url) {\n    const matches = url.match(\n      /(.*)#asset:(\\d+):(url|transform):?([a-zA-Z][a-zA-Z0-9_]*)?/\n    );\n    return matches\n      ? {\n          url: matches[1],\n          assetId: matches[2],\n          transform: matches[3] !== 'url' ? matches[4] : null,\n        }\n      : null;\n  }\n}\n","import {Plugin} from 'ckeditor5/src/core';\nimport {Collection} from 'ckeditor5/src/utils';\nimport {\n  Model,\n  ContextualBalloon,\n  SplitButtonView,\n  createDropdown,\n  addListToDropdown,\n} from 'ckeditor5/src/ui';\nimport linkIcon from '@ckeditor/ckeditor5-link/theme/icons/link.svg';\nimport {LinkUI} from '@ckeditor/ckeditor5-link';\nimport {LINK_KEYSTROKE} from '@ckeditor/ckeditor5-link/src/utils';\nimport {Range} from 'ckeditor5/src/engine';\nexport default class CraftLinkUI extends Plugin {\n  static get requires() {\n    return [LinkUI];\n  }\n\n  static get pluginName() {\n    return 'CraftLinkUI';\n  }\n\n  constructor() {\n    super(...arguments);\n    this.siteDropdownView = null;\n    this.siteDropdownItemModels = null;\n    this.localizedRefHandleRE = null;\n    this.editor.config.define('linkOptions', []);\n  }\n\n  init() {\n    const editor = this.editor;\n    this._linkUI = editor.plugins.get(LinkUI);\n    this._balloon = editor.plugins.get(ContextualBalloon);\n    this._createToolbarLinkButton();\n\n    if (Craft.isMultiSite) {\n      this._modifyFormViewTemplate();\n      const refHandlesPattern =\n        CKEditor5.craftcms.localizedRefHandles.join('|');\n      this.localizedRefHandleRE = new RegExp(\n        `(#(?:${refHandlesPattern}):\\\\d+)(?:@(\\\\d+))?`\n      );\n    }\n  }\n\n  _createToolbarLinkButton() {\n    const editor = this.editor;\n    const linkOptions = editor.config.get('linkOptions');\n    if (!linkOptions || !linkOptions.length) {\n      this._linkUI._createToolbarLinkButton();\n      return;\n    }\n    const linkCommand = editor.commands.get('link');\n    const t = editor.t;\n    editor.ui.componentFactory.add('link', (locale) => {\n      const dropdownView = createDropdown(locale, SplitButtonView);\n      const splitButtonView = dropdownView.buttonView;\n      splitButtonView.isEnabled = true;\n      splitButtonView.label = t('Link');\n      splitButtonView.icon = linkIcon;\n      splitButtonView.keystroke = LINK_KEYSTROKE;\n      splitButtonView.tooltip = true;\n      splitButtonView.isToggleable = true;\n      this.listenTo(splitButtonView, 'execute', () =>\n        this._linkUI._showUI(true)\n      );\n      dropdownView.on('execute', (evt) => {\n        if (evt.source.linkOption) {\n          const linkOption = evt.source.linkOption;\n          this._showElementSelectorModal(linkOption);\n        } else {\n          this._linkUI._showUI(true);\n        }\n      });\n      dropdownView.class = 'ck-code-block-dropdown';\n      dropdownView.bind('isEnabled').to(linkCommand, 'isEnabled');\n      splitButtonView.bind('isOn').to(linkCommand, 'value', (value) => !!value);\n      addListToDropdown(dropdownView, () =>\n        this._getLinkListItemDefinitions(linkOptions)\n      );\n      return dropdownView;\n    });\n  }\n\n  _getLinkListItemDefinitions(linkOptions) {\n    const itemDefinitions = new Collection();\n\n    for (const option of linkOptions) {\n      itemDefinitions.add({\n        type: 'button',\n        model: new Model({\n          label: option.label,\n          linkOption: option,\n          withText: true,\n        }),\n      });\n    }\n\n    itemDefinitions.add({\n      type: 'button',\n      model: new Model({\n        label: Craft.t('ckeditor', 'Insert link'),\n        withText: true,\n      }),\n    });\n\n    return itemDefinitions;\n  }\n\n  _showElementSelectorModal(linkOption) {\n    const editor = this.editor;\n    const model = editor.model;\n    const selection = model.document.selection;\n    const isCollapsed = selection.isCollapsed;\n    const range = selection.getFirstRange();\n\n    const onCancel = () => {\n      editor.editing.view.focus();\n      if (!isCollapsed && range) {\n        // Restore the previous range\n        model.change((writer) => {\n          writer.setSelection(range);\n        });\n      }\n      this._linkUI._hideFakeVisualSelection();\n    };\n\n    // When there's no link under the selection, go straight to the editing UI.\n    if (!this._linkUI._getSelectedLinkElement()) {\n      // Show visual selection on a text without a link when the contextual balloon is displayed.\n      // See https://github.com/ckeditor/ckeditor5/issues/4721.\n      this._linkUI._showFakeVisualSelection();\n    }\n\n    Craft.createElementSelectorModal(linkOption.elementType, {\n      storageKey: `ckeditor:${this.pluginName}:${linkOption.elementType}`,\n      sources: linkOption.sources,\n      criteria: linkOption.criteria,\n      defaultSiteId: editor.config.get('elementSiteId'),\n      autoFocusSearchBox: false,\n      onSelect: (elements) => {\n        if (elements.length) {\n          const element = elements[0];\n          const url = `${element.url}#${linkOption.refHandle}:${element.id}@${element.siteId}`;\n          editor.editing.view.focus();\n          if (!isCollapsed && range) {\n            // Restore the previous range\n            model.change((writer) => {\n              writer.setSelection(range);\n            });\n            const linkCommand = editor.commands.get('link');\n            linkCommand.execute(url);\n          } else {\n            model.change((writer) => {\n              writer.insertText(\n                element.label,\n                {\n                  linkHref: url,\n                },\n                selection.getFirstPosition()\n              );\n              if (range instanceof Range) {\n                try {\n                  const newRange = range.clone();\n                  newRange.end.path[1] += element.label.length;\n                  writer.setSelection(newRange);\n                } catch (e) {}\n              }\n            });\n          }\n\n          this._linkUI._hideFakeVisualSelection();\n          setTimeout(() => {\n            editor.editing.view.focus();\n            this._linkUI._showUI(true);\n          }, 100);\n        } else {\n          onCancel();\n        }\n      },\n      onCancel: () => {\n        onCancel();\n      },\n      closeOtherModals: false,\n    });\n  }\n\n  _modifyFormViewTemplate() {\n    // ensure the form view template has been defined\n    if (!this._linkUI.formView) {\n      this._linkUI._createViews();\n    }\n\n    const {formView} = this._linkUI;\n    const {urlInputView} = formView;\n    const {fieldView} = urlInputView;\n\n    // ensure the form view is vertical\n    formView.template.attributes.class.push(\n      'ck-link-form_layout-vertical',\n      'ck-vertical-form'\n    );\n\n    this.siteDropdownView = createDropdown(formView.locale);\n    this.siteDropdownView.buttonView.set({\n      label: '',\n      withText: true,\n      isVisible: false,\n    });\n\n    this.siteDropdownItemModels = Object.fromEntries(\n      Craft.sites.map((site) => [\n        site.id,\n        new Model({\n          label: site.name,\n          siteId: site.id,\n          withText: true,\n        }),\n      ])\n    );\n\n    this.siteDropdownItemModels.current = new Model({\n      label: Craft.t('ckeditor', 'Link to the current site'),\n      siteId: null,\n      withText: true,\n    });\n\n    addListToDropdown(\n      this.siteDropdownView,\n      new Collection([\n        ...Craft.sites.map((site) => ({\n          type: 'button',\n          model: this.siteDropdownItemModels[site.id],\n        })),\n        {\n          type: 'button',\n          model: this.siteDropdownItemModels.current,\n        },\n      ])\n    );\n\n    this.siteDropdownView.on('execute', (evt) => {\n      const match = this._urlInputRefMatch();\n      if (!match) {\n        console.warn(\n          `No reference tag hash present in URL: ${this._urlInputValue()}`\n        );\n        return;\n      }\n      const {siteId} = evt.source;\n      let ref = match[1];\n      if (siteId) {\n        ref += `@${siteId}`;\n      }\n      const newUrl = this._urlInputValue().replace(match[0], ref);\n      fieldView.set('value', newUrl);\n    });\n\n    const {children} = formView;\n    const urlInputIdx = children.getIndex(urlInputView);\n    children.add(this.siteDropdownView, urlInputIdx + 1);\n\n    // would be better if the dropdown could be added after the URL input\n    // but not currently possible since the rest of the inputs get added via LinkFormView::render()\n    formView._focusables.add(this.siteDropdownView);\n    formView.focusTracker.add(this.siteDropdownView.element);\n\n    this.listenTo(fieldView, 'change:value', () => {\n      this._toggleSiteDropdownView();\n    });\n    this.listenTo(fieldView, 'input', () => {\n      this._toggleSiteDropdownView();\n    });\n  }\n\n  _urlInputValue() {\n    return this._linkUI.formView.urlInputView.fieldView.element.value;\n  }\n\n  _urlInputRefMatch() {\n    return this._urlInputValue().match(this.localizedRefHandleRE);\n  }\n\n  _toggleSiteDropdownView() {\n    const match = this._urlInputRefMatch();\n    if (match) {\n      this.siteDropdownView.buttonView.set('isVisible', true);\n      let siteId = match[2] ? parseInt(match[2], 10) : null;\n      if (\n        siteId &&\n        typeof this.siteDropdownItemModels[siteId] === 'undefined'\n      ) {\n        siteId = null;\n      }\n      this._selectSiteDropdownItem(siteId);\n    } else {\n      this.siteDropdownView.buttonView.set('isVisible', false);\n    }\n  }\n\n  _selectSiteDropdownItem(siteId) {\n    const itemModel = this.siteDropdownItemModels[siteId ?? 'current'];\n\n    // update the button label\n    const label = siteId\n      ? Craft.t('ckeditor', 'Site: {name}', {name: itemModel.label})\n      : itemModel.label;\n    this.siteDropdownView.buttonView.set('label', label);\n\n    // update the item states\n    Object.values(this.siteDropdownItemModels).forEach((model) => {\n      model.set('isOn', model === itemModel);\n    });\n  }\n}\n","import {Command} from 'ckeditor5/src/core';\n\n/**\n * The transform image command.\n */\nexport default class TransformImageCommand extends Command {\n  refresh() {\n    const element = this._element();\n    const srcInfo = this._srcInfo(element);\n    this.isEnabled = !!srcInfo;\n    if (!srcInfo) {\n      this.value = null;\n    } else {\n      this.value = {\n        transform: srcInfo.transform,\n      };\n    }\n  }\n\n  _element() {\n    const editor = this.editor;\n    const imageUtils = editor.plugins.get('ImageUtils');\n    return imageUtils.getClosestSelectedImageElement(\n      editor.model.document.selection\n    );\n  }\n\n  _srcInfo(element) {\n    if (!element || !element.hasAttribute('src')) {\n      return null;\n    }\n\n    const src = element.getAttribute('src');\n    const match = src.match(\n      /#asset:(\\d+)(?::transform:([a-zA-Z][a-zA-Z0-9_]*))?/\n    );\n    if (!match) {\n      return null;\n    }\n\n    return {\n      src,\n      assetId: match[1],\n      transform: match[2],\n    };\n  }\n\n  /**\n   * Executes the command.\n   *\n   * ```js\n   * // Applies the `thumb` transform\n   * editor.execute( 'transformImage', { transform: 'thumb' } );\n   *\n   * // Removes the transform\n   * editor.execute( 'transformImage', { transform: null } );\n   * ```\n   *\n   * @param options\n   * @param options.transform The new transform for the image.\n   * @fires execute\n   */\n  execute(options) {\n    const editor = this.editor;\n    const model = editor.model;\n    const element = this._element();\n    const srcInfo = this._srcInfo(element);\n\n    this.value = {\n      transform: options.transform,\n    };\n\n    if (srcInfo) {\n      const hash =\n        `#asset:${srcInfo.assetId}` +\n        (options.transform ? `:transform:${options.transform}` : '');\n\n      // update the src hash immediately, so the transform is applied even if the real URL doesn’t load successfully\n      model.change((writer) => {\n        const src = srcInfo.src.replace(/#.*/, '') + hash;\n        writer.setAttribute('src', src, element);\n      });\n\n      // load the real URL and then update the src again\n      Craft.sendActionRequest('post', 'ckeditor/ckeditor/image-url', {\n        data: {\n          assetId: srcInfo.assetId,\n          transform: options.transform,\n        },\n      }).then(({data}) => {\n        model.change((writer) => {\n          const src = data.url + hash;\n          writer.setAttribute('src', src, element);\n        });\n      });\n    }\n  }\n}\n","import {Plugin} from 'ckeditor5/src/core';\nimport ImageUtils from '@ckeditor/ckeditor5-image/src/imageutils';\nimport TransformImageCommand from './transformimagecommand';\n\nexport default class ImageTransformEditing extends Plugin {\n  static get requires() {\n    return [ImageUtils];\n  }\n\n  static get pluginName() {\n    return 'ImageTransformEditing';\n  }\n\n  constructor(editor) {\n    super(editor);\n    editor.config.define('transforms', []);\n  }\n\n  init() {\n    const editor = this.editor;\n    const transformImageCommand = new TransformImageCommand(editor);\n    editor.commands.add('transformImage', transformImageCommand);\n  }\n}\n","import {Plugin, icons} from 'ckeditor5/src/core';\nimport {\n  DropdownButtonView,\n  Model,\n  createDropdown,\n  addListToDropdown,\n} from 'ckeditor5/src/ui';\nimport {Collection} from 'ckeditor5/src/utils';\nimport ImageTransformEditing from './imagetransformediting';\n\nconst RESIZE_ICON = icons.objectSizeMedium;\n\nexport default class ImageTransformUI extends Plugin {\n  static get requires() {\n    return [ImageTransformEditing];\n  }\n\n  static get pluginName() {\n    return 'ImageTransformUI';\n  }\n\n  init() {\n    const editor = this.editor;\n    const transforms = editor.config.get('transforms');\n    const command = editor.commands.get('transformImage');\n    this.bind('isEnabled').to(command);\n    this._registerImageTransformDropdown(transforms);\n  }\n\n  /**\n   * A helper function that creates a dropdown component for the plugin containing all the transform options defined in\n   * the editor configuration.\n   *\n   * @param transforms An array of the available image transforms.\n   */\n  _registerImageTransformDropdown(transforms) {\n    const editor = this.editor;\n    const t = editor.t;\n    const originalSizeOption = {\n      name: 'transformImage:original',\n      value: null,\n    };\n    const options = [\n      originalSizeOption,\n      ...transforms.map((transform) => ({\n        label: transform.name,\n        name: `transformImage:${transform.handle}`,\n        value: transform.handle,\n      })),\n    ];\n    const componentCreator = (locale) => {\n      const command = editor.commands.get('transformImage');\n      const dropdownView = createDropdown(locale, DropdownButtonView);\n      const dropdownButton = dropdownView.buttonView;\n      dropdownButton.set({\n        tooltip: t('Resize image'),\n        commandValue: null,\n        icon: RESIZE_ICON,\n        isToggleable: true,\n        label: this._getOptionLabelValue(originalSizeOption),\n        withText: true,\n        class: 'ck-resize-image-button',\n      });\n      dropdownButton.bind('label').to(command, 'value', (commandValue) => {\n        if (!commandValue || !commandValue.transform) {\n          return this._getOptionLabelValue(originalSizeOption);\n        }\n        const transform = transforms.find(\n          (t) => t.handle === commandValue.transform\n        );\n        if (transform) {\n          return transform.name;\n        }\n        return commandValue.transform;\n      });\n      dropdownView.bind('isEnabled').to(this);\n      addListToDropdown(\n        dropdownView,\n        () => this._getTransformDropdownListItemDefinitions(options, command),\n        {\n          ariaLabel: t('Image resize list'),\n        }\n      );\n      // Execute command when an item from the dropdown is selected.\n      this.listenTo(dropdownView, 'execute', (evt) => {\n        editor.execute(evt.source.commandName, {\n          transform: evt.source.commandValue,\n        });\n        editor.editing.view.focus();\n      });\n      return dropdownView;\n    };\n    editor.ui.componentFactory.add('transformImage', componentCreator);\n  }\n\n  /**\n   * A helper function for creating an option label value string.\n   *\n   * @param option A transform option object.\n   * @returns The option label.\n   */\n  _getOptionLabelValue(option) {\n    return option.label || option.value || this.editor.t('Original');\n  }\n\n  /**\n   * A helper function that parses the transform options and returns list item definitions ready for use in the dropdown.\n   *\n   * @param options The transform options.\n   * @param command The transform image command.\n   * @returns Dropdown item definitions.\n   */\n  _getTransformDropdownListItemDefinitions(options, command) {\n    const itemDefinitions = new Collection();\n    options.map((option) => {\n      const definition = {\n        type: 'button',\n        model: new Model({\n          commandName: 'transformImage',\n          commandValue: option.value,\n          label: this._getOptionLabelValue(option),\n          withText: true,\n          icon: null,\n        }),\n      };\n      definition.model\n        .bind('isOn')\n        .to(command, 'value', getIsOnButtonCallback(option.value));\n      itemDefinitions.add(definition);\n    });\n    return itemDefinitions;\n  }\n}\n\n/**\n * A helper function for setting the `isOn` state of buttons in value bindings.\n */\nfunction getIsOnButtonCallback(value) {\n  return (commandValue) => {\n    const objectCommandValue = commandValue;\n    if (value === null && objectCommandValue === value) {\n      return true;\n    }\n    return (\n      objectCommandValue !== null && objectCommandValue.transform === value\n    );\n  };\n}\n","import {Plugin} from 'ckeditor5/src/core';\nimport ImageTransformEditing from './imagetransform/imagetransformediting';\nimport ImageTransformUI from './imagetransform/imagetransformui';\n\nexport default class ImageTransform extends Plugin {\n  static get requires() {\n    return [ImageTransformEditing, ImageTransformUI];\n  }\n\n  static get pluginName() {\n    return 'ImageTransform';\n  }\n}\n","import './ckeditor5-craftcms.css';\nimport {Alignment} from '@ckeditor/ckeditor5-alignment';\nimport {\n  AutoImage,\n  Image,\n  ImageCaption,\n  ImageStyle,\n  ImageToolbar,\n} from '@ckeditor/ckeditor5-image';\nimport {Autoformat} from '@ckeditor/ckeditor5-autoformat';\nimport {BlockQuote} from '@ckeditor/ckeditor5-block-quote';\nimport {\n  Bold,\n  Code,\n  Italic,\n  Strikethrough,\n  Subscript,\n  Superscript,\n  Underline,\n} from '@ckeditor/ckeditor5-basic-styles';\nimport {ClassicEditor} from '@ckeditor/ckeditor5-editor-classic';\nimport {CodeBlock} from '@ckeditor/ckeditor5-code-block';\nimport {Essentials} from '@ckeditor/ckeditor5-essentials';\nimport {FindAndReplace} from '@ckeditor/ckeditor5-find-and-replace';\nimport {Font} from '@ckeditor/ckeditor5-font';\nimport {\n  GeneralHtmlSupport,\n  HtmlComment,\n} from '@ckeditor/ckeditor5-html-support';\nimport {Heading} from '@ckeditor/ckeditor5-heading';\nimport {HorizontalLine} from '@ckeditor/ckeditor5-horizontal-line';\nimport {HtmlEmbed} from '@ckeditor/ckeditor5-html-embed';\nimport {Indent} from '@ckeditor/ckeditor5-indent';\nimport {LinkEditing, AutoLink, LinkImage} from '@ckeditor/ckeditor5-link';\nimport {\n  DocumentList,\n  DocumentListProperties,\n  List,\n  ListProperties,\n  TodoList,\n} from '@ckeditor/ckeditor5-list';\nimport {MediaEmbed, MediaEmbedToolbar} from '@ckeditor/ckeditor5-media-embed';\nimport {PageBreak} from '@ckeditor/ckeditor5-page-break';\nimport {PasteFromOffice} from '@ckeditor/ckeditor5-paste-from-office';\nimport {SourceEditing} from '@ckeditor/ckeditor5-source-editing';\nimport {Style} from '@ckeditor/ckeditor5-style';\nimport {\n  Table,\n  TableCaption,\n  TableToolbar,\n  TableUI,\n} from '@ckeditor/ckeditor5-table';\nimport {WordCount} from '@ckeditor/ckeditor5-word-count';\nimport {default as CraftImageInsertUI} from './image/imageinsert/imageinsertui';\nimport {default as CraftLinkUI} from './link/linkui';\nimport ImageTransform from './image/imagetransform';\n\nconst allPlugins = [\n  CKEditor5.paragraph.Paragraph,\n  CKEditor5.selectAll.SelectAll,\n  Alignment,\n  AutoImage,\n  AutoLink,\n  Autoformat,\n  BlockQuote,\n  Bold,\n  Code,\n  CodeBlock,\n  DocumentList,\n  DocumentListProperties,\n  Essentials,\n  FindAndReplace,\n  Font,\n  GeneralHtmlSupport,\n  Heading,\n  HorizontalLine,\n  HtmlComment,\n  HtmlEmbed,\n  Image,\n  ImageCaption,\n  ImageStyle,\n  ImageToolbar,\n  Indent,\n  Italic,\n  LinkEditing,\n  LinkImage,\n  List,\n  ListProperties,\n  MediaEmbed,\n  MediaEmbedToolbar,\n  PageBreak,\n  PasteFromOffice,\n  SourceEditing,\n  Strikethrough,\n  Style,\n  Subscript,\n  Superscript,\n  Table,\n  TableCaption,\n  TableToolbar,\n  TableUI,\n  TodoList,\n  Underline,\n  WordCount,\n  CraftImageInsertUI,\n  ImageTransform,\n  CraftLinkUI,\n];\n\nconst normalizeToolbarItem = (group) => {\n  if (!$.isArray(group)) {\n    group = [group];\n  }\n  return group.map((item) => {\n    if (typeof item === 'string') {\n      item = {button: item};\n    }\n    return item;\n  });\n};\n\nconst normalizeToolbarItems = (items) =>\n  items.map((group) => normalizeToolbarItem(group));\n\nexport const toolbarItems = normalizeToolbarItems([\n  {button: 'heading', configOption: 'heading'},\n  {button: 'style', configOption: 'style'},\n  {button: 'alignment', configOption: 'alignment'},\n  'bold',\n  'italic',\n  'underline',\n  'strikethrough',\n  'subscript',\n  'superscript',\n  'code',\n  'link',\n  {button: 'fontSize', configOption: 'fontSize'},\n  'fontFamily',\n  'fontColor',\n  'fontBackgroundColor',\n  'insertImage',\n  'mediaEmbed',\n  'htmlEmbed',\n  'blockQuote',\n  'insertTable',\n  'codeBlock',\n  'bulletedList',\n  'numberedList',\n  'todoList',\n  ['outdent', 'indent'],\n  'horizontalLine',\n  'pageBreak',\n  'selectAll',\n  'findAndReplace',\n  ['undo', 'redo'],\n  'sourceEditing',\n]);\n\nconst pluginButtonMap = [\n  {plugins: ['Alignment'], buttons: ['alignment']},\n  {\n    plugins: [\n      'AutoImage',\n      'CraftImageInsertUI',\n      'Image',\n      'ImageCaption',\n      'ImageStyle',\n      'ImageToolbar',\n      'ImageTransform',\n      'LinkImage',\n    ],\n    buttons: ['insertImage'],\n  },\n  {\n    plugins: ['AutoLink', 'CraftLinkUI', 'LinkEditing', 'LinkImage'],\n    buttons: ['link'],\n  },\n  {plugins: ['BlockQuote'], buttons: ['blockQuote']},\n  {plugins: ['Bold'], buttons: ['bold']},\n  {plugins: ['Code'], buttons: ['code']},\n  {plugins: ['CodeBlock'], buttons: ['codeBlock']},\n  {\n    plugins: ['DocumentList', 'DocumentListProperties'],\n    buttons: ['bulletedList', 'numberedList'],\n  },\n  {\n    plugins: ['Font'],\n    buttons: ['fontSize', 'fontFamily', 'fontColor', 'fontBackgroundColor'],\n  },\n  {plugins: ['FindAndReplace'], buttons: ['findAndReplace']},\n  {plugins: ['Heading'], buttons: ['heading']},\n  {plugins: ['HorizontalLine'], buttons: ['horizontalLine']},\n  {plugins: ['HtmlEmbed'], buttons: ['htmlEmbed']},\n  {\n    plugins: ['Indent'],\n    buttons: ['outdent', 'indent'],\n  },\n  {plugins: ['Italic'], buttons: ['italic']},\n  {\n    plugins: ['List', 'ListProperties'],\n    buttons: ['bulletedList', 'numberedList'],\n  },\n  {\n    plugins: ['MediaEmbed', 'MediaEmbedToolbar'],\n    buttons: ['mediaEmbed'],\n  },\n  {plugins: ['PageBreak'], buttons: ['pageBreak']},\n  {plugins: ['SourceEditing'], buttons: ['sourceEditing']},\n  {plugins: ['Strikethrough'], buttons: ['strikethrough']},\n  {plugins: ['Style'], buttons: ['style']},\n  {plugins: ['Subscript'], buttons: ['subscript']},\n  {plugins: ['Superscript'], buttons: ['superscript']},\n  {\n    plugins: ['Table', 'TableCaption', 'TableToolbar', 'TableUI'],\n    buttons: ['insertTable'],\n  },\n  {plugins: ['TodoList'], buttons: ['todoList']},\n  {plugins: ['Underline'], buttons: ['underline']},\n];\n\nconst findPlugin = (pluginName) => {\n  for (const [k, v] of Object.entries(CKEditor5)) {\n    if (typeof v === 'object') {\n      for (const [k2, v2] of Object.entries(v)) {\n        if (typeof v2 === 'function' && v2.pluginName === pluginName) {\n          return v2;\n        }\n      }\n    }\n  }\n};\n\nexport const registerPackage = (pkg) => {\n  if (pkg.pluginNames) {\n    pkg.pluginNames.forEach((pluginName) => {\n      const plugin = findPlugin(pluginName);\n      if (!plugin) {\n        console.warn(\n          `No plugin named ${pluginName} found in window.CKEditor5.`\n        );\n        return;\n      }\n      allPlugins.push(plugin);\n    });\n  }\n\n  if (pkg.toolbarItems) {\n    pkg.toolbarItems = normalizeToolbarItems(pkg.toolbarItems);\n    toolbarItems.push(...pkg.toolbarItems);\n  }\n\n  if (\n    pkg.pluginNames &&\n    pkg.pluginNames.length &&\n    pkg.toolbarItems &&\n    pkg.toolbarItems.length\n  ) {\n    pluginButtonMap.push({\n      plugins: pkg.pluginNames,\n      buttons: pkg.toolbarItems\n        .flat()\n        .map((item) => item.buttons)\n        .flat(),\n    });\n  }\n};\n\nconst trackChangesInSourceMode = function (editor) {\n  const sourceEditing = editor.plugins.get(SourceEditing);\n  const $editorElement = $(editor.ui.view.element);\n  const $sourceElement = $(editor.sourceElement);\n  const ns = `ckeditor${Math.floor(Math.random() * 1000000000)}`;\n  const events = [\n    'keypress',\n    'keyup',\n    'change',\n    'focus',\n    'blur',\n    'click',\n    'mousedown',\n    'mouseup',\n  ]\n    .map((type) => `${type}.${ns}`)\n    .join(' ');\n\n  sourceEditing.on('change:isSourceEditingMode', () => {\n    const $sourceEditingContainer = $editorElement.find(\n      '.ck-source-editing-area'\n    );\n\n    if (sourceEditing.isSourceEditingMode) {\n      let content = $sourceEditingContainer.attr('data-value');\n      $sourceEditingContainer.on(events, () => {\n        if (\n          content !== (content = $sourceEditingContainer.attr('data-value'))\n        ) {\n          $sourceElement.val(content);\n        }\n      });\n    } else {\n      $sourceEditingContainer.off(`.${ns}`);\n    }\n  });\n};\n\nexport const pluginNames = () => allPlugins.map((p) => p.pluginName);\n\nexport const create = async function (element, config) {\n  let plugins = allPlugins;\n  const removePlugins = [];\n\n  if (config.toolbar) {\n    // Remove any plugins that aren't included in the toolbar\n    removePlugins.push(\n      ...pluginButtonMap\n        .filter(\n          ({buttons}) =>\n            !config.toolbar.some((button) => buttons.includes(button))\n        )\n        .map(({plugins}) => plugins)\n        .flat()\n    );\n  }\n\n  // remove ImageTransform if there aren't any image transforms\n  if (!config.transforms || !config.transforms.length) {\n    removePlugins.push('ImageTransform');\n  }\n\n  if (removePlugins.length) {\n    plugins = plugins.filter((p) => !removePlugins.includes(p.pluginName));\n  }\n\n  if (typeof element === 'string') {\n    element = document.querySelector(`#${element}`);\n  }\n\n  const editor = await ClassicEditor.create(\n    element,\n    Object.assign({plugins}, config)\n  );\n\n  // Keep the source element updated with changes\n  editor.model.document.on('change', () => {\n    editor.updateSourceElement();\n  });\n\n  // Track changes in the source mode\n  if (plugins.includes(SourceEditing)) {\n    trackChangesInSourceMode(editor, SourceEditing);\n  }\n\n  return editor;\n};\n"],"names":["___CSS_LOADER_EXPORT___","push","module","id","exports","cssWithMappingToString","list","toString","this","map","item","content","concat","join","i","modules","mediaQuery","dedupe","alreadyImportedModules","length","_i","_arrayLikeToArray","arr","len","arr2","Array","_item","isArray","_arrayWithHoles","Symbol","iterator","_s","_e","_arr","_n","_d","call","next","done","value","err","_iterableToArrayLimit","o","minLen","n","Object","prototype","slice","constructor","name","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","sourceURLs","sources","source","sourceRoot","memo","getTarget","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","e","stylesInDom","getIndexByIdentifier","identifier","result","modulesToDom","options","idCountMap","identifiers","base","count","index","obj","css","media","sourceMap","references","updater","addStyle","insertStyleElement","style","createElement","attributes","nonce","keys","forEach","key","setAttribute","insert","Error","appendChild","textStore","replaceText","replacement","filter","Boolean","applyToSingletonTag","remove","styleSheet","cssText","cssNode","createTextNode","childNodes","removeChild","insertBefore","applyToTag","removeAttribute","firstChild","singleton","singletonCounter","update","styleIndex","bind","parentNode","removeStyleElement","newObj","all","atob","lastIdentifiers","newList","newLastIdentifiers","_index","splice","__esModule","default","locals","add","listToStyles","parentId","styles","newStyles","part","parts","hasDocument","DEBUG","getElementsByTagName","singletonElement","isProduction","noop","ssrIdKey","isOldIE","navigator","userAgent","toLowerCase","addStylesClient","_isProduction","_options","addStylesToDom","mayRemove","domStyle","refs","j","createStyleElement","styleElement","type","ssrId","__webpack_require__","CKEditor5","dll","__webpack_module_cache__","moduleId","cachedModule","undefined","__webpack_modules__","getter","d","a","definition","defineProperty","enumerable","get","prop","hasOwnProperty","r","toStringTag","nc","supportedOptions","isSupported","option","includes","isDefault","alignment","locale","contentLanguageDirection","normalizeAlignmentOptions","configuredOptions","normalizedOptions","isNameValid","logWarning","classNameCount","className","CKEditorError","allOptions","succeedingOptions","some","ALIGNMENT","AlignmentCommand","Command","refresh","editor","firstBlock","first","model","selection","getSelectedBlocks","isEnabled","_canBeAligned","hasAttribute","getAttribute","execute","doc","change","writer","blocks","block","currentAlignment","removeAlignmentFromSelection","setAlignmentOnSelection","schema","checkAttribute","AlignmentEditing","Plugin","pluginName","super","config","define","init","optionsToConvert","shouldUseClasses","extend","allowAttributes","setAttributeProperties","isFormatting","conversion","attributeToAttribute","view","values","buildClassDefinition","for","buildDowncastInlineDefinition","upcastInlineDefinitions","definitions","buildUpcastInlineDefinitions","upcastCompatibilityDefinitions","buildUpcastCompatibilityDefinitions","commands","iconsMap","Map","icons","alignLeft","alignRight","alignCenter","alignJustify","AlignmentUI","localizedOptionTitles","t","componentFactory","ui","_addButton","dropdownView","createDropdown","addToolbarToDropdown","create","enableActiveItemFocusOnDropdownOpen","isVertical","ariaLabel","buttonView","set","label","tooltip","extendTemplate","class","defaultIcon","command","to","listenTo","editing","focus","ButtonView","icon","isToggleable","Alignment","requires","createBlockImageViewElement","createContainerElement","createEmptyElement","createSlot","getImgViewElementMatcher","matchImageType","imageUtils","plugins","areBothImagePluginsLoaded","has","element","isInlineImageView","getStyle","findAncestor","isBlockImageView","getPositiveMatchPattern","pattern","determineImageTypeForInsertionAtSelection","isObject","isEmpty","isImage","modelElement","isInlineImage","isBlockImage","is","hasClass","insertImage","selectable","imageType","determineImageTypeForInsertion","fromEntries","getAttributes","attributeName","imageElement","insertObject","setSelection","findOptimalPosition","parent","getClosestSelectedImageWidget","selectionPosition","getFirstPosition","viewElement","getSelectedElement","isImageWidget","getClosestSelectedImageElement","selectedElement","isImageAllowed","findOptimalInsertionRange","start","getInsertImageParent","checkChild","isImageAllowedInParent","getAncestors","every","ancestor","isNotInsideImage","toImageWidget","setCustomProperty","toWidget","altText","findViewImgElement","getCustomProperty","isWidget","figureView","editingView","createRangeIn","configImageInsertType","IMAGE_URL_REGEXP","RegExp","String","AutoImage","Clipboard","Undo","Delete","_timeoutId","_positionToInsert","modelDocument","clipboardPipeline","firstRange","getFirstRange","leftLivePosition","LivePosition","fromPosition","stickiness","rightLivePosition","end","once","_embedImageBetweenPositions","detach","priority","on","global","clearTimeout","leftPosition","rightPosition","urlRange","LiveRange","walker","getWalker","ignoreElementEnd","selectionAttributes","src","node","trim","match","setTimeout","insertionPosition","root","rootName","toPosition","requestUndoOnBackspace","ImageTextAlternativeCommand","newValue","ImageTextAlternativeEditing","TextAlternativeFormView","View","focusTracker","FocusTracker","keystrokes","KeystrokeHandler","labeledInput","_createLabeledInputView","saveButtonView","_createButton","check","cancelButtonView","cancel","_focusables","ViewCollection","_focusCycler","FocusCycler","focusables","keystrokeHandler","actions","focusPrevious","focusNext","setTemplate","tag","tabindex","children","render","submitHandler","v","destroy","eventName","button","delegate","LabeledFieldView","createLabeledInputText","getBalloonPositionData","defaultPositions","BalloonPanelView","domConverter","mapViewToDom","positions","northArrowSouth","northArrowSouthWest","northArrowSouthEast","southArrowNorth","southArrowNorthWest","southArrowNorthEast","viewportStickyNorth","ImageTextAlternativeUI","ContextualBalloon","_form","lowVision","_showForm","_createForm","viewDocument","_balloon","CssTransitionDisablerMixin","fieldView","_hideForm","_isVisible","balloon","position","updatePosition","clickOutsideHandler","emitter","activator","contextElements","callback","disableCssTransitions","_isInBalloon","select","enableCssTransitions","focusEditable","isFocused","visibleView","hasView","ImageTextAlternative","downcastSrcsetAttribute","converter","evt","conversionApi","consumable","consume","mapper","toViewElement","img","attributeNewValue","srcset","attributeOldValue","width","dispatcher","downcastImageAttribute","attributeKey","viewWriter","Observer","observe","domRoot","event","domEvent","domElement","checkShouldIgnoreEventFromTarget","tagName","_fireEvents","useCapture","stopObserving","stopListening","fire","InsertImageCommand","sourceDefinitions","toArray","sourceDefinition","createPositionAfter","ReplaceImageSourceCommand","image","addObserver","viewImage","insertImageCommand","replaceImageSourceCommand","ImageTypeCommand","modelElementName","_modelElementName","oldElement","uploadId","markers","marker","getRange","containsItem","newElement","createSelection","newElementRange","createRangeOn","markerRange","range","getJoined","updateMarker","ImageBlockEditing","ClipboardPipeline","register","inheritAllFrom","_setupConversion","_setupClipboardIntegration","elementToStructure","elementToElement","viewItem","classes","conversionResult","convertItem","modelCursor","modelImage","modelRange","getItems","convertChildren","updateConversionResult","revert","upcastImageFigure","docFragmentChildren","getChildren","targetRanges","toModelRange","UpcastWriter","blockViewImages","inlineViewImage","createDocumentFragment","ImageBlock","Widget","ImageInlineEditing","addChildCheck","context","childDefinition","endsWith","createInlineImageViewElement","inlineViewImages","blockViewImage","childCount","attribute","getChild","ImageInline","Image","ImageCaptionUtils","getCaptionFromImageModelElement","imageModelElement","getCaptionFromModelSelection","captionElement","matchImageCaptionViewElement","ToggleImageCaptionCommand","imageCaptionUtils","ancestorCaptionElement","focusCaptionOnShow","_hideImageCaption","_showImageCaption","imageCaptionEditing","selectedImage","savedCaption","_getSavedCaption","newCaptionElement","append","_saveCaption","ImageCaptionEditing","_savedCaptionsMap","WeakMap","isRegistered","allowIn","allowContentOf","isLimit","_setupImageTypeCommandsIntegration","_registerCaptionReconversion","figcaptionElement","createEditableElement","enablePlaceholder","text","keepOnFocus","imageAlt","toWidgetEditable","imageTypeInlineCommand","imageTypeBlockCommand","handleImageTypeChange","return","oldCaptionElement","savedOldElementCaption","jsonObject","Element","fromJSON","caption","toJSON","changes","differ","getChanges","nodeAfter","reconvertItem","ImageCaptionUI","modelCaptionElement","scrollToTheSelection","addClass","ImageCaption","ImageUploadFormRowView","bindTemplate","createCollection","child","labelView","_role","_ariaLabelledBy","role","ImageInsertPanelView","integrations","insertButtonView","_createActionButtons","Collection","integration","integrationView","entries","imageURLInputValue","_integrations","stopPropagation","getIntegration","find","withText","focusFirst","createLabeledInputView","labeledInputView","placeholder","componentCreator","_createDropdownView","uploadImageCommand","SplitButtonView","panelView","splitButtonView","actionView","_setUpDropdown","imageInsertView","closePanel","isOpen","panelItems","imageInsertUIPlugin","PREDEFINED_INTEGRATIONS","ckFinderButton","openCKFinder","reduce","object","prepareIntegrations","insertImageViaUrlForm","onSubmit","objectSizeSmall","objectSizeMedium","objectSizeLarge","objectSizeFull","ImageStyleCommand","_defaultStyles","imageBlock","imageInline","_styles","modelElements","requestedStyle","shouldConvertImageType","objectFullWidth","objectInline","objectLeft","objectRight","objectCenter","objectBlockLeft","objectBlockRight","DEFAULT_OPTIONS","inline","title","alignBlockLeft","alignBlockRight","side","DEFAULT_ICONS","full","left","right","center","inlineLeft","inlineRight","DEFAULT_DROPDOWN_DEFINITIONS","defaultItem","items","warnInvalidStyle","info","normalizeStyles","configuredStyles","arrangement","normalizeDefinition","extendedStyle","extendStyle","isBlockPluginLoaded","isInlinePluginLoaded","supportedElements","elementName","missingPlugins","isValidOption","getDefaultStylesConfiguration","getDefaultDropdownDefinitions","pluginCollection","getStyleDefinitionByName","ImageStyleEditing","utils","normalizedStyles","_setupPostFixer","modelToViewConverter","newStyle","oldStyle","removeClass","viewToModelConverter","nonDefaultStyles","modelImageElement","viewToModelStyleAttribute","downcastDispatcher","upcastDispatcher","stylesMap","registerPostFixer","changed","imageStyle","imageStyleDefinition","ImageStyleUI","localizedDefaultStylesTitles","toolbarConfig","definedStyles","translateStyles","styleConfig","definedDropdowns","dropdownConfig","_createDropdown","factory","defaultButton","buttonViews","itemName","getUIComponentName","buttonName","dropdown","splitButtonViewArrow","arrowView","getDropdownButtonTitle","unbind","toMany","areOn","findIndex","isOn","areEnabled","buttonConfig","_executeCommand","titles","dropdownTitle","buttonTitle","ImageStyle","ImageToolbar","WidgetToolbarRepository","afterInit","widgetToolbarRepository","getRelatedElement","blockAutoformatEditing","plugin","callbackOrCommand","batch","getRanges","isCollapsed","isUndo","isLocal","entry","blockToFormat","firstNode","firstNodeRange","containsRange","isEqual","exec","substr","offset","enqueueChange","createPositionAt","selectionRange","blockRange","inlineAutoformatEditing","testRegexpOrCallback","formatCallback","regExp","testCallback","format","leftDel","rightDel","found","delStart","delEnd","rangeText","createRange","getTextAfterCode","testOutput","rangesToFormat","testOutputToRanges","rangesToRemove","reverse","arrays","array","getShiftedBy","Autoformat","_addListAutoformats","_addBasicStylesAutoformats","_addHeadingAutoformats","_addBlockQuoteAutoformats","_addCodeBlockAutoformats","_addHorizontalLineAutoformats","boldCallback","getCallbackFunctionForInlineAutoformat","italicCallback","codeCallback","strikethroughCallback","modelName","level","usePreviousLanguageChoice","validRanges","getValidRanges","removeSelectionAttribute","BlockQuoteCommand","_getValue","_checkEnabled","forceValue","blocksToQuote","findQuote","checkCanBeQuoted","_applyQuote","_removeQuote","getRangesOfBlockGroups","groupRange","isAtStart","isAtEnd","unwrap","positionBefore","createPositionBefore","move","split","positionAfter","quotesToMerge","quote","wrap","currentQuote","nextQuote","nextSibling","merge","elementOrPosition","startPosition","ranges","nextBlock","isBQAllowed","isBlockAllowedInBQ","BlockQuoteEditing","Enter","blockQuoteCommand","getLastPosition","preventDefault","stop","direction","positionParent","previousSibling","BlockQuoteUI","BlockQuote","AttributeCommand","_getValueFromFirstAllowedNode","checkAttributeInSelection","setSelectionAttribute","BOLD","BoldEditing","copyOnEnter","attributeToElement","upcastAlso","fontWeight","Number","BoldUI","bold","keystroke","Bold","CODE","CodeEditing","TwoStepCaretMovement","registerAttribute","inlineHighlight","CodeUI","Code","ITALIC","ItalicEditing","ItalicUI","Italic","STRIKETHROUGH","StrikethroughEditing","StrikethroughUI","Strikethrough","SUBSCRIPT","SubscriptEditing","SubscriptUI","Subscript","SUPERSCRIPT","SuperscriptEditing","SuperscriptUI","Superscript","UNDERLINE","UnderlineEditing","UnderlineUI","Underline","ClassicEditorUI","EditorUI","_toolbarConfig","normalizeToolbarConfig","_elementReplacer","ElementReplacer","_handleScrollToTheSelectionWithStickyPanel","replacementElement","editable","editingRoot","getRoot","editableElement","setEditableElement","attachDomRoot","replace","_initPlaceholder","_initToolbar","restore","detachDomRoot","stickyPanel","limiterElement","top","toolbar","fillFromConfig","addToolbar","sourceElement","placeholderText","isDirectHost","originalArgs","isSticky","stickyPanelHeight","Rect","height","viewportOffset","scrollViewportOnPanelGettingSticky","ClassicEditorUIView","BoxedEditorUIView","StickyPanelView","ToolbarView","shouldGroupWhenFull","shouldToolbarGroupWhenFull","InlineEditableUIView","main","freeSelf","self","Function","objectProto","nativeObjectToString","symToStringTag","isOwn","unmasked","func","transform","arg","getPrototypeOf","funcProto","funcToString","objectCtorString","proto","Ctor","nodeType","ClassicEditor","DataApiMixin","ElementApiMixin","Editor","sourceElementOrData","initialData","getDataFromElement","getInitialData","createRoot","attachToForm","updateSourceElement","Promise","resolve","initPlugins","then","getNormalizedAndLocalizedLanguageDefinitions","languageDefs","def","language","getPropertyAssociation","association","shift","getLeadingWhiteSpaces","textNode","getIndentOutdentPositions","anchor","startOffset","leadingWhiteSpaces","isModelSelectionInCodeBlock","canBeCodeBlock","Context","EditorWatchdog","ContextWatchdog","CodeBlockCommand","_lastLanguage","firstLanguageInConfig","lastLanguage","defaultLanguage","getLanguage","_applyCodeBlock","_removeCodeBlock","allowedBlocks","rename","removeDisallowedAttributes","currentBlock","appendElement","codeBlocks","elementAfter","IndentCodeBlockCommand","_indentSequence","indentSequenceTextElement","createText","insertContent","OutdentCodeBlockCommand","getLastOutdentableSequenceRange","deleteContent","sequence","nodeAtPosition","nodeBefore","getCodeLineTextNodeAtPosition","lastIndexOfSequence","lastIndexOf","modelToViewCodeBlockInsertion","useLabels","languagesToClasses","languagesToLabels","codeBlockLanguage","targetViewPosition","toViewPosition","preAttributes","spellcheck","codeAttributes","code","pre","bindElements","DEFAULT_ELEMENT","CodeBlockEditing","ShiftEnter","languages","indentSequence","isDocumentListEditingLoaded","normalizedLanguagesDefs","commandName","shiftKey","allowWhere","allowChildren","isBlock","addAttributeCheck","isDocumentListAttributeOnCodeBlock","startsWith","modelToDataViewSoftBreakInsertion","classesToLanguages","defaultLanguageName","viewCodeElement","viewPreElement","codeBlock","viewChildClasses","getClassNames","safeInsert","dataViewToModelCodeBlockInsertion","textLines","lastLine","offsetSize","softBreak","preElement","preChildren","childCodeElement","insertionRange","dataTransfer","getData","fragment","nodes","line","lineIndex","rawSnippetTextToViewDocumentFragment","hasSameParentAs","docFragment","containsEntireContent","newDocumentFragment","indent","outdent","registerChildCommand","isSoftEnter","modelDoc","lastSelectionPosition","isSoftBreakNode","newBlock","leaveBlockStartOnEnter","isSoft","emptyLineRangeToRemoveOnEnter","isEmptyishTextNode","leaveBlockEndOnEnter","insertText","breakLineOnEnter","CodeBlockUI","normalizedLanguageDefs","accessibleLabel","_codeBlockLanguage","addListToDropdown","_getLanguageListItemDefinitions","itemDefinitions","languageDef","Model","CodeBlock","Essentials","SelectAll","Typing","FindAndReplaceFormView","matchCount","isDirty","_findInputView","_createInputField","_replaceInputView","_findButtonView","_findPrevButtonView","_findNextButtonView","_optionsDropdown","_createOptionsDropdown","_replaceButtonView","_replaceAllButtonView","_findFieldsetView","_createFindFieldset","_replaceFieldsetView","_createReplaceFieldset","_focusTracker","_keystrokes","FormHeaderView","_initFocusCycling","_initKeystrokeHandling","reset","errorText","_textToFind","_textToReplace","fieldsetView","_onFindButtonExecute","findPrevious","findNext","_injectFindResultsCounter","searchText","matchCase","_matchCase","wholeWords","_wholeWordsOnly","resultsCounterView","highlightOffset","if","updateFindInputPadding","inputElement","isVisible","counterWidth","paddingPropertyName","uiLanguageDirection","template","resultsFound","replaceAll","cog","matchCaseModel","_isMatchCaseSwitch","wholeWordsOnlyModel","stopPropagationAndPreventDefault","_areCommandsEnabled","FindAndReplaceUI","formView","findCommand","_setupFormView","_setupDropdownButton","cancelEvent","editingState","state","sortMapping","before","same","after","different","highlightedResult","results","sort","b","getStart","compareWith","indexOf","findNextCommand","findPreviousCommand","replaceCommand","replaceAllCommand","FindCommand","affectsData","_state","callbackOrText","findAndReplaceUtils","findCallback","findByTextCallback","getRootNames","currentResults","updateFindResultFromRange","clear","addMany","matchWholeWords","ReplaceCommandBase","_isEnabledBasedOnSelection","_replace","replacementText","canEditAt","textAttributes","ReplaceCommand","ReplaceAllCommand","newText","textToReplace","searchResult","FindNextCommand","currentIndex","getIndex","nextIndex","FindPreviousCommand","previousIndex","FindAndReplaceState","ObservableMixin","eventInfo","removed","highlightedResultRemoved","removedResult","removeMarker","nextHighlightedIndex","oldMatchId","oldMarker","iteratee","symbolProto","symbolToString","baseToString","reRegExpChar","reHasRegExpChar","FindAndReplaceUtils","startResults","foundItems","rangeToText","foundItem","resultId","uid","addMarker","usingOperation","resultsList","markerToInsert","isBefore","findInsertIndex","searchTerm","flags","regExpQuery","string","nonLetterGroup","matchAll","regexpMatchToFindResult","matchResult","lastGroupIndex","Date","now","reWhitespace","reTrimStart","charAt","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","other","valueOf","isBinary","nativeMax","Math","max","nativeMin","min","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","invokeFunc","time","args","thisArg","apply","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","timeWaiting","remainingWait","debounced","isInvoking","arguments","leadingEdge","flush","FindAndReplaceEditing","_activeResults","_defineConverters","_defineCommands","oldValue","newMatchId","debouncedScrollListener","viewRange","toViewRange","scrollViewportToShowTarget","viewRangeToDom","searchCallback","changedNodes","Set","removedMarkers","isInline","getMarkersAtPosition","markerAtChange","getChangedMarkers","newRange","getMarkersIntersectingRange","markerName","nodeToCheck","onDocumentChange","markerToHighlight","FindAndReplace","findAndReplaceEditing","FontCommand","updateAttribute","DocumentColorCollection","color","hasColor","ColorTableView","colors","columns","removeButtonLabel","documentColorsLabel","documentColorsCount","colorPickerLabel","colorPickerConfig","_colorPickerConfig","colorGridsPageView","ColorGridsPageView","colorPickerPageView","ColorPickerPageView","evtName","appendGrids","appendUI","_appendColorPicker","showColorPicker","colorPickerView","showColorGrids","focusLast","updateDocumentColors","updateSelectedColors","colorPickerButtonView","addColorPickerButton","colorDefinitions","documentColors","_removeButtonLabel","_colorPickerLabel","_documentColorsLabel","removeColorButtonView","_createRemoveColorButton","maxCount","_addColorToDocumentColors","documentColorsGrid","staticColorsGrid","selectedColor","_createStaticColorsGrid","Template","LabelView","_createDocumentColorsGrid","_createColorPickerButton","_addColorTablesElementsToFocusTracker","colorPaletteIcon","eraser","colorGrid","ColorGridView","bindTo","using","colorObj","colorTile","ColorTileView","hasBorder","val","predefinedColor","assign","_pickerConfig","actionBarView","_createActionBarView","ColorPickerView","_addColorPickersElementsToFocusTracker","_stopPropagationOnArrowsKeys","_executeOnEnterPress","_executeUponColorChange","focusedElement","slider","slidersView","hexInputRow","actionBarRow","FONT_SIZE","FONT_FAMILY","FONT_COLOR","FONT_BACKGROUND_COLOR","buildDefinition","modelAttributeKey","renderUpcastAttribute","styleAttr","renderDowncastElement","modelAttributeValue","createAttributeElement","FontFamilyCommand","normalizeOptions","getOptionDefinition","fontDefinition","fontNames","firstFontName","cssFontNames","normalizeFontNameForCSS","generateFontPreset","fontName","FontFamilyEditing","supportAllValues","_prepareAnyValueConverters","_prepareCompatibilityConverter","attributeValue","elementToAttribute","FontFamilyUI","_getLocalizedOptions","commandParam","_prepareListOptions","FontFamily","FontSizeCommand","attachPriority","preset","namedPresets","findPreset","numberValue","parseFloat","isNaN","isNumericalDefinition","generatePixelPreset","tiny","small","big","huge","styleFontSize","FontSizeEditing","presets","isLength","isPercentage","isRelative","size","maxSize","clampedSize","FontSizeUI","localizedTitles","Default","Tiny","Small","Big","Huge","FontSize","normalizeSizeOptions","FontColorCommand","FontColorEditing","ColorUI","componentName","dropdownLabel","colorTableView","componentConfig","colorsConfig","normalizeColorOptions","localizedColors","getLocalizedColorOptions","hasColorPicker","colorPicker","dropdownContentRendered","addColorTableToDropdown","_undoStepBatch","createBatch","operations","focusChildOnDropdownOpen","FontColorUI","FontColor","FontBackgroundColorCommand","FontBackgroundColorEditing","addStyleProcessorRules","addBackgroundRules","FontBackgroundColorUI","FontBackgroundColor","Font","ListCache","__data__","pop","maskSrcKey","IE_PROTO","reIsHostCtor","reIsNative","Hash","MapCache","Stack","pairs","LARGE_ARRAY_SIZE","objValue","props","customizer","isNew","propertyIsEnumerable","isArguments","freeExports","freeModule","Buffer","isBuffer","reIsUint","typedArrayTags","freeProcess","process","require","types","binding","nodeIsTypedArray","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","isProto","allocUnsafe","buffer","isDeep","copy","nativeGetSymbols","getOwnPropertySymbols","predicate","resIndex","symbol","keysFunc","symbolsFunc","promiseTag","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","ctorString","Uint8Array","arrayBuffer","byteLength","reFlags","symbolValueOf","typedArray","byteOffset","regexp","dataView","lastIndex","objectCreate","nodeIsMap","isMap","nodeIsSet","isSet","cloneableTags","baseClone","bitmask","stack","isFlat","isFull","input","isFunc","stacked","subValue","reLatin","reComboMark","reAsciiWord","reHasUnicodeWord","rsAstralRange","rsDingbatRange","rsLowerRange","rsUpperRange","rsBreakRange","rsMathOpRange","rsBreak","rsDigits","rsDingbat","rsLower","rsMisc","rsRegional","rsSurrPair","rsUpper","rsMiscLower","rsMiscUpper","rsOptContrLower","rsOptContrUpper","reOptMod","rsModifier","rsOptVar","rsSeq","rsEmoji","reUnicodeWord","guard","reApos","reHasUnicode","rsAstral","rsSymbol","reUnicode","strSymbols","chr","word","accumulator","initAccum","updateViewAttributes","oldViewAttributes","newViewAttributes","viewAttributes","removeStyle","removeViewAttributes","setViewAttributes","setStyle","mergeViewElementAttributes","modifyGhsAttribute","ghsAttributeName","subject","kind","getHtmlAttributeName","viewElementName","viewToModelObjectConverter","htmlContent","toObjectWidgetConverter","viewName","widgetLabel","createObjectView","viewContainer","createRawElement","setContentOf","attributeToViewInlineConverter","viewToModelBlockAttributeConverter","dataFilter","processViewAttributes","modelToViewBlockAttributeConverter","lastCalled","assigner","modelSchema","paragraphLikeModel","appliesToBlock","coupledAttribute","attributeProperties","allowAttributesOf","iterable","srcIndex","mergeFunc","srcValue","isCommon","isTyped","baseMerge","nativeNow","stamp","remaining","otherArgs","DataSchema","_definitions","registerBlockElement","registerInlineElement","extendBlockElement","_extendDefinition","extendInlineElement","getDefinitionsForView","includeReferences","_getMatchingViewDefinitions","reference","_getReferences","getDefinitionsForModel","testViewName","inheritProperties","property","referenceName","currentDefinitions","currentDefinition","idx","fromIndex","fromRight","comparator","seen","computed","DataFilter","_dataSchema","_allowedAttributes","Matcher","_disallowedAttributes","_allowedElements","_disallowedElements","_dataInitialized","_coupledAttributes","_registerElementsAfterInit","_registerElementHandlers","_registerCoupledAttributesPostFixer","_registerAssociatedHtmlAttributesPostFixer","loadAllowedConfig","rules","splitRules","allowElement","loadDisallowedConfig","disallowElement","disallowAttributes","_addAllowedElement","consumeAttributes","relatedDefinition","_fireRegisterEvent","priorities","highest","_registerObjectElement","_registerBlockElement","_registerInlineElement","coupledAttributes","_getCoupledAttributesMap","attributeKeys","shallow","attr","attributeNames","registerRawContentMatcher","converterPriority","low","attributesToAdd","viewToAttributeInlineConverter","matcher","matches","consumedMatches","removeConsumedAttributes","consumeAttributeMatches","mergeMatchResults","isValidAttributeName","delete","iterableToObject","getValue","attributesObject","splitPattern","splittedRules","CodeBlockElementSupport","preserveElementAttributes","viewToModelCodeBlockAttributeConverter","DualContentModelElementSupport","blockDefinition","paragraphLikeModelDefinition","_hasBlockContent","_addAttributeConversion","blockElements","HeadingElementSupport","registerHeadingElements","dataSchema","headerModels","getDescendantElement","containerElement","ImageElementSupport","viewFigureElement","viewToModelFigureAttributeConverter","viewImageElement","viewContainerElement","getContainedElement","preserveLinkAttributes","viewToModelImageAttributeConverter","addBlockAttributeConversion","MediaEmbedElementSupport","mediaElementName","viewToModelFigureAttributesConverter","upcastMedia","viewToModelMediaAttributesConverter","addAttributeConversionDispatcherHandler","modelToViewMediaAttributeConverter","ScriptElementSupport","isContent","TableElementSupport","tableUtils","viewTableElement","childNode","viewToModelTableAttributeConverter","wasFixed","table","hasTHeadAttributes","hasTBodyAttributes","getRows","createHeadingRowsPostFixer","StyleElementSupport","SetCache","equalFunc","isPartial","arrLength","othLength","arrStacked","othStacked","arrValue","othValue","compared","othIndex","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","message","convert","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","objLength","objStacked","skipCtor","objCtor","othCtor","baseIsEqual","DocumentListElementSupport","documentListEditing","viewElements","registerDowncastStrategy","scope","setAttributeOnDowncast","viewToModelListAttributeConverter","listNodes","previousNodesByIndent","previous","nodeIndent","previousNodeIndent","previousNodeInList","getAttributeFromListType","listType","indentList","changedBlocks","CustomElementSupport","unsafeElements","preLikeElements","htmlProcessor","preElements","error","isValidElementName","htmlElementName","htmlAttributes","documentFragment","processor","toData","customElement","GeneralHtmlSupport","getGhsAttributeNameForElement","inlineDefinition","addModelHtmlClass","getItemsToUpdateGhsAttribute","removeModelHtmlClass","setModelHtmlAttributes","attributesMap","removeModelHtmlAttributes","setModelHtmlStyles","removeModelHtmlStyles","properties","getValidRangesForSelectable","HtmlComment","loadedCommentsContent","skipComments","elementToMarker","commentContent","markerToElement","comment","createUIElement","oldRange","oldRoot","newRoot","commentMarker","getMarkersGroup","removeHtmlComment","limitElement","getLimitElement","firstPosition","lastPosition","affectedCommentIDs","isTouching","getHtmlCommentsInRange","skipBoundaries","commentMarkerID","createHtmlComment","commentID","getHtmlCommentData","includeBoundaries","isAfter","isCommentMarkerInRange","HeadingCommand","heading","checkCanBecomeHeading","defaultModelElement","HeadingEditing","Paragraph","_addDefaultH1Conversion","enterCommand","HeadingUI","defaultTitle","headingCommand","paragraphCommand","commandValue","ariaLabelledBy","para","whichModel","Heading","HorizontalLineCommand","getInsertHorizontalLineParent","isHorizontalLineAllowedInParent","horizontalElement","HorizontalLineEditing","viewWrapper","toHorizontalLineWidget","HorizontalLineUI","HorizontalLine","HtmlEmbedCommand","selectedRawHtmlElement","getSelectedRawHtmlModelWidget","getInsertHtmlEmbedParent","isHtmlEmbedAllowedInParent","htmlEmbedElement","HtmlEmbedEditing","_widgetButtonViewReferences","showPreviews","sanitizeHtml","rawHtml","html","hasChanged","widgetButtonViewReferences","htmlEmbedConfig","renderContent","textContent","domDocument","ownerDocument","domTextarea","isEditable","textareaProps","isDisabled","textareaPlaceholder","createDomTextarea","previewContainerProps","sanitizedOutput","getRawHtmlValue","domPreviewPlaceholder","domPreviewContent","dir","domDocumentFragment","createContextualFragment","createPreviewContainer","buttonsWrapperProps","onEditClick","onSaveClick","onCancelClick","prepend","domButtonsWrapper","createUIButton","editButtonView","createDomButtonsWrapper","disabled","isConnected","innerHTML","domContentWrapper","viewContentWrapper","addEventListener","rawHtmlApi","makeEditable","save","hasSelectionHandle","onClick","pencil","tooltipPosition","HtmlEmbedUI","HtmlEmbed","IndentEditing","MultiCommand","IndentUI","localizedIndentIcon","localizedOutdentIcon","_defineButton","Indent","AutomaticDecorators","getDispatcher","viewSelection","getDispatcherForLinkedImage","viewFigure","linkInImage","toMap","ATTRIBUTE_WHITESPACES","SAFE_URL","EMAIL_REG_EXP","PROTOCOL_REG_EXP","LINK_KEYSTROKE","createLinkElement","href","linkElement","ensureSafeUrl","url","urlString","isSafeUrl","isLinkableElement","addLinkProtocolIfApplicable","link","defaultProtocol","protocol","isProtocolNeeded","linkHasProtocol","openLink","open","LinkCommand","manualDecorators","automaticDecorators","restoreManualDecoratorStates","manualDecorator","_getDecoratorStateFromModel","manualDecoratorIds","truthyManualDecorators","falsyManualDecorators","linkText","extractTextFromSelection","linkRange","findAttributeRange","_updateLinkContent","allowedRanges","rangesToUpdate","_isRangeToUpdate","decoratorName","allowedRange","linkHref","rangeItems","UnlinkCommand","linkCommand","rangesToUnlink","ManualDecorator","defaultValue","_createPattern","DECORATOR_AUTOMATIC","EXTERNAL_LINKS_REGEXP","Input","addTargetToExternalLinks","linkDecorators","decorators","localizedDecoratorsLabels","decorator","getLocalizedDecorators","retArray","normalizeDecorators","_enableAutomaticDecorators","mode","_enableManualDecorators","_enableLinkOpen","_enableInsertContentSelectionAttributesFixer","_enableClickingAfterLink","_enableTypingOverLink","_handleDeleteContentAfterLink","_enableClipboardIntegration","automaticDecoratorDefinitions","rel","manualDecoratorDefinitions","decoratorDefinition","manualDecoratorValue","env","isMac","metaKey","ctrlKey","clickedElement","domTarget","closest","keyCode","keyCodes","enter","altKey","removeLinkAttributesFromSelection","getLinkAttributesAllowedOnText","MouseObserver","clicked","deletedContent","isTyping","nodeAtFirstPosition","shouldCopyAttributes","shouldPreserveAttributes","hasBackspacePressed","containsPosition","newLink","linkAttributes","getDefinition","LinkFormView","urlInputView","_createUrlInput","_manualDecoratorSwitches","_createManualDecoratorSwitches","_createFormChildren","classList","getDecoratorSwitchesState","switchButton","switches","SwitchButtonView","decoratorValue","additionalButtonsView","LinkActionsView","previewButtonView","_createPreviewButton","unlinkButtonView","eventListeners","VISUAL_SELECTION_MARKER_NAME","actionsView","ClickObserver","_createToolbarLinkButton","_enableBalloonActivators","_createViews","_createActionsView","_createFormView","_enableUserBalloonInteractions","unlinkCommand","_addFormView","_hideUI","parsedUrl","_closeFormView","_showUI","_getSelectedLinkElement","keyEvtData","_areActionsVisible","_isUIVisible","_isUIInPanel","_addActionsView","_areActionsInPanel","_getBalloonPositionData","_isFormInPanel","_removeFormView","_hideFakeVisualSelection","forceVisible","showStack","_showFakeVisualSelection","_startUpdatingUI","prevSelectedLink","prevSelectionParent","getSelectionParent","selectedLink","selectionParent","markerViewElements","markerNameToElements","targetLink","findLinkElementAncestor","getTrimmed","startLink","endLink","getLastMatchingPosition","boundaries","isLinkElement","URL_REG_EXP","_enableTypingHandling","_enableEnterHandling","_enableShiftEnterHandling","watcher","TextWatcher","isSingleSpaceAtTheEnd","getUrlAtTextEnd","linkEnd","linkStart","_applyAutoLink","rangeToCheck","_checkAndApplyAutoLinkOnRange","shiftEnterCommand","getLastTextLine","fullUrl","isLinkAllowedOnRange","linkIsAlreadySet","_persistAutoLink","deletePlugin","LinkImageEditing","isImageInlinePluginLoaded","viewLink","imageInLink","blockImageView","upcastLink","viewImgOrPicture","downcastImageLink","downcastImageLinkManualDecorator","upcastImageLinkManualDecorator","LinkImageUI","_isSelectedLinkedImage","_createToolbarLinkImageButton","selectedModelElement","LinkImage","ListWalker","startElement","_startElement","_referenceIndent","_isForward","_includeSelf","includeSelf","_sameAttributes","sameAttributes","_sameIndent","sameIndent","_lowerIndent","lowerIndent","_higherIndent","higherIndent","nestedItems","iterateSiblingListBlocks","_getStartNode","isForward","isListItemBlock","ListBlocksIterable","listHead","_listHead","ListItemUid","getAllListItemBlocks","listItem","getListItemBlocks","getListItems","backwardBlocks","forwardBlocks","isFirstBlockOfListItem","listBlock","isLastBlockOfListItem","expandListBlocksToCompleteItems","withNested","allBlocks","itemBlock","sortBlocks","expandListBlocksToCompleteList","splitListItemBefore","mergeListItemBefore","parentBlock","setAttributes","indentBlocks","expand","indentBy","blockIndent","removeListAttributes","getAttributeKeys","isSingleListItem","firstItemId","getSelectedBlockObject","mergeListItemIfNotLast","DocumentListIndentCommand","indentDirection","_direction","getSelectedListBlocks","visited","referenceIndent","parentBlocks","mergedBlocks","mergedBlock","outdentBlocksWithMerge","previousItemBlock","_fireAfterExecute","siblingItem","firstNonListBlockIndex","DocumentListCommand","selectedBlockObject","turnOff","lastBlock","itemBlocks","currentIndent","POSITIVE_INFINITY","newIndent","outdentFollowingItems","listIndent","listItemId","DocumentListMergeCommand","shouldMergeOnBlocksContentLevel","firstElement","lastElement","_getMergeSubjectElements","firstIndent","lastIndent","lastElementId","nestedLastElementBlocks","sel","doNotResetEntireContent","lastElementAfterDelete","siblingNode","isFirstBlock","DocumentListSplitCommand","_getStartBlock","DocumentListUtils","isListView","isListItemView","getIndent","createListElement","getViewElementIdForListType","getViewElementNameForListType","createListItemElement","findAndAddListHeadToMap","itemToListHead","previousNode","listUpcastCleanList","bogusParagraphCreator","dataPipeline","shouldUseBogusParagraph","LIST_BASE_ATTRIBUTES","DocumentListEditing","_downcastStrategies","conflictPlugin","copyOnReplace","_setupDeleteIntegration","_setupEnterIntegration","_setupTabIntegration","_setupModelPostFixing","strategy","_getListAttributeNames","mergeBackwardCommand","mergeForwardCommand","isLastBlock","splitCommand","keepEmptyElement","strategies","consumer","events","createAttributesConsumer","findMappedViewElement","attributeElement","parentElement","unwrapListItemBlock","listItemIndent","currentListItem","listItemViewElement","listViewElement","wrapListItemBlock","listItemDowncastConverter","itemsToRefresh","changedItems","doesItemParagraphRequiresRefresh","collectListItemsToRefresh","itemIndent","doesItemWrappingRequiresRefresh","useBogus","isListItemElement","isListElement","modelAttributes","reconvertItemsOnDataChange","applied","innerItem","previousPosition","seenIds","modelChangePostFixer","maxIndent","prevIndent","fixBy","fixListIndents","fixListItemIds","pos","refItem","indentChange","createModelIndentPasteFixer","generateLiInUl","modelItem","getFillerOffset","getListItemFillerOffset","createViewListItemElement","viewList","injectViewList","injectedItem","injectedList","insertPosition","getSiblingListItem","smallerIndent","prevItem","breakContainer","mappedViewAncestor","findMappedViewAncestor","nestedList","findNestedList","positionAfterUiElements","prevView","breakPosition","targetPosition","mergeViewLists","_position","nextViewList","lastSubChild","modelChild","toModelElement","firstList","secondList","mergeContainers","viewPosition","createUIComponent","getSiblingNodes","walkerOptions","limitIndent","TreeWalker","unshift","getSelectedListItems","listItems","flat","BULLETED_LIST_STYLE_TYPES","NUMBERED_LIST_STYLE_TYPES","getListTypeFromListStyleType","listStyleType","hasOnlyLists","ListUI","DocumentList","DocumentListStartCommand","startIndex","LIST_STYLE_TO_LIST_TYPE","LIST_STYLE_TO_TYPE_ATTRIBUTE","TYPE_ATTRIBUTE_TO_LIST_STYLE","LIST_STYLE_TYPES","listStyle","typeAttribute","getAllSupportedStyleTypes","x","getListStyleTypeFromTypeAttribute","getTypeAttributeFromListStyleType","DocumentListStyleCommand","defaultType","supportedTypes","_supportedTypes","_tryToConvertItemsToList","isStyleTypeSupported","numberedList","bulletedList","DocumentListReversedCommand","reversed","listPropertiesUpcastConverter","viewConsumables","appliesToListItem","getAttributeOnUpcast","DocumentListPropertiesUtils","DEFAULT_LIST_TYPE","DocumentListPropertiesEditing","enabledProperties","useAttribute","addCommand","styleType","hasValidAttribute","listParent","listReversed","listStart","startAttributeValue","createAttributeStrategies","CollapsibleView","childViews","_createButtonView","hidden","_collapsibleAriaLabelUid","ListPropertiesView","styleButtonViews","styleGridAriaLabel","stylesView","additionalPropertiesCollapsibleView","startIndexFieldView","reversedSwitchButtonView","elementCssClasses","focusCycler","_createStylesView","_addNumberedListPropertyViews","last","addKeyboardHandlingForGrid","gridItems","numberOfColumns","getComputedStyle","getPropertyValue","styleButtons","numberedPropertyViews","_createStartIndexField","_createReversedSwitchButton","createLabeledInputNumber","step","inputMode","valueAsNumber","checkValidity","reversedButtonView","ListPropertiesUI","getDropdownViewCreator","parentCommandName","buttonLabel","buttonIcon","styleDefinitions","parentCommand","mainButtonView","listPropertiesView","listStyleCommand","styleButtonCreator","getStyleButtonCreator","styleDefinition","listStartCommand","listReversedCommand","isReversed","createListPropertiesView","DocumentListProperties","IndentCommand","_indentBy","itemsToChange","lastItem","prev","ListCommand","checkCanBecomeListItem","lowestIndent","_fixType","isBackward","startingItem","ListUtils","modelViewInsertion","modelViewChangeType","listName","modelViewMergeAfterChangeType","modelViewSplitOnInsert","lists","removeStart","removeEnd","previousList","mergePos","modelViewMergeAfter","viewItemPrev","viewItemNext","viewModelConverter","nextPosition","listItemModel","viewChildren","convertedChild","findNextListItem","viewToModelListItemChildrenConverter","cleanList","isList","_remove","cleanListItem","foundList","modelToViewPosition","isPhantom","modelPosition","topmostViewList","modelIndentPasteFixer","_setAttribute","treeWalker","hoistNestedLists","nextIndent","modelRemoveStartPosition","viewRemoveStartPosition","viewRemovedItem","prevModelItem","prevViewList","ListEditing","_addListToFix","_fixListIndents","_fixListTypes","typesStack","registerViewToModelLength","getViewListItemLength","viewPos","viewParent","modelNode","modelLength","getModelLength","viewListPrev","removeRange","modelViewChangeIndent","unbindViewElement","modelViewRemove","List","ListStyleCommand","ListReversedCommand","ListStartCommand","ListPropertiesEditing","s","attributeStrategies","rootIndent","itemsToUpdate","valueToSet","fixListAfterIndentListCommand","fixListAfterOutdentListCommand","restoreDefaultListStyle","insertedListItems","getChangedListItems","existingListItem","shouldInheritListTypeFromPreviousItem","shouldInheritListType","fixListAttributesOnListItemElements","currentElement","previousElement","listItem1","listItem2","downcastListItemAttributes","_mergeListAttributesWhileMergingLists","todoListItems","removeListItemAttributesFromTodoList","firstMostOuterItem","mostOuterItemList","secondListMostOuterItem","baseItem","itemToChange","attributeStrategy","baseListAttribute","previousItem","previousItemIndent","previousItemListAttribute","getItemFromChange","ListProperties","CheckTodoListCommand","_selectedElements","_getSelectedItems","elements","dataViewModelCheckmarkInsertion","mapModelToViewPosition","descSpan","findDescription","findPositionIn","createCheckmarkElement","isChecked","onChange","contenteditable","checkbox","toDomElement","ITEM_TOGGLE_KEYSTROKE","parseKeystroke","TodoListEditing","checkTodoListCommand","onCheckedChange","span","dataModelViewInsertion","onCheckboxChecked","checkmarkElement","_handleCheckmarkChange","labelElement","findLabel","itemRange","descriptionStart","descriptionEnd","descriptionRange","descriptionSpan","oldCheckmarkElement","newCheckmarkElement","modelViewChangeChecked","domEventData","getLocalizedArrowKeyCodeDirection","getNearestSelectionRange","jumpOverCheckmarkOnSideArrowKeyPress","getCode","listItemsToFix","operation","oldName","previousSelectionRanges","TodoListUI","TodoList","modelToViewUrlAttributeConverter","registry","figure","mediaContentElement","mediaViewElement","getMediaViewElement","getSelectedMediaViewWidget","isMediaWidget","createMediaFigureElement","getSelectedMediaModelWidget","insertMedia","mediaElement","MediaEmbedCommand","selectedMedia","isMediaSelected","isAllowedInParent","MediaRegistry","providers","extraProviders","removedProviders","removeProviders","providerDefinitions","provider","hasMedia","_getMedia","getViewElement","Media","previewRenderer","subPattern","_getUrlMatches","rawUrl","_getValidUrl","_locale","_match","_previewRenderer","renderForEditingView","renderMediaPreview","mediaHtml","_getPreviewHtml","_getPlaceholderHtml","IconView","viewBox","outerHTML","MediaEmbedEditing","toMediaWidget","viewMedia","URL_REGEXP","AutoMediaEmbed","_embedMediaBetweenPositions","mediaRegistry","MediaFormView","validators","_validators","isValid","resetFormStatus","validator","infoText","_urlInputViewInfoDefault","inputField","_urlInputViewInfoTip","mediaURLInputValue","MediaEmbedUI","form","getFormValidators","MediaEmbed","MediaEmbedToolbar","PageBreakCommand","getInsertPageBreakParent","isPageBreakAllowedInParent","pageBreakElement","PageBreakEditing","viewLabelElement","innerText","toPageBreakWidget","hasPageBreakBefore","hasPageBreakAfter","viewSpan","PageBreakUI","PageBreak","mapListStyleDefinition","insertNewEmptyList","getChildIndex","insertChild","getListItemData","idMatch","orderMatch","indentMatch","order","msWordMatch1","msWordMatch2","MSWordNormalizer","isActive","htmlString","body","stylesString","_parsedData","itemLikeElements","itemLikeElementsMatcher","itemData","findAllItemLikeElements","currentList","currentIndentation","itemLikeElement","isDifferentList","currentItem","isNewListNeeded","indentationDifference","listLikeItem","listStyleTypeRegex","listStartIndexRegex","listStyleMatch","listStyleTypeMatch","bulletedStyle","listMarkerElement","textNodeOrElement","findListMarkerNode","listMarker","_data","findBulletedListStyle","listStartIndexMatch","detectListStyle","lastListItem","lastListItemChild","differentIndentation","listElement","ancestors","parentFirst","parentList","levelChange","findParentListAtLevel","bulletMatcher","removeBulletElement","transformElementIntoListItem","transformListItemLikeElementsIntoLists","rtfData","upcastWriter","shapesIds","shapeElementsMatcher","el","prevSiblingName","findAllShapesIds","imageElementsMatcher","imgs","shapes","shape","removeAllImgElementsRepresentingShapes","shapeIds","containsMatchingImg","attrs","findSrc","alt","insertMissingImgs","removeAllShapeElements","images","findAllImageElementsWithLocalSource","imageElements","imagesHexSources","newSrc","hexString","hex","char","fromCharCode","replaceImagesFileSourceWithInlineRepresentation","regexPictureHeader","regexPicture","extractImageDataFromRtf","replaceImagesSourceWithBase64","findSibling","inlineObjectElements","isBlockViewElement","googleDocsMatch","GoogleDocsNormalizer","childIndex","removeBoldWrapper","unwrapElement","unwrapParagraphInListItem","ViewDocument","stylesProcessor","DomConverter","renderingMode","elementsToReplace","nextSiblingIsBlock","transformBlockBrsToParagraphs","googleSheetsMatch","GoogleSheetsNormalizer","removeGoogleSheetsTag","removeXmlns","removeInvalidTableWidth","removeStyleBlock","normalizeSafariSpaceSpans","fullMatch","spaces","PasteFromOffice","normalizers","_isTransformedWithPasteFromOffice","activeNormalizer","normalizer","domParser","DOMParser","normalizedHtml","normalizeSpacing","bodyCloseTag","bodyCloseIndex","htmlCloseIndex","substring","cleanContentAfterBody","htmlDocument","parseFromString","querySelectorAll","htmlElement","innerTextLength","normalizeSpacerunSpans","bodyString","bodyView","domToView","documentToView","stylesObject","styleTags","sheet","cssRules","extractStyles","parseHtml","indentLine","indentCount","indentChar","repeat","COMMAND_FORCE_DISABLE_ID","SourceEditing","PendingActions","_replacedRoots","_dataFromRoots","isEditorReadOnly","hasAnyPendingActions","isSourceEditingMode","_isAllowedToHandleSourceEditingMode","_showSourceEditing","_disableCommands","_hideSourceEditing","_enableCommands","_handleReadOnlyMode","isReadOnly","updateEditorData","console","warn","domSourceEditingElementWrapper","oldData","newData","dataset","batchType","isUndoable","domRootElement","domRoots","isHtml","elementsToFormat","isVoid","elementNamesToFormat","lines","isNonVoidOpeningTag","isClosingTag","formatHtml","domSourceEditingElementTextarea","rows","setSelectionRange","viewRoot","_focusSourceEditing","textarea","forceDisabled","clearForceDisabled","readOnly","hasExternalElement","StyleGridButtonView","previewView","_createPreview","previewTemplate","StyleGridView","gridTileView","activeStyles","enabledStyles","StyleGroupView","gridView","StylePanelView","blockStylesGroupView","inlineStylesGroupView","NON_PREVIEWABLE_ELEMENT_NAMES","StyleUtils","decorate","_htmlSupport","normalizeConfig","normalizedDefinitions","ghsAttributes","ghsDefinition","ghsBlockDefinition","getStylePreview","isStyleEnabledForBlock","isStyleActiveForBlock","ghsAttributeValue","hasAllClasses","getAffectedBlocks","isStyleEnabledForInlineSelection","isStyleActiveForInlineSelection","getAffectedInlineSelectable","configureGHSDataFilter","ghsDataFilter","normalizedStyleDefinitionToMatcherPattern","StyleUI","styleUtils","normalizedStyleDefinitions","styleCommand","styleName","StyleCommand","_styleDefinitions","_styleUtils","ancestorBlocks","htmlSupport","allDefinitions","activeDefinitions","shouldAddStyle","selectables","isBlockStyleDefinition","_findAffectedBlocks","getBlocksFromSelection","getDefinitionExclusiveClasses","selectedBlocks","selectedBlock","affectedBlocks","affectedBlock","DocumentListStyleSupport","_documentListUtils","_isStyleEnabledForBlock","_isStyleActiveForBlock","_getAffectedBlocks","templateDefinition","_getStylePreview","TableStyleSupport","_tableUtils","_isApplicable","location","getCellLocation","headingRows","headingColumns","isHeadingCell","row","column","LinkStyleSupport","_isStyleEnabled","_isStyleActive","_getAffectedSelectable","expandedRange","expandAttributePosition","joinedRange","normalizeRanges","lookBack","referenceNode","findAttributeRangeBound","StyleEditing","Style","updateNumericAttribute","createEmptyTableCell","tableCell","insertElement","isHeadingColumnCell","ensureParagraphInTableCell","paragraph","scanRowForHeadingColumns","tr","th","_table","_startRow","startRow","_endRow","endRow","_startColumn","startColumn","_endColumn","endColumn","_includeAllSlots","includeAllSlots","_skipRows","_row","_rowIndex","_column","_cellIndex","_spannedCells","_nextCellAtColumn","_isOverEndRow","_isOverEndColumn","_advanceToNextRow","outValue","spanData","_getSpanned","_shouldSkipSlot","_formatOutValue","cell","colspan","rowspan","_recordSpans","skipRow","anchorRow","anchorColumn","TableSlot","rowIsMarkedAsSkipped","rowIsBeforeStartRow","columnIsBeforeStartColumn","columnIsAfterEndColumn","rowMap","rowToUpdate","columnToUpdate","_markSpannedCell","tableWalker","cellAnchorRow","cellAnchorColumn","isAnchor","cellWidth","cellHeight","rowIndex","getPositionBefore","downcastTable","tableElement","figureElement","positionOffset","additionalSlots","asWidget","toTableWidget","downcastCell","tableRow","tableSlot","cellElementName","convertParagraphInTableCell","isSingleParagraphWithoutAttributes","InsertTableCommand","validParent","defaultRows","defaultColumns","createTable","getNodeByPath","InsertRowCommand","isAnyCellSelected","getSelectionAffectedTableCells","insertAbove","affectedTableCells","rowIndexes","getRowIndexes","insertRows","at","copyStructureFromAbove","InsertColumnCommand","columnIndexes","getColumnIndexes","insertColumns","SplitCellCommand","selectedCells","splitCellHorizontally","splitCellVertically","cropTableToDimensions","sourceTable","cropDimensions","croppedTable","cropHeight","tableMap","sourceRow","sourceColumn","rowInCroppedTable","tableCellCopy","cloneElement","trimTableCellIfNeeded","addHeadingsToCroppedTable","getVerticallyOverlappingCells","overlapRow","cells","slotInfo","splitHorizontally","splitRow","newRowspan","newCellAttributes","newCellRowSpan","columnIndex","newCell","getHorizontallyOverlappingCells","overlapColumn","cellsToSplit","splitVertically","splitColumn","newColspan","newCellColSpan","cellRow","cellColumn","limitRow","limitColumn","removeEmptyColumns","getColumns","columnsMap","fill","emptyColumns","cellsCount","emptyColumn","removeColumns","removeEmptyRows","emptyRows","tableRowCount","emptyRow","removeRows","removeEmptyRowsColumns","adjustLastRowIndex","dimensions","lastRowMap","firstColumn","lastColumn","lastRow","rowspanAdjustment","adjustLastColumnIndex","lastColumnMap","firstRow","colspanAdjustment","MergeCellCommand","isHorizontal","cellToMerge","_getMergeableCell","getTableCellsContainingSelection","isMergeNext","cellToExpand","cellToRemove","removedTableCellRow","mergeTableCells","spanAttribute","cellSpan","cellToMergeSpan","horizontalCell","hasHeadingColumns","cellOnLeft","cellOnRight","leftCellColumn","rightCellColumn","leftCellSpan","isCellOnLeftInHeadingColumn","isCellOnRightInHeadingColumn","getHorizontalCell","currentCellRowSpan","rowOfCellToMerge","mergeColumn","cellToMergeData","getVerticalCell","firstTableChild","RemoveRowCommand","firstCell","lastRowIndex","selectedRowIndexes","areAllRowsSelected","referenceCells","removedRowIndexes","columnIndexToFocus","rowsToRemove","cellToFocus","removedRowIndex","columnToFocus","getCellToFocus","RemoveColumnCommand","tableColumnCount","lastCell","returnValue","getBoundaryCells","removedColumnIndexes","columnsToRemove","SetHeaderRowCommand","isInTable","_isInHeading","headingRowsToSet","currentHeadingRows","overlappingCells","SetHeaderColumnCommand","headingColumnsToSet","createEmptyRows","insertAt","rowsToInsert","isCopyStructure","copyStructureFrom","walkerEndRow","tableIterator","rowColSpansMap","lastCellRow","isReferenceRow","cellIndex","abs","columnsToInsert","tableColumns","createCells","rowCount","indexesObject","cellsToMove","cellsToTrim","lastRowOfCell","rowSpanToSet","getCellsToMoveAndTrimOnRemoveRow","targetRowIndex","tableRowMap","previousCell","cellToMove","moveCellsToRow","updateHeadingRows","headingsRemoved","adjustHeadingColumns","removedColumnIndex","numberOfCells","newCellsSpan","updatedSpan","breakSpanEvenly","newCellsAttributes","cellsToInsert","splitCellColumn","cellsToUpdate","splitCellRow","rowspanToSet","createTableWalker","getSelectedTableCells","sortRanges","cellWithSelection","tableCells","indexes","_getFirstLastIndexesObject","isSelectionRectangular","selectedTableCells","_areCellInTheSameTableSection","areaOfSelectedCells","areaOfValidSelection","rowsIndexes","getBiggestRectangleArea","compareRangeOrder","allIndexesSorted","indexA","indexB","_areIndexesInSameSection","headingSectionSize","tableCellToInsert","floor","rangeA","rangeB","posA","posB","MergeCellsCommand","firstTableCell","mergeWidth","mergeHeight","maxWidthOffset","maxHeightOffset","getMaxOffset","firstCellRow","firstCellColumn","getMergeDimensions","cellBeingMerged","targetCell","currentMaxOffset","which","dimensionValue","SelectRowCommand","rangesToSelect","SelectColumnCommand","startLocation","endLocation","cellInfo","fixTableCellsRowspan","maxRows","rowLimit","findCellsToTrim","fixTableRowsSizes","childrenLengths","lengths","getChildrenLengths","rowsLengths","tableSize","maxColumns","current","isTableAttributeEntry","fixTable","fixTableRow","fixTableCellContent","textNodes","checkTableCellChange","shouldRefresh","_additionalSlots","isSelectable","viewTable","figureChild","getViewTableFromFigure","modelTable","headRows","bodyRows","firstTheadElement","tableChild","trs","headingCols","scanTable","upcastCellSpan","analyzedTables","tableLayoutPostFixer","injectTableLayoutPostFixer","tableCellContentsPostFixer","injectTableCellParagraphPostFixer","isRowChange","expectedElementName","tableHeadingsRefreshHandler","cellsToCheck","paragraphsToRefresh","tableCellRefreshHandler","registerAdditionalSlot","slotHandler","InsertTableView","_createGridCollection","mousedown","click","domEvt","_highlightGridBoxes","boxView","_createGridButton","boxes","TableUI","isContentLtr","insertTableView","bindIsOn","_prepareDropdown","_prepareMergeSplitButtonDropdown","_fillDropdownWithListOptions","mergeCommandName","mergeCommand","addListOption","TableSelection","_handleDeleteContent","_handleInsertTextEvent","_defineSelectionConverter","_enablePluginDisabling","getSelectionAsFragment","adjustedLastRow","adjustedLastColumn","setCellSelection","anchorCell","cellsToSelect","_getCellsToSelect","backward","getFocusCell","getAnchorCell","highlighted","previouslyHighlighted","clearHighlightedTableCells","lastViewCell","tableCellToSelect","rangeToSelect","setTo","viewRanges","selectionMap","flipVertically","flipHorizontally","TableClipboard","_onCopyCut","_onInsertContent","tableSelection","dataController","toView","method","pastedTable","getTableIfOnlyTableInContent","pastedDimensions","selectedTable","shouldExpandSelection","expectedHeight","expectedWidth","tableWidth","tableHeight","expandTableSize","doVerticalSplit","doHorizontalSplit","splitCellsToRectangularSelection","prepareTableForPasting","selectionHeight","selectionWidth","_replaceSelectedCellsWithPasted","selectionRanges","pastedWidth","pastedHeight","pastedTableLocationMap","createLocationMap","selectedTableMap","pastedRow","pastedColumn","pastedCell","cellToInsert","newTableCell","_replaceTableSlotCell","areHeadingRowsIntersectingSelection","areHeadingColumnsIntersectingSelection","newCells","contentRange","rangeBefore","hasContent","ignoreWhitespaces","rangeAfter","limitColumns","isAffectedBySelection","limitRows","limit","endIndex","TableKeyboard","_onArrowKey","_handleTabOnSelectedTable","_handleTab","bubblingEventInfo","currentRowIndex","currentCellIndex","isFirstCellInRow","isLastCellInRow","isLastRow","nextRow","previousRow","_handleArrowKeys","expandSelection","focusCell","_navigateFromCellInDirection","_isSelectionAtCellEdge","probe","modifySelection","currentCellInfo","cellToSelect","positionToSelect","DomEventObserver","domEventType","onDomEvent","TableMouse","_enableShiftClickSelection","_enableMouseDragSelection","blockSelectionChange","_getModelTableCellFromDomEvent","haveSameTableParent","beganCellSelection","buttons","newTargetCell","viewTargetElement","toModelPosition","cellA","cellB","getSelectedTableWidget","isTableWidget","TableToolbar","tableContentToolbarItems","tableToolbarItems","alignTop","alignMiddle","alignBottom","DEFAULT_BALLOON_POSITIONS","isTable","getCaptionFromTableModelElement","tableModelElement","matchTableCaptionViewElement","getSelectionAffectedTable","ToggleTableCaptionCommand","_hideTableCaption","_showTableCaption","tableCaptionEditing","TableCaptionEditing","captionsToMerge","firstCaption","tableCaptionPostFixer","TableCaptionUI","TableCaption","modelElementToPlainText","childText","WordCount","defineProperties","characters","_getCharacters","_getText","words","_getWords","_config","_outputView","_wordsMatchRegExp","features","isRegExpUnicodePropertySupported","_refreshStats","onUpdate","container","wordCountContainer","displayWords","displayCharacters","txt","CraftImageInsertUI","_ImageInsertUI","_inherits","_super","_classCallCheck","_this","_linkOption","_createToolbarImageButton","elementType","_this2","_showImageSelectModal","_this3","linkOption","Craft","createElementSelectorModal","storageKey","criteria","defaultSiteId","transforms","multiSelect","autoFocusSearchBox","onSelect","assets","_processAssetUrls","onHide","closeOtherModals","_this4","defaultTransform","queue","Queue","urls","_step","_iterator","_createForOfIteratorHelper","_loop","asset","hasTransform","_isTransformUrl","_getTransformUrl","_buildAssetUrl","f","assetId","assetUrl","handle","_this5","sendActionRequest","_ref","alert","ImageInsertUI","CraftLinkUI","_Plugin","siteDropdownView","siteDropdownItemModels","localizedRefHandleRE","LinkUI","_linkUI","isMultiSite","_modifyFormViewTemplate","refHandlesPattern","craftcms","localizedRefHandles","linkOptions","linkIcon","_showElementSelectorModal","_getLinkListItemDefinitions","onCancel","refHandle","siteId","Range","clone","path","sites","site","_urlInputRefMatch","ref","newUrl","_urlInputValue","urlInputIdx","_toggleSiteDropdownView","_selectSiteDropdownItem","itemModel","TransformImageCommand","_Command","_element","srcInfo","_srcInfo","hash","ImageTransformEditing","ImageUtils","transformImageCommand","RESIZE_ICON","ImageTransformUI","_registerImageTransformDropdown","originalSizeOption","DropdownButtonView","dropdownButton","_getOptionLabelValue","_getTransformDropdownListItemDefinitions","ImageTransform","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","configurable","writable","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","makeInvokeMethod","tryCatch","fn","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","_invoke","AsyncIterator","PromiseImpl","invoke","reject","record","_typeof","__await","unwrapped","previousPromise","callInvokeWithMethodAndArg","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","resultName","nextLoc","pushTryEntry","locs","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","iteratorMethod","doneResult","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","iter","skipTempReset","rootRecord","rval","exception","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","asyncGeneratorStep","gen","_next","_throw","_toConsumableArray","_arrayWithoutHoles","_iterableToArray","_nonIterableSpread","_slicedToArray","_x","_r","allPlugins","selectAll","AutoLink","LinkEditing","Table","normalizeToolbarItems","group","$","normalizeToolbarItem","toolbarItems","configOption","pluginButtonMap","registerPackage","pkg","pluginNames","_Object$entries","_Object$entries$_i","_i2","_Object$entries2","_Object$entries2$_i","v2","findPlugin","trackChangesInSourceMode","sourceEditing","$editorElement","$sourceElement","ns","random","$sourceEditingContainer","off","p","_callee","removePlugins","_context","_ref2","_ref3","_x2","_x3"],"sourceRoot":""}